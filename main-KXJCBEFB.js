var E2=Object.defineProperty,b2=Object.defineProperties;var w2=Object.getOwnPropertyDescriptors;var Xd=Object.getOwnPropertySymbols;var oT=Object.prototype.hasOwnProperty,sT=Object.prototype.propertyIsEnumerable;var iT=(n,e,t)=>e in n?E2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,V=(n,e)=>{for(var t in e||={})oT.call(e,t)&&iT(n,t,e[t]);if(Xd)for(var t of Xd(e))sT.call(e,t)&&iT(n,t,e[t]);return n},pe=(n,e)=>b2(n,w2(e));var Ia=(n,e)=>{var t={};for(var r in n)oT.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Xd)for(var r of Xd(n))e.indexOf(r)<0&&sT.call(n,r)&&(t[r]=n[r]);return t};var mn=null,eh=!1,Ty=1,I2=null,Pn=Symbol("SIGNAL");function xe(n){let e=mn;return mn=n,e}function nh(){return mn}var gl={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ml(n){if(eh)throw new Error("");if(mn===null)return;mn.consumerOnSignalRead(n);let e=mn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=mn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:mn.producers,t!==void 0&&t.producer===n)){mn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===mn&&(!r||T2(i,mn)))return;let o=Sa(mn),s={producer:n,consumer:mn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};mn.producersTail=s,e!==void 0?e.nextProducer=s:mn.producers=s,o&&uT(n,s)}function aT(){Ty++}function Cy(n){if(!(Sa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ty)){if(!n.producerMustRecompute(n)&&!ih(n)){Sy(n);return}n.producerRecomputeValue(n),Sy(n)}}function xy(n){if(n.consumers===void 0)return;let e=eh;eh=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||S2(r)}}finally{eh=e}}function Dy(){return mn?.consumerAllowSignalWrites!==!1}function S2(n){n.dirty=!0,xy(n),n.consumerMarkedDirty?.(n)}function Sy(n){n.dirty=!1,n.lastCleanEpoch=Ty}function yl(n){return n&&cT(n),xe(n)}function cT(n){n.producersTail=void 0,n.recomputing=!0}function rh(n,e){xe(e),n&&lT(n)}function lT(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Sa(n))do t=Ay(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function ih(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Cy(t),r!==t.version))return!0}return!1}function vl(n){if(Sa(n)){let e=n.producers;for(;e!==void 0;)e=Ay(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function uT(n,e){let t=n.consumersTail,r=Sa(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)uT(i.producer,i)}function Ay(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Sa(e)){let o=e.producers;for(;o!==void 0;)o=Ay(o)}return t}function Sa(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function My(n){I2?.(n)}function T2(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Ry(n,e){return Object.is(n,e)}function oh(n,e){let t=Object.create(C2);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Cy(t),ml(t),t.value===th)throw t.error;return t.value};return r[Pn]=t,My(t),r}var wy=Symbol("UNSET"),Iy=Symbol("COMPUTING"),th=Symbol("ERRORED"),C2=pe(V({},gl),{value:wy,dirty:!0,error:null,equal:Ry,kind:"computed",producerMustRecompute(n){return n.value===wy||n.value===Iy},producerRecomputeValue(n){if(n.value===Iy)throw new Error("");let e=n.value;n.value=Iy;let t=yl(n),r,i=!1;try{r=n.computation(),xe(null),i=e!==wy&&e!==th&&r!==th&&n.equal(e,r)}catch(o){r=th,n.error=o}finally{rh(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function x2(){throw new Error}var dT=x2;function hT(n){dT(n)}function Ny(n){dT=n}var D2=null;function Py(n,e){let t=Object.create(sh);t.value=n,e!==void 0&&(t.equal=e);let r=()=>fT(t);return r[Pn]=t,My(t),[r,s=>_l(t,s),s=>pT(t,s)]}function fT(n){return ml(n),n.value}function _l(n,e){Dy()||hT(n),n.equal(n.value,e)||(n.value=e,A2(n))}function pT(n,e){Dy()||hT(n),_l(n,e(n.value))}var sh=pe(V({},gl),{equal:Ry,value:void 0,kind:"signal"});function A2(n){n.version++,aT(),xy(n),D2?.(n)}function ky(n){let e=xe(null);try{return n()}finally{xe(e)}}function Oe(n){return typeof n=="function"}function Ta(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ah=Ta(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function El(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var cn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Oe(r))try{r()}catch(o){e=o instanceof ah?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{gT(o)}catch(s){e=e??[],s instanceof ah?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ah(e)}}add(e){var t;if(e&&e!==this)if(this.closed)gT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&El(t,e)}remove(e){let{_finalizers:t}=this;t&&El(t,e),e instanceof n&&e._removeParent(this)}};cn.EMPTY=(()=>{let n=new cn;return n.closed=!0,n})();var Oy=cn.EMPTY;function ch(n){return n instanceof cn||n&&"closed"in n&&Oe(n.remove)&&Oe(n.add)&&Oe(n.unsubscribe)}function gT(n){Oe(n)?n():n.unsubscribe()}var Er={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ca={setTimeout(n,e,...t){let{delegate:r}=Ca;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ca;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function lh(n){Ca.setTimeout(()=>{let{onUnhandledError:e}=Er;if(e)e(n);else throw n})}function bl(){}var mT=Fy("C",void 0,void 0);function yT(n){return Fy("E",void 0,n)}function vT(n){return Fy("N",n,void 0)}function Fy(n,e,t){return{kind:n,value:e,error:t}}var ps=null;function xa(n){if(Er.useDeprecatedSynchronousErrorHandling){let e=!ps;if(e&&(ps={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ps;if(ps=null,t)throw r}}else n()}function _T(n){Er.useDeprecatedSynchronousErrorHandling&&ps&&(ps.errorThrown=!0,ps.error=n)}var gs=class extends cn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ch(e)&&e.add(this)):this.destination=N2}static create(e,t,r){return new Da(e,t,r)}next(e){this.isStopped?Vy(vT(e),this):this._next(e)}error(e){this.isStopped?Vy(yT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Vy(mT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},M2=Function.prototype.bind;function Ly(n,e){return M2.call(n,e)}var Uy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){uh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){uh(r)}else uh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){uh(t)}}},Da=class extends gs{constructor(e,t,r){super();let i;if(Oe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Er.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ly(e.next,o),error:e.error&&Ly(e.error,o),complete:e.complete&&Ly(e.complete,o)}):i=e}this.destination=new Uy(i)}};function uh(n){Er.useDeprecatedSynchronousErrorHandling?_T(n):lh(n)}function R2(n){throw n}function Vy(n,e){let{onStoppedNotification:t}=Er;t&&Ca.setTimeout(()=>t(n,e))}var N2={closed:!0,next:bl,error:R2,complete:bl};var Aa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function br(n){return n}function By(...n){return jy(n)}function jy(n){return n.length===0?br:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Qe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=k2(t)?t:new Da(t,r,i);return xa(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=ET(r),new r((i,o)=>{let s=new Da({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Aa](){return this}pipe(...t){return jy(t)(this)}toPromise(t){return t=ET(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function ET(n){var e;return(e=n??Er.Promise)!==null&&e!==void 0?e:Promise}function P2(n){return n&&Oe(n.next)&&Oe(n.error)&&Oe(n.complete)}function k2(n){return n&&n instanceof gs||P2(n)&&ch(n)}function O2(n){return Oe(n?.lift)}function tt(n){return e=>{if(O2(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function nt(n,e,t,r,i){return new Hy(n,e,t,r,i)}var Hy=class extends gs{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var bT=Ta(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ut=(()=>{class n extends Qe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new dh(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new bT}next(t){xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Oy:(this.currentObservers=null,o.push(t),new cn(()=>{this.currentObservers=null,El(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Qe;return t.source=this,t}}return n.create=(e,t)=>new dh(e,t),n})(),dh=class extends Ut{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Oy}};var ln=class extends Ut{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var un=new Qe(n=>n.complete());function wT(n){return n&&Oe(n.schedule)}function IT(n){return n[n.length-1]}function hh(n){return Oe(IT(n))?n.pop():void 0}function Io(n){return wT(IT(n))?n.pop():void 0}function TT(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(f){s(f)}}function c(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function ST(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ms(n){return this instanceof ms?(this.v=n,this):new ms(n)}function CT(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(T){return Promise.resolve(T).then(m,f)}}function a(m,T){r[m]&&(i[m]=function(M){return new Promise(function(L,k){o.push([m,M,L,k])>1||c(m,M)})},T&&(i[m]=T(i[m])))}function c(m,T){try{u(r[m](T))}catch(M){g(o[0][3],M)}}function u(m){m.value instanceof ms?Promise.resolve(m.value.v).then(d,f):g(o[0][2],m)}function d(m){c("next",m)}function f(m){c("throw",m)}function g(m,T){m(T),o.shift(),o.length&&c(o[0][0],o[0][1])}}function xT(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ST=="function"?ST(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var fh=n=>n&&typeof n.length=="number"&&typeof n!="function";function ph(n){return Oe(n?.then)}function gh(n){return Oe(n[Aa])}function mh(n){return Symbol.asyncIterator&&Oe(n?.[Symbol.asyncIterator])}function yh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function F2(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var vh=F2();function _h(n){return Oe(n?.[vh])}function Eh(n){return CT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ms(t.read());if(i)return yield ms(void 0);yield yield ms(r)}}finally{t.releaseLock()}})}function bh(n){return Oe(n?.getReader)}function Bt(n){if(n instanceof Qe)return n;if(n!=null){if(gh(n))return L2(n);if(fh(n))return V2(n);if(ph(n))return U2(n);if(mh(n))return DT(n);if(_h(n))return B2(n);if(bh(n))return j2(n)}throw yh(n)}function L2(n){return new Qe(e=>{let t=n[Aa]();if(Oe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function V2(n){return new Qe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function U2(n){return new Qe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,lh)})}function B2(n){return new Qe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function DT(n){return new Qe(e=>{H2(n,e).catch(t=>e.error(t))})}function j2(n){return DT(Eh(n))}function H2(n,e){var t,r,i,o;return TT(this,void 0,void 0,function*(){try{for(t=xT(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function kn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function wh(n,e=0){return tt((t,r)=>{t.subscribe(nt(r,i=>kn(r,n,()=>r.next(i),e),()=>kn(r,n,()=>r.complete(),e),i=>kn(r,n,()=>r.error(i),e)))})}function Ih(n,e=0){return tt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function AT(n,e){return Bt(n).pipe(Ih(e),wh(e))}function MT(n,e){return Bt(n).pipe(Ih(e),wh(e))}function RT(n,e){return new Qe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function NT(n,e){return new Qe(t=>{let r;return kn(t,e,()=>{r=n[vh](),kn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Oe(r?.return)&&r.return()})}function Sh(n,e){if(!n)throw new Error("Iterable cannot be null");return new Qe(t=>{kn(t,e,()=>{let r=n[Symbol.asyncIterator]();kn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function PT(n,e){return Sh(Eh(n),e)}function kT(n,e){if(n!=null){if(gh(n))return AT(n,e);if(fh(n))return RT(n,e);if(ph(n))return MT(n,e);if(mh(n))return Sh(n,e);if(_h(n))return NT(n,e);if(bh(n))return PT(n,e)}throw yh(n)}function jt(n,e){return e?kT(n,e):Bt(n)}function Ge(...n){let e=Io(n);return jt(n,e)}function $y(n,e){let t=Oe(n)?n:()=>n,r=i=>i.error(t());return new Qe(e?i=>e.schedule(r,0,i):r)}function Th(n){return!!n&&(n instanceof Qe||Oe(n.lift)&&Oe(n.subscribe))}var ys=Ta(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function It(n,e){return tt((t,r)=>{let i=0;t.subscribe(nt(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:$2}=Array;function G2(n,e){return $2(e)?n(...e):n(e)}function Ch(n){return It(e=>G2(n,e))}var{isArray:z2}=Array,{getPrototypeOf:q2,prototype:W2,keys:K2}=Object;function xh(n){if(n.length===1){let e=n[0];if(z2(e))return{args:e,keys:null};if(Q2(e)){let t=K2(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Q2(n){return n&&typeof n=="object"&&q2(n)===W2}function Dh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Gy(...n){let e=Io(n),t=hh(n),{args:r,keys:i}=xh(n);if(r.length===0)return jt([],e);let o=new Qe(Y2(r,e,i?s=>Dh(i,s):br));return t?o.pipe(Ch(t)):o}function Y2(n,e,t=br){return r=>{OT(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)OT(e,()=>{let u=jt(n[c],e),d=!1;u.subscribe(nt(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function OT(n,e,t){n?kn(t,n,e):e()}function FT(n,e,t,r,i,o,s,a){let c=[],u=0,d=0,f=!1,g=()=>{f&&!c.length&&!u&&e.complete()},m=M=>u<r?T(M):c.push(M),T=M=>{o&&e.next(M),u++;let L=!1;Bt(t(M,d++)).subscribe(nt(e,k=>{i?.(k),o?m(k):e.next(k)},()=>{L=!0},void 0,()=>{if(L)try{for(u--;c.length&&u<r;){let k=c.shift();s?kn(e,s,()=>T(k)):T(k)}g()}catch(k){e.error(k)}}))};return n.subscribe(nt(e,m,()=>{f=!0,g()})),()=>{a?.()}}function Cn(n,e,t=1/0){return Oe(e)?Cn((r,i)=>It((o,s)=>e(r,o,i,s))(Bt(n(r,i))),t):(typeof e=="number"&&(t=e),tt((r,i)=>FT(r,i,n,t)))}function LT(n=1/0){return Cn(br,n)}function VT(){return LT(1)}function Ma(...n){return VT()(jt(n,Io(n)))}function wl(n){return new Qe(e=>{Bt(n()).subscribe(e)})}function zy(...n){let e=hh(n),{args:t,keys:r}=xh(n),i=new Qe(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let f=!1;Bt(t[d]).subscribe(nt(o,g=>{f||(f=!0,u--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(r?Dh(r,a):a),o.complete())}))}});return e?i.pipe(Ch(e)):i}function Di(n,e){return tt((t,r)=>{let i=0;t.subscribe(nt(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Il(n){return tt((e,t)=>{let r=null,i=!1,o;r=e.subscribe(nt(t,void 0,void 0,s=>{o=Bt(n(s,Il(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Ah(n,e){return Oe(e)?Cn(n,e,1):Cn(n,1)}function UT(n){return tt((e,t)=>{let r=!1;e.subscribe(nt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ai(n){return n<=0?()=>un:tt((e,t)=>{let r=0;e.subscribe(nt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function BT(n=J2){return tt((e,t)=>{let r=!1;e.subscribe(nt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function J2(){return new ys}function qy(n){return tt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Mi(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Di((i,o)=>n(i,o,r)):br,Ai(1),t?UT(e):BT(()=>new ys))}function Mh(n){return n<=0?()=>un:tt((e,t)=>{let r=[];e.subscribe(nt(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Wy(...n){let e=Io(n);return tt((t,r)=>{(e?Ma(n,t,e):Ma(n,t)).subscribe(r)})}function Ri(n,e){return tt((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(nt(r,c=>{i?.unsubscribe();let u=0,d=o++;Bt(n(c,d)).subscribe(i=nt(r,f=>r.next(e?e(c,f,d,u++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Sl(n){return tt((e,t)=>{Bt(n).subscribe(nt(t,()=>t.complete(),bl)),!t.closed&&e.subscribe(t)})}function $r(n,e,t){let r=Oe(n)||e||t?{next:n,error:e,complete:t}:n;return r?tt((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(nt(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):br}var Ky;function Rh(){return Ky}function Gr(n){let e=Ky;return Ky=n,e}var jT=Symbol("NotFound");function Ra(n){return n===jT||n?.name==="\u0275NotFound"}var Fh="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",te=class extends Error{code;constructor(e,t){super(ki(e,t)),this.code=e}};function eF(n){return`NG0${Math.abs(n)}`}function ki(n,e){return`${eF(n)}${e?": "+e:""}`}var qr=globalThis;function rt(n){for(let e in n)if(n[e]===rt)return e;throw Error("")}function qT(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Pi(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Pi).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Lh(n,e){return n?e?`${n} ${e}`:n:e||""}var tF=rt({__forward_ref__:rt});function xo(n){return n.__forward_ref__=xo,n.toString=function(){return Pi(this())},n}function dn(n){return l0(n)?n():n}function l0(n){return typeof n=="function"&&n.hasOwnProperty(tF)&&n.__forward_ref__===xo}function ne(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Wr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ml(n){return nF(n,Vh)}function u0(n){return Ml(n)!==null}function nF(n,e){return n.hasOwnProperty(e)&&n[e]||null}function rF(n){let e=n?.[Vh]??null;return e||null}function Yy(n){return n&&n.hasOwnProperty(Ph)?n[Ph]:null}var Vh=rt({\u0275prov:rt}),Ph=rt({\u0275inj:rt}),re=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ne({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function d0(n){return n&&!!n.\u0275providers}var h0=rt({\u0275cmp:rt}),f0=rt({\u0275dir:rt}),p0=rt({\u0275pipe:rt}),g0=rt({\u0275mod:rt}),Cl=rt({\u0275fac:rt}),ws=rt({__NG_ELEMENT_ID__:rt}),HT=rt({__NG_ENV_ID__:rt});function m0(n){return Bh(n,"@NgModule"),n[g0]||null}function Oi(n){return Bh(n,"@Component"),n[h0]||null}function Uh(n){return Bh(n,"@Directive"),n[f0]||null}function y0(n){return Bh(n,"@Pipe"),n[p0]||null}function Bh(n,e){if(n==null)throw new te(-919,!1)}function wr(n){return typeof n=="string"?n:n==null?"":String(n)}function WT(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():wr(n)}var KT=rt({ngErrorCode:rt}),iF=rt({ngErrorMessage:rt}),oF=rt({ngTokenPath:rt});function v0(n,e){return QT("",-200,e)}function jh(n,e){throw new te(-201,!1)}function QT(n,e,t){let r=new te(e,n);return r[KT]=e,r[iF]=n,t&&(r[oF]=t),r}function sF(n){return n[KT]}var Jy;function YT(){return Jy}function xn(n){let e=Jy;return Jy=n,e}function _0(n,e,t){let r=Ml(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;jh(n,"")}var aF={},vs=aF,cF="__NG_DI_FLAG__",Zy=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=_s(t)||0;try{return this.injector.get(e,r&8?null:vs,r)}catch(i){if(Ra(i))return i;throw i}}};function lF(n,e=0){let t=Rh();if(t===void 0)throw new te(-203,!1);if(t===null)return _0(n,void 0,e);{let r=uF(e),i=t.retrieve(n,r);if(Ra(i)){if(r.optional)return null;throw i}return i}}function we(n,e=0){return(YT()||lF)(dn(n),e)}function G(n,e){return we(n,_s(e))}function _s(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function uF(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Xy(n){let e=[];for(let t=0;t<n.length;t++){let r=dn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new te(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=dF(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(we(i,o))}else e.push(we(r))}return e}function dF(n){return n[cF]}function So(n,e){let t=n.hasOwnProperty(Cl);return t?n[Cl]:null}function JT(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function ZT(n){return n.flat(Number.POSITIVE_INFINITY)}function Hh(n,e){n.forEach(t=>Array.isArray(t)?Hh(t,e):e(t))}function E0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Rl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function XT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function $h(n,e,t){let r=Pa(n,e);return r>=0?n[r|1]=t:(r=~r,XT(n,r,e,t)),r}function Gh(n,e){let t=Pa(n,e);if(t>=0)return n[t|1]}function Pa(n,e){return hF(n,e,1)}function hF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Do={},Dn=[],Kr=new re(""),b0=new re("",-1),w0=new re(""),xl=class{get(e,t=vs){if(t===vs){let i=QT("",-201);throw i.name="\u0275NotFound",i}return t}};function Qr(n){return{\u0275providers:n}}function eC(n){return Qr([{provide:Kr,multi:!0,useValue:n}])}function tC(...n){return{\u0275providers:zh(!0,n),\u0275fromNgModule:!0}}function zh(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Hh(e,s=>{let a=s;kh(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&nC(i,o),t}function nC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];I0(i,o=>{e(o,r)})}}function kh(n,e,t,r){if(n=dn(n),!n)return!1;let i=null,o=Yy(n),s=!o&&Oi(n);if(!o&&!s){let c=n.ngModule;if(o=Yy(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)kh(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;Hh(o.imports,d=>{kh(d,e,t,r)&&(u||=[],u.push(d))}),u!==void 0&&nC(u,e)}if(!a){let u=So(i)||(()=>new i);e({provide:i,useFactory:u,deps:Dn},i),e({provide:w0,useValue:i,multi:!0},i),e({provide:Kr,useValue:()=>we(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;I0(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function I0(n,e){for(let t of n)d0(t)&&(t=t.\u0275providers),Array.isArray(t)?I0(t,e):e(t)}var fF=rt({provide:String,useValue:rt});function rC(n){return n!==null&&typeof n=="object"&&fF in n}function pF(n){return!!(n&&n.useExisting)}function gF(n){return!!(n&&n.useFactory)}function Es(n){return typeof n=="function"}function iC(n){return!!n.useClass}var Nl=new re(""),Nh={},$T={},Qy;function Pl(){return Qy===void 0&&(Qy=new xl),Qy}var At=class{},bs=class extends At{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,t0(e,s=>this.processProvider(s)),this.records.set(b0,Na(void 0,this)),i.has("environment")&&this.records.set(At,Na(void 0,this));let o=this.records.get(Nl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(w0,Dn,{self:!0}))}retrieve(e,t){let r=_s(t)||0;try{return this.get(e,vs,r)}catch(i){if(Ra(i))return i;throw i}}destroy(){Tl(this),this._destroyed=!0;let e=xe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),xe(e)}}onDestroy(e){return Tl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Tl(this);let t=Gr(this),r=xn(void 0),i;try{return e()}finally{Gr(t),xn(r)}}get(e,t=vs,r){if(Tl(this),e.hasOwnProperty(HT))return e[HT](this);let i=_s(r),o,s=Gr(this),a=xn(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let d=EF(e)&&Ml(e);d&&this.injectableDefInScope(d)?u=Na(e0(e),Nh):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?Pl():this.parent;return t=i&8&&t===vs?null:t,c.get(e,t)}catch(c){let u=sF(c);throw u===-200||u===-201?new te(u,null):c}finally{xn(a),Gr(s)}}resolveInjectorInitializers(){let e=xe(null),t=Gr(this),r=xn(void 0),i;try{let o=this.get(Kr,Dn,{self:!0});for(let s of o)s()}finally{Gr(t),xn(r),xe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Pi(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=dn(e);let t=Es(e)?e:dn(e&&e.provide),r=yF(e);if(!Es(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Na(void 0,Nh,!0),i.factory=()=>Xy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=xe(null);try{if(t.value===$T)throw v0(Pi(e));return t.value===Nh&&(t.value=$T,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&_F(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{xe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=dn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function e0(n){let e=Ml(n),t=e!==null?e.factory:So(n);if(t!==null)return t;if(n instanceof re)throw new te(204,!1);if(n instanceof Function)return mF(n);throw new te(204,!1)}function mF(n){if(n.length>0)throw new te(204,!1);let t=rF(n);return t!==null?()=>t.factory(n):()=>new n}function yF(n){if(rC(n))return Na(void 0,n.useValue);{let e=S0(n);return Na(e,Nh)}}function S0(n,e,t){let r;if(Es(n)){let i=dn(n);return So(i)||e0(i)}else if(rC(n))r=()=>dn(n.useValue);else if(gF(n))r=()=>n.useFactory(...Xy(n.deps||[]));else if(pF(n))r=(i,o)=>we(dn(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=dn(n&&(n.useClass||n.provide));if(vF(n))r=()=>new i(...Xy(n.deps));else return So(i)||e0(i)}return r}function Tl(n){if(n.destroyed)throw new te(205,!1)}function Na(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function vF(n){return!!n.deps}function _F(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function EF(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function t0(n,e){for(let t of n)Array.isArray(t)?t0(t,e):t&&d0(t)?t0(t.\u0275providers,e):e(t)}function hn(n,e){let t;n instanceof bs?(Tl(n),t=n):t=new Zy(n);let r,i=Gr(t),o=xn(void 0);try{return e()}finally{Gr(i),xn(o)}}function oC(){return YT()!==void 0||Rh()!=null}var Mn=0,me=1,Re=2,Nt=3,rr=4,ir=5,Fn=6,ka=7,Pt=8,Gn=9,Yr=10,at=11,Oa=12,T0=13,Is=14,Rn=15,Ao=16,Ss=17,Jr=18,Fi=19,C0=20,Ni=21,qh=22,kl=23,zn=24,Ts=25,Cs=26,Ye=27,sC=1,Ir=6,Zr=7,Ol=8,xs=9,Ct=10;function qn(n){return Array.isArray(n)&&typeof n[sC]=="object"}function Wn(n){return Array.isArray(n)&&n[sC]===!0}function x0(n){return(n.flags&4)!==0}function Li(n){return n.componentOffset>-1}function Fl(n){return(n.flags&1)===1}function Xr(n){return!!n.template}function Ds(n){return(n[Re]&512)!==0}function Mo(n){return(n[Re]&256)===256}var D0="svg",aC="math";function Kn(n){for(;Array.isArray(n);)n=n[Mn];return n}function A0(n,e){return Kn(e[n])}function or(n,e){return Kn(e[n.index])}function As(n,e){return n.data[e]}function Ll(n,e){return n[e]}function Vl(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function sr(n,e){let t=e[n];return qn(t)?t:t[Mn]}function cC(n){return(n[Re]&4)===4}function Wh(n){return(n[Re]&128)===128}function lC(n){return Wn(n[Nt])}function ar(n,e){return e==null?null:n[e]}function M0(n){n[Ss]=0}function R0(n){n[Re]&1024||(n[Re]|=1024,Wh(n)&&Fa(n))}function uC(n,e){for(;n>0;)e=e[Is],n--;return e}function Ul(n){return!!(n[Re]&9216||n[zn]?.dirty)}function Kh(n){n[Yr].changeDetectionScheduler?.notify(8),n[Re]&64&&(n[Re]|=1024),Ul(n)&&Fa(n)}function Fa(n){n[Yr].changeDetectionScheduler?.notify(0);let e=To(n);for(;e!==null&&!(e[Re]&8192||(e[Re]|=8192,!Wh(e)));)e=To(e)}function N0(n,e){if(Mo(n))throw new te(911,!1);n[Ni]===null&&(n[Ni]=[]),n[Ni].push(e)}function dC(n,e){if(n[Ni]===null)return;let t=n[Ni].indexOf(e);t!==-1&&n[Ni].splice(t,1)}function To(n){let e=n[Nt];return Wn(e)?e[Nt]:e}function P0(n){return n[ka]??=[]}function k0(n){return n.cleanup??=[]}function hC(n,e,t,r){let i=P0(e);i.push(t),n.firstCreatePass&&k0(n).push(r,i.length-1)}var Fe={lFrame:SC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var n0=!1;function fC(){return Fe.lFrame.elementDepthCount}function pC(){Fe.lFrame.elementDepthCount++}function O0(){Fe.lFrame.elementDepthCount--}function F0(){return Fe.bindingsEnabled}function L0(){return Fe.skipHydrationRootTNode!==null}function V0(n){return Fe.skipHydrationRootTNode===n}function gC(n){Fe.skipHydrationRootTNode=n}function U0(){Fe.skipHydrationRootTNode=null}function De(){return Fe.lFrame.lView}function kt(){return Fe.lFrame.tView}function ye(n){return Fe.lFrame.contextLView=n,n[Pt]}function ve(n){return Fe.lFrame.contextLView=null,n}function yn(){let n=B0();for(;n!==null&&n.type===64;)n=n.parent;return n}function B0(){return Fe.lFrame.currentTNode}function mC(){let n=Fe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ms(n,e){let t=Fe.lFrame;t.currentTNode=n,t.isParent=e}function j0(){return Fe.lFrame.isParent}function yC(){Fe.lFrame.isParent=!1}function H0(){return Fe.lFrame.contextLView}function $0(){return n0}function G0(n){let e=n0;return n0=n,e}function Bl(){let n=Fe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function z0(){return Fe.lFrame.bindingIndex}function vC(n){return Fe.lFrame.bindingIndex=n}function Rs(){return Fe.lFrame.bindingIndex++}function jl(n){let e=Fe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function _C(){return Fe.lFrame.inI18n}function EC(n,e){let t=Fe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Qh(e)}function bC(){return Fe.lFrame.currentDirectiveIndex}function Qh(n){Fe.lFrame.currentDirectiveIndex=n}function wC(n){let e=Fe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function q0(){return Fe.lFrame.currentQueryIndex}function Yh(n){Fe.lFrame.currentQueryIndex=n}function bF(n){let e=n[me];return e.type===2?e.declTNode:e.type===1?n[ir]:null}function W0(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=bF(o),i===null||(o=o[Is],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Fe.lFrame=IC();return r.currentTNode=e,r.lView=n,!0}function Jh(n){let e=IC(),t=n[me];Fe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function IC(){let n=Fe.lFrame,e=n===null?null:n.child;return e===null?SC(n):e}function SC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function TC(){let n=Fe.lFrame;return Fe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var K0=TC;function Zh(){let n=TC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function CC(n){return(Fe.lFrame.contextLView=uC(n,Fe.lFrame.contextLView))[Pt]}function cr(){return Fe.lFrame.selectedIndex}function Ro(n){Fe.lFrame.selectedIndex=n}function Q0(){let n=Fe.lFrame;return As(n.tView,n.selectedIndex)}function he(){Fe.lFrame.currentNamespace=D0}function Ve(){wF()}function wF(){Fe.lFrame.currentNamespace=null}function Y0(){return Fe.lFrame.currentNamespace}var xC=!0;function Xh(){return xC}function Vi(n){xC=n}function r0(n,e=null,t=null,r){let i=J0(n,e,t,r);return i.resolveInjectorInitializers(),i}function J0(n,e=null,t=null,r,i=new Set){let o=[t||Dn,tC(n)];return r=r||(typeof n=="object"?void 0:Pi(n)),new bs(o,e||Pl(),r||null,i)}var On=class n{static THROW_IF_NOT_FOUND=vs;static NULL=new xl;static create(e,t){if(Array.isArray(e))return r0({name:""},t,e,"");{let r=e.name??"";return r0({name:r},e.parent,e.providers,r)}}static \u0275prov=ne({token:n,providedIn:"any",factory:()=>we(b0)});static __NG_ELEMENT_ID__=-1},Mt=new re(""),Sr=(()=>{class n{static __NG_ELEMENT_ID__=IF;static __NG_ENV_ID__=t=>t}return n})(),i0=class extends Sr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Mo(this._lView)}onDestroy(e){let t=this._lView;return N0(t,e),()=>dC(t,e)}};function IF(){return new i0(De())}var DC=!1,AC=new re(""),ei=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ln(!1);debugTaskTracker=G(AC,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Qe(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),this.debugTaskTracker?.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.debugTaskTracker?.remove(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}return n})(),o0=class extends Ut{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,oC()&&(this.destroyRef=G(Sr,{optional:!0})??void 0,this.pendingTasks=G(ei,{optional:!0})??void 0)}emit(e){let t=xe(null);try{super.next(e)}finally{xe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof cn&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ht=o0;function Oh(...n){}function Z0(n){let e,t;function r(){n=Oh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function MC(n){return queueMicrotask(()=>n()),()=>{n=Oh}}var X0="isAngularZone",Dl=X0+"_ID",SF=0,An=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ht(!1);onMicrotaskEmpty=new Ht(!1);onStable=new Ht(!1);onError=new Ht(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=DC}=e;if(typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,xF(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(X0)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new te(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,TF,Oh,Oh);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},TF={};function ev(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function CF(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Z0(()=>{n.callbackScheduled=!1,s0(n),n.isCheckStableRunning=!0,ev(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),s0(n)}function xF(n){let e=()=>{CF(n)},t=SF++;n._inner=n._inner.fork({name:"angular",properties:{[X0]:!0,[Dl]:t,[Dl+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(DF(c))return r.invokeTask(o,s,a,c);try{return GT(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),zT(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return GT(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!AF(c)&&e(),zT(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,s0(n),ev(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function s0(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function GT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function zT(n){n._nesting--,ev(n)}var Al=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ht;onMicrotaskEmpty=new Ht;onStable=new Ht;onError=new Ht;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function DF(n){return RC(n,"__ignore_ng_zone__")}function AF(n){return RC(n,"__scheduler_tick__")}function RC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var zr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Qn=new re("",{factory:()=>{let n=G(An),e=G(At),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(zr),t.handleError(r))})}}}),NC={provide:Kr,useValue:()=>{let n=G(zr,{optional:!0})},multi:!0},MF=new re("",{factory:()=>{let n=G(Mt).defaultView;if(!n)return;let e=G(Qn),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),G(Sr).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function tv(){return Qr([eC(()=>{G(MF)})])}function Y(n,e){let[t,r,i]=Py(n,e?.equal),o=t,s=o[Pn];return o.set=r,o.update=i,o.asReadonly=PC.bind(o),o}function PC(){let n=this[Pn];if(n.readonlyFn===void 0){let e=()=>this();e[Pn]=n,n.readonlyFn=e}return n.readonlyFn}var ef=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=RF}return n})();function RF(){return new ef(De(),yn())}var Co=class{},Hl=new re("",{factory:()=>!0});var nv=new re(""),tf=(()=>{class n{internalPendingTasks=G(ei);scheduler=G(Co);errorHandler=G(Qn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}return n})(),rv=(()=>{class n{static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new a0})}return n})(),a0=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},c0=class{[Pn];constructor(e){this[Pn]=e}destroy(){this[Pn].destroy()}};function Kt(n){return ky(n)}var nf={JSACTION:"jsaction"};function Zl(n){return{toString:n}.toString()}function LF(n){return typeof n=="function"}function vx(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var ff=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Ui=(()=>{let n=()=>_x;return n.ngInherit=!0,n})();function _x(n){return n.type.prototype.ngOnChanges&&(n.setInput=UF),VF}function VF(){let n=bx(this),e=n?.current;if(e){let t=n.previous;if(t===Do)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function UF(n,e,t,r,i){let o=this.declaredInputs[r],s=bx(n)||BF(n,{previous:Do,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new ff(u&&u.currentValue,t,c===Do),vx(n,e,i,t)}var Ex="__ngSimpleChanges__";function bx(n){return n[Ex]||null}function BF(n,e){return n[Ex]=e}var kC=[];var Ze=function(n,e=null,t){for(let r=0;r<kC.length;r++){let i=kC[r];i(n,e,t)}},We=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(We||{});function jF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=_x(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function wx(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function sf(n,e,t){Ix(n,e,3,t)}function af(n,e,t,r){(n[Re]&3)===t&&Ix(n,e,t,r)}function iv(n,e){let t=n[Re];(t&3)===e&&(t&=16383,t+=1,n[Re]=t)}function Ix(n,e,t,r){let i=r!==void 0?n[Ss]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ss]+=65536),(a<o||o==-1)&&(HF(n,t,e,c),n[Ss]=(n[Ss]&4294901760)+c+2),c++}function OC(n,e){Ze(We.LifecycleHookStart,n,e);let t=xe(null);try{e.call(n)}finally{xe(t),Ze(We.LifecycleHookEnd,n,e)}}function HF(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Re]>>14<n[Ss]>>16&&(n[Re]&3)===e&&(n[Re]+=16384,OC(a,o)):OC(a,o)}var Va=-1,ks=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function $F(n){return(n.flags&8)!==0}function GF(n){return(n.flags&16)!==0}function zF(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];qF(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Sx(n){return n===3||n===4||n===6}function qF(n){return n.charCodeAt(0)===64}function ja(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?FC(n,t,i,null,e[++r]):FC(n,t,i,null,null))}}return n}function FC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Tx(n){return n!==Va}function pf(n){return n&32767}function WF(n){return n>>16}function gf(n,e){let t=WF(n),r=e;for(;t>0;)r=r[Is],t--;return r}var vv=!0;function mf(n){let e=vv;return vv=n,e}var KF=256,Cx=KF-1,xx=5,QF=0,ti={};function YF(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ws)&&(r=t[ws]),r==null&&(r=t[ws]=QF++);let i=r&Cx,o=1<<i;e.data[n+(i>>xx)]|=o}function yf(n,e){let t=Dx(n,e);if(t!==-1)return t;let r=e[me];r.firstCreatePass&&(n.injectorIndex=e.length,ov(r.data,n),ov(e,null),ov(r.blueprint,null));let i=Wv(n,e),o=n.injectorIndex;if(Tx(i)){let s=pf(i),a=gf(i,e),c=a[me].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function ov(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Dx(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Wv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Px(i),r===null)return Va;if(t++,i=i[Is],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Va}function _v(n,e,t){YF(n,e,t)}function JF(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(Sx(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function Ax(n,e,t){if(t&8||n!==void 0)return n;jh(e,"NodeInjector")}function Mx(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Gn],o=xn(void 0);try{return i?i.get(e,r,t&8):_0(e,r,t&8)}finally{xn(o)}}return Ax(r,e,t)}function Rx(n,e,t,r=0,i){if(n!==null){if(e[Re]&2048&&!(r&2)){let s=tL(n,e,t,r,ti);if(s!==ti)return s}let o=Nx(n,e,t,r,ti);if(o!==ti)return o}return Mx(e,t,r,i)}function Nx(n,e,t,r,i){let o=XF(t);if(typeof o=="function"){if(!W0(e,n,r))return r&1?Ax(i,t,r):Mx(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))jh(t);else return s}finally{K0()}}else if(typeof o=="number"){let s=null,a=Dx(n,e),c=Va,u=r&1?e[Rn][ir]:null;for((a===-1||r&4)&&(c=a===-1?Wv(n,e):e[a+8],c===Va||!VC(r,!1)?a=-1:(s=e[me],a=pf(c),e=gf(c,e)));a!==-1;){let d=e[me];if(LC(o,a,d.data)){let f=ZF(a,e,t,s,r,u);if(f!==ti)return f}c=e[a+8],c!==Va&&VC(r,e[me].data[a+8]===u)&&LC(o,a,e)?(s=d,a=pf(c),e=gf(c,e)):a=-1}}return i}function ZF(n,e,t,r,i,o){let s=e[me],a=s.data[n+8],c=r==null?Li(a)&&vv:r!=s&&(a.type&3)!==0,u=i&1&&o===a,d=cf(a,s,t,c,u);return d!==null?ql(e,s,d,a,i):ti}function cf(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:u;for(let m=f;m<g;m++){let T=s[m];if(m<c&&t===T||m>=c&&T.type===t)return m}if(i){let m=s[c];if(m&&Xr(m)&&m.type===t)return c}return null}function ql(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof ks){let a=o;if(a.resolving){let m=WT(s[t]);throw v0(m)}let c=mf(a.canSeeViewProviders);a.resolving=!0;let u=s[t].type||s[t],d,f=a.injectImpl?xn(a.injectImpl):null,g=W0(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&jF(t,s[t],e)}finally{f!==null&&xn(f),mf(c),a.resolving=!1,K0()}}return o}function XF(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ws)?n[ws]:void 0;return typeof e=="number"?e>=0?e&Cx:eL:e}function LC(n,e,t){let r=1<<n;return!!(t[e+(n>>xx)]&r)}function VC(n,e){return!(n&2)&&!(n&1&&e)}var Ps=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Rx(this._tNode,this._lView,e,_s(r),t)}};function eL(){return new Ps(yn(),De())}function Us(n){return Zl(()=>{let e=n.prototype.constructor,t=e[Cl]||Ev(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Cl]||Ev(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ev(n){return l0(n)?()=>{let e=Ev(dn(n));return e&&e()}:So(n)}function tL(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Re]&2048&&!Ds(s);){let a=Nx(o,s,t,r|2,ti);if(a!==ti)return a;let c=o.parent;if(!c){let u=s[C0];if(u){let d=u.get(t,ti,r);if(d!==ti)return d}c=Px(s),s=s[Is]}o=c}return i}function Px(n){let e=n[me],t=e.type;return t===2?e.declTNode:t===1?n[ir]:null}function Xl(n){return JF(yn(),n)}function nL(){return qa(yn(),De())}function qa(n,e){return new Dr(or(n,e))}var Dr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=nL}return n})();function rL(n){return n instanceof Dr?n.nativeElement:n}function iL(){return this._results[Symbol.iterator]()}var vf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ut}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=ZT(e);(this._changesDetected=!JT(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=iL},kx="ngSkipHydration",oL="ngskiphydration";function Ox(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===oL)return!0}return!1}function Fx(n){return n.hasAttribute(kx)}function _f(n){return(n.flags&128)===128}function Lx(n){if(_f(n))return!0;let e=n.parent;for(;e;){if(_f(n)||Ox(e))return!0;e=e.parent}return!1}var Kv=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Kv||{}),Vx=new Map,sL=0;function aL(){return sL++}function cL(n){Vx.set(n[Fi],n)}function bv(n){Vx.delete(n[Fi])}var UC="__ngContext__";function Ha(n,e){qn(e)?(n[UC]=e[Fi],cL(e)):n[UC]=e}function Ux(n){return jx(n[Oa])}function Bx(n){return jx(n[rr])}function jx(n){for(;n!==null&&!Wn(n);)n=n[rr];return n}var wv;function Qv(n){wv=n}function Hx(){if(wv!==void 0)return wv;if(typeof document<"u")return document;throw new te(210,!1)}var ri=new re("",{factory:()=>lL}),lL="ng";var Of=new re(""),Bi=new re("",{providedIn:"platform",factory:()=>"unknown"});var Ff=new re("",{factory:()=>G(Mt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Wa=(()=>{class n{static \u0275prov=ne({token:n,providedIn:"root",factory:()=>{let t=new n;return t.store=uL(G(Mt),G(ri)),t}});store={};onSerializeCallbacks={};get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function uL(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var $x="h",Gx="b",dL="f",hL="n",zx="e",qx="t",Lf="c",Yv="x",Wl="r",Wx="i",Kx="n",Jv="d";var Qx="di",Yx="s",Jx="p";var eu=new re(""),Zx=!1,Zv=new re("",{factory:()=>Zx});var Xv=new re(""),Xx=!1,eD=new re("",{factory:()=>[]}),tD=new re(""),e_=new re("",{factory:()=>new Map});var tu="ngb";var nD=(n,e,t)=>{let r=n,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(t),i.set(e,o),r.__jsaction_fns=i},rD=(n,e)=>{let t=n,r=t.getAttribute(tu)??"",i=e.get(r)??new Set;i.has(t)||i.add(t),e.set(r,i)};var iD=n=>{n.removeAttribute(nf.JSACTION),n.removeAttribute(tu),n.__jsaction_fns=void 0},oD=new re("",{factory:()=>({})});function t_(n,e){let t=e?.__jsaction_fns?.get(n.type);if(!(!t||!e?.isConnected))for(let r of t)r(n)}var Iv=new Map;function sD(n,e){return Iv.set(n,e),()=>Iv.delete(n)}var BC=!1,aD=(n,e,t,r)=>{};function fL(n,e,t,r){aD(n,e,t,r)}function cD(){BC||(aD=(n,e,t,r)=>{let i=n[Gn].get(ri);Iv.get(i)?.(e,t,r)},BC=!0)}var Vf=new re("");function Uf(n){return(n.flags&32)===32}var pL="__nghData__",n_=pL,gL="__nghDeferData__",lD=gL;var lf="ngh",uD="nghm",dD=()=>null;function mL(n,e,t=!1){let r=n.getAttribute(lf);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,c={};if(r!==""){let d=e.get(Wa,null,{optional:!0});d!==null&&(c=d.get(n_,[])[Number(r)])}let u={data:c,firstChild:n.firstChild??null};return t&&(u.firstChild=n,Bf(u,0,n.nextSibling)),a?n.setAttribute(lf,a):n.removeAttribute(lf),u}function hD(){dD=mL}function fD(n,e,t=!1){return dD(n,e,t)}function pD(n){let e=n._lView;return e[me].type===2?null:(Ds(e)&&(e=e[Ye]),e)}function yL(n){return n.textContent?.replace(/\s/gm,"")}function vL(n){let e=Hx(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=yL(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Bf(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function Sv(n,e){return n.segmentHeads?.[e]??null}function gD(n){return n.get(tD,!1,{optional:!0})}function _L(n,e){let t=n.data,r=t[zx]?.[e]??null;return r===null&&t[Lf]?.[e]&&(r=r_(n,e)),r}function mD(n,e){return n.data[Lf]?.[e]??null}function r_(n,e){let t=mD(n,e)??[],r=0;for(let i of t)r+=i[Wl]*(i[Yv]??1);return r}function EL(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[Jv];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function yD(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[Jv];n.disconnectedNodes=t?new Set(t):null}return!!EL(n)?.has(e)}function jf(n,e){let t=n[Fn];return t!==null&&!L0()&&!Uf(e)&&!yD(t,e.index-Ye)}function bL(n,e){let t=e.get(Vf),i=e.get(Wa).get(lD,{}),o=!1,s=n,a=null,c=[];for(;!o&&s;){o=t.has(s);let u=t.hydrating.get(s);if(a===null&&u!=null){a=u.promise;break}c.unshift(s),s=i[s][Jx]}return{parentBlockPromise:a,hydrationQueue:c}}function sv(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===uD}function jC(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function vD(n){for(let r of n.body.childNodes)if(sv(r))return;let e=jC(n.body.previousSibling);if(sv(e))return;let t=jC(n.head.lastChild);if(!sv(t))throw new te(-507,!1)}function _D(n,e){let t=n.contentQueries;if(t!==null){let r=xe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Yh(o),a.contentQueries(2,e[s],s)}}}finally{xe(r)}}}function Tv(n,e,t){Yh(0);let r=xe(null);try{e(n,t)}finally{xe(r)}}function ED(n,e,t){if(x0(e)){let r=xe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{xe(r)}}}var xr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(xr||{});var rf;function wL(){if(rf===void 0&&(rf=null,qr.trustedTypes))try{rf=qr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return rf}function HC(n){return wL()?.createScriptURL(n)||n}var Ef=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Fh})`}};function Ka(n){return n instanceof Ef?n.changingThisBreaksApplicationSecurity:n}function Hf(n,e){let t=bD(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Fh})`)}return t===e}function bD(n){return n instanceof Ef&&n.getTypeName()||null}var IL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function i_(n){return n=String(n),n.match(IL)?n:"unsafe:"+n}var SL=/^>|^->|<!--|-->|--!>|<!-$/g,TL=/(<|>)/g,CL="\u200B$1\u200B";function xL(n){return n.replace(SL,e=>e.replace(TL,CL))}function wD(n,e){return n.createText(e)}function DL(n,e,t){n.setValue(e,t)}function ID(n,e){return n.createComment(xL(e))}function o_(n,e,t){return n.createElement(e,t)}function bf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function SD(n,e,t){n.appendChild(e,t)}function $C(n,e,t,r,i){r!==null?bf(n,e,t,r,i):SD(n,e,t)}function s_(n,e,t,r){n.removeChild(null,e,t,r)}function TD(n){n.textContent=""}function AL(n,e,t){n.setAttribute(e,"style",t)}function ML(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function CD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&zF(n,e,r),i!==null&&ML(n,e,i),o!==null&&AL(n,e,o)}var nu=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(nu||{});function ii(n){let e=DD();return e?e.sanitize(nu.URL,n)||"":Hf(n,"URL")?Ka(n):i_(wr(n))}function xD(n){let e=DD();if(e)return HC(e.sanitize(nu.RESOURCE_URL,n)||"");if(Hf(n,"ResourceURL"))return HC(Ka(n));throw new te(904,!1)}var RL=new Set(["embed","frame","iframe","media","script"]),NL=new Set(["base","link","script"]);function PL(n,e){return e==="src"&&RL.has(n)||e==="href"&&NL.has(n)||e==="xlink:href"&&n==="script"?xD:ii}function a_(n,e,t){return PL(e,t)(n)}function DD(){let n=De();return n&&n[Yr].sanitizer}function AD(n){return n.ownerDocument.body}function MD(n){return n instanceof Function?n():n}function kL(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var RD="ng-template";function OL(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&kL(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(c_(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function c_(n){return n.type===4&&n.value!==RD}function FL(n,e,t){let r=n.type===4&&!t?RD:n.value;return e===r}function LL(n,e,t){let r=4,i=n.attrs,o=i!==null?BL(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Tr(r)&&!Tr(c))return!1;if(s&&Tr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!FL(n,c,t)||c===""&&e.length===1){if(Tr(r))return!1;s=!0}}else if(r&8){if(i===null||!OL(n,i,c,t)){if(Tr(r))return!1;s=!0}}else{let u=e[++a],d=VL(c,i,c_(n),t);if(d===-1){if(Tr(r))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&u!==f){if(Tr(r))return!1;s=!0}}}}return Tr(r)||s}function Tr(n){return(n&1)===0}function VL(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return jL(e,n)}function UL(n,e,t=!1){for(let r=0;r<e.length;r++)if(LL(n,e[r],t))return!0;return!1}function BL(n){for(let e=0;e<n.length;e++){let t=n[e];if(Sx(t))return e}return n.length}function jL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function GC(n,e){return n?":not("+e.trim()+")":e}function HL(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Tr(s)&&(e+=GC(o,i),i=""),r=s,o=o||!Tr(r);t++}return i!==""&&(e+=GC(o,i)),e}function $L(n){return n.map(HL).join(",")}function GL(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Tr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Xt={};function l_(n,e,t,r,i,o,s,a,c,u,d){let f=Ye+r,g=f+i,m=zL(f,g),T=typeof u=="function"?u():u;return m[me]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:d}}function zL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Xt);return t}function qL(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=l_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function u_(n,e,t,r,i,o,s,a,c,u,d){let f=e.blueprint.slice();return f[Mn]=i,f[Re]=r|4|128|8|64|1024,(u!==null||n&&n[Re]&2048)&&(f[Re]|=2048),M0(f),f[Nt]=f[Is]=n,f[Pt]=t,f[Yr]=s||n&&n[Yr],f[at]=a||n&&n[at],f[Gn]=c||n&&n[Gn]||null,f[ir]=o,f[Fi]=aL(),f[Fn]=d,f[C0]=u,f[Rn]=e.type==2?n[Rn]:f,f}function WL(n,e,t){let r=or(e,n),i=qL(t),o=n[Yr].rendererFactory,s=d_(n,u_(n,i,null,ND(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function ND(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function PD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function d_(n,e){return n[Oa]?n[T0][rr]=e:n[Oa]=e,n[T0]=e,e}function b(n=1){kD(kt(),De(),cr()+n,!1)}function kD(n,e,t,r){if(!r)if((e[Re]&3)===3){let o=n.preOrderCheckHooks;o!==null&&sf(e,o,t)}else{let o=n.preOrderHooks;o!==null&&af(e,o,0,t)}Ro(t)}var $f=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})($f||{});function Cv(n,e,t,r){let i=xe(null);try{let[o,s,a]=n.inputs[t],c=null;(s&$f.SignalBased)!==0&&(c=e[o][Pn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):vx(e,c,o,r)}finally{xe(i)}}var ni=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ni||{}),KL;function h_(n,e){return KL(n,e)}var Os=new Set,Gf=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Gf||{}),ko=new re(""),zC=new Set;function Jn(n){zC.has(n)||(zC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var f_=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}return n})(),OD=[0,1,2,3],FD=(()=>{class n{ngZone=G(An);scheduler=G(Co);errorHandler=G(zr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){G(ko,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Ze(We.AfterRenderHooksStart),this.executing=!0;for(let r of OD)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Ze(We.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[Ts]??=[]).push(t),Fa(r),r[Re]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Gf.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}return n})(),wf=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ts];e&&(this.view[Ts]=e.filter(t=>t!==this))}};function ru(n,e){let t=e?.injector??G(On);return Jn("NgAfterNextRender"),YL(n,t,e,!0)}function QL(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function YL(n,e,t,r){let i=e.get(f_);i.impl??=e.get(FD);let o=e.get(ko,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Sr):null,a=e.get(ef,null,{optional:!0}),c=new wf(i.impl,QL(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var LD=new re("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:G(At)})});function VD(n,e,t){let r=n.get(LD);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function JL(n,e){let t=n.get(LD);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function ZL(n,e){for(let[t,r]of e)VD(n,r.animateFns)}function qC(n,e,t,r){let i=n?.[Cs]?.enter;e!==null&&i&&i.has(t.index)&&ZL(r,i)}function La(n,e,t,r,i,o,s,a){if(i!=null){let c,u=!1;Wn(i)?c=i:qn(i)&&(u=!0,i=i[Mn]);let d=Kn(i);n===0&&r!==null?(qC(a,r,o,t),s==null?SD(e,r,d):bf(e,r,d,s||null,!0)):n===1&&r!==null?(qC(a,r,o,t),bf(e,r,d,s||null,!0)):n===2?WC(a,o,t,f=>{s_(e,d,u,f)}):n===3&&WC(a,o,t,()=>{e.destroyNode(d)}),c!=null&&dV(e,n,t,c,o,r,s)}}function XL(n,e){UD(n,e),e[Mn]=null,e[ir]=null}function eV(n,e,t,r,i,o){r[Mn]=i,r[ir]=e,qf(n,r,t,1,i,o)}function UD(n,e){e[Yr].changeDetectionScheduler?.notify(9),qf(n,e,e[at],2,null,null)}function tV(n){let e=n[Oa];if(!e)return av(n[me],n);for(;e;){let t=null;if(qn(e))t=e[Oa];else{let r=e[Ct];r&&(t=r)}if(!t){for(;e&&!e[rr]&&e!==n;)qn(e)&&av(e[me],e),e=e[Nt];e===null&&(e=n),qn(e)&&av(e[me],e),t=e&&e[rr]}e=t}}function p_(n,e){let t=n[xs],r=t.indexOf(e);t.splice(r,1)}function zf(n,e){if(Mo(e))return;let t=e[at];t.destroyNode&&qf(n,e,t,3,null,null),tV(e)}function av(n,e){if(Mo(e))return;let t=xe(null);try{e[Re]&=-129,e[Re]|=256,e[zn]&&vl(e[zn]),iV(n,e),rV(n,e),e[me].type===1&&e[at].destroy();let r=e[Ao];if(r!==null&&Wn(e[Nt])){r!==e[Nt]&&p_(r,e);let i=e[Jr];i!==null&&i.detachView(n)}bv(e)}finally{xe(t)}}function WC(n,e,t,r){let i=n?.[Cs];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Os.add(n[Fi]),VD(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let u=s.animateFns[c],{promise:d}=u();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),nV(n,r)}else n&&Os.delete(n[Fi]),r(!1)},i)}function nV(n,e){let t=n[Cs]?.running;if(t){t.then(()=>{n[Cs].running=void 0,Os.delete(n[Fi]),e(!0)});return}e(!1)}function rV(n,e){let t=n.cleanup,r=e[ka];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ka]=null);let i=e[Ni];if(i!==null){e[Ni]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[kl];if(o!==null){e[kl]=null;for(let s of o)s.destroy()}}function iV(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ks)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Ze(We.LifecycleHookStart,a,c);try{c.call(a)}finally{Ze(We.LifecycleHookEnd,a,c)}}else{Ze(We.LifecycleHookStart,i,o);try{o.call(i)}finally{Ze(We.LifecycleHookEnd,i,o)}}}}}function oV(n,e,t){return sV(n,e.parent,t)}function sV(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Mn];if(Li(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===xr.None||i===xr.Emulated)return null}return or(r,t)}function aV(n,e,t){return lV(n,e,t)}function cV(n,e,t){return n.type&40?or(n,t):null}var lV=cV,KC;function g_(n,e,t,r){let i=oV(n,r,e),o=e[at],s=r.parent||e[ir],a=aV(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)$C(o,i,t[c],a,!1);else $C(o,i,t,a,!1);KC!==void 0&&KC(o,r,e,t,i)}function Gl(n,e){if(e!==null){let t=e.type;if(t&3)return or(e,n);if(t&4)return xv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Gl(n,r);{let i=n[e.index];return Wn(i)?xv(-1,i):Kn(i)}}else{if(t&128)return Gl(n,e.next);if(t&32)return h_(e,n)()||Kn(n[e.index]);{let r=BD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=To(n[Rn]);return Gl(i,r)}else return Gl(n,e.next)}}}return null}function BD(n,e){if(e!==null){let r=n[Rn][ir],i=e.projection;return r.projection[i]}return null}function xv(n,e){let t=Ct+n+1;if(t<e.length){let r=e[t],i=r[me].firstChild;if(i!==null)return Gl(r,i)}return e[Zr]}function m_(n,e,t,r,i,o,s){for(;t!=null;){let a=r[Gn];if(t.type===128){t=t.next;continue}let c=r[t.index],u=t.type;if(s&&e===0&&(c&&Ha(Kn(c),r),t.flags|=2),!Uf(t))if(u&8)m_(n,e,t.child,r,i,o,!1),La(e,n,a,i,c,t,o,r);else if(u&32){let d=h_(t,r),f;for(;f=d();)La(e,n,a,i,f,t,o,r);La(e,n,a,i,c,t,o,r)}else u&16?uV(n,e,r,t,i,o):La(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function qf(n,e,t,r,i,o){m_(t,r,n.firstChild,e,i,o,!1)}function uV(n,e,t,r,i,o){let s=t[Rn],c=s[ir].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];La(e,n,t[Gn],i,d,r,o,t)}else{let u=c,d=s[Nt];_f(r)&&(u.flags|=128),m_(n,e,u,d,i,o,!0)}}function dV(n,e,t,r,i,o,s){let a=r[Zr],c=Kn(r);a!==c&&La(e,n,t,o,a,i,s);for(let u=Ct;u<r.length;u++){let d=r[u];qf(d[me],d,n,e,o,a)}}function hV(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:ni.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ni.Important),n.setStyle(t,r,i,o))}}function jD(n,e,t,r,i){let o=cr(),s=r&2;try{Ro(-1),s&&e.length>Ye&&kD(n,e,Ye,!1);let a=s?We.TemplateUpdateStart:We.TemplateCreateStart;Ze(a,i,t),t(r,i)}finally{Ro(o);let a=s?We.TemplateUpdateEnd:We.TemplateCreateEnd;Ze(a,i,t)}}function y_(n,e,t){EV(n,e,t),(t.flags&64)===64&&bV(n,e,t)}function Wf(n,e,t=or){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function fV(n,e,t,r){let o=r.get(Zv,Zx)||t===xr.ShadowDom||t===xr.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return pV(s),s}function pV(n){HD(n)}var HD=()=>null;function gV(n){Fx(n)?TD(n):vL(n)}function $D(){HD=gV}function mV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function yV(n,e,t,r,i,o){let s=e[me];if(__(n,s,e,t,r)){Li(n)&&_V(e,n.index);return}n.type&3&&(t=mV(t)),vV(n,e,t,r,i,o)}function vV(n,e,t,r,i,o){if(n.type&3){let s=or(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function _V(n,e){let t=sr(e,n);t[Re]&16||(t[Re]|=64)}function EV(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Li(t)&&WL(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||yf(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=ql(e,n,s,t);if(Ha(c,e),o!==null&&TV(e,s-r,c,a,t,o),Xr(a)){let u=sr(t.index,e);u[Pt]=ql(e,n,s,t)}}}function bV(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=bC();try{Ro(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];Qh(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&wV(c,u)}}finally{Ro(-1),Qh(s)}}function wV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function GD(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];UL(e,o.selectors,!1)&&(r??=[],Xr(o)?r.unshift(o):r.push(o))}return r}function IV(n,e,t,r,i,o){let s=or(n,e);SV(e[at],s,o,n.value,t,r,i)}function SV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?wr(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function TV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];Cv(r,t,c,u)}}function zD(n,e,t,r,i){let o=Ye+t,s=e[me],a=i(s,e,n,r,t);e[o]=a,Ms(n,!0);let c=n.type===2;return c?(CD(e[at],a,n),(fC()===0||Fl(n))&&Ha(a,e),pC()):Ha(a,e),Xh()&&(!c||!Uf(n))&&g_(s,e,a,n),n}function qD(n){let e=n;return j0()?yC():(e=e.parent,Ms(e,!1)),e}function v_(n,e){let t=n[Gn];if(!t)return;let r;try{r=t.get(Qn,null)}catch{r=null}r?.(e)}function __(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],d=s[c+1],f=e.data[u];Cv(f,t[u],d,i),a=!0}if(o)for(let c of o){let u=t[c],d=e.data[c];Cv(d,u,r,i),a=!0}return a}function CV(n,e){let t=sr(e,n),r=t[me];xV(r,t);let i=t[Mn];i!==null&&t[Fn]===null&&(t[Fn]=fD(i,t[Gn])),Ze(We.ComponentStart);try{E_(r,t,t[Pt])}finally{Ze(We.ComponentEnd,t[Pt])}}function xV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function E_(n,e,t){Jh(e);try{let r=n.viewQuery;r!==null&&Tv(1,r,t);let i=n.template;i!==null&&jD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Jr]?.finishViewCreation(n),n.staticContentQueries&&_D(n,e),n.staticViewQueries&&Tv(2,n.viewQuery,t);let o=n.components;o!==null&&DV(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Re]&=-5,Zh()}}function DV(n,e){for(let t=0;t<e.length;t++)CV(n,e[t])}function iu(n,e,t,r){let i=xe(null);try{let o=e.tView,a=n[Re]&4096?4096:16,c=u_(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[Ao]=u;let d=n[Jr];return d!==null&&(c[Jr]=d.createEmbeddedView(o)),E_(o,c,t),c}finally{xe(i)}}function $a(n,e){return!e||e.firstChild===null||_f(n)}function Kl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Kn(o)),Wn(o)&&WD(o,r);let s=t.type;if(s&8)Kl(n,e,t.child,r);else if(s&32){let a=h_(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=BD(e,t);if(Array.isArray(a))r.push(...a);else{let c=To(e[Rn]);Kl(c[me],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function WD(n,e){for(let t=Ct;t<n.length;t++){let r=n[t],i=r[me].firstChild;i!==null&&Kl(r[me],r,i,e)}n[Zr]!==n[Mn]&&e.push(n[Zr])}function KD(n){if(n[Ts]!==null){for(let e of n[Ts])e.impl.addSequence(e);n[Ts].length=0}}var QD=[];function AV(n){return n[zn]??MV(n)}function MV(n){let e=QD.pop()??Object.create(NV);return e.lView=n,e}function RV(n){n.lView[zn]!==n&&(n.lView=null,QD.push(n))}var NV=pe(V({},gl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Fa(n.lView)},consumerOnSignalRead(){this.lView[zn]=this}});function PV(n){let e=n[zn]??Object.create(kV);return e.lView=n,e}var kV=pe(V({},gl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=To(n.lView);for(;e&&!YD(e[me]);)e=To(e);e&&R0(e)},consumerOnSignalRead(){this.lView[zn]=this}});function YD(n){return n.type!==2}function JD(n){if(n[kl]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[kl])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Re]&8192)}}var OV=100;function ZD(n,e=0){let r=n[Yr].rendererFactory,i=!1;i||r.begin?.();try{FV(n,e)}finally{i||r.end?.()}}function FV(n,e){let t=$0();try{G0(!0),Dv(n,e);let r=0;for(;Ul(n);){if(r===OV)throw new te(103,!1);r++,Dv(n,1)}}finally{G0(t)}}function LV(n,e,t,r){if(Mo(e))return;let i=e[Re],o=!1,s=!1;Jh(e);let a=!0,c=null,u=null;o||(YD(n)?(u=AV(e),c=yl(u)):nh()===null?(a=!1,u=PV(e),c=yl(u)):e[zn]&&(vl(e[zn]),e[zn]=null));try{M0(e),vC(n.bindingStartIndex),t!==null&&jD(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let m=n.preOrderCheckHooks;m!==null&&sf(e,m,null)}else{let m=n.preOrderHooks;m!==null&&af(e,m,0,null),iv(e,0)}if(s||VV(e),JD(e),XD(e,0),n.contentQueries!==null&&_D(n,e),!o)if(d){let m=n.contentCheckHooks;m!==null&&sf(e,m)}else{let m=n.contentHooks;m!==null&&af(e,m,1),iv(e,1)}BV(n,e);let f=n.components;f!==null&&t1(e,f,0);let g=n.viewQuery;if(g!==null&&Tv(2,g,r),!o)if(d){let m=n.viewCheckHooks;m!==null&&sf(e,m)}else{let m=n.viewHooks;m!==null&&af(e,m,2),iv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[qh]){for(let m of e[qh])m();e[qh]=null}o||(KD(e),e[Re]&=-73)}catch(d){throw o||Fa(e),d}finally{u!==null&&(rh(u,c),a&&RV(u)),Zh()}}function XD(n,e){for(let t=Ux(n);t!==null;t=Bx(t))for(let r=Ct;r<t.length;r++){let i=t[r];e1(i,e)}}function VV(n){for(let e=Ux(n);e!==null;e=Bx(e)){if(!(e[Re]&2))continue;let t=e[xs];for(let r=0;r<t.length;r++){let i=t[r];R0(i)}}}function UV(n,e,t){Ze(We.ComponentStart);let r=sr(e,n);try{e1(r,t)}finally{Ze(We.ComponentEnd,r[Pt])}}function e1(n,e){Wh(n)&&Dv(n,e)}function Dv(n,e){let r=n[me],i=n[Re],o=n[zn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ih(o)),s||=!1,o&&(o.dirty=!1),n[Re]&=-9217,s)LV(r,n,r.template,n[Pt]);else if(i&8192){let a=xe(null);try{JD(n),XD(n,1);let c=r.components;c!==null&&t1(n,c,1),KD(n)}finally{xe(a)}}}function t1(n,e,t){for(let r=0;r<e.length;r++)UV(n,e[r],t)}function BV(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ro(~i);else{let o=i,s=t[++r],a=t[++r];EC(s,o);let c=e[o];Ze(We.HostBindingsUpdateStart,c);try{a(2,c)}finally{Ze(We.HostBindingsUpdateEnd,c)}}}}finally{Ro(-1)}}function Kf(n,e){let t=$0()?64:1088;for(n[Yr].changeDetectionScheduler?.notify(e);n;){n[Re]|=t;let r=To(n);if(Ds(n)&&!r)return n;n=r}return null}function n1(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function r1(n,e){let t=Ct+e;if(t<n.length)return n[t]}function ou(n,e,t,r=!0){let i=e[me];if(jV(i,e,n,t),r){let s=xv(t,n),a=e[at],c=a.parentNode(n[Zr]);c!==null&&eV(i,n[ir],a,e,c,s)}let o=e[Fn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function b_(n,e){let t=Ql(n,e);return t!==void 0&&zf(t[me],t),t}function Ql(n,e){if(n.length<=Ct)return;let t=Ct+e,r=n[t];if(r){let i=r[Ao];i!==null&&i!==n&&p_(i,r),e>0&&(n[t-1][rr]=r[rr]);let o=Rl(n,Ct+e);XL(r[me],r);let s=o[Jr];s!==null&&s.detachView(o[me]),r[Nt]=null,r[rr]=null,r[Re]&=-129}return r}function jV(n,e,t,r){let i=Ct+r,o=t.length;r>0&&(t[i-1][rr]=e),r<o-Ct?(e[rr]=t[i],E0(t,Ct+r,e)):(t.push(e),e[rr]=null),e[Nt]=t;let s=e[Ao];s!==null&&t!==s&&i1(s,e);let a=e[Jr];a!==null&&a.insertView(n),Kh(e),e[Re]|=128}function i1(n,e){let t=n[xs],r=e[Nt];if(qn(r))n[Re]|=2;else{let i=r[Nt][Rn];e[Rn]!==i&&(n[Re]|=2)}t===null?n[xs]=[e]:t.push(e)}var No=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[me];return Kl(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Pt]}set context(e){this._lView[Pt]=e}get destroyed(){return Mo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Nt];if(Wn(e)){let t=e[Ol],r=t?t.indexOf(this):-1;r>-1&&(Ql(e,r),Rl(t,r))}this._attachedToViewContainer=!1}zf(this._lView[me],this._lView)}onDestroy(e){N0(this._lView,e)}markForCheck(){Kf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Re]&=-129}reattach(){Kh(this._lView),this._lView[Re]|=128}detectChanges(){this._lView[Re]|=1024,ZD(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ds(this._lView),t=this._lView[Ao];t!==null&&!e&&p_(t,this._lView),UD(this._lView[me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=e;let t=Ds(this._lView),r=this._lView[Ao];r!==null&&!t&&i1(r,this._lView),Kh(this._lView)}};var Po=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=HV;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=iu(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new No(o)}}return n})();function HV(){return Qf(yn(),De())}function Qf(n,e){return n.type&4?new Po(e,n,qa(n,e)):null}function Qa(n,e,t,r,i){let o=n.data[e];if(o===null)o=$V(n,e,t,r,i),_C()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=mC();o.injectorIndex=s===null?-1:s.injectorIndex}return Ms(o,!0),o}function $V(n,e,t,r,i){let o=B0(),s=j0(),a=s?o:o&&o.parent,c=n.data[e]=zV(n,a,t,e,r,i);return GV(n,c,o,s),c}function GV(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function zV(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return L0()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var qV=new RegExp(`^(\\d+)*(${Gx}|${$x})*(.*)`);function WV(n){let e=n.match(qV),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,u,d]of o.matchAll(/(f|n)(\d*)/g)){let f=parseInt(d,10)||1;a.push(u,f)}return[s,...a]}function KV(n){return!n.prev&&n.parent?.type===8}function cv(n){return n.index-Ye}function QV(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Yf(n,e,t,r){let i=cv(r),o=QV(n,i);if(o===void 0){let s=n.data[Kx];if(s?.[i])o=JV(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(KV(r)){let u=cv(r.parent);o=Sv(n,u)}else{let u=or(c,t);if(a)o=u.firstChild;else{let d=cv(c),f=Sv(n,d);if(c.type===2&&f){let m=r_(n,d)+1;o=Jf(m,f)}else o=u.nextSibling}}}}return o}function Jf(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function YV(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case dL:t=t.firstChild;break;case hL:t=t.nextSibling;break}}return t}function JV(n,e){let[t,...r]=WV(n),i;if(t===$x)i=e[Rn][Mn];else if(t===Gx)i=AD(e[Rn][Mn]);else{let o=Number(t);i=Kn(e[o+Ye])}return YV(i,r)}var ZV=!1;function o1(n){ZV=n}function XV(n){let e=n[Fn];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[at];for(let o of r.values())e4(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function e4(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Ye);i&&s_(n,i,!1)}}function Zf(n){let e=n[Ir]??[],r=n[Nt][at],i=[];for(let o of e)o.data[Qx]!==void 0?i.push(o):s1(o,r);n[Ir]=i}function t4(n){let{lContainer:e}=n,t=e[Ir];if(t===null)return;let i=e[Nt][at];for(let o of t)s1(o,i)}function s1(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Wl];for(;t<i;){let o=r.nextSibling;s_(e,r,!1),r=o,t++}}}function Xf(n){Zf(n);let e=n[Mn];qn(e)&&If(e);for(let t=Ct;t<n.length;t++)If(n[t])}function If(n){XV(n);let e=n[me];for(let t=Ye;t<e.bindingStartIndex;t++)if(Wn(n[t])){let r=n[t];Xf(r)}else qn(n[t])&&If(n[t])}function w_(n){let e=n._views;for(let t of e){let r=pD(t);r!==null&&r[Mn]!==null&&(qn(r)?If(r):Xf(r))}}function n4(n,e,t,r){n!==null&&(t.cleanup(e),Xf(n.lContainer),w_(r))}function r4(n,e){let t=[];for(let r of e)for(let i=0;i<(r[Yv]??1);i++){let o={data:r,firstChild:null};r[Wl]>0&&(o.firstChild=n,n=Jf(r[Wl],n)),t.push(o)}return[n,t]}var a1=()=>null,c1=()=>null;function l1(){a1=i4,c1=o4}function i4(n,e){return d1(n,e)?n[Ir].shift():(Zf(n),null)}function Sf(n,e){return a1(n,e)}function o4(n,e,t){if(e.tView.ssrId===null)return null;let r=Sf(n,e.tView.ssrId);return t[me].firstUpdatePass&&r===null&&s4(t,e),r}function u1(n,e,t){return c1(n,e,t)}function s4(n,e){let t=e;for(;t;){if(QC(n,t))return;if((t.flags&256)===256)break;t=t.prev}for(t=e.next;t&&(t.flags&512)===512;){if(QC(n,t))return;t=t.next}}function d1(n,e){let t=n[Ir];return!e||t===null||t.length===0?!1:t[0].data[Wx]===e}function QC(n,e){let t=e.tView?.ssrId;if(t==null)return!1;let r=n[e.index];return Wn(r)&&d1(r,t)?(Zf(r),!0):!1}var h1=class{},ep=class{},Av=class{resolveComponentFactory(e){throw new te(917,!1)}},su=class{static NULL=new Av},Fs=class{},Bs=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>a4()}return n})();function a4(){let n=De(),e=yn(),t=sr(e.index,n);return(qn(t)?t:n)[at]}var f1=(()=>{class n{static \u0275prov=ne({token:n,providedIn:"root",factory:()=>null})}return n})();var uf={},Ua=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,uf,r);return i!==uf||t===uf?i:this.parentInjector.get(e,t,r)}};function Tf(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Lh(i,a);else if(o==2){let c=a,u=e[++s];r=Lh(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function _e(n,e=0){let t=De();if(t===null)return we(n,e);let r=yn();return Rx(r,t,dn(n),e)}function p1(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,u=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,c,u]=d.resolveHostDirectives(s);break}u4(n,e,t,a,o,c,u)}o!==null&&r!==null&&c4(t,r,o)}function c4(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new te(-301,!1);r.push(e[i],o)}}function l4(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function u4(n,e,t,r,i,o,s){let a=r.length,c=null;for(let g=0;g<a;g++){let m=r[g];c===null&&Xr(m)&&(c=m,l4(n,t,g)),_v(yf(t,e),n,m.type)}m4(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let g=0;g<a;g++){let m=r[g];m.providersResolver&&m.providersResolver(m)}let u=!1,d=!1,f=PD(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let m=r[g];if(t.mergedAttrs=ja(t.mergedAttrs,m.hostAttrs),h4(n,t,e,f,m),g4(f,m,i),s!==null&&s.has(m)){let[M,L]=s.get(m);t.directiveToIndex.set(m.type,[f,M+t.directiveStart,L+t.directiveStart])}else(o===null||!o.has(m))&&t.directiveToIndex.set(m.type,f);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let T=m.type.prototype;!u&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!d&&(T.ngOnChanges||T.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),f++}d4(n,t,o)}function d4(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))YC(0,e,i,r),YC(1,e,i,r),ZC(e,r,!1);else{let o=t.get(i);JC(0,e,o,r),JC(1,e,o,r),ZC(e,r,!0)}}}function YC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),g1(e,o)}}function JC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),g1(e,s)}}function g1(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function ZC(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||c_(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let d of u)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let u=o[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){s??=[],s.push(u[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function h4(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=So(i.type,!0)),s=new ks(o,Xr(i),_e,null);n.blueprint[r]=s,t[r]=s,f4(n,e,r,PD(n,t,i.hostVars,Xt),i)}function f4(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;p4(s)!=a&&s.push(a),s.push(t,r,o)}}function p4(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function g4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Xr(e)&&(t[""]=n)}}function m4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function m1(n,e,t,r,i,o,s,a){let c=e[me],u=c.consts,d=ar(u,s),f=Qa(c,n,t,r,d);return o&&p1(c,e,f,ar(u,a),i),f.mergedAttrs=ja(f.mergedAttrs,f.attrs),f.attrs!==null&&Tf(f,f.attrs,!1),f.mergedAttrs!==null&&Tf(f,f.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,f),f}function y1(n,e){wx(n,e),x0(e)&&n.queries.elementEnd(e)}function y4(n,e,t,r,i,o){let s=e.consts,a=ar(s,i),c=Qa(e,n,t,r,a);if(c.mergedAttrs=ja(c.mergedAttrs,c.attrs),o!=null){let u=ar(s,o);c.localNames=[];for(let d=0;d<u.length;d+=2)c.localNames.push(u[d],-1)}return c.attrs!==null&&Tf(c,c.attrs,!1),c.mergedAttrs!==null&&Tf(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function I_(n){return _1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function v1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function _1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function S_(n,e,t){return n[e]=t}function v4(n,e){return n[e]}function lr(n,e,t){if(t===Xt)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function T_(n,e,t,r){let i=lr(n,e,t);return lr(n,e+1,r)||i}function _4(n,e,t,r,i){let o=T_(n,e,t,r);return lr(n,e+2,i)||o}function df(n,e,t){return function r(i){let o=Li(n)?sr(n.index,e):e;Kf(o,5);let s=e[Pt],a=XC(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=XC(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function XC(n,e,t,r){let i=xe(null);try{return Ze(We.OutputStart,e,t),t(r)!==!1}catch(o){return v_(n,o),!1}finally{Ze(We.OutputEnd,e,t),xe(i)}}function E1(n,e,t,r,i,o,s,a){let c=Fl(n),u=!1,d=null;if(!r&&c&&(d=b4(e,t,o,n.index)),d!==null){let f=d.__ngLastListenerFn__||d;f.__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,u=!0}else{let f=or(n,t),g=r?r(f):f;fL(t,g,o,a);let m=i.listen(g,o,a);if(!E4(o)){let T=r?M=>r(Kn(M[n.index])):n.index;b1(T,e,t,o,a,m,!1)}}return u}function E4(n){return n.startsWith("animation")||n.startsWith("transition")}function b4(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ka],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function b1(n,e,t,r,i,o,s){let a=e.firstCreatePass?k0(e):null,c=P0(t),u=c.length;c.push(i,o),a&&a.push(r,n,u,(u+1)*(s?-1:1))}function ex(n,e,t,r,i,o){let s=e[t],a=e[me],u=a.data[t].outputs[r],f=s[u].subscribe(o);b1(n.index,a,e,i,o,f,!0)}var Mv=Symbol("BINDING");var Cf=class extends su{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Oi(e);return new Ga(t,this.ngModule)}};function w4(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&$f.SignalBased)!==0};return i&&(o.transform=i),o})}function I4(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function S4(n,e,t){let r=e instanceof At?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Ua(t,r):t}function T4(n){let e=n.get(Fs,null);if(e===null)throw new te(407,!1);let t=n.get(f1,null),r=n.get(Co,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function C4(n,e){let t=w1(n);return o_(e,t,t==="svg"?D0:t==="math"?aC:null)}function w1(n){return(n.selectors[0][0]||"div").toLowerCase()}var Ga=class extends ep{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=w4(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=I4(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=$L(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Ze(We.DynamicComponentStart);let a=xe(null);try{let c=this.componentDef,u=x4(r,c,s,o),d=S4(c,i||this.ngModule,e),f=T4(d),g=f.rendererFactory.createRenderer(null,c),m=r?fV(g,r,c.encapsulation,d):C4(c,g),T=s?.some(tx)||o?.some(k=>typeof k!="function"&&k.bindings.some(tx)),M=u_(null,u,null,512|ND(c),null,null,f,g,d,null,fD(m,d,!0));M[Ye]=m,Jh(M);let L=null;try{let k=m1(Ye,M,2,"#host",()=>u.directiveRegistry,!0,0);CD(g,m,k),Ha(m,M),y_(u,M,k),ED(u,k,M),y1(u,k),t!==void 0&&A4(k,this.ngContentSelectors,t),L=sr(k.index,M),M[Pt]=L[Pt],E_(u,M,null)}catch(k){throw L!==null&&bv(L),bv(M),k}finally{Ze(We.DynamicComponentEnd),Zh()}return new xf(this.componentType,M,!!T)}finally{xe(a)}}};function x4(n,e,t,r){let i=n?["ng-version","21.1.1"]:GL(e.selectors[0]),o=null,s=null,a=0;if(t)for(let d of t)a+=d[Mv].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let f=r[d];if(typeof f!="function")for(let g of f.bindings){a+=g[Mv].requiredVars;let m=d+1;g.create&&(g.targetIdx=m,(o??=[]).push(g)),g.update&&(g.targetIdx=m,(s??=[]).push(g))}}let c=[e];if(r)for(let d of r){let f=typeof d=="function"?d:d.type,g=Uh(f);c.push(g)}return l_(0,null,D4(o,s),1,a,c,null,null,null,[i],null)}function D4(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function tx(n){let e=n[Mv].kind;return e==="input"||e==="twoWay"}var xf=class extends h1{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=As(t[me],Ye),this.location=qa(this._tNode,t),this.instance=sr(this._tNode.index,t)[Pt],this.hostView=this.changeDetectorRef=new No(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=__(r,i[me],i,e,t);this.previousInputValues.set(e,t);let s=sr(r.index,i);Kf(s,1)}get injector(){return new Ps(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function A4(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var ji=(()=>{class n{static __NG_ELEMENT_ID__=M4}return n})();function M4(){let n=yn();return S1(n,De())}var R4=ji,I1=class extends R4{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return qa(this._hostTNode,this._hostLView)}get injector(){return new Ps(this._hostTNode,this._hostLView)}get parentInjector(){let e=Wv(this._hostTNode,this._hostLView);if(Tx(e)){let t=gf(e,this._hostLView),r=pf(e),i=t[me].data[r+8];return new Ps(i,t)}else return new Ps(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=nx(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ct}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Sf(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,$a(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!LF(e),u;if(c)u=t;else{let L=t||{};u=L.index,r=L.injector,i=L.projectableNodes,o=L.environmentInjector||L.ngModuleRef,s=L.directives,a=L.bindings}let d=c?e:new Ga(Oi(e)),f=r||this.parentInjector;if(!o&&d.ngModule==null){let k=(c?f:this.parentInjector).get(At,null);k&&(o=k)}let g=Oi(d.componentType??{}),m=Sf(this._lContainer,g?.id??null),T=m?.firstChild??null,M=d.create(f,i,T,o,s,a);return this.insertImpl(M.hostView,u,$a(this._hostTNode,m)),M}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(lC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Nt],u=new I1(c,c[ir],c[Nt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return ou(s,i,o,r),e.attachToViewContainerRef(),E0(lv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=nx(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Ql(this._lContainer,t);r&&(Rl(lv(this._lContainer),t),zf(r[me],r))}detach(e){let t=this._adjustIndex(e,-1),r=Ql(this._lContainer,t);return r&&Rl(lv(this._lContainer),t)!=null?new No(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function nx(n){return n[Ol]}function lv(n){return n[Ol]||(n[Ol]=[])}function S1(n,e){let t,r=e[n.index];return Wn(r)?t=r:(t=n1(r,e,null,n),e[n.index]=t,d_(e,t)),T1(t,e,n,r),new I1(t,n,e)}function N4(n,e){let t=n[at],r=t.createComment(""),i=or(e,n),o=t.parentNode(i);return bf(t,o,r,t.nextSibling(i),!1),r}var T1=C1,C_=()=>!1;function P4(n,e,t){return C_(n,e,t)}function C1(n,e,t,r){if(n[Zr])return;let i;t.type&8?i=Kn(r):i=N4(e,t),n[Zr]=i}function k4(n,e,t){if(n[Zr]&&n[Ir])return!0;let r=t[Fn],i=e.index-Ye;if(!r||Lx(e)||yD(r,i))return!1;let s=Sv(r,i),a=r.data[Lf]?.[i],[c,u]=r4(s,a);return n[Zr]=c,n[Ir]=u,!0}function O4(n,e,t,r){C_(n,t,e)||C1(n,e,t,r)}function x1(){T1=O4,C_=k4}var Rv=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Nv=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)x_(e,t).matches!==null&&this.queries[t].setDirty()}},Pv=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=$4(e):this.predicate=e}},kv=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Ov=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,F4(t,o)),this.matchTNodeWithReadOption(e,t,cf(t,e,o,!1,!1))}else r===Po?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,cf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Dr||i===ji||i===Po&&t.type&4)this.addMatch(t.index,-2);else{let o=cf(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function F4(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function L4(n,e){return n.type&11?qa(n,e):n.type&4?Qf(n,e):null}function V4(n,e,t,r){return t===-1?L4(e,n):t===-2?U4(n,e,r):ql(n,n[me],t,e)}function U4(n,e,t){if(t===Dr)return qa(e,n);if(t===Po)return Qf(e,n);if(t===ji)return S1(e,n)}function D1(n,e,t,r){let i=e[Jr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let d=o[u];a.push(V4(e,d,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function Fv(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=D1(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],d=e[-c];for(let f=Ct;f<d.length;f++){let g=d[f];g[Ao]===g[Nt]&&Fv(g[me],g,u,r)}if(d[xs]!==null){let f=d[xs];for(let g=0;g<f.length;g++){let m=f[g];Fv(m[me],m,u,r)}}}}}return r}function B4(n,e){return n[Jr].queries[e].queryList}function j4(n,e,t){let r=new vf((t&4)===4);return hC(n,e,r,r.destroy),(e[Jr]??=new Nv).queries.push(new Rv(r))-1}function H4(n,e,t){let r=kt();return r.firstCreatePass&&(G4(r,new Pv(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),j4(r,De(),e)}function $4(n){return n.split(",").map(e=>e.trim())}function G4(n,e,t){n.queries===null&&(n.queries=new kv),n.queries.track(new Ov(e,t))}function x_(n,e){return n.queries.getByIndex(e)}function z4(n,e){let t=n[me],r=x_(t,e);return r.crossesNgTemplate?Fv(t,n,e,[]):D1(t,n,r,e)}var Ls=class{},tp=class{};var Df=class extends Ls{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Cf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=m0(e);this._bootstrapComponents=MD(o.bootstrap),this._r3Injector=J0(e,t,[{provide:Ls,useValue:this},{provide:su,useValue:this.componentFactoryResolver},...r],Pi(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Af=class extends tp{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Df(this.moduleType,e,[])}};var Yl=class extends Ls{injector;componentFactoryResolver=new Cf(this);instance=null;constructor(e){super();let t=new bs([...e.providers,{provide:Ls,useValue:this},{provide:su,useValue:this.componentFactoryResolver}],e.parent||Pl(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ya(n,e,t=null){return new Yl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var q4=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=zh(!1,t.type),i=r.length>0?Ya([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ne({token:n,providedIn:"environment",factory:()=>new n(we(At))})}return n})();function fn(n){return Zl(()=>{let e=A1(n),t=pe(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Kv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(q4).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||xr.Emulated,styles:n.styles||Dn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Jn("NgStandalone"),M1(t);let r=n.dependencies;return t.directiveDefs=rx(r,W4),t.pipeDefs=rx(r,y0),t.id=Y4(t),t})}function W4(n){return Oi(n)||Uh(n)}function Hi(n){return Zl(()=>({type:n.type,bootstrap:n.bootstrap||Dn,declarations:n.declarations||Dn,imports:n.imports||Dn,exports:n.exports||Dn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function K4(n,e){if(n==null)return Do;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=$f.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function Q4(n){if(n==null)return Do;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function en(n){return Zl(()=>{let e=A1(n);return M1(e),e})}function np(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function A1(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Do,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Dn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:K4(n.inputs,e),outputs:Q4(n.outputs),debugInfo:null}}function M1(n){n.features?.forEach(e=>e(n))}function rx(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function Y4(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function J4(n){return Object.getPrototypeOf(n.prototype).constructor}function oi(n){let e=J4(n.type),t=!0,r=[n];for(;e;){let i;if(Xr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new te(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=uv(n.inputs),s.declaredInputs=uv(n.declaredInputs),s.outputs=uv(n.outputs);let a=i.hostBindings;a&&n3(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&e3(n,c),u&&t3(n,u),Z4(n,i),qT(n.outputs,i.outputs),Xr(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===oi&&(t=!1)}}e=Object.getPrototypeOf(e)}X4(r)}function Z4(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function X4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ja(i.hostAttrs,t=ja(t,i.hostAttrs))}}function uv(n){return n===Do?{}:n===Dn?[]:n}function e3(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function t3(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function n3(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function R1(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=ja(n.mergedAttrs,n.attrs);let d=n.tView=l_(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),d.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ms(n,!1);let c=N1(t,e,n,r);Xh()&&g_(t,e,c,n),Ha(c,e);let u=n1(c,e,c,n);e[r+Ye]=u,d_(e,u),P4(u,n,e)}function r3(n,e,t,r,i,o,s,a,c,u,d){let f=t+Ye,g;return e.firstCreatePass?(g=Qa(e,f,4,s||null,a||null),F0()&&p1(e,n,g,ar(e.consts,u),GD),wx(e,g)):g=e.data[f],R1(g,n,e,t,r,i,o,c),Fl(g)&&y_(e,n,g),u!=null&&Wf(n,g,d),g}function Mf(n,e,t,r,i,o,s,a,c,u,d){let f=t+Ye,g;if(e.firstCreatePass){if(g=Qa(e,f,4,s||null,a||null),u!=null){let m=ar(e.consts,u);g.localNames=[];for(let T=0;T<m.length;T+=2)g.localNames.push(m[T],-1)}}else g=e.data[f];return R1(g,n,e,t,r,i,o,c),u!=null&&Wf(n,g,d),g}function si(n,e,t,r,i,o,s,a){let c=De(),u=kt(),d=ar(u.consts,o);return r3(c,u,n,e,t,r,i,d,void 0,s,a),si}var N1=P1;function P1(n,e,t,r){return Vi(!0),e[at].createComment("")}function i3(n,e,t,r){let i=!jf(e,t);Vi(i);let o=e[Fn]?.data[qx]?.[r]??null;if(o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o),i)return P1(n,e);let s=e[Fn],a=Yf(s,n,e,t);Bf(s,r,a);let c=r_(s,r);return Jf(c,a)}function k1(){N1=i3}var Yn=(function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n})(Yn||{}),ix=0,o3=1,$t=(function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n})($t||{});var s3=0,au=1;var a3=4,c3=5;var l3=7,Ba=8,u3=9,D_=(function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n})(D_||{});function hf(n,e){let t=h3(n),r=e[t];if(r!==null){for(let i of r)i();e[t]=null}}function d3(n){hf(1,n),hf(0,n),hf(2,n)}function h3(n){let e=a3;return n===1?e=c3:n===2&&(e=u3),e}function O1(n){return n+1}function Ja(n,e){let t=n[me],r=O1(e.index);return n[r]}function cu(n,e){let t=O1(e.index);return n.data[t]}function f3(n,e,t){let r=e[me],i=cu(r,t);switch(n){case $t.Complete:return i.primaryTmplIndex;case $t.Loading:return i.loadingTmplIndex;case $t.Error:return i.errorTmplIndex;case $t.Placeholder:return i.placeholderTmplIndex;default:return null}}function ox(n,e){return e===$t.Placeholder?n.placeholderBlockConfig?.[ix]??null:e===$t.Loading?n.loadingBlockConfig?.[ix]??null:null}function p3(n){return n.loadingBlockConfig?.[o3]??null}function sx(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function g3(n,e){let t=e.primaryTmplIndex+Ye;return As(n,t)}var m3=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,i,o){if(!this.cachedInjectors.has(t)){let s=i.length>0?Ya(i,r,o):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ne({token:n,providedIn:"environment",factory:()=>new n})}return n})();var F1=new re("");function dv(n,e,t){return n.get(m3).getOrCreateInjector(e,n,t,"")}function y3(n,e,t){if(n instanceof Ua){let i=n.injector,o=n.parentInjector,s=dv(o,e,t);return new Ua(i,s)}let r=n.get(At);if(r!==n){let i=dv(r,e,t);return new Ua(n,i)}return dv(n,e,t)}function Ns(n,e,t,r=!1){let i=t[Nt],o=i[me];if(Mo(i))return;let s=Ja(i,e),a=s[au],c=s[l3];if(!(c!==null&&n<c)&&ax(a,n)&&ax(s[s3]??-1,n)){let u=cu(o,e),f=!r&&!0&&(p3(u)!==null||ox(u,$t.Loading)!==null||ox(u,$t.Placeholder))?E3:_3;try{f(n,s,t,e,i)}catch(g){v_(i,g)}}}function v3(n,e){let t=n[Ir]?.findIndex(i=>i.data[Yx]===e[au])??-1;return{dehydratedView:t>-1?n[Ir][t]:null,dehydratedViewIx:t}}function _3(n,e,t,r,i){Ze(We.DeferBlockStateStart);let o=f3(n,i,r);if(o!==null){e[au]=n;let s=i[me],a=o+Ye,c=As(s,a),u=0;b_(t,u);let d;if(n===$t.Complete){let T=cu(s,r),M=T.providers;M&&M.length>0&&(d=y3(i[Gn],T,M))}let{dehydratedView:f,dehydratedViewIx:g}=v3(t,e),m=iu(i,c,null,{injector:d,dehydratedView:f});if(ou(t,m,u,$a(c,f)),Kf(m,2),g>-1&&t[Ir]?.splice(g,1),(n===$t.Complete||n===$t.Error)&&Array.isArray(e[Ba])){for(let T of e[Ba])T();e[Ba]=null}}Ze(We.DeferBlockStateEnd)}function ax(n,e){return n<e}function cx(n,e,t){n.loadingPromise.then(()=>{n.loadingState===Yn.COMPLETE?Ns($t.Complete,e,t):n.loadingState===Yn.FAILED&&Ns($t.Error,e,t)})}var E3=null;var rp=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var A_=new re("");function Oo(n){return!!n&&typeof n.then=="function"}function M_(n){return!!n&&typeof n.subscribe=="function"}var L1=new re("");var R_=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=G(L1,{optional:!0})??[];injector=G(On);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=hn(this.injector,i);if(Oo(o))t.push(o);else if(M_(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fo=new re("");function V1(){Ny(()=>{let n="";throw new te(600,n)})}function U1(n){return n.isBoundToModule}var b3=10;var Ln=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=G(Qn);afterRenderManager=G(f_);zonelessEnabled=G(Hl);rootEffectScheduler=G(rv);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ut;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=G(ei);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(It(t=>!t))}constructor(){G(ko,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=G(At);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=On.NULL){return this._injector.get(An).run(()=>{Ze(We.BootstrapComponentStart);let s=t instanceof ep;if(!this._injector.get(R_).done){let T="";throw new te(405,T)}let c;s?c=t:c=this._injector.get(su).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=U1(c)?void 0:this._injector.get(Ls),d=r||c.selector,f=c.create(i,[],d,u),g=f.location.nativeElement,m=f.injector.get(A_,null);return m?.registerApplication(g),f.onDestroy(()=>{this.detachView(f.hostView),zl(this.components,f),m?.unregisterApplication(g)}),this._loadComponent(f),Ze(We.BootstrapComponentEnd,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ze(We.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Gf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Ze(We.ChangeDetectionEnd),new te(101,!1);let t=xe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,xe(t),this.afterTick.next(),Ze(We.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Fs,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<b3;){Ze(We.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Ze(We.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ul(i))continue;let o=r&&!this.zonelessEnabled?0:1;ZD(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ul(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;zl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Fo,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>zl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new te(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function N_(){let n,e;return{promise:new Promise((r,i)=>{n=r,e=i}),resolve:n,reject:e}}function B1(n,e,t){let r=e[Gn],i=e[me];if(n.loadingState!==Yn.NOT_STARTED)return n.loadingPromise??Promise.resolve();let o=Ja(e,t),s=g3(i,n);n.loadingState=Yn.IN_PROGRESS,hf(1,o);let a=n.dependencyResolverFn,c=r.get(tf).add();return a?(n.loadingPromise=Promise.allSettled(a()).then(u=>{let d=!1,f=[],g=[];for(let m of u)if(m.status==="fulfilled"){let T=m.value,M=Oi(T)||Uh(T);if(M)f.push(M);else{let L=y0(T);L&&g.push(L)}}else{d=!0;break}if(d){if(n.loadingState=Yn.FAILED,n.errorTmplIndex===null){let T=new te(-750,!1);v_(e,T)}}else{n.loadingState=Yn.COMPLETE;let m=s.tView;if(f.length>0){m.directiveRegistry=sx(m.directiveRegistry,f);let T=f.map(L=>L.type),M=zh(!1,...T);n.providers=M}g.length>0&&(m.pipeRegistry=sx(m.pipeRegistry,g))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,c()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=Yn.COMPLETE,c()}),n.loadingPromise)}function w3(n,e){return e[Gn].get(F1,null,{optional:!0})?.behavior!==D_.Manual}function I3(n,e,t){let r=e[me],i=e[t.index];if(!w3(n,e))return;let o=Ja(e,t),s=cu(r,t);switch(d3(o),s.loadingState){case Yn.NOT_STARTED:Ns($t.Loading,t,i),B1(s,e,t),s.loadingState===Yn.IN_PROGRESS&&cx(s,t,i);break;case Yn.IN_PROGRESS:Ns($t.Loading,t,i),cx(s,t,i);break;case Yn.COMPLETE:Ns($t.Complete,t,i);break;case Yn.FAILED:Ns($t.Error,t,i);break;default:}}async function j1(n,e,t){let r=n.get(Vf);if(r.hydrating.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=bL(e,n);if(s.length===0)return;o!==null&&s.shift(),C3(r,s),o!==null&&await o;let a=s[0];r.has(a)?await lx(n,s,t):r.awaitParentBlock(a,async()=>await lx(n,s,t))}async function lx(n,e,t){let r=n.get(Vf),i=r.hydrating,o=n.get(ei),s=o.add();for(let c=0;c<e.length;c++){let u=e[c],d=r.get(u);if(d!=null){if(await D3(d),await x3(n),S3(d)){t4(d),ux(e.slice(c),r);break}i.get(u).resolve()}else{T3(c,e,r),ux(e.slice(c),r);break}}let a=e[e.length-1];await i.get(a)?.promise,o.remove(s),t&&t(e),n4(r.get(a),e,r,n.get(Ln))}function S3(n){return Ja(n.lView,n.tNode)[au]===$t.Error}function T3(n,e,t){let r=n-1,i=r>-1?t.get(e[r]):null;i&&Xf(i.lContainer)}function ux(n,e){let t=e.hydrating;for(let r in n)t.get(r)?.reject();e.cleanup(n)}function C3(n,e){for(let t of e)n.hydrating.set(t,N_())}function x3(n){return new Promise(e=>ru(e,{injector:n}))}async function D3(n){let{tNode:e,lView:t}=n,r=Ja(t,e);return new Promise(i=>{A3(r,i),I3(2,t,e)})}function A3(n,e){Array.isArray(n[Ba])||(n[Ba]=[]),n[Ba].push(e)}function Lo(n,e,t,r){let i=De(),o=Rs();if(lr(i,o,e)){let s=kt(),a=Q0();IV(a,i,n,e,t,r)}return Lo}var uX=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Lv=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function hv(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function M3(n,e,t,r){let i,o,s=0,a=n.length-1,c=void 0;if(Array.isArray(e)){xe(r);let u=e.length-1;for(xe(null);s<=a&&s<=u;){let d=n.at(s),f=e[s],g=hv(s,d,s,f,t);if(g!==0){g<0&&n.updateValue(s,f),s++;continue}let m=n.at(a),T=e[u],M=hv(a,m,u,T,t);if(M!==0){M<0&&n.updateValue(a,T),a--,u--;continue}let L=t(s,d),k=t(a,m),Q=t(s,f);if(Object.is(Q,k)){let q=t(u,T);Object.is(q,L)?(n.swap(s,a),n.updateValue(a,T),u--,a--):n.move(a,s),n.updateValue(s,f),s++;continue}if(i??=new Rf,o??=hx(n,s,a,t),Vv(n,i,s,Q))n.updateValue(s,f),s++,a++;else if(o.has(Q))i.set(L,n.detach(s)),a--;else{let q=n.create(s,e[s]);n.attach(s,q),s++,a++}}for(;s<=u;)dx(n,i,t,s,e[s]),s++}else if(e!=null){xe(r);let u=e[Symbol.iterator]();xe(null);let d=u.next();for(;!d.done&&s<=a;){let f=n.at(s),g=d.value,m=hv(s,f,s,g,t);if(m!==0)m<0&&n.updateValue(s,g),s++,d=u.next();else{i??=new Rf,o??=hx(n,s,a,t);let T=t(s,g);if(Vv(n,i,s,T))n.updateValue(s,g),s++,a++,d=u.next();else if(!o.has(T))n.attach(s,n.create(s,g)),s++,a++,d=u.next();else{let M=t(s,f);i.set(M,n.detach(s)),a--}}}for(;!d.done;)dx(n,i,t,n.length,d.value),d=u.next()}for(;s<=a;)n.destroy(n.detach(a--));i?.forEach(u=>{n.destroy(u)})}function Vv(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function dx(n,e,t,r,i){if(Vv(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function hx(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var Rf=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function ue(n,e,t,r,i,o,s,a){Jn("NgControlFlow");let c=De(),u=kt(),d=ar(u.consts,o);return Mf(c,u,n,e,t,r,i,d,256,s,a),P_}function P_(n,e,t,r,i,o,s,a){Jn("NgControlFlow");let c=De(),u=kt(),d=ar(u.consts,o);return Mf(c,u,n,e,t,r,i,d,512,s,a),P_}function de(n,e){Jn("NgControlFlow");let t=De(),r=Rs(),i=t[r]!==Xt?t[r]:-1,o=i!==-1?Nf(t,Ye+i):void 0,s=0;if(lr(t,r,n)){let a=xe(null);try{if(o!==void 0&&b_(o,s),n!==-1){let c=Ye+n,u=Nf(t,c),d=Hv(t[me],c),f=u1(u,d,t),g=iu(t,d,e,{dehydratedView:f});ou(u,g,s,$a(d,f))}}finally{xe(a)}}else if(o!==void 0){let a=r1(o,s);a!==void 0&&(a[Pt]=e)}}var Uv=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Ct}};function k_(n){return n}function ai(n,e){return e}var Bv=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function vn(n,e,t,r,i,o,s,a,c,u,d,f,g){Jn("NgControlFlow");let m=De(),T=kt(),M=c!==void 0,L=De(),k=a?s.bind(L[Rn][Pt]):s,Q=new Bv(M,k);L[Ye+n]=Q,Mf(m,T,n+1,e,t,r,i,ar(T.consts,o),256),M&&Mf(m,T,n+2,c,u,d,f,ar(T.consts,g),512)}var jv=class extends Lv{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Ct}at(e){return this.getLView(e)[Pt].$implicit}attach(e,t){let r=t[Fn];this.needsIndexUpdate||=e!==this.length,ou(this.lContainer,t,e,$a(this.templateTNode,r)),R3(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,N3(this.lContainer,e),P3(this.lContainer,e)}create(e,t){let r=Sf(this.lContainer,this.templateTNode.tView.ssrId);return iu(this.hostLView,this.templateTNode,new Uv(this.lContainer,t,e),{dehydratedView:r})}destroy(e){zf(e[me],e)}updateValue(e,t){this.getLView(e)[Pt].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Pt].$index=e}getLView(e){return k3(this.lContainer,e)}};function _n(n){let e=xe(null),t=cr();try{let r=De(),i=r[me],o=r[t],s=t+1,a=Nf(r,s);if(o.liveCollection===void 0){let u=Hv(i,s);o.liveCollection=new jv(a,r,u)}else o.liveCollection.reset();let c=o.liveCollection;if(M3(c,n,o.trackByFn,e),c.updateIndexes(),o.hasEmptyBlock){let u=Rs(),d=c.length===0;if(lr(r,u,d)){let f=t+2,g=Nf(r,f);if(d){let m=Hv(i,f),T=u1(g,m,r),M=iu(r,m,void 0,{dehydratedView:T});ou(g,M,0,$a(m,T))}else i.firstUpdatePass&&Zf(g),b_(g,0)}}}finally{xe(e)}}function Nf(n,e){return n[e]}function R3(n,e){if(n.length<=Ct)return;let t=Ct+e,r=n[t],i=r?r[Cs]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Gn];JL(o,i),Os.delete(r[Fi]),i.detachedLeaveAnimationFns=void 0}}function N3(n,e){if(n.length<=Ct)return;let t=Ct+e,r=n[t],i=r?r[Cs]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function P3(n,e){return Ql(n,e)}function k3(n,e){return r1(n,e)}function Hv(n,e){return As(n,e)}function ze(n,e,t){let r=De(),i=Rs();if(lr(r,i,e)){let o=kt(),s=Q0();yV(s,r,n,e,r[at],t)}return ze}function $v(n,e,t,r,i){__(e,n,t,i?"class":"style",r)}function v(n,e,t,r){let i=De(),o=i[me],s=n+Ye,a=o.firstCreatePass?m1(s,i,2,e,GD,F0(),t,r):o.data[s];if(zD(a,i,n,e,O_),Fl(a)){let c=i[me];y_(c,i,a),ED(c,a,i)}return r!=null&&Wf(i,a),v}function _(){let n=kt(),e=yn(),t=qD(e);return n.firstCreatePass&&y1(n,t),V0(t)&&U0(),O0(),t.classesWithoutHost!=null&&$F(t)&&$v(n,t,De(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&GF(t)&&$v(n,t,De(),t.stylesWithoutHost,!1),_}function $(n,e,t,r){return v(n,e,t,r),_(),$}function N(n,e,t,r){let i=De(),o=i[me],s=n+Ye,a=o.firstCreatePass?y4(s,o,2,e,t,r):o.data[s];return zD(a,i,n,e,O_),r!=null&&Wf(i,a),N}function F(){let n=yn(),e=qD(n);return V0(e)&&U0(),O0(),F}function Z(n,e,t,r){return N(n,e,t,r),F(),Z}var O_=(n,e,t,r,i)=>(Vi(!0),o_(e[at],r,Y0()));function O3(n,e,t,r,i){let o=!jf(e,t);if(Vi(o),o)return o_(e[at],r,Y0());let s=e[Fn],a=Yf(s,n,e,t);return mD(s,i)&&Bf(s,i,a.nextSibling),s&&(Ox(t)||Fx(a))&&Li(t)&&(gC(t),TD(a)),a}function H1(){O_=O3}var F3=(n,e,t,r,i)=>(Vi(!0),ID(e[at],""));function L3(n,e,t,r,i){let o,s=!jf(e,t);if(Vi(s),s)return ID(e[at],"");let a=e[Fn],c=Yf(a,n,e,t),u=_L(a,i);return Bf(a,i,c),o=Jf(u,c),o}function $1(){F3=L3}function Et(){return De()}var $l=void 0;function V3(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var U3=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$l,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$l,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",$l,$l,$l],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",V3],fv={};function Zn(n){let e=B3(n),t=fx(e);if(t)return t;let r=e.split("-")[0];if(t=fx(r),t)return t;if(r==="en")return U3;throw new te(701,!1)}function fx(n){return n in fv||(fv[n]=qr.ng&&qr.ng.common&&qr.ng.common.locales&&qr.ng.common.locales[n]),fv[n]}var Ot=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Ot||{});function B3(n){return n.toLowerCase().replace(/_/g,"-")}var lu="en-US";var j3=lu;function G1(n){typeof n=="string"&&(j3=n.toLowerCase().replace(/_/g,"-"))}function ae(n,e,t){let r=De(),i=kt(),o=yn();return H3(i,r,r[at],o,n,e,t),ae}function Ar(n,e,t){let r=De(),i=kt(),o=yn();return(o.type&3||t)&&E1(o,i,r,t,r[at],n,e,df(o,r,e)),Ar}function H3(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=df(r,e,o),E1(r,n,e,s,t,i,o,c)&&(a=!1)),a){let u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let f=0;f<d.length;f+=2){let g=d[f],m=d[f+1];c??=df(r,e,o),ex(r,e,g,m,i,c)}if(u&&u.length)for(let f of u)c??=df(r,e,o),ex(r,e,f,i,i,c)}}function U(n=1){return CC(n)}function ip(n,e,t){return H4(n,e,t),ip}function op(n){let e=De(),t=kt(),r=q0();Yh(r+1);let i=x_(t,r);if(n.dirty&&cC(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=z4(e,r);n.reset(o,rL),n.notifyOnChanges()}return!0}return!1}function sp(){return B4(De(),q0())}function uu(n){let e=H0();return Ll(e,Ye+n)}function of(n,e){return n<<17|e<<2}function Vs(n){return n>>17&32767}function $3(n){return(n&2)==2}function G3(n,e){return n&131071|e<<17}function Gv(n){return n|2}function za(n){return(n&131068)>>2}function pv(n,e){return n&-131069|e<<2}function z3(n){return(n&1)===1}function zv(n){return n|1}function q3(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Vs(s),c=za(s);n[r]=t;let u=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Pa(f,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let g=Vs(n[a+1]);n[r+1]=of(g,a),g!==0&&(n[g+1]=pv(n[g+1],r)),n[a+1]=G3(n[a+1],r)}else n[r+1]=of(a,0),a!==0&&(n[a+1]=pv(n[a+1],r)),a=r;else n[r+1]=of(c,0),a===0?a=r:n[c+1]=pv(n[c+1],r),c=r;u&&(n[r+1]=Gv(n[r+1])),px(n,d,r,!0),px(n,d,r,!1),W3(e,d,n,r,o),s=of(a,c),o?e.classBindings=s:e.styleBindings=s}function W3(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Pa(o,e)>=0&&(t[r+1]=zv(t[r+1]))}function px(n,e,t,r){let i=n[t+1],o=e===null,s=r?Vs(i):za(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];K3(c,e)&&(a=!0,n[s+1]=r?zv(u):Gv(u)),s=r?Vs(u):za(u)}a&&(n[t+1]=r?Gv(i):zv(i))}function K3(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Pa(n,e)>=0:!1}var Cr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Q3(n){return n.substring(Cr.key,Cr.keyEnd)}function Y3(n){return J3(n),z1(n,q1(n,0,Cr.textEnd))}function z1(n,e){let t=Cr.textEnd;return t===e?-1:(e=Cr.keyEnd=Z3(n,Cr.key=e,t),q1(n,e,t))}function J3(n){Cr.key=0,Cr.keyEnd=0,Cr.value=0,Cr.valueEnd=0,Cr.textEnd=n.length}function q1(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Z3(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function ct(n,e,t){return W1(n,e,t,!1),ct}function Ue(n,e){return W1(n,e,null,!0),Ue}function F_(n){eU(sU,X3,n,!0)}function X3(n,e){for(let t=Y3(e);t>=0;t=z1(e,t))$h(n,Q3(e),!0)}function W1(n,e,t,r){let i=De(),o=kt(),s=jl(2);if(o.firstUpdatePass&&Q1(o,n,s,r),e!==Xt&&lr(i,s,e)){let a=o.data[cr()];Y1(o,a,i,i[at],n,i[s+1]=cU(e,t),r,s)}}function eU(n,e,t,r){let i=kt(),o=jl(2);i.firstUpdatePass&&Q1(i,null,o,r);let s=De();if(t!==Xt&&lr(s,o,t)){let a=i.data[cr()];if(J1(a,r)&&!K1(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=Lh(c,t||"")),$v(i,a,s,t,r)}else aU(i,a,s,s[at],s[o+1],s[o+1]=oU(n,e,t),r,o)}}function K1(n,e){return e>=n.expandoStartIndex}function Q1(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[cr()],s=K1(n,t);J1(o,r)&&e===null&&!s&&(e=!1),e=tU(i,o,e,r),q3(i,o,e,t,s,r)}}function tU(n,e,t,r){let i=wC(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=gv(null,n,e,t,r),t=Jl(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=gv(i,n,e,t,r),o===null){let c=nU(n,e,r);c!==void 0&&Array.isArray(c)&&(c=gv(null,n,e,c[1],r),c=Jl(c,e.attrs,r),rU(n,e,r,c))}else o=iU(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function nU(n,e,t){let r=t?e.classBindings:e.styleBindings;if(za(r)!==0)return n[Vs(r)]}function rU(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Vs(i)]=r}function iU(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Jl(r,s,t)}return Jl(r,e.attrs,t)}function gv(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Jl(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Jl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),$h(n,s,t?!0:e[++o]))}return n===void 0?null:n}function oU(n,e,t){if(t==null||t==="")return Dn;let r=[],i=Ka(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(i instanceof Set)for(let o of i)n(r,o,!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function sU(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&$h(n,r,t)}function aU(n,e,t,r,i,o,s,a){i===Xt&&(i=Dn);let c=0,u=0,d=0<i.length?i[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let g=c<i.length?i[c+1]:void 0,m=u<o.length?o[u+1]:void 0,T=null,M;d===f?(c+=2,u+=2,g!==m&&(T=f,M=m)):f===null||d!==null&&d<f?(c+=2,T=d):(u+=2,T=f,M=m),T!==null&&Y1(n,e,t,r,T,M,s,a),d=c<i.length?i[c]:null,f=u<o.length?o[u]:null}}function Y1(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=z3(u)?gx(c,e,t,i,za(u),s):void 0;if(!Pf(d)){Pf(o)||$3(u)&&(o=gx(c,null,t,i,a,s));let f=A0(cr(),t);hV(r,s,f,i,o)}}function gx(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,f=d===null,g=t[i+1];g===Xt&&(g=f?Dn:void 0);let m=f?Gh(g,r):d===r?g:void 0;if(u&&!Pf(m)&&(m=Gh(c,r)),Pf(m)&&(a=m,s))return a;let T=n[i+1];i=s?Vs(T):za(T)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Gh(c,r))}return a}function Pf(n){return n!==void 0}function cU(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Pi(Ka(n)))),n}function J1(n,e){return(n.flags&(e?8:16))!==0}function w(n,e=""){let t=De(),r=kt(),i=n+Ye,o=r.firstCreatePass?Qa(r,i,1,e,null):r.data[i],s=Z1(r,t,o,e,n);t[i]=s,Xh()&&g_(r,t,s,o),Ms(o,!1)}var Z1=(n,e,t,r,i)=>(Vi(!0),wD(e[at],r));function lU(n,e,t,r,i){let o=!jf(e,t);if(Vi(o),o)return wD(e[at],r);let s=e[Fn];return Yf(s,n,e,t)}function X1(){Z1=lU}function uU(n,e,t,r=""){return lr(n,Rs(),t)?e+wr(t)+r:Xt}function dU(n,e,t,r,i,o=""){let s=z0(),a=T_(n,s,t,i);return jl(2),a?e+wr(t)+r+wr(i)+o:Xt}function hU(n,e,t,r,i,o,s,a=""){let c=z0(),u=_4(n,c,t,i,s);return jl(3),u?e+wr(t)+r+wr(i)+o+wr(s)+a:Xt}function K(n){return fe("",n),K}function fe(n,e,t){let r=De(),i=uU(r,n,e,t);return i!==Xt&&L_(r,cr(),i),fe}function En(n,e,t,r,i){let o=De(),s=dU(o,n,e,t,r,i);return s!==Xt&&L_(o,cr(),s),En}function Za(n,e,t,r,i,o,s){let a=De(),c=hU(a,n,e,t,r,i,o,s);return c!==Xt&&L_(a,cr(),c),Za}function L_(n,e,t){let r=A0(e,n);DL(n[at],r,t)}var eA={};function ap(n){Jn("NgLet");let e=kt(),t=De(),r=n+Ye,i=Qa(e,r,128,null,null);return Ms(i,!1),Vl(e,t,r,eA),ap}function V_(n){let e=kt(),t=De(),r=cr();return Vl(e,t,r,n),n}function U_(n){let e=H0(),t=Ll(e,Ye+n);if(t===eA)throw new te(314,!1);return t}function B_(n){return lr(De(),Rs(),n)?wr(n):Xt}function mx(n,e,t){let r=kt();r.firstCreatePass&&tA(e,r.data,r.blueprint,Xr(n),t)}function tA(n,e,t,r,i){if(n=dn(n),Array.isArray(n))for(let o=0;o<n.length;o++)tA(n[o],e,t,r,i);else{let o=kt(),s=De(),a=yn(),c=Es(n)?n:dn(n.provide),u=S0(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Es(n)||!n.multi){let m=new ks(u,i,_e,null),T=yv(c,e,i?d:d+g,f);T===-1?(_v(yf(a,s),o,c),mv(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[T]=m,s[T]=m)}else{let m=yv(c,e,d+g,f),T=yv(c,e,d,d+g),M=m>=0&&t[m],L=T>=0&&t[T];if(i&&!L||!i&&!M){_v(yf(a,s),o,c);let k=gU(i?pU:fU,t.length,i,r,u,n);!i&&L&&(t[T].providerFactory=k),mv(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),s.push(k)}else{let k=nA(t[i?T:m],u,!i&&r);mv(o,n,m>-1?m:T,k)}!i&&r&&L&&t[T].componentProviders++}}}function mv(n,e,t,r){let i=Es(e),o=iC(e);if(i||o){let c=(o?dn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function nA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function yv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function fU(n,e,t,r,i){return qv(this.multi,[])}function pU(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=ql(r,r[me],this.providerFactory.index,i);s=c.slice(0,a),qv(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],qv(o,s);return s}function qv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function gU(n,e,t,r,i,o){let s=new ks(n,t,_e,null);return s.multi=[],s.index=e,s.componentProviders=0,nA(s,i,r&&!t),s}function du(n,e){return t=>{t.providersResolver=(r,i)=>mx(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>mx(r,i?i(e):e,!0))}}function js(n,e){let t=Bl()+n,r=De();return r[t]===Xt?S_(r,t,e()):v4(r,t)}function it(n,e,t,r){return iA(De(),Bl(),n,e,t,r)}function rA(n,e){let t=n[e];return t===Xt?void 0:t}function mU(n,e,t,r,i,o){let s=e+t;return lr(n,s,i)?S_(n,s+1,o?r.call(o,i):r(i)):rA(n,s+1)}function iA(n,e,t,r,i,o,s){let a=e+t;return T_(n,a,i,o)?S_(n,a+2,s?r.call(s,i,o):r(i,o)):rA(n,a+2)}function Hs(n,e){let t=kt(),r,i=n+Ye;t.firstCreatePass?(r=yU(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=So(r.type,!0)),s,a=xn(_e);try{let c=mf(!1),u=o();return mf(c),Vl(t,De(),i,u),u}finally{xn(a)}}function yU(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function j_(n,e,t){let r=n+Ye,i=De(),o=Ll(i,r);return oA(i,r)?mU(i,Bl(),e,o.transform,t,o):o.transform(t)}function Xa(n,e,t,r){let i=n+Ye,o=De(),s=Ll(o,i);return oA(o,i)?iA(o,Bl(),e,s.transform,t,r,s):s.transform(t,r)}function oA(n,e){return n[me].data[e].pure}function H_(n,e){return Qf(n,e)}var kf=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},$_=(()=>{class n{compileModuleSync(t){return new Af(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=m0(t),o=MD(i.declarations).reduce((s,a)=>{let c=Oi(a);return c&&s.push(new Ga(c)),s},[]);return new kf(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var sA=(()=>{class n{applicationErrorHandler=G(Qn);appRef=G(Ln);taskService=G(ei);ngZone=G(An);zonelessEnabled=G(Hl);tracing=G(ko,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new cn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Dl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(G(nv,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let t=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(t);return}this.switchToMicrotaskScheduler(),this.taskService.remove(t)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let t=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})})}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?MC:Z0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Dl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(t),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aA(){return[{provide:Co,useExisting:sA},{provide:An,useClass:Al},{provide:Hl,useValue:!0}]}function vU(){return typeof $localize<"u"&&$localize.locale||lu}var hu=new re("",{factory:()=>G(hu,{optional:!0,skipSelf:!0})||vU()});function Mr(n,e){return oh(n,e?.equal)}var K_={JSACTION:"__jsaction",OWNER:"__owner"},dA={};function _U(n){return n[K_.JSACTION]}function cA(n,e){n[K_.JSACTION]=e}function EU(n){return dA[n]}function bU(n,e){dA[n]=e}var Se={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},wU=[Se.MOUSEENTER,Se.MOUSELEAVE,"pointerenter","pointerleave"],mX=[Se.CLICK,Se.DBLCLICK,Se.FOCUSIN,Se.FOCUSOUT,Se.KEYDOWN,Se.KEYUP,Se.KEYPRESS,Se.MOUSEOVER,Se.MOUSEOUT,Se.SUBMIT,Se.TOUCHSTART,Se.TOUCHEND,Se.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],IU=[Se.FOCUS,Se.BLUR,Se.ERROR,Se.LOAD,Se.TOGGLE],Q_=n=>IU.indexOf(n)>=0;function SU(n){return n===Se.MOUSEENTER?Se.MOUSEOVER:n===Se.MOUSELEAVE?Se.MOUSEOUT:n===Se.POINTERENTER?Se.POINTEROVER:n===Se.POINTERLEAVE?Se.POINTEROUT:n}function TU(n,e,t,r){let i=!1;Q_(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return n.addEventListener(e,t,o),{eventType:e,handler:t,capture:i,passive:r}}function CU(n,e){if(n.removeEventListener){let t=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;n.removeEventListener(e.eventType,e.handler,t)}else n.detachEvent&&n.detachEvent(`on${e.eventType}`,e.handler)}function xU(n){n.preventDefault?n.preventDefault():n.returnValue=!1}var lA=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function DU(n){return n.which===2||n.which==null&&n.button===4}function AU(n){return lA&&n.metaKey||!lA&&n.ctrlKey||DU(n)||n.shiftKey}function MU(n,e,t){let r=n.relatedTarget;return(n.type===Se.MOUSEOVER&&e===Se.MOUSEENTER||n.type===Se.MOUSEOUT&&e===Se.MOUSELEAVE||n.type===Se.POINTEROVER&&e===Se.POINTERENTER||n.type===Se.POINTEROUT&&e===Se.POINTERLEAVE)&&(!r||r!==t&&!t.contains(r))}function RU(n,e){let t={};for(let r in n){if(r==="srcElement"||r==="target")continue;let i=r,o=n[i];typeof o!="function"&&(t[i]=o)}return n.type===Se.MOUSEOVER?t.type=Se.MOUSEENTER:n.type===Se.MOUSEOUT?t.type=Se.MOUSELEAVE:n.type===Se.POINTEROVER?t.type=Se.POINTERENTER:t.type=Se.POINTERLEAVE,t.target=t.srcElement=e,t.bubbles=!1,t._originalEvent=n,t}var NU=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),dp=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,t,r){NU&&(this.element.style.cursor="pointer"),this.handlerInfos.push(TU(this.element,e,t(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)CU(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},PU={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function Vo(n){return n.eventType}function Y_(n,e){n.eventType=e}function lp(n){return n.event}function hA(n,e){n.event=e}function fA(n){return n.targetElement}function pA(n,e){n.targetElement=e}function gA(n){return n.eic}function kU(n,e){n.eic=e}function OU(n){return n.timeStamp}function FU(n,e){n.timeStamp=e}function up(n){return n.eia}function mA(n,e,t){n.eia=[e,t]}function G_(n){n.eia=void 0}function cp(n){return n[1]}function LU(n){return n.eirp}function yA(n,e){n.eirp=e}function vA(n){return n.eir}function _A(n,e){n.eir=e}function EA(n){return{eventType:n.eventType,event:n.event,targetElement:n.targetElement,eic:n.eic,eia:n.eia,timeStamp:n.timeStamp,eirp:n.eirp,eiack:n.eiack,eir:n.eir}}function VU(n,e,t,r,i,o,s,a){return{eventType:n,event:e,targetElement:t,eic:r,timeStamp:i,eia:o,eirp:s,eiack:a}}var z_=class n{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return Vo(this.eventInfo)}setEventType(e){Y_(this.eventInfo,e)}getEvent(){return lp(this.eventInfo)}setEvent(e){hA(this.eventInfo,e)}getTargetElement(){return fA(this.eventInfo)}setTargetElement(e){pA(this.eventInfo,e)}getContainer(){return gA(this.eventInfo)}setContainer(e){kU(this.eventInfo,e)}getTimestamp(){return OU(this.eventInfo)}setTimestamp(e){FU(this.eventInfo,e)}getAction(){let e=up(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){G_(this.eventInfo);return}mA(this.eventInfo,e.name,e.element)}getIsReplay(){return LU(this.eventInfo)}setIsReplay(e){yA(this.eventInfo,e)}getResolved(){return vA(this.eventInfo)}setResolved(e){_A(this.eventInfo,e)}clone(){return new n(EA(this.eventInfo))}},UU={},BU=/\s*;\s*/,jU=Se.CLICK,q_=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:t=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=t}resolveEventType(e){this.clickModSupport&&Vo(e)===Se.CLICK&&AU(lp(e))?Y_(e,Se.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){vA(e)||(this.populateAction(e,fA(e)),_A(e,!0))}resolveParentAction(e){let t=up(e),r=t&&cp(t);G_(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,t){let r=t;for(;r&&r!==gA(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!up(e));)r=this.getParentNode(r);let i=up(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(Vo(e)===Se.MOUSEENTER||Vo(e)===Se.MOUSELEAVE||Vo(e)===Se.POINTERENTER||Vo(e)===Se.POINTERLEAVE)))if(MU(lp(e),Vo(e),cp(i))){let o=RU(lp(e),cp(i));hA(e,o),pA(e,cp(i))}else G_(e)}getParentNode(e){let t=e[K_.OWNER];if(t)return t;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,t){let r=this.parseActions(e),i=r[Vo(t)];i!==void 0&&mA(t,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,t,r)}parseActions(e){let t=_U(e);if(!t){let r=e.getAttribute(nf.JSACTION);if(!r)t=UU,cA(e,t);else{if(t=EU(r),!t){t={};let i=r.split(BU);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let a=s.indexOf(PU.EVENT_ACTION_SEPARATOR),c=a!==-1,u=c?s.substr(0,a).trim():jU,d=c?s.substr(a+1).trim():s;t[u]=d}bU(r,t)}cA(e,t)}}return t}addA11yClickSupport(e,t,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=t,this.populateClickOnlyAction=r}},bA=(function(n){return n[n.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",n})(bA||{}),W_=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:t,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=t,this.eventReplayer=r}dispatch(e){let t=new z_(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=t.getAction();if(r&&HU(r.element,t)&&xU(t.getEvent()),this.eventReplayer&&t.getIsReplay()){this.scheduleEventInfoWrapperReplay(t);return}this.dispatchDelegate(t)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function HU(n,e){return n.tagName==="A"&&(e.getEventType()===Se.CLICK||e.getEventType()===Se.CLICKMOD)}var wA=Symbol.for("propagationStopped"),J_={REPLAY:101};var $U="`preventDefault` called during event replay.";var GU="`composedPath` called during event replay.",hp=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,t=!0){this.dispatchDelegate=e,this.clickModSupport=t,this.actionResolver=new q_({clickModSupport:t}),this.dispatcher=new W_(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&WU(e),zU(e);e.getAction();){if(KU(e),Q_(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),qU(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function zU(n){let e=n.getEvent(),t=n.getEvent().stopPropagation.bind(e),r=()=>{e[wA]=!0,t()};$s(e,"stopPropagation",r),$s(e,"stopImmediatePropagation",r)}function qU(n){return!!n.getEvent()[wA]}function WU(n){let e=n.getEvent(),t=n.getTargetElement(),r=e.preventDefault.bind(e);$s(e,"target",t),$s(e,"eventPhase",J_.REPLAY),$s(e,"preventDefault",()=>{throw r(),new Error($U+"")}),$s(e,"composedPath",()=>{throw new Error(GU+"")})}function KU(n){let e=n.getEvent(),t=n.getAction()?.element;t&&$s(e,"currentTarget",t,{configurable:!0})}function $s(n,e,t,{configurable:r=!1}={}){Object.defineProperty(n,e,{value:t,configurable:r})}function IA(n,e){n.ecrd(t=>{e.dispatch(t)},bA.I_AM_THE_JSACTION_FRAMEWORK)}function QU(n){return n?.q??[]}function YU(n){n&&(uA(n.c,n.et,n.h),uA(n.c,n.etc,n.h,!0))}function uA(n,e,t,r){for(let i=0;i<e.length;i++)n.removeEventListener(e[i],t,r)}var JU=!1,SA=(()=>{class n{static MOUSE_SPECIAL_SUPPORT=JU;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(t){this.containerManager=t}handleEvent(t,r,i){let o=VU(t,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(t){if(!this.dispatcher){yA(t,!0),this.queuedEventInfos?.push(t);return}this.dispatcher(t)}addEvent(t,r,i){if(t in this.eventHandlers||!this.containerManager||!n.MOUSE_SPECIAL_SUPPORT&&wU.indexOf(t)>=0)return;let o=(a,c,u)=>{this.handleEvent(a,c,u)};this.eventHandlers[t]=o;let s=SU(r||t);if(s!==t){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(t),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>c=>{o(t,c,a)},i)}replayEarlyEvents(t=window._ejsa){t&&(this.replayEarlyEventInfos(t.q),YU(t),delete window._ejsa)}replayEarlyEventInfos(t){for(let r=0;r<t.length;r++){let i=t[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let a=EA(i);Y_(a,o[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(t){let r=[];return this.eventHandlers[t]&&r.push(t),this.browserEventTypeToExtraEventTypes[t]&&r.push(...this.browserEventTypeToExtraEventTypes[t]),r}handler(t){return this.eventHandlers[t]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(t,r){this.ecrd(t,r)}ecrd(t,r){if(this.dispatcher=t,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return n})();function TA(n,e=window){return QU(e._ejsas?.[n])}function Z_(n,e=window){e._ejsas&&(e._ejsas[n]=void 0)}var kA=Symbol("InputSignalNode#UNSET"),I5=pe(V({},sh),{transformFn:void 0,applyValueToInputSignal(n,e){_l(n,e)}});function OA(n,e){let t=Object.create(I5);t.value=n,t.transformFn=e?.transform;function r(){if(ml(t),t.value===kA){let i=null;throw new te(-950,i)}return t.value}return r[Pn]=t,r}var gp=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Xl(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function CA(n,e){return OA(n,e)}function S5(n){return OA(kA,n)}var FA=(CA.required=S5,CA);var X_=new re(""),T5=new re("");function fu(n){return!n.moduleRef}function C5(n){let e=fu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(An);return t.run(()=>{fu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Qn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),fu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(X_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(X_);s.add(o),n.moduleRef.onDestroy(()=>{zl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return D5(r,t,()=>{let o=e.get(ei),s=o.add(),a=e.get(R_);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(hu,lu);if(G1(c||lu),!e.get(T5,!0))return fu(n)?e.get(Ln):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(fu(n)){let d=e.get(Ln);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return x5?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>{o.remove(s)})})})}var x5;function D5(n,e,t){try{let r=t();return Oo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var pp=null;function A5(n=[],e){return On.create({name:e,providers:[{provide:Nl,useValue:"platform"},{provide:X_,useValue:new Set([()=>pp=null])},...n]})}function M5(n=[]){if(pp)return pp;let e=A5(n);return pp=e,V1(),R5(e),e}function R5(n){let e=n.get(Of,null);hn(n,()=>{e?.forEach(t=>t())})}function LA(){return!1}var fp=new WeakSet,xA="";function DA(n){return n.get(Xv,Xx)}function VA(){let n=[{provide:Xv,useFactory:()=>{let e=!0;{let t=G(ri);e=!!window._ejsas?.[t]}return e&&Jn("NgEventReplay"),e}}];return n.push({provide:Kr,useValue:()=>{let e=G(Ln),{injector:t}=e;if(!fp.has(e)){let r=G(e_);if(DA(t)){cD();let i=t.get(ri),o=sD(i,(s,a,c)=>{s.nodeType===Node.ELEMENT_NODE&&(nD(s,a,c),rD(s,r))});e.onDestroy(o)}}},multi:!0},{provide:Fo,useFactory:()=>{let e=G(Ln),{injector:t}=e;return()=>{if(!DA(t)||fp.has(e))return;fp.add(e);let r=t.get(ri);e.onDestroy(()=>{fp.delete(e),Z_(r)}),e.whenStable().then(()=>{if(e.destroyed)return;let i=t.get(oD);N5(i,t);let o=t.get(e_);o.get(xA)?.forEach(iD),o.delete(xA);let s=i.instance;gD(t)?e.onDestroy(()=>s.cleanUp()):s.cleanUp()})}},multi:!0}),n}var N5=(n,e)=>{let t=e.get(ri),r=window._ejsas[t],i=n.instance=new SA(new dp(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let o=TA(t);i.replayEarlyEventInfos(o),Z_(t);let s=new hp(a=>{P5(e,a,a.currentTarget)});IA(i,s)};function P5(n,e,t){let r=(t&&t.getAttribute(tu))??"";/d\d+/.test(r)?k5(r,n,e,t):e.eventPhase===J_.REPLAY&&t_(e,t)}function k5(n,e,t,r){let i=e.get(eD);i.push({event:t,currentTarget:r}),j1(e,n,O5(i))}function O5(n){return e=>{let t=new Set(e),r=[];for(let{event:i,currentTarget:o}of n){let s=o.getAttribute(tu);t.has(s)?t_(i,o):r.push({event:i,currentTarget:o})}n.length=0,n.push(...r)}}var AA=!1;var F5=1e4;function L5(){AA||(AA=!0,hD(),H1(),X1(),$1(),k1(),x1(),l1(),$D())}function V5(n){return n.whenStable()}function UA(){let n=[{provide:eu,useFactory:()=>{let e=!0;return e=!!G(Wa,{optional:!0})?.get(n_,null),e&&Jn("NgHydration"),e}},{provide:Kr,useValue:()=>{o1(!1);let e=G(Mt);G(eu)&&(vD(e),L5())},multi:!0}];return n.push({provide:Zv,useFactory:()=>G(eu)},{provide:Fo,useFactory:()=>{if(G(eu)){let e=G(Ln);return()=>{V5(e).then(()=>{e.destroyed||w_(e)})}}return()=>{}},multi:!0}),Qr(n)}var iie=F5-1e3;var pu=(()=>{class n{static __NG_ELEMENT_ID__=U5}return n})();function U5(n){return B5(yn(),De(),(n&16)===16)}function B5(n,e,t){if(Li(n)&&!t){let r=sr(n.index,e);return new No(r,r)}else if(n.type&175){let r=e[Rn];return new No(r,e)}return null}var eE=class{constructor(){}supports(e){return I_(e)}create(e){return new tE(e)}},j5=(n,e)=>e,tE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||j5}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<MA(r,i,o)?t:r,a=MA(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,d=c-i;if(u!=d){for(let g=0;g<u;g++){let m=g<o.length?o[g]:o[g]=0,T=m+g;d<=T&&T<u&&(o[g]=m+1)}let f=s.previousIndex;o[f]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!I_(e))throw new te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,v1(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new nE(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new mp),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new mp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},nE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},rE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},mp=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new rE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function MA(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function RA(){return new iE([new eE])}var iE=(()=>{class n{factories;static \u0275prov=ne({token:n,providedIn:"root",factory:RA});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=G(n,{optional:!0,skipSelf:!0});return n.create(t,r||RA())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new te(901,!1)}}return n})();function BA(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Ze(We.BootstrapApplicationStart);try{let o=i?.injector??M5(r),s=[aA(),NC,...t||[]],a=new Yl({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return C5({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ze(We.BootstrapApplicationEnd)}}function gu(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var jA=null;function ur(){return jA}function oE(n){jA??=n}var mu=class{},yp=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>G(HA),providedIn:"platform"})}return n})();var HA=(()=>{class n extends yp{_location;_history;_doc=G(Mt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ur().getBaseHref(this._doc)}onPopState(t){let r=ur().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=ur().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function zA(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function $A(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Uo(n){return n&&n[0]!=="?"?`?${n}`:n}var ec=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>G($5),providedIn:"root"})}return n})(),H5=new re(""),$5=(()=>{class n extends ec{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??G(Mt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return zA(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Uo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Uo(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Uo(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(we(yp),we(H5,8))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tc=(()=>{class n{_subject=new Ut;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=q5($A(GA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Uo(r))}normalize(t){return n.stripTrailingSlash(z5(this._basePath,GA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Uo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Uo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Uo;static joinWithSlash=zA;static stripTrailingSlash=$A;static \u0275fac=function(r){return new(r||n)(we(ec))};static \u0275prov=ne({token:n,factory:()=>G5(),providedIn:"root"})}return n})();function G5(){return new tc(we(ec))}function z5(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function GA(n){return n.replace(/\/index.html$/,"")}function q5(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var bn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(bn||{}),lt=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(lt||{}),Vn=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Vn||{}),Gi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function QA(n){return Zn(n)[Ot.LocaleId]}function YA(n,e,t){let r=Zn(n),i=[r[Ot.DayPeriodsFormat],r[Ot.DayPeriodsStandalone]],o=dr(i,e);return dr(o,t)}function JA(n,e,t){let r=Zn(n),i=[r[Ot.DaysFormat],r[Ot.DaysStandalone]],o=dr(i,e);return dr(o,t)}function ZA(n,e,t){let r=Zn(n),i=[r[Ot.MonthsFormat],r[Ot.MonthsStandalone]],o=dr(i,e);return dr(o,t)}function XA(n,e){let r=Zn(n)[Ot.Eras];return dr(r,e)}function yu(n,e){let t=Zn(n);return dr(t[Ot.DateFormat],e)}function vu(n,e){let t=Zn(n);return dr(t[Ot.TimeFormat],e)}function _u(n,e){let r=Zn(n)[Ot.DateTimeFormat];return dr(r,e)}function Eu(n,e){let t=Zn(n),r=t[Ot.NumberSymbols][e];if(typeof r>"u"){if(e===Gi.CurrencyDecimal)return t[Ot.NumberSymbols][Gi.Decimal];if(e===Gi.CurrencyGroup)return t[Ot.NumberSymbols][Gi.Group]}return r}function eM(n){if(!n[Ot.ExtraData])throw new te(2303,!1)}function tM(n){let e=Zn(n);return eM(e),(e[Ot.ExtraData][2]||[]).map(r=>typeof r=="string"?sE(r):[sE(r[0]),sE(r[1])])}function nM(n,e,t){let r=Zn(n);eM(r);let i=[r[Ot.ExtraData][0],r[Ot.ExtraData][1]],o=dr(i,e)||[];return dr(o,t)||[]}function dr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new te(2304,!1)}function sE(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var W5=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,vp={},K5=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function rM(n,e,t,r){let i=rB(n);e=$i(t,e)||e;let s=[],a;for(;e;)if(a=K5.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=oM(r,c),i=nB(i,r));let u="";return s.forEach(d=>{let f=eB(d);u+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Ip(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function $i(n,e){let t=QA(n);if(vp[t]??={},vp[t][e])return vp[t][e];let r="";switch(e){case"shortDate":r=yu(n,Vn.Short);break;case"mediumDate":r=yu(n,Vn.Medium);break;case"longDate":r=yu(n,Vn.Long);break;case"fullDate":r=yu(n,Vn.Full);break;case"shortTime":r=vu(n,Vn.Short);break;case"mediumTime":r=vu(n,Vn.Medium);break;case"longTime":r=vu(n,Vn.Long);break;case"fullTime":r=vu(n,Vn.Full);break;case"short":let i=$i(n,"shortTime"),o=$i(n,"shortDate");r=_p(_u(n,Vn.Short),[i,o]);break;case"medium":let s=$i(n,"mediumTime"),a=$i(n,"mediumDate");r=_p(_u(n,Vn.Medium),[s,a]);break;case"long":let c=$i(n,"longTime"),u=$i(n,"longDate");r=_p(_u(n,Vn.Long),[c,u]);break;case"full":let d=$i(n,"fullTime"),f=$i(n,"fullDate");r=_p(_u(n,Vn.Full),[d,f]);break}return r&&(vp[t][e]=r),r}function _p(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Rr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function Q5(n,e){return Rr(n,3).substring(0,e)}function Gt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=Y5(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return Q5(a,e);let c=Eu(s,Gi.MinusSign);return Rr(a,e,c,r,i)}}function Y5(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new te(2301,!1)}}function pt(n,e,t=bn.Format,r=!1){return function(i,o){return J5(i,o,n,e,t,r)}}function J5(n,e,t,r,i,o){switch(t){case 2:return ZA(e,i,r)[n.getMonth()];case 1:return JA(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let u=tM(e),d=nM(e,i,r),f=u.findIndex(g=>{if(Array.isArray(g)){let[m,T]=g,M=s>=m.hours&&a>=m.minutes,L=s<T.hours||s===T.hours&&a<T.minutes;if(m.hours<T.hours){if(M&&L)return!0}else if(M||L)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return YA(e,i,r)[s<12?0:1];case 3:return XA(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new te(2302,!1)}}function Ep(n){return function(e,t,r){let i=-1*r,o=Eu(t,Gi.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Rr(s,2,o)+Rr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Rr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Rr(s,2,o)+":"+Rr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Rr(s,2,o)+":"+Rr(Math.abs(i%60),2,o);default:throw new te(2310,!1)}}}var Z5=0,wp=4;function X5(n){let e=Ip(n,Z5,1).getDay();return Ip(n,0,1+(e<=wp?wp:wp+7)-e)}function iM(n){let e=n.getDay(),t=e===0?-3:wp-e;return Ip(n.getFullYear(),n.getMonth(),n.getDate()+t)}function aE(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=iM(t),s=X5(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Rr(i,n,Eu(r,Gi.MinusSign))}}function bp(n,e=!1){return function(t,r){let o=iM(t).getFullYear();return Rr(o,n,Eu(r,Gi.MinusSign),e)}}var cE={};function eB(n){if(cE[n])return cE[n];let e;switch(n){case"G":case"GG":case"GGG":e=pt(3,lt.Abbreviated);break;case"GGGG":e=pt(3,lt.Wide);break;case"GGGGG":e=pt(3,lt.Narrow);break;case"y":e=Gt(0,1,0,!1,!0);break;case"yy":e=Gt(0,2,0,!0,!0);break;case"yyy":e=Gt(0,3,0,!1,!0);break;case"yyyy":e=Gt(0,4,0,!1,!0);break;case"Y":e=bp(1);break;case"YY":e=bp(2,!0);break;case"YYY":e=bp(3);break;case"YYYY":e=bp(4);break;case"M":case"L":e=Gt(1,1,1);break;case"MM":case"LL":e=Gt(1,2,1);break;case"MMM":e=pt(2,lt.Abbreviated);break;case"MMMM":e=pt(2,lt.Wide);break;case"MMMMM":e=pt(2,lt.Narrow);break;case"LLL":e=pt(2,lt.Abbreviated,bn.Standalone);break;case"LLLL":e=pt(2,lt.Wide,bn.Standalone);break;case"LLLLL":e=pt(2,lt.Narrow,bn.Standalone);break;case"w":e=aE(1);break;case"ww":e=aE(2);break;case"W":e=aE(1,!0);break;case"d":e=Gt(2,1);break;case"dd":e=Gt(2,2);break;case"c":case"cc":e=Gt(7,1);break;case"ccc":e=pt(1,lt.Abbreviated,bn.Standalone);break;case"cccc":e=pt(1,lt.Wide,bn.Standalone);break;case"ccccc":e=pt(1,lt.Narrow,bn.Standalone);break;case"cccccc":e=pt(1,lt.Short,bn.Standalone);break;case"E":case"EE":case"EEE":e=pt(1,lt.Abbreviated);break;case"EEEE":e=pt(1,lt.Wide);break;case"EEEEE":e=pt(1,lt.Narrow);break;case"EEEEEE":e=pt(1,lt.Short);break;case"a":case"aa":case"aaa":e=pt(0,lt.Abbreviated);break;case"aaaa":e=pt(0,lt.Wide);break;case"aaaaa":e=pt(0,lt.Narrow);break;case"b":case"bb":case"bbb":e=pt(0,lt.Abbreviated,bn.Standalone,!0);break;case"bbbb":e=pt(0,lt.Wide,bn.Standalone,!0);break;case"bbbbb":e=pt(0,lt.Narrow,bn.Standalone,!0);break;case"B":case"BB":case"BBB":e=pt(0,lt.Abbreviated,bn.Format,!0);break;case"BBBB":e=pt(0,lt.Wide,bn.Format,!0);break;case"BBBBB":e=pt(0,lt.Narrow,bn.Format,!0);break;case"h":e=Gt(3,1,-12);break;case"hh":e=Gt(3,2,-12);break;case"H":e=Gt(3,1);break;case"HH":e=Gt(3,2);break;case"m":e=Gt(4,1);break;case"mm":e=Gt(4,2);break;case"s":e=Gt(5,1);break;case"ss":e=Gt(5,2);break;case"S":e=Gt(6,1);break;case"SS":e=Gt(6,2);break;case"SSS":e=Gt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Ep(0);break;case"ZZZZZ":e=Ep(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ep(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ep(2);break;default:return null}return cE[n]=e,e}function oM(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function tB(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function nB(n,e,t){let i=n.getTimezoneOffset(),o=oM(e,i);return tB(n,-1*(o-i))}function rB(n){if(qA(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Ip(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(W5))return iB(r)}let e=new Date(n);if(!qA(e))throw new te(2311,!1);return e}function iB(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,u),e}function qA(n){return n instanceof Date&&!isNaN(n.valueOf())}var Sp=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Cp=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Sp(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),WA(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);WA(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(_e(ji),_e(Po),_e(iE))};static \u0275dir=en({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function WA(n,e){n.context.$implicit=e.item}var lE=(()=>{class n{_viewContainer;_context=new Tp;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){KA(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){KA(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(_e(ji),_e(Po))};static \u0275dir=en({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Tp=class{$implicit=null;ngIf=null};function KA(n,e){if(n&&!n.createEmbeddedView)throw new te(2020,!1)}function sM(n,e){return new te(2100,!1)}var oB=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,uE=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw sM(n,t);return t.replace(oB,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=np({name:"titlecase",type:n,pure:!0})}return n})();var sB="mediumDate",aM=new re(""),cM=new re(""),bu=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??sB,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return rM(t,s,o||this.locale,a)}catch(s){throw sM(n,s.message)}}static \u0275fac=function(r){return new(r||n)(_e(hu,16),_e(aM,24),_e(cM,24))};static \u0275pipe=np({name:"date",type:n,pure:!0})}return n})();var Un=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hi({type:n});static \u0275inj=Wr({})}return n})();function dE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var wu=class{};var hE="browser";function nc(n){return n===hE}var Iu=class{_doc;constructor(e){this._doc=e}manager},xp=(()=>{class n extends Iu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(we(Mt))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),Mp=new re(""),yE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof xp));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof xp);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new te(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(we(Mp),we(An))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),pE="ng-app-id";function lM(n){for(let e of n)e.remove()}function uM(n,e){let t=e.createElement("style");return t.textContent=n,t}function aB(n,e,t,r){let i=n.head?.querySelectorAll(`style[${pE}="${e}"],link[${pE}="${e}"]`);if(i)for(let o of i)o.removeAttribute(pE),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function mE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var vE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,aB(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,uM);r?.forEach(i=>this.addUsage(i,this.external,mE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(lM(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])lM(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,uM(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,mE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(we(Mt),we(ri),we(Ff,8),we(Bi))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),gE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},_E=/%COMP%/g;var hM="%COMP%",cB=`_nghost-${hM}`,lB=`_ngcontent-${hM}`,uB=!0,dB=new re("",{factory:()=>uB});function hB(n){return lB.replace(_E,n)}function fB(n){return cB.replace(_E,n)}function fM(n,e){return e.map(t=>t.replace(_E,n))}var EE=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,o,s,a,c=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.defaultRenderer=new Su(t,s,a,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Ap?i.applyToHost(t):i instanceof Tu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.tracingService;switch(r.encapsulation){case xr.Emulated:o=new Ap(c,u,r,this.appId,d,s,a,f);break;case xr.ShadowDom:return new Dp(c,t,r,s,a,this.nonce,f,u);case xr.ExperimentalIsolatedShadowDom:return new Dp(c,t,r,s,a,this.nonce,f);default:o=new Tu(c,u,r,d,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(we(yE),we(vE),we(ri),we(dB),we(Mt),we(An),we(Ff),we(ko,8))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),Su=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(gE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(dM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(dM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new te(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=gE[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=gE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ni.DashCase|ni.Important)?e.style.setProperty(t,r,i&ni.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ni.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=ur().getGlobalEventTarget(this.doc,e),!e))throw new te(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function dM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Dp=class extends Su{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,a,c){super(e,i,o,a),this.hostEl=t,this.sharedStylesHost=c,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=fM(r.id,u);for(let f of u){let g=document.createElement("style");s&&g.setAttribute("nonce",s),g.textContent=f,this.shadowRoot.appendChild(g)}let d=r.getExternalStyles?.();if(d)for(let f of d){let g=mE(f,i);s&&g.setAttribute("nonce",s),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Tu=class extends Su{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=c?fM(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Os.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ap=class extends Tu{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c){let u=i+"-"+r.id;super(e,t,r,o,s,a,c,u),this.contentAttr=hB(u),this.hostAttr=fB(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Rp=class n extends mu{supportsDOMEvents=!0;static makeCurrent(){oE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=pB();return t==null?null:gB(t)}resetBaseElement(){Cu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return dE(document.cookie,e)}},Cu=null;function pB(){return Cu=Cu||document.head.querySelector("base"),Cu?Cu.getAttribute("href"):null}function gB(n){return new URL(n,document.baseURI).pathname}var mB=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),pM=["alt","control","meta","shift"],yB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},gM=(()=>{class n extends Iu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ur().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),pM.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=yB[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),pM.forEach(s=>{if(s!==i){let a=vB[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(we(Mt))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();async function bE(n,e,t){let r=V({rootComponent:n},_B(e,t));return BA(r)}function _B(n,e){return{platformRef:e?.platformRef,appProviders:[...SB,...n?.providers??[]],platformProviders:IB}}function EB(){Rp.makeCurrent()}function bB(){return new zr}function wB(){return Qv(document),document}var IB=[{provide:Bi,useValue:hE},{provide:Of,useValue:EB,multi:!0},{provide:Mt,useFactory:wB}];var SB=[{provide:Nl,useValue:"root"},{provide:zr,useFactory:bB},{provide:Mp,useClass:xp,multi:!0},{provide:Mp,useClass:gM,multi:!0},EE,vE,yE,{provide:Fs,useExisting:EE},{provide:wu,useClass:mB},[]];var xu=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var TB="text/plain",CB="application/json",Qoe=`${CB}, ${TB}, */*`;var IE=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(IE||{}),wE=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,t=200,r="OK"){this.headers=e.headers||new xu,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}};var Np=class n extends wE{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=IE.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}};var mM=new re("");var xB=new re(""),DB="b",AB="h",MB="s",RB="st",NB="u",PB="rt",SE=new re(""),kB=["GET","HEAD"];function OB(n,e){let m=G(SE),{isCacheActive:t}=m,r=Ia(m,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!kB.includes(o)||!r.includeRequestsWithAuthHeaders&&FB(n)||r.filter?.(n)===!1)return e(n);let s=G(Wa);if(G(xB,{optional:!0}))throw new te(2803,!1);let c=n.url,u=LB(n,c),d=s.get(u,null),f=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(f=i.includeHeaders),d){let{[DB]:T,[PB]:M,[AB]:L,[MB]:k,[RB]:Q,[NB]:q}=d,ce=T;switch(M){case"arraybuffer":ce=new TextEncoder().encode(T).buffer;break;case"blob":ce=new Blob([T]);break}let Ie=new xu(L);return Ge(new Np({body:ce,headers:Ie,status:k,statusText:Q,url:q}))}return e(n)}function FB(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function yM(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function LB(n,e){let{params:t,method:r,responseType:i}=n,o=yM(t),s=n.serializeBody();s instanceof URLSearchParams?s=yM(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),c=VB(a);return c}function VB(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function vM(n){return[{provide:SE,useFactory:()=>(Jn("NgHttpTransferCache"),V({isCacheActive:!0},n))},{provide:mM,useValue:OB,multi:!0},{provide:Fo,multi:!0,useFactory:()=>{let e=G(Ln),t=G(SE);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var _M=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(we(Mt))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Pp=(function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n})(Pp||{});function UB(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function EM(){return UB(Pp.EventReplay,VA())}function bM(...n){let e=[],t=new Set;for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);let r=t.has(Pp.HttpTransferCacheOptions);return Qr([[],[],UA(),t.has(Pp.NoHttpTransferCache)||r?[]:vM({}),e])}var Pe="primary",Uu=Symbol("RouteTitle"),AE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ws(n){return new AE(n)}function TE(n,e,t){for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(i[0]===":")t[i.substring(1)]=o;else if(i!==o.path)return!1}return!0}function RM(n,e,t){let r=t.path.split("/"),i=r.indexOf("**");if(i===-1){if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let c={},u=n.slice(0,r.length);return TE(r,u,c)?{consumed:u,posParams:c}:null}if(i!==r.lastIndexOf("**"))return null;let o=r.slice(0,i),s=r.slice(i+1);if(o.length+s.length>n.length||t.pathMatch==="full"&&e.hasChildren()&&t.path!=="**")return null;let a={};return!TE(o,n.slice(0,o.length),a)||!TE(s,n.slice(n.length-s.length),a)?null:{consumed:n,posParams:a}}function Up(n){return new Promise((e,t)=>{n.pipe(Mi()).subscribe({next:r=>e(r),error:r=>t(r)})})}function jB(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ci(n[t],e[t]))return!1;return!0}function ci(n,e){let t=n?ME(n):void 0,r=e?ME(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!NM(n[i],e[i]))return!1;return!0}function ME(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function NM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function HB(n){return n.length>0?n[n.length-1]:null}function Ys(n){return Th(n)?n:Oo(n)?jt(Promise.resolve(n)):Ge(n)}function PM(n){return Th(n)?Up(n):Promise.resolve(n)}var $B={exact:OM,subset:FM},kM={exact:GB,subset:zB,ignored:()=>!0};function wM(n,e,t){return $B[t.paths](n.root,e.root,t.matrixParams)&&kM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function GB(n,e){return ci(n,e)}function OM(n,e,t){if(!zs(n.segments,e.segments)||!Fp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!OM(n.children[r],e.children[r],t))return!1;return!0}function zB(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>NM(n[t],e[t]))}function FM(n,e,t){return LM(n,e,e.segments,t)}function LM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!zs(i,t)||e.hasChildren()||!Fp(i,t,r))}else if(n.segments.length===t.length){if(!zs(n.segments,t)||!Fp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!FM(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!zs(n.segments,i)||!Fp(n.segments,i,r)||!n.children[Pe]?!1:LM(n.children[Pe],e,o,r)}}function Fp(n,e,t){return e.every((r,i)=>kM[t](n[i].parameters,r.parameters))}var Pr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Xe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ws(this.queryParams),this._queryParamMap}toString(){return KB.serialize(this)}},Xe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Lp(this)}},Bo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ws(this.parameters),this._parameterMap}toString(){return UM(this)}};function qB(n,e){return zs(n,e)&&n.every((t,r)=>ci(t.parameters,e[r].parameters))}function zs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function WB(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Pe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Pe&&(t=t.concat(e(i,r)))}),t}var Bu=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>new jo,providedIn:"root"})}return n})(),jo=class{parse(e){let t=new NE(e);return new Pr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Du(e.root,!0)}`,r=JB(e.queryParams),i=typeof e.fragment=="string"?`#${QB(e.fragment)}`:"";return`${t}${r}${i}`}},KB=new jo;function Lp(n){return n.segments.map(e=>UM(e)).join("/")}function Du(n,e){if(!n.hasChildren())return Lp(n);if(e){let t=n.children[Pe]?Du(n.children[Pe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Pe&&r.push(`${i}:${Du(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=WB(n,(r,i)=>i===Pe?[Du(n.children[Pe],!1)]:[`${i}:${Du(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Pe]!=null?`${Lp(n)}/${t[0]}`:`${Lp(n)}/(${t.join("//")})`}}function VM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kp(n){return VM(n).replace(/%3B/gi,";")}function QB(n){return encodeURI(n)}function RE(n){return VM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vp(n){return decodeURIComponent(n)}function IM(n){return Vp(n.replace(/\+/g,"%20"))}function UM(n){return`${RE(n.path)}${YB(n.parameters)}`}function YB(n){return Object.entries(n).map(([e,t])=>`;${RE(e)}=${RE(t)}`).join("")}function JB(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${kp(t)}=${kp(i)}`).join("&"):`${kp(t)}=${kp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var ZB=/^[^\/()?;#]+/;function CE(n){let e=n.match(ZB);return e?e[0]:""}var XB=/^[^\/()?;=#]+/;function ej(n){let e=n.match(XB);return e?e[0]:""}var tj=/^[^=?&#]+/;function nj(n){let e=n.match(tj);return e?e[0]:""}var rj=/^[^&#]+/;function ij(n){let e=n.match(rj);return e?e[0]:""}var NE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xe([],{}):new Xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Pe]=new Xe(e,t)),r}parseSegment(){let e=CE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new te(4009,!1);return this.capture(e),new Bo(Vp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=ej(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=CE(this.remaining);i&&(r=i,this.capture(r))}e[Vp(t)]=Vp(r)}parseQueryParam(e){let t=nj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=ij(this.remaining);s&&(r=s,this.capture(r))}let i=IM(t),o=IM(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=CE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new te(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Pe);let s=this.parseChildren();t[o??Pe]=Object.keys(s).length===1&&s[Pe]?s[Pe]:new Xe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new te(4011,!1)}};function BM(n){return n.segments.length>0?new Xe([],{[Pe]:n}):n}function jM(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=jM(i);if(r===Pe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Xe(n.segments,e);return oj(t)}function oj(n){if(n.numberOfChildren===1&&n.children[Pe]){let e=n.children[Pe];return new Xe(n.segments.concat(e.segments),e.children)}return n}function Ho(n){return n instanceof Pr}function HM(n,e,t=null,r=null,i=new jo){let o=$M(n);return GM(o,e,t,r,i)}function $M(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new Xe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=BM(r);return e??i}function GM(n,e,t,r,i){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return xE(o,o,o,t,r,i);let s=sj(e);if(s.toRoot())return xE(o,o,new Xe([],{}),t,r,i);let a=aj(s,o,n),c=a.processChildren?Mu(a.segmentGroup,a.index,s.commands):qM(a.segmentGroup,a.index,s.commands);return xE(o,a.segmentGroup,c,t,r,i)}function Bp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Pu(n){return typeof n=="object"&&n!=null&&n.outlets}function SM(n,e,t){n||="\u0275";let r=new Pr;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function xE(n,e,t,r,i,o){let s={};for(let[u,d]of Object.entries(r??{}))s[u]=Array.isArray(d)?d.map(f=>SM(u,f,o)):SM(u,d,o);let a;n===e?a=t:a=zM(n,e,t);let c=BM(jM(a));return new Pr(c,s,i)}function zM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=zM(o,e,t)}),new Xe(n.segments,r)}var jp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Bp(r[0]))throw new te(4003,!1);let i=r.find(Pu);if(i&&i!==HB(r))throw new te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function sj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new jp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new jp(t,e,r)}var ic=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function aj(n,e,t){if(n.isAbsolute)return new ic(e,!0,0);if(!t)return new ic(e,!1,NaN);if(t.parent===null)return new ic(t,!0,0);let r=Bp(n.commands[0])?0:1,i=t.segments.length-1+r;return cj(t,i,n.numberOfDoubleDots)}function cj(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new te(4005,!1);i=r.segments.length}return new ic(r,!1,i-o)}function lj(n){return Pu(n[0])?n[0].outlets:{[Pe]:n}}function qM(n,e,t){if(n??=new Xe([],{}),n.segments.length===0&&n.hasChildren())return Mu(n,e,t);let r=uj(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Xe(n.segments.slice(0,r.pathIndex),{});return o.children[Pe]=new Xe(n.segments.slice(r.pathIndex),n.children),Mu(o,0,i)}else return r.match&&i.length===0?new Xe(n.segments,{}):r.match&&!n.hasChildren()?PE(n,e,t):r.match?Mu(n,0,i):PE(n,e,t)}function Mu(n,e,t){if(t.length===0)return new Xe(n.segments,{});{let r=lj(t),i={};if(Object.keys(r).some(o=>o!==Pe)&&n.children[Pe]&&n.numberOfChildren===1&&n.children[Pe].segments.length===0){let o=Mu(n.children[Pe],e,t);return new Xe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=qM(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Xe(n.segments,i)}}function uj(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Pu(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!CM(c,u,s))return o;r+=2}else{if(!CM(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function PE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Pu(o)){let c=dj(o.outlets);return new Xe(r,c)}if(i===0&&Bp(t[0])){let c=n.segments[e];r.push(new Bo(c.path,TM(t[0]))),i++;continue}let s=Pu(o)?o.outlets[Pe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Bp(a)?(r.push(new Bo(s,TM(a))),i+=2):(r.push(new Bo(s,{})),i++)}return new Xe(r,{})}function dj(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=PE(new Xe([],{}),0,r))}),e}function TM(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function CM(n,e,t){return n==t.path&&ci(e,t.parameters)}var Ru="imperative",tn=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(tn||{}),er=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ks=class extends er{type=tn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},li=class extends er{urlAfterRedirects;type=tn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},wn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(wn||{}),ku=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(ku||{}),hr=class extends er{reason;code;type=tn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function WM(n){return n instanceof hr&&(n.code===wn.Redirect||n.code===wn.SupersededByNewNavigation)}var qi=class extends er{reason;code;type=tn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Qs=class extends er{error;target;type=tn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},sc=class extends er{urlAfterRedirects;state;type=tn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hp=class extends er{urlAfterRedirects;state;type=tn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$p=class extends er{urlAfterRedirects;state;shouldActivate;type=tn.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gp=class extends er{urlAfterRedirects;state;type=tn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zp=class extends er{urlAfterRedirects;state;type=tn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qp=class{route;type=tn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Wp=class{route;type=tn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Kp=class{snapshot;type=tn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qp=class{snapshot;type=tn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yp=class{snapshot;type=tn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jp=class{snapshot;type=tn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ac=class{},cc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function hj(n){return!(n instanceof ac)&&!(n instanceof cc)}var Zp=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new dc(this.rootInjector)}},dc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Zp(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(we(At))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=kE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=kE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=OE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return OE(e,this._root).map(t=>t.value)}};function kE(n,e){if(n===e.value)return e;for(let t of e.children){let r=kE(n,t);if(r)return r}return null}function OE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=OE(n,t);if(r.length)return r.unshift(e),r}return[]}var Xn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function rc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ou=class extends Xp{snapshot;constructor(e,t){super(e),this.snapshot=t,$E(this,e)}toString(){return this.snapshot.toString()}};function KM(n,e){let t=fj(n,e),r=new ln([new Bo("",{})]),i=new ln({}),o=new ln({}),s=new ln({}),a=new ln(""),c=new Wi(r,i,s,a,o,Pe,n,t.root);return c.snapshot=t.root,new Ou(new Xn(c,[]),t)}function fj(n,e){let t={},r={},i={},s=new qs([],t,i,"",r,Pe,n,null,{},e);return new Fu("",new Xn(s,[]))}var Wi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(It(u=>u[Uu]))??Ge(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(It(e=>Ws(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(It(e=>Ws(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function eg(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&YM(i)&&(r.resolve[Uu]=i.title),r}var qs=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[Uu]}constructor(e,t,r,i,o,s,a,c,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u,this._environmentInjector=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ws(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ws(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Fu=class extends Xp{url;constructor(e,t){super(t),this.url=e,$E(this,t)}toString(){return QM(this._root)}};function $E(n,e){e.value._routerState=n,e.children.forEach(t=>$E(n,t))}function QM(n){let e=n.children.length>0?` { ${n.children.map(QM).join(", ")} } `:"";return`${n.value}${e}`}function DE(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ci(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ci(e.params,t.params)||n.paramsSubject.next(t.params),jB(e.url,t.url)||n.urlSubject.next(t.url),ci(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function FE(n,e){let t=ci(n.params,e.params)&&qB(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||FE(n.parent,e.parent))}function YM(n){return typeof n.title=="string"||n.title===null}var JM=new re(""),ju=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Pe;activateEvents=new Ht;deactivateEvents=new Ht;attachEvents=new Ht;detachEvents=new Ht;routerOutletData=FA();parentContexts=G(dc);location=G(ji);changeDetector=G(pu);inputBinder=G(ig,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new te(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new te(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new LE(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=en({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ui]})}return n})(),LE=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Wi?this.route:e===dc?this.childContexts:e===JM?this.outletData:this.parent.get(e,t)}},ig=new re("");var GE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=fn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&$(0,"router-outlet")},dependencies:[ju],encapsulation:2})}return n})();function zE(n){let e=n.children&&n.children.map(zE),t=e?pe(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pe&&(t.component=GE),t}function pj(n,e,t){let r=Lu(n,e._root,t?t._root:void 0);return new Ou(r,e)}function Lu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=gj(n,e,t);return new Xn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Lu(n,a)),s}}let r=mj(e.value),i=e.children.map(o=>Lu(n,o));return new Xn(r,i)}}function gj(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Lu(n,r,i);return Lu(n,r)})}function mj(n){return new Wi(new ln(n.url),new ln(n.params),new ln(n.queryParams),new ln(n.fragment),new ln(n.data),n.outlet,n.component,n)}var lc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},ZM="ngNavigationCancelingError";function tg(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ho(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=XM(!1,wn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function XM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[ZM]=!0,t.cancellationCode=e,t}function yj(n){return eR(n)&&Ho(n.url)}function eR(n){return!!n&&n[ZM]}var VE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),DE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=rc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=rc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=rc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=rc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Jp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Qp(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(DE(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),DE(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},ng=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},oc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function vj(n,e,t){let r=n._root,i=e?e._root:null;return Au(r,i,t,[r.value])}function _j(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function hc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!u0(n)?n:e.get(n):r}function Au(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=rc(e);return n.children.forEach(s=>{Ej(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Nu(a,t.getContext(s),i)),i}function Ej(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=bj(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ng(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Au(n,e,a?a.children:null,r,i):Au(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new oc(a.outlet.component,s))}else s&&Nu(e,a,i),i.canActivateChecks.push(new ng(r)),o.component?Au(n,null,a?a.children:null,r,i):Au(n,null,t,r,i);return i}function bj(n,e,t){if(typeof t=="function")return hn(e._environmentInjector,()=>t(n,e));switch(t){case"pathParamsChange":return!zs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!zs(n.url,e.url)||!ci(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!FE(n,e)||!ci(n.queryParams,e.queryParams);default:return!FE(n,e)}}function Nu(n,e,t){let r=rc(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Nu(s,e.children.getContext(o),t):Nu(s,null,t):Nu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new oc(e.outlet.component,i)):t.canDeactivateChecks.push(new oc(null,i)):t.canDeactivateChecks.push(new oc(null,i))}function Hu(n){return typeof n=="function"}function wj(n){return typeof n=="boolean"}function Ij(n){return n&&Hu(n.canLoad)}function Sj(n){return n&&Hu(n.canActivate)}function Tj(n){return n&&Hu(n.canActivateChild)}function Cj(n){return n&&Hu(n.canDeactivate)}function xj(n){return n&&Hu(n.canMatch)}function tR(n){return n instanceof ys||n?.name==="EmptyError"}var Op=Symbol("INITIAL_VALUE");function uc(){return Ri(n=>Gy(n.map(e=>e.pipe(Ai(1),Wy(Op)))).pipe(It(e=>{for(let t of e)if(t!==!0){if(t===Op)return Op;if(t===!1||Dj(t))return t}return!0}),Di(e=>e!==Op),Ai(1)))}function Dj(n){return Ho(n)||n instanceof lc}function nR(n){return n.aborted?Ge(void 0).pipe(Ai(1)):new Qe(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function rR(n){return Sl(nR(n))}function Aj(n){return Cn(e=>{let{targetSnapshot:t,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:o}}=e;return o.length===0&&i.length===0?Ge(pe(V({},e),{guardsResult:!0})):Mj(o,t,r).pipe(Cn(s=>s&&wj(s)?Rj(t,i,n):Ge(s)),It(s=>pe(V({},e),{guardsResult:s})))})}function Mj(n,e,t){return jt(n).pipe(Cn(r=>Fj(r.component,r.route,t,e)),Mi(r=>r!==!0,!0))}function Rj(n,e,t){return jt(e).pipe(Ah(r=>Ma(Pj(r.route.parent,t),Nj(r.route,t),Oj(n,r.path),kj(n,r.route))),Mi(r=>r!==!0,!0))}function Nj(n,e){return n!==null&&e&&e(new Yp(n)),Ge(!0)}function Pj(n,e){return n!==null&&e&&e(new Kp(n)),Ge(!0)}function kj(n,e){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return Ge(!0);let r=t.map(i=>wl(()=>{let o=e._environmentInjector,s=hc(i,o),a=Sj(s)?s.canActivate(e,n):hn(o,()=>s(e,n));return Ys(a).pipe(Mi())}));return Ge(r).pipe(uc())}function Oj(n,e){let t=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(o=>_j(o)).filter(o=>o!==null).map(o=>wl(()=>{let s=o.guards.map(a=>{let c=o.node._environmentInjector,u=hc(a,c),d=Tj(u)?u.canActivateChild(t,n):hn(c,()=>u(t,n));return Ys(d).pipe(Mi())});return Ge(s).pipe(uc())}));return Ge(i).pipe(uc())}function Fj(n,e,t,r){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return Ge(!0);let o=i.map(s=>{let a=e._environmentInjector,c=hc(s,a),u=Cj(c)?c.canDeactivate(n,e,t,r):hn(a,()=>c(n,e,t,r));return Ys(u).pipe(Mi())});return Ge(o).pipe(uc())}function Lj(n,e,t,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return Ge(!0);let s=o.map(a=>{let c=hc(a,n),u=Ij(c)?c.canLoad(e,t):hn(n,()=>c(e,t)),d=Ys(u);return i?d.pipe(rR(i)):d});return Ge(s).pipe(uc(),iR(r))}function iR(n){return By($r(e=>{if(typeof e!="boolean")throw tg(n,e)}),It(e=>e===!0))}function Vj(n,e,t,r,i){let o=e.canMatch;if(!o||o.length===0)return Ge(!0);let s=o.map(a=>{let c=hc(a,n),u=xj(c)?c.canMatch(e,t):hn(n,()=>c(e,t));return Ys(u).pipe(rR(i))});return Ge(s).pipe(uc(),iR(r))}var zi=class n extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,n.prototype)}},Vu=class n extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,n.prototype)}};function Uj(n){throw new te(4e3,!1)}function Bj(n){throw XM(!1,wn.GuardRejected)}var UE=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Pe])throw Uj(`${e.redirectTo}`);i=i.children[Pe]}}async applyRedirectCommands(e,t,r,i,o){let s=await jj(t,i,o);if(s instanceof Pr)throw new Vu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Vu(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Pr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Xe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new te(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function jj(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:d,title:f,paramMap:g,queryParamMap:m}=e;return Up(Ys(hn(t,()=>r({params:u,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:f,paramMap:g,queryParamMap:m}))))}function Hj(n,e){return n.providers&&!n._injector&&(n._injector=Ya(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Nr(n){return n.outlet||Pe}function $j(n,e){let t=n.filter(r=>Nr(r)===e);return t.push(...n.filter(r=>Nr(r)!==e)),t}var BE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Gj(n,e,t,r,i,o){let s=oR(n,e,t);return s.matched?(r=Hj(e,r),Vj(r,e,t,i,o).pipe(It(a=>a===!0?s:V({},BE)))):Ge(s)}function oR(n,e,t){if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},BE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||RM)(t,n,e);if(!i)return V({},BE);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function xM(n,e,t,r){return t.length>0&&Wj(n,t,r)?{segmentGroup:new Xe(e,qj(r,new Xe(t,n.children))),slicedSegments:[]}:t.length===0&&Kj(n,t,r)?{segmentGroup:new Xe(n.segments,zj(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Xe(n.segments,n.children),slicedSegments:t}}function zj(n,e,t,r){let i={};for(let o of t)if(og(n,e,o)&&!r[Nr(o)]){let s=new Xe([],{});i[Nr(o)]=s}return V(V({},r),i)}function qj(n,e){let t={};t[Pe]=e;for(let r of n)if(r.path===""&&Nr(r)!==Pe){let i=new Xe([],{});t[Nr(r)]=i}return t}function Wj(n,e,t){return t.some(r=>og(n,e,r)&&Nr(r)!==Pe)}function Kj(n,e,t){return t.some(r=>og(n,e,r))}function og(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Qj(n,e,t){return e.length===0&&!n.children[t]}var jE=class{};async function Yj(n,e,t,r,i,o,s="emptyOnly",a){return new HE(n,e,t,r,i,s,o,a).recognize()}var Jj=31,HE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new UE(this.urlSerializer,this.urlTree)}noMatchError(e){return new te(4002,`'${e.segmentGroup}'`)}async recognize(){let e=xM(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new Xn(r,t),o=new Fu("",i),s=HM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let t=new qs([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Pe,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Pe,t),rootSnapshot:t}}catch(r){if(r instanceof Vu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof zi?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,o);let s=await this.processSegment(e,t,r,r.segments,i,!0,o);return s instanceof Xn?[s]:[]}async processChildren(e,t,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let u=r.children[c],d=$j(t,c),f=await this.processSegmentGroup(e,d,u,c,i);s.push(...f)}let a=sR(s);return Zj(a),a}async processSegment(e,t,r,i,o,s,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a)}catch(u){if(u instanceof zi||tR(u))continue;throw u}if(Qj(r,i,o))return new jE;throw new zi(r)}async processSegmentAgainstRoute(e,t,r,i,o,s,a,c){if(Nr(r)!==s&&(s===Pe||!og(i,o,r)))throw new zi(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c);throw new zi(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=oR(t,i,o);if(!c)throw new zi(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Jj&&(this.allowRedirects=!1));let m=new qs(o,u,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,DM(i),Nr(i),i.component??i._loadedComponent??null,i,AM(i),e),T=eg(m,a,this.paramsInheritanceStrategy);if(m.params=Object.freeze(T.params),m.data=Object.freeze(T.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let M=await this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,m,e),L=await this.applyRedirects.lineralizeSegments(i,M);return this.processSegment(e,r,t,L.concat(g),s,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Up(Gj(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new zi(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:g}=a,m=new qs(f,d,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,DM(r),Nr(r),r.component??r._loadedComponent??null,r,AM(r),e),T=eg(m,s,this.paramsInheritanceStrategy);m.params=Object.freeze(T.params),m.data=Object.freeze(T.data);let{segmentGroup:M,slicedSegments:L}=xM(t,f,g,c);if(L.length===0&&M.hasChildren()){let q=await this.processChildren(u,c,M,m);return new Xn(m,q)}if(c.length===0&&L.length===0)return new Xn(m,[]);let k=Nr(r)===o,Q=await this.processSegment(u,c,M,L,k?Pe:o,!0,m);return new Xn(m,Q instanceof Xn?[Q]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0){let o=t._loadedNgModuleFactory;return o&&!t._loadedInjector&&(t._loadedInjector=o.create(e).injector),{routes:t._loadedRoutes,injector:t._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Up(Lj(e,t,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=o.routes,t._loadedInjector=o.injector,t._loadedNgModuleFactory=o.factory,o}throw Bj(t)}return{routes:[],injector:e}}};function Zj(n){n.sort((e,t)=>e.value.outlet===Pe?-1:t.value.outlet===Pe?1:e.value.outlet.localeCompare(t.value.outlet))}function Xj(n){let e=n.value.routeConfig;return e&&e.path===""}function sR(n){let e=[],t=new Set;for(let r of n){if(!Xj(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=sR(r.children);e.push(new Xn(r.value,i))}return e.filter(r=>!t.has(r))}function DM(n){return n.data||{}}function AM(n){return n.resolve||{}}function e6(n,e,t,r,i,o,s){return Cn(async a=>{let{state:c,tree:u}=await Yj(n,e,t,r,a.extractedUrl,i,o,s);return pe(V({},a),{targetSnapshot:c,urlAfterRedirects:u})})}function t6(n){return Cn(e=>{let{targetSnapshot:t,guards:{canActivateChecks:r}}=e;if(!r.length)return Ge(e);let i=new Set(r.map(a=>a.route)),o=new Set;for(let a of i)if(!o.has(a))for(let c of aR(a))o.add(c);let s=0;return jt(o).pipe(Ah(a=>i.has(a)?n6(a,t,n):(a.data=eg(a,a.parent,n).resolve,Ge(void 0))),$r(()=>s++),Mh(1),Cn(a=>s===o.size?Ge(e):un))})}function aR(n){let e=n.children.map(t=>aR(t)).flat();return[n,...e]}function n6(n,e,t){let r=n.routeConfig,i=n._resolve;return r?.title!==void 0&&!YM(r)&&(i[Uu]=r.title),wl(()=>(n.data=eg(n,n.parent,t).resolve,r6(i,n,e).pipe(It(o=>(n._resolvedData=o,n.data=V(V({},n.data),o),null)))))}function r6(n,e,t){let r=ME(n);if(r.length===0)return Ge({});let i={};return jt(r).pipe(Cn(o=>i6(n[o],e,t).pipe(Mi(),$r(s=>{if(s instanceof lc)throw tg(new jo,s);i[o]=s}))),Mh(1),It(()=>i),Il(o=>tR(o)?un:$y(o)))}function i6(n,e,t){let r=e._environmentInjector,i=hc(n,r),o=i.resolve?i.resolve(e,t):hn(r,()=>i(e,t));return Ys(o)}function MM(n){return Ri(e=>{let t=n(e);return t?jt(t).pipe(It(()=>e)):Ge(e)})}var qE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Pe);return r}getResolvedTitleForRoute(t){return t.data[Uu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>G(cR),providedIn:"root"})}return n})(),cR=(()=>{class n extends qE{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(we(_M))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fc=new re("",{factory:()=>({})}),$u=new re(""),lR=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=G($_);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await PM(hn(t,()=>r.loadComponent())),s=await hR(dR(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await uR(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,r._loadedNgModuleFactory=o.factory,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function uR(n,e,t,r){let i=await PM(hn(t,()=>n.loadChildren())),o=await hR(dR(i)),s;o instanceof tp||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(n);let a,c,u=!1,d;return Array.isArray(s)?(c=s,u=!0):(a=s.create(t).injector,d=s,c=a.get($u,[],{optional:!0,self:!0}).flat()),{routes:c.map(zE),injector:a,factory:d}}function o6(n){return n&&typeof n=="object"&&"default"in n}function dR(n){return o6(n)?n.default:n}async function hR(n){return n}var sg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>G(s6),providedIn:"root"})}return n})(),s6=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fR=new re("");var a6=()=>{},pR=new re(""),gR=(()=>{class n{currentNavigation=Y(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Y(null);events=new Ut;transitionAbortWithErrorSubject=new Ut;configLoader=G(lR);environmentInjector=G(At);destroyRef=G(Sr);urlSerializer=G(Bu);rootContexts=G(dc);location=G(tc);inputBindingEnabled=G(ig,{optional:!0})!==null;titleStrategy=G(qE);options=G(fc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=G(sg);createViewTransition=G(fR,{optional:!0});navigationErrorHandler=G(pR,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Ge(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new qp(i)),r=i=>this.events.next(new Wp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Kt(()=>{this.transitions?.next(pe(V({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new ln(null),this.transitions.pipe(Di(r=>r!==null),Ri(r=>{let i=!1,o=new AbortController,s=()=>!i&&this.currentTransition?.id===r.id;return Ge(r).pipe(Ri(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",wn.SupersededByNewNavigation),un;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:c?pe(V({},c),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=a.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&d!=="reload")return this.events.next(new qi(a.id,this.urlSerializer.serialize(a.rawUrl),"",ku.IgnoredSameUrlNavigation)),a.resolve(!1),un;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Ge(a).pipe(Ri(f=>(this.events.next(new Ks(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),f.id!==this.navigationId?un:Promise.resolve(f))),e6(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),$r(f=>{r.targetSnapshot=f.targetSnapshot,r.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=f.urlAfterRedirects,m));let g=new sc(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:f,extractedUrl:g,source:m,restoredState:T,extras:M}=a,L=new Ks(f,this.urlSerializer.serialize(g),m,T);this.events.next(L);let k=KM(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=pe(V({},a),{targetSnapshot:k,urlAfterRedirects:g,extras:pe(V({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(Q=>(Q.finalUrl=g,Q)),Ge(r)}else return this.events.next(new qi(a.id,this.urlSerializer.serialize(a.extractedUrl),"",ku.IgnoredByUrlHandlingStrategy)),a.resolve(!1),un}),It(a=>{let c=new Hp(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(c),this.currentTransition=r=pe(V({},a),{guards:vj(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r}),Aj(a=>this.events.next(a)),Ri(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw tg(this.urlSerializer,a.guardsResult);let c=new $p(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(c),!s())return un;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",wn.GuardRejected),un;if(a.guards.canActivateChecks.length===0)return Ge(a);let u=new Gp(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(u),!s())return un;let d=!1;return Ge(a).pipe(t6(this.paramsInheritanceStrategy),$r({next:()=>{d=!0;let f=new zp(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(f)},complete:()=>{d||this.cancelNavigationTransition(a,"",wn.NoDataFromResolver)}}))}),MM(a=>{let c=d=>{let f=[];if(d.routeConfig?._loadedComponent)d.component=d.routeConfig?._loadedComponent;else if(d.routeConfig?.loadComponent){let g=d._environmentInjector;f.push(this.configLoader.loadComponent(g,d.routeConfig).then(m=>{d.component=m}))}for(let g of d.children)f.push(...c(g));return f},u=c(a.targetSnapshot.root);return u.length===0?Ge(a):jt(Promise.all(u).then(()=>a))}),MM(()=>this.afterPreactivation()),Ri(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,u=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return u?jt(u).pipe(It(()=>r)):Ge(r)}),Ai(1),It(a=>{let c=pj(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=r=a=pe(V({},a),{targetRouterState:c}),this.currentNavigation.update(u=>(u.targetRouterState=c,u)),this.events.next(new ac),s()&&(new VE(t.routeReuseStrategy,r.targetRouterState,r.currentRouterState,u=>this.events.next(u),this.inputBindingEnabled).activate(this.rootContexts),s()&&(i=!0,this.currentNavigation.update(u=>(u.abort=a6,u)),this.lastSuccessfulNavigation.set(Kt(this.currentNavigation)),this.events.next(new li(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),Sl(nR(o.signal).pipe(Di(()=>!i&&!r.targetRouterState),$r(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",wn.Aborted)}))),$r({complete:()=>{i=!0}}),Sl(this.transitionAbortWithErrorSubject.pipe($r(a=>{throw a}))),qy(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",wn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Il(a=>{if(i=!0,this.destroyed)return r.resolve(!1),un;if(eR(a))this.events.next(new hr(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),yj(a)?this.events.next(new cc(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new Qs(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let u=hn(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof lc){let{message:d,cancellationCode:f}=tg(this.urlSerializer,u);this.events.next(new hr(r.id,this.urlSerializer.serialize(r.extractedUrl),d,f)),this.events.next(new cc(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return un}))}))}cancelNavigationTransition(t,r,i){let o=new hr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Kt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function c6(n){return n!==Ru}var mR=new re("");var yR=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>G(l6),providedIn:"root"})}return n})(),rg=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}shouldDestroyInjector(e){return!0}},l6=(()=>{class n extends rg{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Us(n)))(i||n)}})();static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),WE=(()=>{class n{urlSerializer=G(Bu);options=G(fc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=G(tc);urlHandlingStrategy=G(sg);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Pr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Pr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=KM(null,G(At));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>G(u6),providedIn:"root"})}return n})(),u6=(()=>{class n extends WE{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Ks?this.updateStateMemento():t instanceof qi?this.commitTransition(r):t instanceof sc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ac?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof hr&&!WM(t)?this.restoreHistory(r):t instanceof Qs?this.restoreHistory(r,!0):t instanceof li&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=V(V({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=V(V({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Us(n)))(i||n)}})();static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function KE(n,e){n.events.pipe(Di(t=>t instanceof li||t instanceof hr||t instanceof Qs||t instanceof qi),It(t=>t instanceof li||t instanceof qi?0:(t instanceof hr?t.code===wn.Redirect||t.code===wn.SupersededByNewNavigation:!1)?2:1),Di(t=>t!==2),Ai(1)).subscribe(()=>{e()})}var vR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_R={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ki=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=G(rp);stateManager=G(WE);options=G(fc,{optional:!0})||{};pendingTasks=G(ei);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=G(gR);urlSerializer=G(Bu);location=G(tc);urlHandlingStrategy=G(sg);injector=G(At);_events=new Ut;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=G(yR);injectorCleanup=G(mR,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=G($u,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!G(ig,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new cn;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Kt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof hr&&r.code!==wn.Redirect&&r.code!==wn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof li)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof cc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||c6(i.source)},s);this.scheduleNavigation(a,Ru,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}hj(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ru,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Qn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Kt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(zE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=$M(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return GM(f,t,d,u??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ho(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ru,null,r)}navigate(t,r={skipLocationChange:!1}){return d6(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(ki(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},vR):r===!1?i=V({},_R):i=r,Ho(t))return wM(this.currentUrlTree,t,i);let o=this.parseUrl(t);return wM(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return KE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function d6(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new te(4008,!1)}var pc=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Y(null);get href(){return Kt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ut;applicationErrorHandler=G(Qn);options=G(fc,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(G(new gp("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){this.subscription===void 0&&(this.subscription=this.router.events.subscribe(t=>{t instanceof li&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ho(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ho(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(_e(Ki),_e(Wi),Xl("tabindex"),_e(Bs),_e(Dr),_e(ec))};static \u0275dir=en({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ae("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Lo("href",i.reactiveHref(),a_)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",gu],skipLocationChange:[2,"skipLocationChange","skipLocationChange",gu],replaceUrl:[2,"replaceUrl","replaceUrl",gu],routerLink:"routerLink"},features:[Ui]})}return n})();var p6=new re("");function QE(n,...e){return Qr([{provide:$u,multi:!0,useValue:n},[],{provide:Wi,useFactory:g6},{provide:Fo,multi:!0,useFactory:m6},e.map(t=>t.\u0275providers)])}function g6(){return G(Ki).routerState.root}function m6(){let n=G(On);return e=>{let t=n.get(Ln);if(e!==t.components[0])return;let r=n.get(Ki),i=n.get(y6);n.get(v6)===1&&r.initialNavigation(),n.get(_6,null,{optional:!0})?.setUpPreloading(),n.get(p6,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var y6=new re("",{factory:()=>new Ut}),v6=new re("",{factory:()=>1});var _6=new re("");var gc=class n{calculateTotalPoints(e){return e.points}calculateTierAndLevel(e){let t={1:[1,2,3,4],2:[5,10,15,20],3:[25,50,75,100],4:[125,250,375,500]};if(e<=0)return{tier:1,level:1};for(let r=4;r>=1;r--){let i=t[r];for(let o=i.length;o>=1;o--)if(e>=i[o-1])return{tier:r,level:o}}return{tier:1,level:1}}getPointsForTierLevel(e,t){let i={1:[1,2,3,4],2:[5,10,15,20],3:[25,50,75,100],4:[125,250,375,500]}[e];return i?i[t-1]:1}getDefenseBonus(e,t){let r=0,i=[];return(e.turnsStationary??0)>=3&&(r+=1,i.push("Shield +1")),t.some(s=>s.owner===e.owner&&s.id!==e.id&&s.tier===e.tier&&Math.max(Math.abs(s.position.x-e.position.x),Math.abs(s.position.y-e.position.y))===1)&&(r+=1,i.push("Support +1")),{bonus:r,tags:i}}getAttackLuckModifier(e){let t=Math.random(),i={1:1,2:2,3:4,4:8}[e.tier]??0;return t<.2?{delta:i,tag:`CRIT! +${i}`,isCrit:!0}:t>.8?{delta:-i,tag:`MISS! -${i}`,isCrit:!1}:{delta:0,isCrit:!1}}getWallHitPercent(e){return e===1?34:e===2?51:100}isDiagonalBlocked(e,t,r){let i=Math.sign(t.x-e.x),o=Math.sign(t.y-e.y);if(i===0||o===0)return!1;let s=r(e.x,e.y,e.x+i,e.y),a=r(e.x,e.y,e.x,e.y+o),c=r(t.x-i,t.y,t.x,t.y),u=r(t.x,t.y-o,t.x,t.y);return!!(s||a||c||u)}checkWallAlongPath(e,t,r,i){let o=t.x-e.x,s=t.y-e.y,a=Math.sign(o),c=Math.sign(s),u=Math.max(Math.abs(o),Math.abs(s));for(let d=1;d<=u;d++){let f={x:e.x+a*(d-1),y:e.y+c*(d-1)},g={x:e.x+a*d,y:e.y+c*d},m=i(f.x,f.y,g.x,g.y);if(m)return m.owner===r?{hitOwn:!0,hitEnemy:!1}:{hitOwn:!1,hitEnemy:!0,lastFrom:f}}return{hitOwn:!1,hitEnemy:!1}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var ag=class n{areAdjacent(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)===1}sortEdgeEndpoints(e,t){return e.x<t.x||e.x===t.x&&e.y<=t.y?[e,t]:[t,e]}isInNoBuildZone(e,t,r){let i=[t,r];for(let o of i){let s=Math.abs(e.x-o.x),a=Math.abs(e.y-o.y);if(Math.max(s,a)<=2)return!0}return!1}isAnyUnitAdjacentToEdge(e,t,r,i){return e.some(o=>o.owner===t&&(o.position.x===r.x&&o.position.y===r.y||o.position.x===i.x&&o.position.y===i.y))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var cg=class n{entriesSignal=Y([]);logs(){return this.entriesSignal()}add(e,t="text-gray-200"){this.entriesSignal.update(r=>[...r,{text:e,color:t,type:"other"}])}addCombat(e,t,r){let i=r?"text-yellow-300":e==="player"?"text-green-400":"text-red-400";this.entriesSignal.update(o=>[...o,{text:t,color:i,type:"combat"}])}clear(){this.entriesSignal.set([])}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var w6={NEW_DESIGN_UNIT:{en:"New Evolution",uk:"\u041D\u043E\u0432\u0430 \u0435\u0432\u043E\u043B\u044E\u0446\u0456\u044F"},SETTINGS:{en:"Settings",uk:"\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F"},NEXT_TURN:{en:"Next Turn",uk:"\u041A\u0456\u043D\u0435\u0446\u044C \u0445\u043E\u0434\u0443"},CHANGE_RECORDS_INFO:{en:"Change Difficulty or Map Size in Settings to view other boards.",uk:"\u0417\u043C\u0456\u043D\u0456\u0442\u044C \u0441\u043A\u043B\u0430\u0434\u043D\u0456\u0441\u0442\u044C \u0430\u0431\u043E \u0440\u043E\u0437\u043C\u0456\u0440 \u043A\u0430\u0440\u0442\u0438 \u0432 \u043D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F\u0445, \u0449\u043E\u0431 \u043F\u0435\u0440\u0435\u0433\u043B\u044F\u043D\u0443\u0442\u0438 \u0456\u043D\u0448\u0456 \u0434\u043E\u0448\u043A\u0438."},NO_RECORDS_YET:{en:"No records yet",uk:"\u041F\u043E\u043A\u0438 \u0449\u043E \u043D\u0435\u043C\u0430\u0454 \u0437\u0430\u043F\u0438\u0441\u0456\u0432"},TURNS:{en:"turns",uk:"\u0445\u043E\u0434\u0456\u0432"},TOP_3_LOSES_PLAYER:{en:"Player Loses (Top 3)",uk:"\u041F\u0440\u043E\u0433\u0440\u0430\u0448\u0456 \u0433\u0440\u0430\u0432\u0446\u0456\u0432 (\u0422\u043E\u043F-3)"},TOP_3_PLAYER:{en:"Player Wins (Top 3)",uk:"\u041F\u0435\u0440\u0435\u043C\u043E\u0433\u0438 \u0433\u0440\u0430\u0432\u0446\u0456\u0432 (\u0442\u043E\u043F-3)"},CURRENT:{en:"Current",uk:"\u041F\u043E\u0442\u043E\u0447\u043D\u0438\u0439"},HIGH_SCORES:{en:"High Scores",uk:"\u0420\u0435\u043A\u043E\u0440\u0434\u0438"},SECTOR_DIMENSIONS:{en:"Sector Dimensions",uk:"\u0420\u043E\u0437\u043C\u0456\u0440\u0438 \u043A\u0430\u0440\u0442\u0438"},LEVEL_SELECTION:{en:"Level Selection",uk:"\u0412\u0438\u0431\u0456\u0440 \u0440\u0456\u0432\u043D\u044F"},TACTICAL_DIFF:{en:"Tactical Difficulty",uk:"\u0422\u0430\u043A\u0442\u0438\u0447\u043D\u0430 \u0441\u043A\u043B\u0430\u0434\u043D\u0456\u0441\u0442\u044C"},SYSTEM_SETTINGS:{en:"System Settings",uk:"\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u0456 \u043D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F"},NOT_LOGS_DATA:{en:"No logs to display",uk:"\u041D\u0435\u043C\u0430\u0454 \u0437\u0430\u043F\u0438\u0441\u0456\u0432 \u0434\u043B\u044F \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F"},COMBAT_ONLY:{en:"Combat Only",uk:"\u0422\u0456\u043B\u044C\u043A\u0438 \u0431\u043E\u0439\u043E\u0432\u0456 \u0434\u0456\u0457"},CLEAR:{en:"Clear",uk:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u0438"},Action_LOG:{en:"Action Log",uk:"\u0416\u0443\u0440\u043D\u0430\u043B \u0414\u0456\u0439"},MAP_HACK:{en:"Map Hack",uk:"\u041C\u0430\u043F-\u0445\u0430\u043A"},ALL:{en:"ALL",uk:"\u0412\u0421\u0406"},ENGAGE:{en:"ENGAGE",uk:"\u0410\u0432\u0442\u043E\u043F\u0456\u043B\u043E\u0442"},AUTO:{en:"AUTO",uk:""},NIGHTMARE:{en:"Nightmare",uk:"C\u0442\u0440\u0430\u0445\u0456\u0442\u0442\u044F"},HARD:{en:"Hard",uk:"\u0414\u0443\u0436\u0438\u0439"},NORMAL:{en:"Normal",uk:"\u0417\u0432\u0438\u0447\u0430\u0439\u043D\u0438\u0439"},BABY:{en:"Baby",uk:"\u041C\u0430\u043B\u044F"},RISK:{en:"Mission Risk",uk:"\u0420\u0438\u0437\u0438\u043A \u041C\u0456\u0441\u0456\u0457"},CD:{en:"CD",uk:"\u0427\u0412"},SUPPORT:{en:"Support",uk:"\u0417\u0430\u0441\u043E\u0431\u0438 \u0434\u043B\u044F \u0406\u0441\u043D\u0443\u0432\u0430\u043D\u043D\u044F"},VIEW_LEADERBOARD:{en:"View Leaderboard",uk:"\u041F\u0435\u0440\u0435\u0433\u043B\u044F\u043D\u0443\u0442\u0438 \u0442\u0430\u0431\u043B\u0438\u0446\u044E \u043B\u0456\u0434\u0435\u0440\u0456\u0432"},SAVE_SCORE:{en:"Save Score",uk:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442"},PLAY_AGAIN:{en:"Play Again",uk:"\u0413\u0440\u0430\u0442\u0438 \u0437\u043D\u043E\u0432\u0443"},CONFIRM_NAME:{en:"Confirm Player Name",uk:"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u044C\u0442\u0435 \u0456\u043C'\u044F \u0433\u0440\u0430\u0432\u0446\u044F"},ECONOMIC_DOMINATION_GREETING:{en:"ECONOMIC DOMINATION! Forest majority held for 10 turns.",uk:"\u0415\u041A\u041E\u041D\u041E\u041C\u0406\u0427\u041D\u0410 \u0414\u041E\u041C\u0406\u041D\u0410\u0426\u0406\u042F! \u041B\u0456\u0441\u043E\u0432\u0430 \u0431\u0456\u043B\u044C\u0448\u0456\u0441\u0442\u044C \u0443\u0442\u0440\u0438\u043C\u0443\u0454\u0442\u044C\u0441\u044F \u043F\u0440\u043E\u0442\u044F\u0433\u043E\u043C 10 \u0445\u043E\u0434\u0456\u0432."},HOSTILE:{en:"Hostile",uk:"\u041F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A"},LFT:{en:"LFT",uk:"\u0445\u043E\u0434\u0456\u0432"},MONOPOLY:{en:"Monopoly:",uk:"\u041C\u043E\u043D\u043E\u043F\u043E\u043B\u0456\u044F: \u0437\u0430\u043B\u0438\u0448\u0438\u043B\u043E\u0441\u044F"},TURN_CYCLE:{en:"Turn Cycle",uk:"\u0426\u0438\u043A\u043B \u0445\u043E\u0434\u0456\u0432"},PLAYER:{en:"Player",uk:"\u0413\u0440\u0430\u0432\u0435\u0446\u044C"},COMMANDER:{en:"Commander",uk:"\u041A\u043E\u043C\u0430\u043D\u0434\u0443\u044E\u0447\u0438\u0439"},CONNECT:{en:"Connect",uk:"\u041F\u0456\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u043D\u044F"},LOGOUT:{en:"Logout",uk:"\u0412\u0438\u0445\u0456\u0434"},VERIFIED:{en:"Verified User",uk:"\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u043D\u043E"},RELOAD:{en:"Reload",uk:"\u0420\u0435\u0441\u0442\u0430\u0440\u0442"},INFO:{en:"Info",uk:"\u041F\u0440\u0430\u0432\u0438\u043B\u0430"},RECORDS:{en:"Records",uk:"\u0420\u0435\u043A\u043E\u0440\u0434\u0438"},RANKING:{en:"Ranking",uk:"\u0420\u0435\u0439\u0442\u0438\u043D\u0433"},SHAPE_TACTICS:{en:"Shape Tactics",uk:"Shape Tactics"},TURN_BASED_STRATEGY:{en:"Turn-Based Strategy",uk:"\u041F\u043E\u043A\u0440\u043E\u043A\u043E\u0432\u0430 \u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0456\u044F"},FEEDBACK_MODULE:{en:"Feedbacks",uk:"\u0412\u0456\u0434\u0433\u0443\u043A\u0438"},STRATEGIC_PLAN:{en:"Roadmap",uk:"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0456\u0447\u043D\u0438\u0439 \u041F\u043B\u0430\u043D"},AUTO_ENGAGE:{en:"Auto Engage",uk:"\u0410\u0432\u0442\u043E\u043F\u0456\u043B\u043E\u0442"},SYSTEM_LOG:{en:"Logbook",uk:"\u0420\u0435\u0454\u0441\u0442\u0440\u0438"},COMMUNITY_SIGNALS:{en:"Community Signals",uk:"\u0421\u0438\u0433\u043D\u0430\u043B\u0438 \u0421\u043F\u0456\u043B\u044C\u043D\u043E\u0442\u0438"},RETURN_TO_MAP:{en:"Return to Map",uk:"\u041F\u043E\u0432\u0435\u0440\u043D\u0443\u0442\u0438\u0441\u044C \u0434\u043E \u041C\u0430\u043F\u0438"},DEPLOY_REPORT:{en:"Deploy Report",uk:"\u041D\u0430\u0434\u0456\u0441\u043B\u0430\u0442\u0438 \u0417\u0432\u0456\u0442"},OPERATOR_ONLINE:{en:"OPERATOR ONLINE",uk:"\u041E\u041F\u0415\u0420\u0410\u0422\u041E\u0420 \u041D\u0410 \u0417\u0412\u2019\u042F\u0417\u041A\u0423"},EFFICIENCY_RATING:{en:"Efficiency Rating",uk:"\u041A\u043E\u0435\u0444\u0456\u0446\u0456\u0454\u043D\u0442 \u0415\u0444\u0435\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u0456"},TACTICAL_NOTE:{en:"Tactical Note",uk:"\u0422\u0430\u043A\u0442\u0438\u0447\u043D\u0430 \u041F\u0440\u0438\u043C\u0456\u0442\u043A\u0430"},TRANSMIT_REPORT:{en:"Transmit Report",uk:"\u041F\u0435\u0440\u0435\u0434\u0430\u0442\u0438 \u0414\u0430\u043D\u0456"},FEEDBACK_VALIDATION_RANGE:{en:"Text must be between 10 and 500 characters.",uk:"\u0422\u0435\u043A\u0441\u0442 \u043C\u0430\u0454 \u043C\u0456\u0441\u0442\u0438\u0442\u0438 \u0432\u0456\u0434 10 \u0434\u043E 500 \u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432."},FEEDBACK_LIMIT_REACHED:{en:"Daily limit reached: 3 feedbacks per 24 hours.",uk:"\u0414\u043E\u0441\u044F\u0433\u043D\u0443\u0442\u043E \u0434\u0435\u043D\u043D\u0438\u0439 \u043B\u0456\u043C\u0456\u0442: 3 \u0432\u0456\u0434\u0433\u0443\u043A\u0438 \u0437\u0430 24 \u0433\u043E\u0434\u0438\u043D\u0438."},FEEDBACK_SUBMITTED:{en:"Thanks! Your feedback was submitted.",uk:"\u0414\u044F\u043A\u0443\u0454\u043C\u043E! \u0412\u0430\u0448 \u0432\u0456\u0434\u0433\u0443\u043A \u043D\u0430\u0434\u0456\u0441\u043B\u0430\u043D\u043E."},COMMUNITY_SIGNALS_TABLE:{en:"Community Signals Table",uk:"\u0422\u0430\u0431\u043B\u0438\u0446\u044F \u0421\u0438\u0433\u043D\u0430\u043B\u0456\u0432 \u0421\u043F\u0456\u043B\u044C\u043D\u043E\u0442\u0438"},TOGGLE_BACK:{en:"Back",uk:"\u041D\u0430\u0437\u0430\u0434"},VIEW_FULL_ARCHIVE:{en:"View Full Archive",uk:"\u041F\u043E\u0432\u043D\u0438\u0439 \u0410\u0440\u0445\u0456\u0432"},TABLE_OPERATOR:{en:"Operator",uk:"\u041E\u043F\u0435\u0440\u0430\u0442\u043E\u0440"},TABLE_RATING:{en:"Rating",uk:"\u041E\u0446\u0456\u043D\u043A\u0430"},TABLE_MESSAGE:{en:"Message",uk:"\u041F\u043E\u0432\u0456\u0434\u043E\u043C\u043B\u0435\u043D\u043D\u044F"},TABLE_DATE:{en:"Date",uk:"\u0414\u0430\u0442\u0430"},NO_SIGNALS:{en:"No signals",uk:"\u041D\u0435\u043C\u0430\u0454 \u0441\u0438\u0433\u043D\u0430\u043B\u0456\u0432"},PREVIOUS:{en:"Previous",uk:"\u041F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u044F"},NEXT:{en:"Next",uk:"\u041D\u0430\u0441\u0442\u0443\u043F\u043D\u0430"},GAME_GUIDE:{en:"Game Guide",uk:"\u041F\u043E\u043B\u044C\u043E\u0432\u0438\u0439 \u0414\u043E\u0432\u0456\u0434\u043D\u0438\u043A"},VICTORY_CONDITIONS:{en:"Victory Conditions",uk:"\u0423\u043C\u043E\u0432\u0438 \u041F\u0435\u0440\u0435\u043C\u043E\u0433\u0438"},MONOPOLY_LABEL:{en:"Monopoly",uk:"\u041C\u043E\u043D\u043E\u043F\u043E\u043B\u0456\u044F"},MONOPOLY_DESC:{en:"Hold forest majority for 10 turns.",uk:"\u0423\u0442\u0440\u0438\u043C\u0443\u0439\u0442\u0435 \u0431\u0456\u043B\u044C\u0448\u0456\u0441\u0442\u044C \u043B\u0456\u0441\u0456\u0432 \u043F\u0440\u043E\u0442\u044F\u0433\u043E\u043C 10 \u0445\u043E\u0434\u0456\u0432."},ANNIHILATION:{en:"Annihilation",uk:"\u0417\u043D\u0438\u0449\u0435\u043D\u043D\u044F"},ANNIHILATION_DESC:{en:"Reduce enemy Base HP to 0.",uk:"\u0417\u043C\u0435\u043D\u0448\u0442\u0435 HP \u0431\u0430\u0437\u0438 \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0430 \u0434\u043E 0."},UNIT_EVOLUTION:{en:"Unit Evolution",uk:"\u0415\u0432\u043E\u043B\u044E\u0446\u0456\u044F \u042E\u043D\u0456\u0442\u0456\u0432"},NEW_UNIT_EVOLUTION:{en:"New Unit Evolution",uk:"\u041D\u043E\u0432\u0430 \u0415\u0432\u043E\u043B\u044E\u0446\u0456\u044F \u042E\u043D\u0456\u0442\u0456\u0432"},EVOLUTION:{en:"Evolution",uk:"\u0415\u0432\u043E\u043B\u044E\u0446\u0456\u044F"},EVOLUTION_DESC:{en:"Two T2 merge into a T3.",uk:"\u0414\u0432\u0456 T2 \u0437\u043B\u0438\u0432\u0430\u044E\u0442\u044C\u0441\u044F \u0443 T3."},COMBAT_DEEP_DIVE:{en:"Combat Deep-Dive",uk:"\u0411\u043E\u0439\u043E\u0432\u0438\u0439 \u0410\u043D\u0430\u043B\u0456\u0437"},SUCCESSFUL_ATTACK:{en:"Successful Attack",uk:"\u0423\u0441\u043F\u0456\u0448\u043D\u0430 \u0410\u0442\u0430\u043A\u0430"},SUCCESSFUL_ATTACK_DESC:{en:"Attacker tier \u2265 defender; defender downgraded or destroyed.",uk:"\u0420\u0430\u043D\u0433 \u0430\u0442\u0430\u043A\u0443\u044E\u0447\u043E\u0433\u043E \u2265 \u0437\u0430\u0445\u0438\u0441\u043D\u0438\u043A\u0430; \u0437\u0430\u0445\u0438\u0441\u043D\u0438\u043A \u043F\u043E\u043D\u0438\u0436\u0443\u0454\u0442\u044C\u0441\u044F \u0430\u0431\u043E \u0437\u043D\u0438\u0449\u0443\u0454\u0442\u044C\u0441\u044F."},CRITICAL_HIT:{en:"Critical Hit",uk:"\u041A\u0440\u0438\u0442\u0438\u0447\u043D\u0438\u0439 \u0423\u0434\u0430\u0440"},CRITICAL_HIT_DESC:{en:"Chance-based bonus (tier-scaled)",uk:"\u0419\u043C\u043E\u0432\u0456\u0440\u043D\u0456\u0441\u043D\u0438\u0439 \u0431\u043E\u043D\u0443\u0441 (\u0437\u0430\u043B\u0435\u0436\u0438\u0442\u044C \u0432\u0456\u0434 \u0440\u0430\u043D\u0433\u0443)"},MISS:{en:"Miss",uk:"\u041F\u0440\u043E\u043C\u0430\u0445"},MISS_DESC:{en:"Attack can MISS; lower effective impact.",uk:"\u0410\u0442\u0430\u043A\u0430 \u043C\u043E\u0436\u0435 \u041F\u0420\u041E\u041C\u0410\u0425\u041D\u0423\u0422\u0418\u0421\u042F; \u0437\u043D\u0438\u0436\u0435\u043D\u0438\u0439 \u0435\u0444\u0435\u043A\u0442."},MOVEMENT:{en:"Movement",uk:"\u041C\u0430\u043D\u0435\u0432\u0440\u0443\u0432\u0430\u043D\u043D\u044F"},T1_1_TILE:{en:"T1: 1 tile",uk:"T1: 1 \u043A\u043B\u0456\u0442\u0438\u043D\u043A\u0430"},T3_3_TILES:{en:"T3: 3 tiles",uk:"T3: 3 \u043A\u043B\u0456\u0442\u0438\u043D\u043A\u0438"},FOREST_CYCLE:{en:"Forest Cycle",uk:"\u0426\u0438\u043A\u043B \u041B\u0456\u0441\u0443"},TURN_1:{en:"Turn 1",uk:"\u0425\u0456\u0434 1"},TURN_2:{en:"Turn 2",uk:"\u0425\u0456\u0434 2"},PLUS_8_WOOD_PER_TURN:{en:"+8 Wood/turn",uk:"+8 \u0434\u0435\u0440\u0435\u0432\u0430/\u0445\u0456\u0434"},WALL_LEGEND:{en:"Wall Legend",uk:"\u041B\u0435\u0433\u0435\u043D\u0434\u0430 \u0421\u0442\u0456\u043D"},AI_FACTION:{en:"AI",uk:"AI"}};function wR(n,e){let t=w6[n];return t?t[e]??t.en:n}var In=class n{difficultySignal=Y("normal");mapSizeSignal=Y(10);langSignal=Y("uk");version="v.0.7.0";diffArr=["baby","normal","hard","nightmare"];storageKey="shape_tactics_settings";constructor(){this.loadSettings()}difficulty(){return this.difficultySignal()}setDifficulty(e){this.difficultySignal.set(e),this.persistSettings()}difficultyLabel(){let e=this.difficultySignal();return this.getDifficultyLabel(e)}getDifficultyLabel(e){return e==="baby"?"BABY":e==="normal"?"NORMAL":e==="hard"?"HARD":"NIGHTMARE"}getAiReserveBonus(e){let t=this.difficultySignal(),r=e%2===0;return t==="baby"?r?1:0:t==="normal"?1:t==="hard"?2:3}isHard(){return this.difficultySignal()==="hard"}isNightmare(){return this.difficultySignal()==="nightmare"}mapSize(){return this.mapSizeSignal()}setMapSize(e){this.mapSizeSignal.set(e),this.persistSettings()}mapSizeLabel(){return`${this.mapSizeSignal()}x${this.mapSizeSignal()}`}currentLang(){return this.langSignal()}setLang(e){this.langSignal.set(e),this.persistSettings()}t(e){return wR(e,this.langSignal())}loadSettings(){if(!(typeof window>"u"))try{let e=localStorage.getItem(this.storageKey);if(!e)return;let t=JSON.parse(e);if(!t||typeof t!="object")return;let r=["baby","normal","hard","nightmare"],i=[10,20,30],o=["en","uk"],s=t.difficulty&&r.includes(t.difficulty)?t.difficulty:this.difficultySignal(),a=t.gridSize&&i.includes(t.gridSize)?t.gridSize:this.mapSizeSignal(),c=t.language&&o.includes(t.language)?t.language:this.langSignal();this.difficultySignal.set(s),this.mapSizeSignal.set(a),this.langSignal.set(c)}catch{}}persistSettings(){if(!(typeof window>"u"))try{let e={gridSize:this.mapSizeSignal(),difficulty:this.difficultySignal(),language:this.langSignal()};localStorage.setItem(this.storageKey,JSON.stringify(e))}catch{}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var lg=class n{generateForests(e,t,r){let i=e*e,o=Math.max(1,Math.floor(i*.1)),s=[],a=(c,u)=>{let d=Math.max(Math.abs(c-t.x),Math.abs(u-t.y)),f=Math.max(Math.abs(c-r.x),Math.abs(u-r.y));return d<=3||f<=3};for(;s.length<o;){let c=Math.floor(Math.random()*e),u=Math.floor(Math.random()*e);a(c,u)||s.some(d=>d.x===c&&d.y===u)||s.push({x:c,y:u})}return s}computeVisibility(e,t,r,i,o){let s={player:new Set,ai:new Set},a=(d,f)=>d>=0&&d<e&&f>=0&&f<e,c=(d,f,g)=>{a(f,g)&&d.add(`${f},${g}`)},u=(d,f,g)=>{for(let m=-g;m<=g;m++)for(let T=-g;T<=g;T++){let M=f.x+m,L=f.y+T;Math.max(Math.abs(m),Math.abs(T))<=g&&c(d,M,L)}};if(o){for(let d=0;d<e;d++)for(let f=0;f<e;f++)s.player.add(`${d},${f}`),s.ai.add(`${d},${f}`);return s}u(s.player,r,3),u(s.ai,i,3);for(let d of t){let f=d.owner==="player"?s.player:s.ai;u(f,d.position,2)}return s}mergeExplored(e,t){let r=new Set(e);return t.forEach(i=>r.add(i)),r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var ug=class n{getHighestAffordableCost(e){let t=[500,375,250,125,100,75,50,25,20,15,10,5,4,3,2,1];for(let r of t)if(e>=r)return r;return 0}computeWoodGain(e,t){let r=e.filter(i=>i.owner===t).filter(i=>i.position&&i.position.x!==void 0&&i.position.y!==void 0).length;return r>0?r*2:0}applyMonopolyTick(e,t,r){let i=t.length;if(i===0)return{next:{player:0,ai:0}};let o=u=>r.filter(d=>d.owner===u&&t.some(f=>f.x===d.position.x&&f.y===d.position.y)).length,s=o("player"),a=o("ai"),c={player:e.player,ai:e.ai};if(s===i){if(c.player=e.player+1,c.ai=0,c.player>=10)return{next:c,winner:"player"}}else if(a===i){if(c.ai=e.ai+1,c.player=0,c.ai>=10)return{next:c,winner:"ai"}}else c.player=0,c.ai=0;return{next:c}}computeAiReserveDump(e,t,r,i){let o=r,s=[];for(let c=-2;c<=2;c++)for(let u=-2;u<=2;u++){if(c===0&&u===0)continue;let d=t.x+c,f=t.y+u;d<0||d>=e||f<0||f>=e||Math.max(Math.abs(c),Math.abs(u))>2||i(d,f)||s.push({x:d,y:f})}let a=[];for(;o>0&&s.length>0;){let c=this.getHighestAffordableCost(o);if(c<=0)break;let u=this.calculateTierAndLevel(c),d=s.shift();a.push({id:crypto.randomUUID(),position:V({},d),level:u.level,tier:u.tier,points:c,owner:"ai",turnsStationary:0,forestOccupationTurns:0,productionActive:!1,hasActed:!0}),o-=c}return{created:a,remaining:o}}calculateTierAndLevel(e){let t={1:[1,2,3,4],2:[5,10,15,20],3:[25,50,75,100],4:[125,250,375,500]};if(e<=0)return{tier:1,level:1};for(let r=4;r>=1;r--){let i=t[r];for(let o=i.length;o>=1;o--)if(e>=i[o-1])return{tier:r,level:o}}return{tier:1,level:1}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var dg=class n{constructor(e,t){this.combat=e;this.settings=t}goals=new Map;lastPhase="none";interceptUntil=new Map;setGoal(e,t){this.goals.set(e,t)}pickBestMove(e){let t=this.chooseBestEndingAction(e);return t&&(t.type==="move"||t.type==="attack")?{unit:t.unit,target:t.target,reason:t.reason}:null}chooseBestEndingAction(e){let t=e.unitsSignal().filter(y=>y.owner==="ai"&&!y.hasActed);t=t.filter(y=>!(y.tier<=2&&e.isForest(y.position.x,y.position.y)&&e.isAnchoredGatherer(y.id)));let r=typeof e.queuedUnitId=="function"?e.queuedUnitId():null;r&&(t=t.filter(y=>y.id===r));let i=typeof e.currentMood=="function"?e.currentMood():"none",o=this.settings.difficulty()==="baby"?-1e4:i==="rage"?5e4:i==="angry"?1e4:0;if(t.length===0)return null;let s=e.getBasePosition("ai"),a=e.getBasePosition("player"),c=e.forestsSignal(),d=c.filter(y=>!e.getUnitAt(y.x,y.y)).filter(y=>e.isVisibleToAi(y.x,y.y)),f=c.filter(y=>!e.isVisibleToAi(y.x,y.y)),g=e.unitsSignal().filter(y=>y.owner==="ai"&&e.isForest(y.position.x,y.position.y)).length,m=e.unitsSignal().filter(y=>y.owner==="ai").length,T=[1,2,3].some(y=>e.unitsSignal().filter(Ne=>Ne.owner==="ai"&&Ne.tier===y&&!e.isForest(Ne.position.x,Ne.position.y)).length>=5),M=e.unitsSignal().filter(y=>y.owner==="player"),L=M.some(y=>Math.max(Math.abs(y.position.x-s.x),Math.abs(y.position.y-s.y))<=3),k=M.filter(y=>Math.max(Math.abs(y.position.x-s.x),Math.abs(y.position.y-s.y))<=4),Q=k.length>0,ce=k.filter(y=>Math.max(Math.abs(y.position.x-s.x),Math.abs(y.position.y-s.y))<=2).length>0,Ie=M.some(y=>Math.max(Math.abs(y.position.x-s.x),Math.abs(y.position.y-s.y))<=5),ie=typeof e.turnSignal=="function"?e.turnSignal()<=40:!1,x=e.unitsSignal().filter(y=>y.owner==="ai"),I=x.filter(y=>y.tier===3&&!e.isForest(y.position.x,y.position.y)).length,C=x.filter(y=>y.tier===4&&!e.isForest(y.position.x,y.position.y)).length,D=I+C>=5,A=D?"full_rush":Q?"defense":ie?"expansion":"none";if(A!==this.lastPhase){try{console.log(A==="full_rush"?"AI Phase: FULL RUSH ACTIVATED - Initiating All-Out Assault":A==="defense"?"AI Phase: Base Defense Activated":A==="expansion"?"AI Phase: Expansion":"AI Phase: Normal")}catch{}this.lastPhase=A}D&&t.sort((y,Ne)=>{let Nn=Math.abs(y.position.x-a.x)+Math.abs(y.position.y-a.y),vr=Math.abs(Ne.position.x-a.x)+Math.abs(Ne.position.y-a.y);return Nn-vr});let R=typeof e.aggressionMode=="function"?!!e.aggressionMode():M.filter(y=>e.isForest(y.position.x,y.position.y)).length*2>=t.filter(y=>e.isForest(y.position.x,y.position.y)).length*2,S=c.length>0?c.every(y=>{let Ne=e.getUnitAt(y.x,y.y);return!!Ne&&Ne.owner==="ai"}):!0,Tt=c.length>0?c.every(y=>!!e.getUnitAt(y.x,y.y)):!1,Qt=c.filter(y=>{let Ne=e.getUnitAt(y.x,y.y);return!!Ne&&Ne.owner==="player"}),be=null,jn=t.filter(y=>Math.max(Math.abs(y.position.x-s.x),Math.abs(y.position.y-s.y))<=3).length,Ii={x:Math.floor(e.gridSize/2),y:Math.floor(e.gridSize/2)},bt=k.length>0?k.reduce((y,Ne)=>{let Nn=Math.max(Math.abs(Ne.position.x-s.x),Math.abs(Ne.position.y-s.y)),vr=Math.max(Math.abs(y.position.x-s.x),Math.abs(y.position.y-s.y));return Nn<vr?Ne:y},k[0]):null,go=t.length>0?t.reduce((y,Ne)=>this.combat.calculateTotalPoints(Ne)>this.combat.calculateTotalPoints(y)?Ne:y,t[0]):null,os=[];if(bt){let y=bt.position.x,Ne=bt.position.y,Nn=Math.sign(s.x-y),vr=Math.sign(s.y-Ne),le=0,as=Math.max(10,e.gridSize*2);for(;y!==s.x||Ne!==s.y;){if(le++,le>as){try{console.warn("[AI] Path build safety break near base")}catch{}break}if(y+=Nn,Ne+=vr,!e.inBounds(y,Ne)||y===s.x&&Ne===s.y)break;os.push({x:y,y:Ne})}}Q&&go&&bt&&(this.goals.set(go.id,{x:bt.position.x,y:bt.position.y}),typeof e.turnSignal=="function"&&this.interceptUntil.set(go.id,e.turnSignal()+3));let Vd=new Map(e.aiUnitTimeNearBase()),Ud=new Map(e.unitStutterBanSignal?.()??new Map),yr=new Map;for(let[y,Ne]of this.goals.entries())if(Ne&&e.isForest(Ne.x,Ne.y)){let Nn=`${Ne.x},${Ne.y}`;yr.set(Nn,(yr.get(Nn)||0)+1)}for(let y of t){let Ne=e.calculateValidMoves(y),Nn=Math.max(Math.abs(y.position.x-s.x),Math.abs(y.position.y-s.y))<=3,vr=Vd.get(y.id)||0,le=this.goals.get(y.id)||null,as=le!==null,jd=as?(()=>{let j=e.getUnitAt(le.x,le.y);return!!(j&&j.owner==="ai"&&this.combat.calculateTotalPoints(j)>=this.combat.calculateTotalPoints(y))})():!1,el=(!as||jd)&&(!e.isForest(y.position.x,y.position.y)||Ie||y.tier>=3),tl=typeof e.totalWarMode=="function"?e.totalWarMode():!1;if(el){if(tl)le={x:a.x,y:a.y};else if(e.isForest(y.position.x,y.position.y)){let j=M.filter(P=>e.isForest(P.position.x,P.position.y));if(R&&j.length>0){let P=j.reduce((z,W)=>{let ge=Math.abs(y.position.x-W.position.x)+Math.abs(y.position.y-W.position.y),Ce=Math.abs(y.position.x-z.position.x)+Math.abs(y.position.y-z.position.y);return ge<Ce?W:z},j[0]);le={x:P.position.x,y:P.position.y}}else{let P=M.length===0?null:[...M].sort((W,ge)=>{let Ce=Math.abs(y.position.x-W.position.x)+Math.abs(y.position.y-W.position.y),je=Math.abs(y.position.x-ge.position.x)+Math.abs(y.position.y-ge.position.y);return Ce-je})[0];P?le={x:P.position.x,y:P.position.y}:d.length>0?le=d.reduce((z,W)=>Math.abs(y.position.x-W.x)+Math.abs(y.position.y-W.y)<Math.abs(y.position.x-z.x)+Math.abs(y.position.y-z.y)?W:z,d[0]):f.length>0?le=f.reduce((z,W)=>Math.abs(y.position.x-W.x)+Math.abs(y.position.y-W.y)<Math.abs(y.position.x-z.x)+Math.abs(y.position.y-z.y)?W:z,f[0]):le={x:0,y:0}}}else{let j=M.filter(P=>e.isForest(P.position.x,P.position.y)).map(P=>({x:P.position.x,y:P.position.y}));if(j.length>0)le=j.reduce((z,W)=>{let ge=Math.abs(y.position.x-W.x)+Math.abs(y.position.y-W.y),Ce=Math.abs(y.position.x-z.x)+Math.abs(y.position.y-z.y);return ge<Ce?W:z},j[0]);else if(d.length>0){let P=Math.min(...d.map(W=>yr.get(`${W.x},${W.y}`)||0)),z=d.filter(W=>(yr.get(`${W.x},${W.y}`)||0)===P);le=z.reduce((W,ge)=>Math.abs(y.position.x-ge.x)+Math.abs(y.position.y-ge.y)<Math.abs(y.position.x-W.x)+Math.abs(y.position.y-W.y)?ge:W,z[0])}else if(f.length>0){let P=Math.min(...f.map(W=>yr.get(`${W.x},${W.y}`)||0)),z=f.filter(W=>(yr.get(`${W.x},${W.y}`)||0)===P);le=z.reduce((W,ge)=>Math.abs(y.position.x-ge.x)+Math.abs(y.position.y-ge.y)<Math.abs(y.position.x-W.x)+Math.abs(y.position.y-W.y)?ge:W,z[0])}else{let P=M.length===0?null:[...M].sort((W,ge)=>{let Ce=Math.abs(y.position.x-W.position.x)+Math.abs(y.position.y-W.position.y),je=Math.abs(y.position.x-ge.position.x)+Math.abs(y.position.y-ge.position.y);return Ce-je})[0];le=P?{x:P.position.x,y:P.position.y}:{x:0,y:0}}}this.goals.set(y.id,le)}jn>3&&vr>=5&&(le=Ii);let Tn=e.isForest(y.position.x,y.position.y),nl=Tn&&(y.forestOccupationTurns??0)>0&&!(y.productionActive??!1),rl=e.unitsSignal().some(j=>j.owner==="ai"&&j.id!==y.id&&j.tier<=2&&Math.max(Math.abs(j.position.x-y.position.x),Math.abs(j.position.y-y.position.y))<=2);if(nl&&!Ie&&y.tier<3){this.goals.set(y.id,{x:y.position.x,y:y.position.y});continue}if(y.tier>=3){let j=c,P=j.length?j.reduce((W,ge)=>{let Ce=Math.abs(y.position.x-ge.x)+Math.abs(y.position.y-ge.y),je=Math.abs(y.position.x-W.x)+Math.abs(y.position.y-W.y);return Ce<je?ge:W},j[0]):null;if((y.forestOccupationTurns??0)===0&&!Tn&&P&&(le={x:P.x,y:P.y},this.goals.set(y.id,le)),Tn&&rl){this.goals.set(y.id,{x:a.x,y:a.y});let W=[{x:y.position.x+1,y:y.position.y},{x:y.position.x-1,y:y.position.y},{x:y.position.x,y:y.position.y+1},{x:y.position.x,y:y.position.y-1}].filter(Ce=>e.inBounds(Ce.x,Ce.y));if(W.filter(Ce=>!!e.getWallBetween(y.position.x,y.position.y,Ce.x,Ce.y)).length===W.length){let Ce=W.reduce((je,Je)=>{let st=Math.abs(Je.x-a.x)+Math.abs(Je.y-a.y),et=Math.abs(je.x-a.x)+Math.abs(je.y-a.y);return st<et?Je:je});be={unit:y,target:{x:y.position.x,y:y.position.y},score:22e5,type:"wall_attack",reason:"Siege: Breakthrough (Handover)",edge:{from:V({},y.position),to:Ce}};continue}}}if(Ne.some(j=>j.x===a.x&&j.y===a.y)){let j=y.tier===3&&y.level>=2||y.tier>=4?3e5:0,P=5e7+o+j;(be===null||P>be.score)&&(be={unit:y,target:{x:a.x,y:a.y},score:P,type:"attack",reason:"Siege: Attack Base (WIN)"})}else{let j=[{x:a.x+1,y:a.y},{x:a.x-1,y:a.y},{x:a.x,y:a.y+1},{x:a.x,y:a.y-1}].filter(P=>e.inBounds(P.x,P.y));for(let P of j){let z=e.getWallBetween(a.x,a.y,P.x,P.y);if(z&&z.owner==="neutral"){if(y.position.x===P.x&&y.position.y===P.y||y.position.x===a.x&&y.position.y===a.y){let ge=y.tier===3&&y.level>=2||y.tier>=4?3e5:0,Ce=2e6+o+ge;(be===null||Ce>be.score)&&(be={unit:y,target:V({},y.position),score:Ce,type:"wall_attack",reason:"Siege: Destroy Base Wall",edge:{from:{x:a.x,y:a.y},to:{x:P.x,y:P.y}}})}else if(Ne.some(Ce=>Ce.x===P.x&&Ce.y===P.y||Ce.x===a.x&&Ce.y===a.y)){let Ce=Ne.find(et=>et.x===P.x&&et.y===P.y||et.x===a.x&&et.y===a.y),je=y.tier===3&&y.level>=2||y.tier>=4?3e5:0,Je=18e5+o+je;(be===null||Je>be.score)&&(be={unit:y,target:{x:Ce.x,y:Ce.y},score:Je,type:"move",reason:"Siege: Position at Base Wall"})}}}}if(le){let j=e.getUnitAt(le.x,le.y);if(j&&j.owner==="player"&&e.isForest(le.x,le.y)){let P=le.x,z=le.y;if(Ne.some(ge=>ge.x===P&&ge.y===z)){(be===null||3e5>be.score)&&(be={unit:y,target:{x:P,y:z},score:3e5,type:"attack",reason:"Attack Enemy on Forest"});continue}else{let ge=d.length>0?d:f;if(ge.length>0)le=ge.reduce((je,Je)=>{let st=Math.abs(y.position.x-Je.x)+Math.abs(y.position.y-Je.y),et=Math.abs(y.position.x-je.x)+Math.abs(y.position.y-je.y);return st<et?Je:je},ge[0]),this.goals.set(y.id,le);else continue}}}let mt=null;if(le&&e.isForest(le.x,le.y)&&!e.getUnitAt(le.x,le.y)){let P=[{x:le.x+1,y:le.y},{x:le.x-1,y:le.y},{x:le.x,y:le.y+1},{x:le.x,y:le.y-1}].filter(z=>e.inBounds(z.x,z.y)).filter(z=>{let W=e.getWallBetween(z.x,z.y,le.x,le.y);return!!(W&&W.owner==="neutral")});P.length>0&&(mt=P.reduce((z,W)=>{let ge=Math.abs(y.position.x-z.x)+Math.abs(y.position.y-z.y);return Math.abs(y.position.x-W.x)+Math.abs(y.position.y-W.y)+3<ge?W:z},P[0]))}let Si=[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}];for(let j of Si){let P={x:y.position.x+j.x,y:y.position.y+j.y};if(!e.inBounds(P.x,P.y)||!e.isForest(P.x,P.y)||e.getUnitAt(P.x,P.y))continue;let W=e.getWallBetween(y.position.x,y.position.y,P.x,P.y);if(W&&(W.owner==="neutral"||W.owner==="ai")){let ge=(y.tier>=3?7e6:9e5)+o,Ce=W.owner==="ai"?"Sabotage Own Wall to Forest":"Breach Neutral Wall to Forest";(be===null||ge>be.score)&&(be={unit:y,target:{x:y.position.x,y:y.position.y},score:ge,type:"wall_attack",reason:Ce,edge:{from:V({},y.position),to:P}})}else if(W&&W.owner==="player"){let Ce=[{x:P.x+1,y:P.y},{x:P.x-1,y:P.y},{x:P.x,y:P.y+1},{x:P.x,y:P.y-1}].filter(st=>e.inBounds(st.x,st.y)).filter(st=>e.getUnitAt(st.x,st.y)?!1:!e.getWallBetween(st.x,st.y,P.x,P.y)),je=Math.abs(y.position.x-P.x)+Math.abs(y.position.y-P.y);if((Ce.length>0?Ce.reduce((st,et)=>{let Yt=Math.abs(y.position.x-et.x)+Math.abs(y.position.y-et.y)+1;return Math.min(st,Yt)},1/0):1/0)-je>4){let st=(y.tier>=3?8e6:y.tier===3&&y.level===1?105e4:85e4)+o;(be===null||st>be.score)&&(be={unit:y,target:{x:y.position.x,y:y.position.y},score:st,type:"wall_attack",reason:"Attack Player Wall to Forest",edge:{from:V({},y.position),to:P}})}}}for(let j of Si){let P={x:y.position.x+j.x,y:y.position.y+j.y};if(P.x===a.x&&P.y===a.y){let z=e.getWallBetween(y.position.x,y.position.y,P.x,P.y);if(z&&(z.owner==="neutral"||z.owner==="player")&&y.tier>=3){let W=8e6+o;(be===null||W>be.score)&&(be={unit:y,target:{x:y.position.x,y:y.position.y},score:W,type:"wall_attack",reason:"Breach Wall to Base",edge:{from:V({},y.position),to:P}})}}}if(le){let j=Math.sign(le.x-y.position.x),P=Math.sign(le.y-y.position.y),z=y.position.x+(j!==0?j:0),W=y.position.y+(P!==0?P:0);if(e.inBounds(z,W)){let ge=e.getUnitAt(z,W);if(ge&&ge.owner==="ai")for(let Ce of Si){let je={x:y.position.x+Ce.x,y:y.position.y+Ce.y};if(!e.inBounds(je.x,je.y))continue;let Je=e.getWallBetween(y.position.x,y.position.y,je.x,je.y);if(Je&&(Je.owner==="player"||Je.owner==="neutral")){let et=(Je.owner==="player"?65e4:6e5)+o;(be===null||et>be.score)&&(be={unit:y,target:{x:y.position.x,y:y.position.y},score:et,type:"wall_attack",reason:"Anti-Clustering: Adjacent Wall Attack",edge:{from:V({},y.position),to:je}})}}}}if(le){let j=le.x-y.position.x,P=le.y-y.position.y;if(j!==0&&P===0||j===0&&P!==0){let z=Math.sign(j),W=Math.sign(P),ge={x:y.position.x+z,y:y.position.y+W};if(e.inBounds(ge.x,ge.y)&&e.getWallBetween(y.position.x,y.position.y,ge.x,ge.y)){let je=(y.tier>=3?8e6:15e5)+o;(be===null||je>be.score)&&(be={unit:y,target:{x:y.position.x,y:y.position.y},score:je,type:"wall_attack",reason:"Wall Breaker: Unblock Path",edge:{from:V({},y.position),to:ge}})}}if(Math.abs(j)>=1&&Math.abs(P)>=1){let z=Math.sign(j),W=Math.sign(P),ge={x:y.position.x+z,y:y.position.y+W};if(e.inBounds(ge.x,ge.y)&&this.combat.isDiagonalBlocked(y.position,ge,(je,Je,st,et)=>e.getWallBetween(je,Je,st,et))){let je={x:y.position.x+z,y:y.position.y},Je={x:y.position.x,y:y.position.y+W},st=e.getWallBetween(y.position.x,y.position.y,je.x,je.y),et=e.getWallBetween(y.position.x,y.position.y,Je.x,Je.y),Yt=null;if(st?Yt={from:V({},y.position),to:je}:et&&(Yt={from:V({},y.position),to:Je}),Yt){let yo=(y.tier>=3?8e6:15e5)+o;(be===null||yo>be.score)&&(be={unit:y,target:{x:y.position.x,y:y.position.y},score:yo,type:"wall_attack",reason:"Wall Breaker: Unblock Diagonal Path",edge:Yt})}}}}let sy=d.length===0&&f.length===0&&!mt;if(vr>=2&&(sy||M.length>0))for(let j of Si){let P={x:y.position.x+j.x,y:y.position.y+j.y};if(!e.inBounds(P.x,P.y))continue;let z=e.getWallBetween(y.position.x,y.position.y,P.x,P.y);if(z&&(z.owner==="neutral"||z.owner==="player")){let W=y.tier>=3?8e6:12e5;(be===null||W>be.score)&&(be={unit:y,target:{x:y.position.x,y:y.position.y},score:W,type:"wall_attack",reason:"Anti-Stagnation: Break Obstacle",edge:{from:V({},y.position),to:P}})}}let Br=M.filter(j=>Math.max(Math.abs(j.position.x-y.position.x),Math.abs(j.position.y-y.position.y))===1),mo=Br.length>0?Br.reduce((j,P)=>this.combat.calculateTotalPoints(P)>this.combat.calculateTotalPoints(j)?P:j,Br[0]):null,cs=os.length>0&&Ne.some(j=>os.some(P=>P.x===j.x&&P.y===j.y));for(let j of Ne){let P=0,z="Action",W=e.getUnitAt(j.x,j.y),ge=oe=>[{x:oe.x+1,y:oe.y},{x:oe.x-1,y:oe.y},{x:oe.x,y:oe.y+1},{x:oe.x,y:oe.y-1}].filter(ft=>e.inBounds(ft.x,ft.y)).filter(ft=>!e.getUnitAt(ft.x,ft.y)).length,Ce=Math.max(Math.abs(y.position.x-s.x),Math.abs(y.position.y-s.y)),je=Math.max(Math.abs(j.x-s.x),Math.abs(j.y-s.y)),Je=c.length?Math.min(...c.map(oe=>Math.abs(y.position.x-oe.x)+Math.abs(y.position.y-oe.y))):1/0,st=c.length?Math.min(...c.map(oe=>Math.abs(j.x-oe.x)+Math.abs(j.y-oe.y))):1/0,et=c.filter(oe=>{let Me=e.getUnitAt(oe.x,oe.y);return!!Me&&Me.owner==="player"}),Yt=et.length?Math.min(...et.map(oe=>Math.abs(y.position.x-oe.x)+Math.abs(y.position.y-oe.y))):1/0,yo=et.length?Math.min(...et.map(oe=>Math.abs(j.x-oe.x)+Math.abs(j.y-oe.y))):1/0,il=new Map(e.unitMoveHistorySignal()).get(y.id),Hn=Array.isArray(il)?il:[],Ti=Hn.length>=2?Hn[Hn.length-2]:null,xt=Hn.length>=3?Hn[Hn.length-3]:null,Hd=Ti&&j.x===Ti.x&&j.y===Ti.y,Ci=Tn&&!e.isForest(j.x,j.y);if(D){let oe=Math.abs(y.position.x-a.x)+Math.abs(y.position.y-a.y),Me=Math.abs(j.x-a.x)+Math.abs(j.y-a.y);Me<oe?(P+=5e7,z="FULL RUSH: Charge Base"):Me===oe?P+=1e5:P-=5e6,W&&W.owner==="player"&&Math.abs(W.position.x-a.x)+Math.abs(W.position.y-a.y)<oe&&(P+=2e7,z="FULL RUSH: Clear Path to Base"),Tn&&j.x===y.position.x&&j.y===y.position.y&&g>=3&&(P=-5e6,z="FULL RUSH: Abandon Forest for Assault")}else if(y.tier>=3&&Ci){let oe=Math.abs(j.x-a.x)+Math.abs(j.y-a.y)<=2,Me=M.some(wt=>Math.abs(j.x-wt.position.x)+Math.abs(j.y-wt.position.y)<=2),ft=e.unitsSignal().some(wt=>wt.owner==="ai"&&wt.id!==y.id&&Math.max(Math.abs(wt.position.x-y.position.x),Math.abs(wt.position.y-y.position.y))<=1);!S&&!(oe||Me)&&!ft&&(P-=2e6,z="Penalty: Leaving forest without replacement")}let xi=Ud.get(y.id),ay=xi&&xi.until>e.turnSignal()&&xi.tiles.has(`${j.x},${j.y}`);if(y.tier===1&&(Ti&&j.x===Ti.x&&j.y===Ti.y||xt&&j.x===xt.x&&j.y===xt.y)&&(P-=25e3,z="Anti-Loop Penalty"),y.tier<=2&&!W&&xt&&j.x===xt.x&&j.y===xt.y&&(P=-1e6,z="Anti-Loop: Stay or different path"),ay&&(P-=3e4,z="Stutter Ban Penalty"),Tn&&Br.length===0&&!W&&Ci&&!Q&&(P=-1e3),Tn&&y.tier<=2&&Ci&&Br.length>0&&Br.some(Me=>this.combat.calculateTotalPoints(Me)>this.combat.calculateTotalPoints(y))&&(P=-1e6,z="Hold Forest"),D)Tn&&j.x===y.position.x&&j.y===y.position.y&&g>=3&&(P=-5e6,z="FULL RUSH: Abandon Forest for Assault");else if(!W&&Tn&&j.x===y.position.x&&j.y===y.position.y){let oe=Br.some(ft=>this.combat.calculateTotalPoints(ft)>this.combat.calculateTotalPoints(y)),Me=S&&y.tier>=3;!oe&&!Me&&(P=Math.max(P,1e7),z="Hold: Stay on forest")}if(!W&&!D){if(e.isForest(j.x,j.y)&&!e.getUnitAt(j.x,j.y)&&(tl?(P=-1e3,z="Ignore Forest (Total War)"):y.tier>=3?(P=5e6*(ie&&!Q?3:1),z="Priority: T3 capture empty forest"):(P=1e6*(ie&&!Q?3:1),z=g<3?`Priority 0: Capture Forest ${j.x},${j.y}`:`Priority 1: Capture Forest ${j.x},${j.y}`,ie&&!Q&&Math.abs(y.position.x-j.x)+Math.abs(y.position.y-j.y)===1&&(P=Math.max(P,12e6),z=`Early Capture: Forest ${j.x},${j.y}`))),le){let oe=Math.abs(y.position.x-le.x)+Math.abs(y.position.y-le.y),Me=Math.abs(j.x-le.x)+Math.abs(j.y-le.y);if(Me<oe&&(P+=5e4*(oe-Me),z=d.length>0?`Priority 1: Toward Forest ${le.x},${le.y}`:f.length>0?`Priority 7: Toward Fog Forest ${le.x},${le.y}`:`Toward Goal ${le.x},${le.y}`),m>10||T){let wt=Math.abs(y.position.x-a.x)+Math.abs(y.position.y-a.y),yt=Math.abs(j.x-a.x)+Math.abs(j.y-a.y);yt<wt&&(P+=15e4*(wt-yt),z="Aggress: Toward Player Base"),yo<Yt&&(P+=12e4*(Yt-yo),z="Aggress: Toward Player Forest");let Jt=ge(j)-ge(y.position);Jt>0&&(P+=5e4*Jt,z="Unblock: Clear path")}if((()=>{let wt=Math.sign(le.x-y.position.x),yt=Math.sign(le.y-y.position.y),Jt=y.position.x+(wt!==0?wt:0),vt=y.position.y+(yt!==0?yt:0);return e.inBounds(Jt,vt)?!!e.getWallBetween(y.position.x,y.position.y,Jt,vt):!1})()&&j.x===y.position.x&&j.y===y.position.y){let yt=e.getWallBetween(y.position.x,y.position.y,y.position.x+Math.sign(le.x-y.position.x),y.position.y+Math.sign(le.y-y.position.y))?.owner;y.tier>=3?(P=Math.max(P,8e6+o),z="Breach: Wall blocks high-priority path"):(P+=(yt==="ai"?7e5:8e5)+o,z=yt==="ai"?"Sabotage: Own Wall Blocks Path":"Siege: Breakthrough")}}if(mt){let oe=Math.abs(y.position.x-mt.x)+Math.abs(y.position.y-mt.y),Me=Math.abs(j.x-mt.x)+Math.abs(j.y-mt.y);Me<oe&&(P+=2e5*(oe-Me),z="Approach Neutral Wall to Forest"),j.x===mt.x&&j.y===mt.y&&(P+=5e5,z="Position for Wall Breach")}if(j.x===a.x&&j.y===a.y&&(P+=1e4,z="Attack Base (Override)"),bt){let oe=os.some(vt=>vt.x===j.x&&vt.y===j.y),Me=Math.abs(y.position.x-bt.position.x)+Math.abs(y.position.y-bt.position.y),ft=Math.abs(j.x-bt.position.x)+Math.abs(j.y-bt.position.y),yt=Math.max(Math.abs(bt.position.x-s.x),Math.abs(bt.position.y-s.y))<=2,Jt=j.x===y.position.x&&j.y===y.position.y;if(y.tier>=3&&bt.tier>=3&&ft===1)P=4e7,z="DEFENSE: T3 Move to Intercept Threat";else if(oe){let vt=yt?25e5:15e5;P<vt&&(P=vt),P+=yt?2e4:5e3,z=yt?"Panic Defense: Block Path To Base":"Defense: Block Path To Base"}else if(ft<Me){let vt=y.id===(go?.id??"")?1e6:5e3;P+=vt*(Me-ft),y.tier>=3&&(P+=4e3),z=y.id===(go?.id??"")?"DEFENSE: Strongest Intercept":"Defense: Move Toward Base Threat"}Jt&&cs&&(P-=yt?5e4:1e4,ce?z="Penalty: Standing Still With Imminent Base Threat":Q&&(z="Penalty: Standing Still With Base Threat"))}if(y.tier>=3){let oe=Math.abs(y.position.x-a.x)+Math.abs(y.position.y-a.y),Me=Math.abs(j.x-a.x)+Math.abs(j.y-a.y);Me<oe&&(P+=2e3*(oe-Me),z="Hunter: Toward Base",S&&(P=Math.max(P,4e6),z="Hunt: Approach Base"))}if(Nn&&st<Je&&(P*=10),je>Ce&&st<Je&&(P+=500),mo&&this.combat.calculateTotalPoints(mo)>this.combat.calculateTotalPoints(y)){let oe=Math.abs(y.position.x-mo.position.x)+Math.abs(y.position.y-mo.position.y),Me=Math.abs(j.x-mo.position.x)+Math.abs(j.y-mo.position.y);Me>oe&&(P+=75e3*(Me-oe),z="Retreat")}}else if(W.owner==="player"){let oe=Math.max(Math.abs(W.position.x-s.x),Math.abs(W.position.y-s.y)),Me=oe<=3,ft=oe<=2,wt=this.combat.calculateTotalPoints(y),yt=this.combat.calculateTotalPoints(W),Jt=wt>yt,vt=W.tier>=3,ls=y.tier>=3;y.tier>=3&&e.isForest(W.position.x,W.position.y)&&(P=1e7,z="Aggression: Liberate forest"),!Tn&&Tt&&et.length>0&&e.isForest(W.position.x,W.position.y)&&(P=12e6,z="LIBERATE: Attack player forest"),oe<=4&&(y.tier>=3||Jt)&&(P=15e6,z="INTERCEPT: Base Siege"),Me?ls&&vt?(P=5e7,z="CRITICAL DEFENSE: T3 Intercepts Threat"):Jt?(P=2e7,z="CRITICAL DEFENSE: Eliminate Base Threat",ft&&(P+=5e6)):vt&&y.tier<=2?(P=0,z="Ignore: T1 Suicide vs T3 useless"):(P=1e3,z="DEFENSE: Desperation Attack"):Jt?(vt?(P=8e6,z="COMBAT: Kill High Value Target (T3+)"):(P=4e6,z="COMBAT: Kill Enemy"),y.tier<W.tier&&(P+=2e6,z+=" (Efficient Trade)")):y.tier<=2?(P=0,z="Ignore: No guaranteed kill"):(P=1e5,z="COMBAT: Chip Damage"),R&&(P+=5e5),L&&(P+=1e6)}else if(W.tier===y.tier&&je>Ce){let oe=this.combat.calculateTotalPoints(y)+this.combat.calculateTotalPoints(W),{tier:Me}=this.combat.calculateTierAndLevel(oe);Me>y.tier&&!Nn&&!Tn&&(P=1e3,z="Merge Up")}let _r="move";W&&W.owner==="player"&&(_r="attack"),W&&W.owner==="ai"&&W.tier===y.tier&&(_r="merge"),(m>10||T)&&_r==="merge"&&(P+=5e6,z="Anti-Stall: Merge first");let cy=this.interceptUntil.get(y.id)||0;if(y.id===(go?.id??"")&&cy>(typeof e.turnSignal=="function"?e.turnSignal():0)&&bt){let oe=Math.abs(y.position.x-bt.position.x)+Math.abs(y.position.y-bt.position.y),Me=Math.abs(j.x-bt.position.x)+Math.abs(j.y-bt.position.y);Me<oe&&(P+=5e5*(oe-Me),z="DEFENSE: Intercept Lock")}Hd&&(P=Math.floor(P*.1),P-=3e5,z="Penalty: Inertia");let ly=(()=>{let oe=Hn.slice(-6),Me=new Set(oe.map(ft=>`${ft.x},${ft.y}`));return oe.length>=6&&Me.size<=3})();if(y.tier===1&&ly){let oe=d.length>0?d:f;if(oe.length>0){let Me=oe.reduce((yt,Jt)=>{let vt=Math.abs(y.position.x-Jt.x)+Math.abs(y.position.y-Jt.y),ls=Math.abs(y.position.x-yt.x)+Math.abs(y.position.y-yt.y);return vt<ls?Jt:yt},oe[0]),ft=Math.abs(y.position.x-Me.x)+Math.abs(y.position.y-Me.y),wt=Math.abs(j.x-Me.x)+Math.abs(j.y-Me.y);wt<ft&&(P+=1e5*(ft-wt),z="Breakout: Toward Forest")}}(y.forestOccupationTurns??0)>0&&(j.x!==y.position.x||j.y!==y.position.y)&&(P-=2e3),(be===null||P>be.score)&&(be={unit:y,target:j,score:P,type:_r,reason:z})}}if(!be)return null;let ss=this.goals.get(be.unit.id),Bd=ss?`Goal: Forest at ${ss.x},${ss.y}`:"Goal: None";return{type:be.type,unit:be.unit,target:be.target,reason:be.reason,edge:be.edge}}getWallBuildActions(e){let t=[],r=e.unitsSignal().filter(d=>d.owner==="ai"),i=e.unitsSignal().filter(d=>d.owner==="player"),o=e.wallsSignal(),s=typeof e.totalWarMode=="function"?e.totalWarMode():!1,a=(d,f)=>o.some(g=>g.tile1.x===d.x&&g.tile1.y===d.y&&g.tile2.x===f.x&&g.tile2.y===f.y||g.tile1.x===f.x&&g.tile1.y===f.y&&g.tile2.x===d.x&&g.tile2.y===d.y),c=(d,f)=>Math.abs(d.x-f.x)+Math.abs(d.y-f.y),u=(d,f)=>Math.max(Math.abs(d.x-f.x),Math.abs(d.y-f.y));for(let d of r){if(d.tier>=3)continue;let f=[{x:d.position.x+1,y:d.position.y},{x:d.position.x-1,y:d.position.y},{x:d.position.x,y:d.position.y+1},{x:d.position.x,y:d.position.y-1}].filter(M=>e.inBounds(M.x,M.y));if(s&&e.isForest(d.position.x,d.position.y)){for(let M of f)!a(d.position,M)&&e.canBuildWallBetween(d.position,M)&&t.push({from:d.position,to:M});continue}let g=i.filter(M=>u(d.position,M.position)<=2);if(g.length===0)continue;let m=g.sort((M,L)=>c(d.position,M.position)-c(d.position,L.position))[0],T=f.sort((M,L)=>c(M,m.position)-c(L,m.position));if(d.tier===1&&e.isForest(d.position.x,d.position.y))for(let M of T)!a(d.position,M)&&e.canBuildWallBetween(d.position,M)&&t.push({from:d.position,to:M});else if(d.tier===2){let M=0;for(let L of T){if(M>=2)break;!a(d.position,L)&&e.canBuildWallBetween(d.position,L)&&(t.push({from:d.position,to:L}),M++)}}}return t}static \u0275fac=function(t){return new(t||n)(we(gc),we(In))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var IR=()=>{};var CR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},C6=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},xR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=o>>2,f=(o&3)<<4|a>>4,g=(a&15)<<2|u>>6,m=u&63;c||(m=64,s||(g=64)),r.push(t[d],t[f],t[g],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(CR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):C6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||f==null)throw new JE;let g=o<<2|a>>4;if(r.push(g),u!==64){let m=a<<4&240|u>>2;if(r.push(m),f!==64){let T=u<<6&192|f;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},JE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},x6=function(n){let e=CR(n);return xR.encodeByteArray(e,!0)},zu=function(n){return x6(n).replace(/\./g,"")},fg=function(n){try{return xR.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function DR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var D6=()=>DR().__FIREBASE_DEFAULTS__,A6=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},M6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&fg(n[1]);return e&&JSON.parse(e)},pg=()=>{try{return IR()||D6()||A6()||M6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},XE=n=>pg()?.emulatorHosts?.[n],AR=n=>{let e=XE(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},eb=()=>pg()?.config,tb=n=>pg()?.[`_${n}`];var hg=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function $o(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gg(n){return(await fetch(n,{credentials:"include"})).ok}function MR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=V({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[zu(JSON.stringify(t)),zu(JSON.stringify(s)),""].join(".")}var Gu={};function R6(){let n={prod:[],emulator:[]};for(let e of Object.keys(Gu))Gu[e]?n.emulator.push(e):n.prod.push(e);return n}function N6(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var SR=!1;function mg(n,e){if(typeof window>"u"||typeof document>"u"||!$o(window.location.host)||Gu[n]===e||Gu[n]||SR)return;Gu[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=R6().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{SR=!0,s()},g}function d(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){let g=N6(r),m=t("text"),T=document.getElementById(m)||document.createElement("span"),M=t("learnmore"),L=document.getElementById(M)||document.createElement("a"),k=t("preprendIcon"),Q=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let q=g.element;a(q),d(L,M);let ce=u();c(Q,k),q.append(Q,T,L,ce),document.body.appendChild(q)}o?(T.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function P6(){let n=pg()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PR(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function kR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OR(){let n=nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FR(){return!P6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nb(){try{return typeof indexedDB=="object"}catch{return!1}}function LR(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var k6="FirebaseError",tr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=k6,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qi.prototype.create)}},Qi=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?O6(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new tr(i,a,r)}};function O6(n,e){return n.replace(F6,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var F6=/\{\$([^}]+)}/g;function VR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function kr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(TR(o)&&TR(s)){if(!kr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function TR(n){return n!==null&&typeof n=="object"}function mc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function UR(n,e){let t=new ZE(n,e);return t.subscribe.bind(t)}var ZE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");L6(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=YE),i.error===void 0&&(i.error=YE),i.complete===void 0&&(i.complete=YE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function L6(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function YE(){}var jae=14400*1e3;function rn(n){return n&&n._delegate?n._delegate:n}var fr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Zs="[DEFAULT]";var rb=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new hg;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(U6(e))try{this.getOrInitializeService({instanceIdentifier:Zs})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zs){return this.instances.has(e)}getOptions(e=Zs){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:V6(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zs){return this.component?this.component.multipleInstances?e:Zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function V6(n){return n===Zs?void 0:n}function U6(n){return n.instantiationMode==="EAGER"}var yg=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new rb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var B6=[],He=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(He||{}),j6={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},H6=He.INFO,$6={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},G6=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=$6[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Go=class{constructor(e){this.name=e,this._logLevel=H6,this._logHandler=G6,this._userLogHandler=null,B6.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?j6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}};var z6=(n,e)=>e.some(t=>n instanceof t),BR,jR;function q6(){return BR||(BR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W6(){return jR||(jR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var HR=new WeakMap,ob=new WeakMap,$R=new WeakMap,ib=new WeakMap,ab=new WeakMap;function K6(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(ui(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&HR.set(t,n)}).catch(()=>{}),ab.set(e,n),e}function Q6(n){if(ob.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});ob.set(n,e)}var sb={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ob.get(n);if(e==="objectStoreNames")return n.objectStoreNames||$R.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ui(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function GR(n){sb=n(sb)}function Y6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(vg(this),e,...t);return $R.set(r,e.sort?e.sort():[e]),ui(r)}:W6().includes(n)?function(...e){return n.apply(vg(this),e),ui(HR.get(this))}:function(...e){return ui(n.apply(vg(this),e))}}function J6(n){return typeof n=="function"?Y6(n):(n instanceof IDBTransaction&&Q6(n),z6(n,q6())?new Proxy(n,sb):n)}function ui(n){if(n instanceof IDBRequest)return K6(n);if(ib.has(n))return ib.get(n);let e=J6(n);return e!==n&&(ib.set(n,e),ab.set(e,n)),e}var vg=n=>ab.get(n);function qR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=ui(s);return r&&s.addEventListener("upgradeneeded",c=>{r(ui(s.result),c.oldVersion,c.newVersion,ui(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var Z6=["get","getKey","getAll","getAllKeys","count"],X6=["put","add","delete","clear"],cb=new Map;function zR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cb.get(e))return cb.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=X6.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Z6.includes(t)))return;let o=async function(s,...a){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&c.done]))[0]};return cb.set(e,o),o}GR(n=>pe(V({},n),{get:(e,t,r)=>zR(e,t)||n.get(e,t,r),has:(e,t)=>!!zR(e,t)||n.has(e,t)}));var ub=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(e8(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function e8(n){return n.getComponent()?.type==="VERSION"}var db="@firebase/app",WR="0.14.7";var Yi=new Go("@firebase/app"),t8="@firebase/app-compat",n8="@firebase/analytics-compat",r8="@firebase/analytics",i8="@firebase/app-check-compat",o8="@firebase/app-check",s8="@firebase/auth",a8="@firebase/auth-compat",c8="@firebase/database",l8="@firebase/data-connect",u8="@firebase/database-compat",d8="@firebase/functions",h8="@firebase/functions-compat",f8="@firebase/installations",p8="@firebase/installations-compat",g8="@firebase/messaging",m8="@firebase/messaging-compat",y8="@firebase/performance",v8="@firebase/performance-compat",_8="@firebase/remote-config",E8="@firebase/remote-config-compat",b8="@firebase/storage",w8="@firebase/storage-compat",I8="@firebase/firestore",S8="@firebase/ai",T8="@firebase/firestore-compat",C8="firebase",x8="12.8.0";var hb="[DEFAULT]",D8={[db]:"fire-core",[t8]:"fire-core-compat",[r8]:"fire-analytics",[n8]:"fire-analytics-compat",[o8]:"fire-app-check",[i8]:"fire-app-check-compat",[s8]:"fire-auth",[a8]:"fire-auth-compat",[c8]:"fire-rtdb",[l8]:"fire-data-connect",[u8]:"fire-rtdb-compat",[d8]:"fire-fn",[h8]:"fire-fn-compat",[f8]:"fire-iid",[p8]:"fire-iid-compat",[g8]:"fire-fcm",[m8]:"fire-fcm-compat",[y8]:"fire-perf",[v8]:"fire-perf-compat",[_8]:"fire-rc",[E8]:"fire-rc-compat",[b8]:"fire-gcs",[w8]:"fire-gcs-compat",[I8]:"fire-fst",[T8]:"fire-fst-compat",[S8]:"fire-vertex","fire-js":"fire-js",[C8]:"fire-js-all"};var _g=new Map,A8=new Map,fb=new Map;function KR(n,e){try{n.container.addComponent(e)}catch(t){Yi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function qo(n){let e=n.name;if(fb.has(e))return Yi.debug(`There were multiple attempts to register component ${e}.`),!1;fb.set(e,n);for(let t of _g.values())KR(t,n);for(let t of A8.values())KR(t,n);return!0}function Wu(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function nr(n){return n==null?!1:n.settings!==void 0}var M8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zo=new Qi("app","Firebase",M8);var pb=class{constructor(e,t,r){this._isDeleted=!1,this._options=V({},e),this._config=V({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zo.create("app-deleted",{appName:this._name})}};var Wo=x8;function Ku(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=V({name:hb,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw zo.create("bad-app-name",{appName:String(i)});if(t||(t=eb()),!t)throw zo.create("no-options");let o=_g.get(i);if(o){if(kr(t,o.options)&&kr(r,o.config))return o;throw zo.create("duplicate-app",{appName:i})}let s=new yg(i);for(let c of fb.values())s.addComponent(c);let a=new pb(t,r,s);return _g.set(i,a),a}function Eg(n=hb){let e=_g.get(n);if(!e&&n===hb&&eb())return Ku();if(!e)throw zo.create("no-app",{appName:n});return e}function Or(n,e,t){let r=D8[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yi.warn(s.join(" "));return}qo(new fr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var R8="firebase-heartbeat-database",N8=1,qu="firebase-heartbeat-store",lb=null;function ZR(){return lb||(lb=qR(R8,N8,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qu)}catch(t){console.warn(t)}}}}).catch(n=>{throw zo.create("idb-open",{originalErrorMessage:n.message})})),lb}async function P8(n){try{let t=(await ZR()).transaction(qu),r=await t.objectStore(qu).get(XR(n));return await t.done,r}catch(e){if(e instanceof tr)Yi.warn(e.message);else{let t=zo.create("idb-get",{originalErrorMessage:e?.message});Yi.warn(t.message)}}}async function QR(n,e){try{let r=(await ZR()).transaction(qu,"readwrite");await r.objectStore(qu).put(e,XR(n)),await r.done}catch(t){if(t instanceof tr)Yi.warn(t.message);else{let r=zo.create("idb-set",{originalErrorMessage:t?.message});Yi.warn(r.message)}}}function XR(n){return`${n.name}!${n.options.appId}`}var k8=1024,O8=30,gb=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new mb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=YR();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>O8){let i=L8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Yi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=YR(),{heartbeatsToSend:t,unsentEntries:r}=F8(this._heartbeatsCache.heartbeats),i=zu(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Yi.warn(e),""}}};function YR(){return new Date().toISOString().substring(0,10)}function F8(n,e=k8){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),JR(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),JR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var mb=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nb()?LR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await P8(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return QR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return QR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function JR(n){return zu(JSON.stringify({version:2,heartbeats:n})).length}function L8(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function V8(n){qo(new fr("platform-logger",e=>new ub(e),"PRIVATE")),qo(new fr("heartbeat",e=>new gb(e),"PRIVATE")),Or(db,WR,n),Or(db,WR,"esm2020"),Or("fire-js","")}V8("");var U8="firebase",B8="12.8.0";Or(U8,B8,"app");var eN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tN={};var Ji,yb;(function(){var n;function e(x,I){function C(){}C.prototype=I.prototype,x.F=I.prototype,x.prototype=new C,x.prototype.constructor=x,x.D=function(D,A,R){for(var S=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)S[Tt-2]=arguments[Tt];return I.prototype[A].apply(D,S)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,I,C){C||(C=0);let D=Array(16);if(typeof I=="string")for(var A=0;A<16;++A)D[A]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(A=0;A<16;++A)D[A]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=x.g[0],C=x.g[1],A=x.g[2];let R=x.g[3],S;S=I+(R^C&(A^R))+D[0]+3614090360&4294967295,I=C+(S<<7&4294967295|S>>>25),S=R+(A^I&(C^A))+D[1]+3905402710&4294967295,R=I+(S<<12&4294967295|S>>>20),S=A+(C^R&(I^C))+D[2]+606105819&4294967295,A=R+(S<<17&4294967295|S>>>15),S=C+(I^A&(R^I))+D[3]+3250441966&4294967295,C=A+(S<<22&4294967295|S>>>10),S=I+(R^C&(A^R))+D[4]+4118548399&4294967295,I=C+(S<<7&4294967295|S>>>25),S=R+(A^I&(C^A))+D[5]+1200080426&4294967295,R=I+(S<<12&4294967295|S>>>20),S=A+(C^R&(I^C))+D[6]+2821735955&4294967295,A=R+(S<<17&4294967295|S>>>15),S=C+(I^A&(R^I))+D[7]+4249261313&4294967295,C=A+(S<<22&4294967295|S>>>10),S=I+(R^C&(A^R))+D[8]+1770035416&4294967295,I=C+(S<<7&4294967295|S>>>25),S=R+(A^I&(C^A))+D[9]+2336552879&4294967295,R=I+(S<<12&4294967295|S>>>20),S=A+(C^R&(I^C))+D[10]+4294925233&4294967295,A=R+(S<<17&4294967295|S>>>15),S=C+(I^A&(R^I))+D[11]+2304563134&4294967295,C=A+(S<<22&4294967295|S>>>10),S=I+(R^C&(A^R))+D[12]+1804603682&4294967295,I=C+(S<<7&4294967295|S>>>25),S=R+(A^I&(C^A))+D[13]+4254626195&4294967295,R=I+(S<<12&4294967295|S>>>20),S=A+(C^R&(I^C))+D[14]+2792965006&4294967295,A=R+(S<<17&4294967295|S>>>15),S=C+(I^A&(R^I))+D[15]+1236535329&4294967295,C=A+(S<<22&4294967295|S>>>10),S=I+(A^R&(C^A))+D[1]+4129170786&4294967295,I=C+(S<<5&4294967295|S>>>27),S=R+(C^A&(I^C))+D[6]+3225465664&4294967295,R=I+(S<<9&4294967295|S>>>23),S=A+(I^C&(R^I))+D[11]+643717713&4294967295,A=R+(S<<14&4294967295|S>>>18),S=C+(R^I&(A^R))+D[0]+3921069994&4294967295,C=A+(S<<20&4294967295|S>>>12),S=I+(A^R&(C^A))+D[5]+3593408605&4294967295,I=C+(S<<5&4294967295|S>>>27),S=R+(C^A&(I^C))+D[10]+38016083&4294967295,R=I+(S<<9&4294967295|S>>>23),S=A+(I^C&(R^I))+D[15]+3634488961&4294967295,A=R+(S<<14&4294967295|S>>>18),S=C+(R^I&(A^R))+D[4]+3889429448&4294967295,C=A+(S<<20&4294967295|S>>>12),S=I+(A^R&(C^A))+D[9]+568446438&4294967295,I=C+(S<<5&4294967295|S>>>27),S=R+(C^A&(I^C))+D[14]+3275163606&4294967295,R=I+(S<<9&4294967295|S>>>23),S=A+(I^C&(R^I))+D[3]+4107603335&4294967295,A=R+(S<<14&4294967295|S>>>18),S=C+(R^I&(A^R))+D[8]+1163531501&4294967295,C=A+(S<<20&4294967295|S>>>12),S=I+(A^R&(C^A))+D[13]+2850285829&4294967295,I=C+(S<<5&4294967295|S>>>27),S=R+(C^A&(I^C))+D[2]+4243563512&4294967295,R=I+(S<<9&4294967295|S>>>23),S=A+(I^C&(R^I))+D[7]+1735328473&4294967295,A=R+(S<<14&4294967295|S>>>18),S=C+(R^I&(A^R))+D[12]+2368359562&4294967295,C=A+(S<<20&4294967295|S>>>12),S=I+(C^A^R)+D[5]+4294588738&4294967295,I=C+(S<<4&4294967295|S>>>28),S=R+(I^C^A)+D[8]+2272392833&4294967295,R=I+(S<<11&4294967295|S>>>21),S=A+(R^I^C)+D[11]+1839030562&4294967295,A=R+(S<<16&4294967295|S>>>16),S=C+(A^R^I)+D[14]+4259657740&4294967295,C=A+(S<<23&4294967295|S>>>9),S=I+(C^A^R)+D[1]+2763975236&4294967295,I=C+(S<<4&4294967295|S>>>28),S=R+(I^C^A)+D[4]+1272893353&4294967295,R=I+(S<<11&4294967295|S>>>21),S=A+(R^I^C)+D[7]+4139469664&4294967295,A=R+(S<<16&4294967295|S>>>16),S=C+(A^R^I)+D[10]+3200236656&4294967295,C=A+(S<<23&4294967295|S>>>9),S=I+(C^A^R)+D[13]+681279174&4294967295,I=C+(S<<4&4294967295|S>>>28),S=R+(I^C^A)+D[0]+3936430074&4294967295,R=I+(S<<11&4294967295|S>>>21),S=A+(R^I^C)+D[3]+3572445317&4294967295,A=R+(S<<16&4294967295|S>>>16),S=C+(A^R^I)+D[6]+76029189&4294967295,C=A+(S<<23&4294967295|S>>>9),S=I+(C^A^R)+D[9]+3654602809&4294967295,I=C+(S<<4&4294967295|S>>>28),S=R+(I^C^A)+D[12]+3873151461&4294967295,R=I+(S<<11&4294967295|S>>>21),S=A+(R^I^C)+D[15]+530742520&4294967295,A=R+(S<<16&4294967295|S>>>16),S=C+(A^R^I)+D[2]+3299628645&4294967295,C=A+(S<<23&4294967295|S>>>9),S=I+(A^(C|~R))+D[0]+4096336452&4294967295,I=C+(S<<6&4294967295|S>>>26),S=R+(C^(I|~A))+D[7]+1126891415&4294967295,R=I+(S<<10&4294967295|S>>>22),S=A+(I^(R|~C))+D[14]+2878612391&4294967295,A=R+(S<<15&4294967295|S>>>17),S=C+(R^(A|~I))+D[5]+4237533241&4294967295,C=A+(S<<21&4294967295|S>>>11),S=I+(A^(C|~R))+D[12]+1700485571&4294967295,I=C+(S<<6&4294967295|S>>>26),S=R+(C^(I|~A))+D[3]+2399980690&4294967295,R=I+(S<<10&4294967295|S>>>22),S=A+(I^(R|~C))+D[10]+4293915773&4294967295,A=R+(S<<15&4294967295|S>>>17),S=C+(R^(A|~I))+D[1]+2240044497&4294967295,C=A+(S<<21&4294967295|S>>>11),S=I+(A^(C|~R))+D[8]+1873313359&4294967295,I=C+(S<<6&4294967295|S>>>26),S=R+(C^(I|~A))+D[15]+4264355552&4294967295,R=I+(S<<10&4294967295|S>>>22),S=A+(I^(R|~C))+D[6]+2734768916&4294967295,A=R+(S<<15&4294967295|S>>>17),S=C+(R^(A|~I))+D[13]+1309151649&4294967295,C=A+(S<<21&4294967295|S>>>11),S=I+(A^(C|~R))+D[4]+4149444226&4294967295,I=C+(S<<6&4294967295|S>>>26),S=R+(C^(I|~A))+D[11]+3174756917&4294967295,R=I+(S<<10&4294967295|S>>>22),S=A+(I^(R|~C))+D[2]+718787259&4294967295,A=R+(S<<15&4294967295|S>>>17),S=C+(R^(A|~I))+D[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(A+(S<<21&4294967295|S>>>11))&4294967295,x.g[2]=x.g[2]+A&4294967295,x.g[3]=x.g[3]+R&4294967295}r.prototype.v=function(x,I){I===void 0&&(I=x.length);let C=I-this.blockSize,D=this.C,A=this.h,R=0;for(;R<I;){if(A==0)for(;R<=C;)i(this,x,R),R+=this.blockSize;if(typeof x=="string"){for(;R<I;)if(D[A++]=x.charCodeAt(R++),A==this.blockSize){i(this,D),A=0;break}}else for(;R<I;)if(D[A++]=x[R++],A==this.blockSize){i(this,D),A=0;break}}this.h=A,this.o+=I},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;I=this.o*8;for(var C=x.length-8;C<x.length;++C)x[C]=I&255,I/=256;for(this.v(x),x=Array(16),I=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)x[I++]=this.g[C]>>>D&255;return x};function o(x,I){var C=a;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=I(x)}function s(x,I){this.h=I;let C=[],D=!0;for(let A=x.length-1;A>=0;A--){let R=x[A]|0;D&&R==I||(C[A]=R,D=!1)}this.g=C}var a={};function c(x){return-128<=x&&x<128?o(x,function(I){return new s([I|0],I<0?-1:0)}):new s([x|0],x<0?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return f;if(x<0)return L(u(-x));let I=[],C=1;for(let D=0;x>=C;D++)I[D]=x/C|0,C*=4294967296;return new s(I,0)}function d(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return L(d(x.substring(1),I));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');let C=u(Math.pow(I,8)),D=f;for(let R=0;R<x.length;R+=8){var A=Math.min(8,x.length-R);let S=parseInt(x.substring(R,R+A),I);A<8?(A=u(Math.pow(I,A)),D=D.j(A).add(u(S))):(D=D.j(C),D=D.add(u(S)))}return D}var f=c(0),g=c(1),m=c(16777216);n=s.prototype,n.m=function(){if(M(this))return-L(this).m();let x=0,I=1;for(let C=0;C<this.g.length;C++){let D=this.i(C);x+=(D>=0?D:4294967296+D)*I,I*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(T(this))return"0";if(M(this))return"-"+L(this).toString(x);let I=u(Math.pow(x,6));var C=this;let D="";for(;;){let A=ce(C,I).g;C=k(C,A.j(I));let R=((C.g.length>0?C.g[0]:C.h)>>>0).toString(x);if(C=A,T(C))return R+D;for(;R.length<6;)R="0"+R;D=R+D}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function T(x){if(x.h!=0)return!1;for(let I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function M(x){return x.h==-1}n.l=function(x){return x=k(this,x),M(x)?-1:T(x)?0:1};function L(x){let I=x.g.length,C=[];for(let D=0;D<I;D++)C[D]=~x.g[D];return new s(C,~x.h).add(g)}n.abs=function(){return M(this)?L(this):this},n.add=function(x){let I=Math.max(this.g.length,x.g.length),C=[],D=0;for(let A=0;A<=I;A++){let R=D+(this.i(A)&65535)+(x.i(A)&65535),S=(R>>>16)+(this.i(A)>>>16)+(x.i(A)>>>16);D=S>>>16,R&=65535,S&=65535,C[A]=S<<16|R}return new s(C,C[C.length-1]&-2147483648?-1:0)};function k(x,I){return x.add(L(I))}n.j=function(x){if(T(this)||T(x))return f;if(M(this))return M(x)?L(this).j(L(x)):L(L(this).j(x));if(M(x))return L(this.j(L(x)));if(this.l(m)<0&&x.l(m)<0)return u(this.m()*x.m());let I=this.g.length+x.g.length,C=[];for(var D=0;D<2*I;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let A=0;A<x.g.length;A++){let R=this.i(D)>>>16,S=this.i(D)&65535,Tt=x.i(A)>>>16,Qt=x.i(A)&65535;C[2*D+2*A]+=S*Qt,Q(C,2*D+2*A),C[2*D+2*A+1]+=R*Qt,Q(C,2*D+2*A+1),C[2*D+2*A+1]+=S*Tt,Q(C,2*D+2*A+1),C[2*D+2*A+2]+=R*Tt,Q(C,2*D+2*A+2)}for(x=0;x<I;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=I;x<2*I;x++)C[x]=0;return new s(C,0)};function Q(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function q(x,I){this.g=x,this.h=I}function ce(x,I){if(T(I))throw Error("division by zero");if(T(x))return new q(f,f);if(M(x))return I=ce(L(x),I),new q(L(I.g),L(I.h));if(M(I))return I=ce(x,L(I)),new q(L(I.g),I.h);if(x.g.length>30){if(M(x)||M(I))throw Error("slowDivide_ only works with positive integers.");for(var C=g,D=I;D.l(x)<=0;)C=Ie(C),D=Ie(D);var A=ie(C,1),R=ie(D,1);for(D=ie(D,2),C=ie(C,2);!T(D);){var S=R.add(D);S.l(x)<=0&&(A=A.add(C),R=S),D=ie(D,1),C=ie(C,1)}return I=k(x,A.j(I)),new q(A,I)}for(A=f;x.l(I)>=0;){for(C=Math.max(1,Math.floor(x.m()/I.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),R=u(C),S=R.j(I);M(S)||S.l(x)>0;)C-=D,R=u(C),S=R.j(I);T(R)&&(R=g),A=A.add(R),x=k(x,S)}return new q(A,x)}n.B=function(x){return ce(this,x).h},n.and=function(x){let I=Math.max(this.g.length,x.g.length),C=[];for(let D=0;D<I;D++)C[D]=this.i(D)&x.i(D);return new s(C,this.h&x.h)},n.or=function(x){let I=Math.max(this.g.length,x.g.length),C=[];for(let D=0;D<I;D++)C[D]=this.i(D)|x.i(D);return new s(C,this.h|x.h)},n.xor=function(x){let I=Math.max(this.g.length,x.g.length),C=[];for(let D=0;D<I;D++)C[D]=this.i(D)^x.i(D);return new s(C,this.h^x.h)};function Ie(x){let I=x.g.length+1,C=[];for(let D=0;D<I;D++)C[D]=x.i(D)<<1|x.i(D-1)>>>31;return new s(C,x.h)}function ie(x,I){let C=I>>5;I%=32;let D=x.g.length-C,A=[];for(let R=0;R<D;R++)A[R]=I>0?x.i(R+C)>>>I|x.i(R+C+1)<<32-I:x.i(R+C);return new s(A,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,yb=tN.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Ji=tN.Integer=s}).apply(typeof eN<"u"?eN:typeof self<"u"?self:typeof window<"u"?window:{});var bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zi={};var vb,j8,yc,_b,Qu,wg,Eb,bb,wb;(function(){var n,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof bg=="object"&&bg];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var E=0;E<l.length-1;E++){var O=l[E];if(!(O in p))break e;p=p[O]}l=l[l.length-1],E=p[l],h=h(E),h!=E&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(h){var p=[],E;for(E in h)Object.prototype.hasOwnProperty.call(h,E)&&p.push([E,h[E]]);return p}});var o=o||{},s=this||self;function a(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function c(l,h,p){return l.call.apply(l.bind,arguments)}function u(l,h,p){return u=c,u.apply(null,arguments)}function d(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function f(l,h){function p(){}p.prototype=h.prototype,l.Z=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Ob=function(E,O,B){for(var ee=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ee[Be-2]=arguments[Be];return h.prototype[O].apply(E,ee)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function m(l){let h=l.length;if(h>0){let p=Array(h);for(let E=0;E<h;E++)p[E]=l[E];return p}return[]}function T(l,h){for(let E=1;E<arguments.length;E++){let O=arguments[E];var p=typeof O;if(p=p!="object"?p:O?Array.isArray(O)?"array":p:"null",p=="array"||p=="object"&&typeof O.length=="number"){p=l.length||0;let B=O.length||0;l.length=p+B;for(let ee=0;ee<B;ee++)l[p+ee]=O[ee]}else l.push(O)}}class M{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function L(l){s.setTimeout(()=>{throw l},0)}function k(){var l=x;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Q{constructor(){this.h=this.g=null}add(h,p){let E=q.get();E.set(h,p),this.h?this.h.next=E:this.g=E,this.h=E}}var q=new M(()=>new ce,l=>l.reset());class ce{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,ie=!1,x=new Q,I=()=>{let l=Promise.resolve(void 0);Ie=()=>{l.then(C)}};function C(){for(var l;l=k();){try{l.h.call(l.g)}catch(p){L(p)}var h=q;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}ie=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};s.addEventListener("test",p,h),s.removeEventListener("test",p,h)}catch{}return l})();function S(l){return/^[\s\xa0]*$/.test(l)}function Tt(l,h){A.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}f(Tt,A),Tt.prototype.init=function(l,h){let p=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&Tt.Z.h.call(this)},Tt.prototype.h=function(){Tt.Z.h.call(this);let l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Qt="closure_listenable_"+(Math.random()*1e6|0),be=0;function jn(l,h,p,E,O){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!E,this.ha=O,this.key=++be,this.da=this.fa=!1}function Ii(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function bt(l,h,p){for(let E in l)h.call(p,l[E],E,l)}function go(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function os(l){let h={};for(let p in l)h[p]=l[p];return h}let Vd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ud(l,h){let p,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(p in E)l[p]=E[p];for(let B=0;B<Vd.length;B++)p=Vd[B],Object.prototype.hasOwnProperty.call(E,p)&&(l[p]=E[p])}}function yr(l){this.src=l,this.g={},this.h=0}yr.prototype.add=function(l,h,p,E,O){let B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);let ee=Bd(l,h,E,O);return ee>-1?(h=l[ee],p||(h.fa=!1)):(h=new jn(h,this.src,B,!!E,O),h.fa=p,l.push(h)),h};function ss(l,h){let p=h.type;if(p in l.g){var E=l.g[p],O=Array.prototype.indexOf.call(E,h,void 0),B;(B=O>=0)&&Array.prototype.splice.call(E,O,1),B&&(Ii(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Bd(l,h,p,E){for(let O=0;O<l.length;++O){let B=l[O];if(!B.da&&B.listener==h&&B.capture==!!p&&B.ha==E)return O}return-1}var y="closure_lm_"+(Math.random()*1e6|0),Ne={};function Nn(l,h,p,E,O){if(E&&E.once)return as(l,h,p,E,O);if(Array.isArray(h)){for(let B=0;B<h.length;B++)Nn(l,h[B],p,E,O);return null}return p=rl(p),l&&l[Qt]?l.J(h,p,a(E)?!!E.capture:!!E,O):vr(l,h,p,!1,E,O)}function vr(l,h,p,E,O,B){if(!h)throw Error("Invalid event type");let ee=a(O)?!!O.capture:!!O,Be=Tn(l);if(Be||(l[y]=Be=new yr(l)),p=Be.add(h,p,E,ee,B),p.proxy)return p;if(E=le(),p.proxy=E,E.src=l,E.listener=p,l.addEventListener)R||(O=ee),O===void 0&&(O=!1),l.addEventListener(h.toString(),E,O);else if(l.attachEvent)l.attachEvent(tl(h.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function le(){function l(p){return h.call(l.src,l.listener,p)}let h=ES;return l}function as(l,h,p,E,O){if(Array.isArray(h)){for(let B=0;B<h.length;B++)as(l,h[B],p,E,O);return null}return p=rl(p),l&&l[Qt]?l.K(h,p,a(E)?!!E.capture:!!E,O):vr(l,h,p,!0,E,O)}function jd(l,h,p,E,O){if(Array.isArray(h))for(var B=0;B<h.length;B++)jd(l,h[B],p,E,O);else E=a(E)?!!E.capture:!!E,p=rl(p),l&&l[Qt]?(l=l.i,B=String(h).toString(),B in l.g&&(h=l.g[B],p=Bd(h,p,E,O),p>-1&&(Ii(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete l.g[B],l.h--)))):l&&(l=Tn(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Bd(h,p,E,O)),(p=l>-1?h[l]:null)&&el(p))}function el(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Qt])ss(h.i,l);else{var p=l.type,E=l.proxy;h.removeEventListener?h.removeEventListener(p,E,l.capture):h.detachEvent?h.detachEvent(tl(p),E):h.addListener&&h.removeListener&&h.removeListener(E),(p=Tn(h))?(ss(p,l),p.h==0&&(p.src=null,h[y]=null)):Ii(l)}}}function tl(l){return l in Ne?Ne[l]:Ne[l]="on"+l}function ES(l,h){if(l.da)l=!0;else{h=new Tt(h,this);let p=l.listener,E=l.ha||l.src;l.fa&&el(l),l=p.call(E,h)}return l}function Tn(l){return l=l[y],l instanceof yr?l:null}var nl="__closure_events_fn_"+(Math.random()*1e9>>>0);function rl(l){return typeof l=="function"?l:(l[nl]||(l[nl]=function(h){return l.handleEvent(h)}),l[nl])}function an(){D.call(this),this.i=new yr(this),this.M=this,this.G=null}f(an,D),an.prototype[Qt]=!0,an.prototype.removeEventListener=function(l,h,p,E){jd(this,l,h,p,E)};function mt(l,h){var p,E=l.G;if(E)for(p=[];E;E=E.G)p.push(E);if(l=l.M,E=h.type||h,typeof h=="string")h=new A(h,l);else if(h instanceof A)h.target=h.target||l;else{var O=h;h=new A(E,l),Ud(h,O)}O=!0;let B,ee;if(p)for(ee=p.length-1;ee>=0;ee--)B=h.g=p[ee],O=Si(B,E,!0,h)&&O;if(B=h.g=l,O=Si(B,E,!0,h)&&O,O=Si(B,E,!1,h)&&O,p)for(ee=0;ee<p.length;ee++)B=h.g=p[ee],O=Si(B,E,!1,h)&&O}an.prototype.N=function(){if(an.Z.N.call(this),this.i){var l=this.i;for(let h in l.g){let p=l.g[h];for(let E=0;E<p.length;E++)Ii(p[E]);delete l.g[h],l.h--}}this.G=null},an.prototype.J=function(l,h,p,E){return this.i.add(String(l),h,!1,p,E)},an.prototype.K=function(l,h,p,E){return this.i.add(String(l),h,!0,p,E)};function Si(l,h,p,E){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let O=!0;for(let B=0;B<h.length;++B){let ee=h[B];if(ee&&!ee.da&&ee.capture==p){let Be=ee.listener,Wt=ee.ha||ee.src;ee.fa&&ss(l.i,ee),O=Be.call(Wt,E)!==!1&&O}}return O&&!E.defaultPrevented}function sy(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=u(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:s.setTimeout(l,h||0)}function Br(l){l.g=sy(()=>{l.g=null,l.i&&(l.i=!1,Br(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class mo extends D{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Br(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cs(l){D.call(this),this.h=l,this.g={}}f(cs,D);var j=[];function P(l){bt(l.g,function(h,p){this.g.hasOwnProperty(p)&&el(h)},l),l.g={}}cs.prototype.N=function(){cs.Z.N.call(this),P(this)},cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var z=s.JSON.stringify,W=s.JSON.parse,ge=class{stringify(l){return s.JSON.stringify(l,void 0)}parse(l){return s.JSON.parse(l,void 0)}};function Ce(){}function je(){}var Je={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function st(){A.call(this,"d")}f(st,A);function et(){A.call(this,"c")}f(et,A);var Yt={},yo=null;function Ea(){return yo=yo||new an}Yt.Ia="serverreachability";function il(l){A.call(this,Yt.Ia,l)}f(il,A);function Hn(l){let h=Ea();mt(h,new il(h))}Yt.STAT_EVENT="statevent";function Ti(l,h){A.call(this,Yt.STAT_EVENT,l),this.stat=h}f(Ti,A);function xt(l){let h=Ea();mt(h,new Ti(h,l))}Yt.Ja="timingevent";function Hd(l,h){A.call(this,Yt.Ja,l),this.size=h}f(Hd,A);function Ci(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){l()},h)}function xi(){this.g=!0}xi.prototype.ua=function(){this.g=!1};function ay(l,h,p,E,O,B){l.info(function(){if(l.g)if(B){var ee="",Be=B.split("&");for(let dt=0;dt<Be.length;dt++){var Wt=Be[dt].split("=");if(Wt.length>1){let Zt=Wt[0];Wt=Wt[1];let Hr=Zt.split("_");ee=Hr.length>=2&&Hr[1]=="type"?ee+(Zt+"="+Wt+"&"):ee+(Zt+"=redacted&")}}}else ee=null;else ee=B;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+h+`
`+p+`
`+ee})}function bS(l,h,p,E,O,B,ee){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+h+`
`+p+`
`+B+" "+ee})}function _r(l,h,p,E){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+ly(l,p)+(E?" "+E:"")})}function cy(l,h){l.info(function(){return"TIMEOUT: "+h})}xi.prototype.info=function(){};function ly(l,h){if(!l.g)return h;if(!h)return null;try{let B=JSON.parse(h);if(B){for(l=0;l<B.length;l++)if(Array.isArray(B[l])){var p=B[l];if(!(p.length<2)){var E=p[1];if(Array.isArray(E)&&!(E.length<1)){var O=E[0];if(O!="noop"&&O!="stop"&&O!="close")for(let ee=1;ee<E.length;ee++)E[ee]=""}}}}return z(B)}catch{return h}}var oe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Me={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ft;function wt(){}f(wt,Ce),wt.prototype.g=function(){return new XMLHttpRequest},ft=new wt;function yt(l){return encodeURIComponent(String(l))}function Jt(l){var h=1;l=l.split(":");let p=[];for(;h>0&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function vt(l,h,p,E){this.j=l,this.i=h,this.l=p,this.S=E||1,this.V=new cs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ls}function ls(){this.i=null,this.g="",this.h=!1}var wS={},uy={};function dy(l,h,p){l.M=1,l.A=Gd(jr(h)),l.u=p,l.R=!0,IS(l,null)}function IS(l,h){l.F=Date.now(),$d(l),l.B=jr(l.A);var p=l.B,E=l.S;Array.isArray(E)||(E=[String(E)]),FS(p.i,"t",E),l.C=0,p=l.j.L,l.h=new ls,l.g=eT(l.j,p?h:null,!l.u),l.P>0&&(l.O=new mo(u(l.Y,l,l.g),l.P)),h=l.V,p=l.g,E=l.ba;var O="readystatechange";Array.isArray(O)||(O&&(j[0]=O.toString()),O=j);for(let B=0;B<O.length;B++){let ee=Nn(p,O[B],E||h.handleEvent,!1,h.h||h);if(!ee)break;h.g[ee.key]=ee}h=l.J?os(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),Hn(),ay(l.i,l.v,l.B,l.l,l.S,l.u)}vt.prototype.ba=function(l){l=l.target;let h=this.O;h&&Eo(l)==3?h.j():this.Y(l)},vt.prototype.Y=function(l){try{if(l==this.g)e:{let Be=Eo(this.g),Wt=this.g.ya(),dt=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||$S(this.g)))){this.K||Be!=4||Wt==7||(Wt==8||dt<=0?Hn(3):Hn(2)),hy(this);var h=this.g.ca();this.X=h;var p=r2(this);if(this.o=h==200,bS(this.i,this.v,this.B,this.l,this.S,Be,h),this.o){if(this.U&&!this.L){t:{if(this.g){var E,O=this.g;if((E=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(E)){var B=E;break t}}B=null}if(l=B)_r(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fy(this,l);else{this.o=!1,this.m=3,xt(12),us(this),ol(this);break e}}if(this.R){l=!0;let Zt;for(;!this.K&&this.C<p.length;)if(Zt=i2(this,p),Zt==uy){Be==4&&(this.m=4,xt(14),l=!1),_r(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==wS){this.m=4,xt(15),_r(this.i,this.l,p,"[Invalid Chunk]"),l=!1;break}else _r(this.i,this.l,Zt,null),fy(this,Zt);if(SS(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||p.length!=0||this.h.h||(this.m=1,xt(16),l=!1),this.o=this.o&&l,!l)_r(this.i,this.l,p,"[Invalid Chunked Response]"),us(this),ol(this);else if(p.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),Ey(ee),ee.P=!0,xt(11))}}else _r(this.i,this.l,p,null),fy(this,p);Be==4&&us(this),this.o&&!this.K&&(Be==4?YS(this.j,this):(this.o=!1,$d(this)))}else v2(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),us(this),ol(this)}}}catch{}};function r2(l){if(!SS(l))return l.g.la();let h=$S(l.g);if(h==="")return"";let p="",E=h.length,O=Eo(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return us(l),ol(l),"";l.h.i=new s.TextDecoder}for(let B=0;B<E;B++)l.h.h=!0,p+=l.h.i.decode(h[B],{stream:!(O&&B==E-1)});return h.length=0,l.h.g+=p,l.C=0,l.h.g}function SS(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function i2(l,h){var p=l.C,E=h.indexOf(`
`,p);return E==-1?uy:(p=Number(h.substring(p,E)),isNaN(p)?wS:(E+=1,E+p>h.length?uy:(h=h.slice(E,E+p),l.C=E+p,h)))}vt.prototype.cancel=function(){this.K=!0,us(this)};function $d(l){l.T=Date.now()+l.H,TS(l,l.H)}function TS(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Ci(u(l.aa,l),h)}function hy(l){l.D&&(s.clearTimeout(l.D),l.D=null)}vt.prototype.aa=function(){this.D=null;let l=Date.now();l-this.T>=0?(cy(this.i,this.B),this.M!=2&&(Hn(),xt(17)),us(this),this.m=2,ol(this)):TS(this,this.T-l)};function ol(l){l.j.I==0||l.K||YS(l.j,l)}function us(l){hy(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,P(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function fy(l,h){try{var p=l.j;if(p.I!=0&&(p.g==l||py(p.h,l))){if(!l.L&&py(p.h,l)&&p.I==3){try{var E=p.Ba.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<l.F)Yd(p),Kd(p);else break e;_y(p),xt(18)}}else p.xa=O[1],0<p.xa-p.K&&O[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=Ci(u(p.Va,p),6e3));DS(p.h)<=1&&p.ta&&(p.ta=void 0)}else hs(p,11)}else if((l.L||p.g==l)&&Yd(p),!S(h))for(O=p.Ba.g.parse(h),h=0;h<O.length;h++){let dt=O[h],Zt=dt[0];if(!(Zt<=p.K))if(p.K=Zt,dt=dt[1],p.I==2)if(dt[0]=="c"){p.M=dt[1],p.ba=dt[2];let Hr=dt[3];Hr!=null&&(p.ka=Hr,p.j.info("VER="+p.ka));let fs=dt[4];fs!=null&&(p.za=fs,p.j.info("SVER="+p.za));let bo=dt[5];bo!=null&&typeof bo=="number"&&bo>0&&(E=1.5*bo,p.O=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;let wo=l.g;if(wo){let Zd=wo.g?wo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zd){var B=E.h;B.g||Zd.indexOf("spdy")==-1&&Zd.indexOf("quic")==-1&&Zd.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(gy(B,B.h),B.h=null))}if(E.G){let by=wo.g?wo.g.getResponseHeader("X-HTTP-Session-Id"):null;by&&(E.wa=by,_t(E.J,E.G,by))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-l.F,p.j.info("Handshake RTT: "+p.T+"ms")),E=p;var ee=l;if(E.na=XS(E,E.L?E.ba:null,E.W),ee.L){AS(E.h,ee);var Be=ee,Wt=E.O;Wt&&(Be.H=Wt),Be.D&&(hy(Be),$d(Be)),E.g=ee}else KS(E);p.i.length>0&&Qd(p)}else dt[0]!="stop"&&dt[0]!="close"||hs(p,7);else p.I==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?hs(p,7):vy(p):dt[0]!="noop"&&p.l&&p.l.qa(dt),p.A=0)}}Hn(4)}catch{}}var o2=class{constructor(l,h){this.g=l,this.map=h}};function CS(l){this.l=l||10,s.PerformanceNavigationTiming?(l=s.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xS(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function DS(l){return l.h?1:l.g?l.g.size:0}function py(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function gy(l,h){l.g?l.g.add(h):l.h=h}function AS(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}CS.prototype.cancel=function(){if(this.i=MS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function MS(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.G);return h}return m(l.i)}var RS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function s2(l,h){if(l){l=l.split("&");for(let p=0;p<l.length;p++){let E=l[p].indexOf("="),O,B=null;E>=0?(O=l[p].substring(0,E),B=l[p].substring(E+1)):O=l[p],h(O,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function vo(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof vo?(this.l=l.l,sl(this,l.j),this.o=l.o,this.g=l.g,al(this,l.u),this.h=l.h,my(this,LS(l.i)),this.m=l.m):l&&(h=String(l).match(RS))?(this.l=!1,sl(this,h[1]||"",!0),this.o=cl(h[2]||""),this.g=cl(h[3]||"",!0),al(this,h[4]),this.h=cl(h[5]||"",!0),my(this,h[6]||"",!0),this.m=cl(h[7]||"")):(this.l=!1,this.i=new ul(null,this.l))}vo.prototype.toString=function(){let l=[];var h=this.j;h&&l.push(ll(h,NS,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(ll(h,NS,!0),"@"),l.push(yt(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&l.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(ll(p,p.charAt(0)=="/"?l2:c2,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",ll(p,d2)),l.join("")},vo.prototype.resolve=function(l){let h=jr(this),p=!!l.j;p?sl(h,l.j):p=!!l.o,p?h.o=l.o:p=!!l.g,p?h.g=l.g:p=l.u!=null;var E=l.h;if(p)al(h,l.u);else if(p=!!l.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var O=h.h.lastIndexOf("/");O!=-1&&(E=h.h.slice(0,O+1)+E)}if(O=E,O==".."||O==".")E="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){E=O.lastIndexOf("/",0)==0,O=O.split("/");let B=[];for(let ee=0;ee<O.length;){let Be=O[ee++];Be=="."?E&&ee==O.length&&B.push(""):Be==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),E&&ee==O.length&&B.push("")):(B.push(Be),E=!0)}E=B.join("/")}else E=O}return p?h.h=E:p=l.i.toString()!=="",p?my(h,LS(l.i)):p=!!l.m,p&&(h.m=l.m),h};function jr(l){return new vo(l)}function sl(l,h,p){l.j=p?cl(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function al(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function my(l,h,p){h instanceof ul?(l.i=h,h2(l.i,l.l)):(p||(h=ll(h,u2)),l.i=new ul(h,l.l))}function _t(l,h,p){l.i.set(h,p)}function Gd(l){return _t(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function cl(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ll(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,a2),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function a2(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var NS=/[#\/\?@]/g,c2=/[#\?:]/g,l2=/[#\?]/g,u2=/[#\?@]/g,d2=/#/g;function ul(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function ds(l){l.g||(l.g=new Map,l.h=0,l.i&&s2(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=ul.prototype,n.add=function(l,h){ds(this),this.i=null,l=ba(this,l);let p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function PS(l,h){ds(l),h=ba(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function kS(l,h){return ds(l),h=ba(l,h),l.g.has(h)}n.forEach=function(l,h){ds(this),this.g.forEach(function(p,E){p.forEach(function(O){l.call(h,O,E,this)},this)},this)};function OS(l,h){ds(l);let p=[];if(typeof h=="string")kS(l,h)&&(p=p.concat(l.g.get(ba(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)p=p.concat(l[h]);return p}n.set=function(l,h){return ds(this),this.i=null,l=ba(this,l),kS(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=OS(this,l),l.length>0?String(l[0]):h):h};function FS(l,h,p){PS(l,h),p.length>0&&(l.i=null,l.g.set(ba(l,h),m(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(let E=0;E<h.length;E++){var p=h[E];let O=yt(p);p=OS(this,p);for(let B=0;B<p.length;B++){let ee=O;p[B]!==""&&(ee+="="+yt(p[B])),l.push(ee)}}return this.i=l.join("&")};function LS(l){let h=new ul;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function ba(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function h2(l,h){h&&!l.j&&(ds(l),l.i=null,l.g.forEach(function(p,E){let O=E.toLowerCase();E!=O&&(PS(this,E),FS(this,O,p))},l)),l.j=h}function f2(l,h){let p=new xi;if(s.Image){let E=new Image;E.onload=d(_o,p,"TestLoadImage: loaded",!0,h,E),E.onerror=d(_o,p,"TestLoadImage: error",!1,h,E),E.onabort=d(_o,p,"TestLoadImage: abort",!1,h,E),E.ontimeout=d(_o,p,"TestLoadImage: timeout",!1,h,E),s.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else h(!1)}function p2(l,h){let p=new xi,E=new AbortController,O=setTimeout(()=>{E.abort(),_o(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:E.signal}).then(B=>{clearTimeout(O),B.ok?_o(p,"TestPingServer: ok",!0,h):_o(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),_o(p,"TestPingServer: error",!1,h)})}function _o(l,h,p,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(p)}catch{}}function g2(){this.g=new ge}function zd(l){this.i=l.Sb||null,this.h=l.ab||!1}f(zd,Ce),zd.prototype.g=function(){return new qd(this.i,this.h)};function qd(l,h){an.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(qd,an),n=qd.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,hl(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||s).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,dl(this)),this.readyState=0},n.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,hl(this)),this.g&&(this.readyState=3,hl(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;VS(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function VS(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}n.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?dl(this):hl(this),this.readyState==3&&VS(this)}},n.Oa=function(l){this.g&&(this.response=this.responseText=l,dl(this))},n.Na=function(l){this.g&&(this.response=l,dl(this))},n.ga=function(){this.g&&dl(this)};function dl(l){l.readyState=4,l.l=null,l.j=null,l.B=null,hl(l)}n.setRequestHeader=function(l,h){this.A.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function hl(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(qd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function US(l){let h="";return bt(l,function(p,E){h+=E,h+=":",h+=p,h+=`\r
`}),h}function yy(l,h,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=US(p),typeof l=="string"?p!=null&&yt(p):_t(l,h,p))}function Dt(l){an.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Dt,an);var m2=/^https?$/i,y2=["POST","PUT"];n=Dt.prototype,n.Fa=function(l){this.H=l},n.ea=function(l,h,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ft.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(B){BS(this,B);return}if(l=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)p.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(let B of E.keys())p.set(B,E.get(B));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(B=>B.toLowerCase()=="content-type"),O=s.FormData&&l instanceof s.FormData,!(Array.prototype.indexOf.call(y2,h,void 0)>=0)||E||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[B,ee]of p)this.g.setRequestHeader(B,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(B){BS(this,B)}};function BS(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,jS(l),Wd(l)}function jS(l){l.A||(l.A=!0,mt(l,"complete"),mt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,mt(this,"complete"),mt(this,"abort"),Wd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wd(this,!0)),Dt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?HS(this):this.Xa())},n.Xa=function(){HS(this)};function HS(l){if(l.h&&typeof o<"u"){if(l.v&&Eo(l)==4)setTimeout(l.Ca.bind(l),0);else if(mt(l,"readystatechange"),Eo(l)==4){l.h=!1;try{let B=l.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var E;if(E=B===0){let ee=String(l.D).match(RS)[1]||null;!ee&&s.self&&s.self.location&&(ee=s.self.location.protocol.slice(0,-1)),E=!m2.test(ee?ee.toLowerCase():"")}p=E}if(p)mt(l,"complete"),mt(l,"success");else{l.o=6;try{var O=Eo(l)>2?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.ca()+"]",jS(l)}}finally{Wd(l)}}}}function Wd(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);let p=l.g;l.g=null,h||mt(l,"ready");try{p.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Eo(l){return l.g?l.g.readyState:0}n.ca=function(){try{return Eo(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),W(h)}};function $S(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function v2(l){let h={};l=(l.g&&Eo(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(S(l[E]))continue;var p=Jt(l[E]);let O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let B=h[O]||[];h[O]=B,B.push(p)}go(h,function(E){return E.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fl(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function GS(l){this.za=0,this.i=[],this.j=new xi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fl("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fl("baseRetryDelayMs",5e3,l),this.Za=fl("retryDelaySeedMs",1e4,l),this.Ta=fl("forwardChannelMaxRetries",2,l),this.va=fl("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new CS(l&&l.concurrentRequestLimit),this.Ba=new g2,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=GS.prototype,n.ka=8,n.I=1,n.connect=function(l,h,p,E){xt(0),this.W=l,this.H=h||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.J=XS(this,null,this.W),Qd(this)};function vy(l){if(zS(l),l.I==3){var h=l.V++,p=jr(l.J);if(_t(p,"SID",l.M),_t(p,"RID",h),_t(p,"TYPE","terminate"),pl(l,p),h=new vt(l,l.j,h),h.M=2,h.A=Gd(jr(p)),p=!1,s.navigator&&s.navigator.sendBeacon)try{p=s.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&s.Image&&(new Image().src=h.A,p=!0),p||(h.g=eT(h.j,null),h.g.ea(h.A)),h.F=Date.now(),$d(h)}ZS(l)}function Kd(l){l.g&&(Ey(l),l.g.cancel(),l.g=null)}function zS(l){Kd(l),l.v&&(s.clearTimeout(l.v),l.v=null),Yd(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&s.clearTimeout(l.m),l.m=null)}function Qd(l){if(!xS(l.h)&&!l.m){l.m=!0;var h=l.Ea;Ie||I(),ie||(Ie(),ie=!0),x.add(h,l),l.D=0}}function _2(l,h){return DS(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Ci(u(l.Ea,l,h),JS(l,l.D)),l.D++,!0)}n.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;let O=new vt(this,this.j,l),B=this.o;if(this.U&&(B?(B=os(B),Ud(B,this.U)):B=this.U),this.u!==null||this.R||(O.J=B,B=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=WS(this,O,h),p=jr(this.J),_t(p,"RID",l),_t(p,"CVER",22),this.G&&_t(p,"X-HTTP-Session-Id",this.G),pl(this,p),B&&(this.R?h="headers="+yt(US(B))+"&"+h:this.u&&yy(p,this.u,B)),gy(this.h,O),this.Ra&&_t(p,"TYPE","init"),this.S?(_t(p,"$req",h),_t(p,"SID","null"),O.U=!0,dy(O,p,null)):dy(O,p,h),this.I=2}}else this.I==3&&(l?qS(this,l):this.i.length==0||xS(this.h)||qS(this))};function qS(l,h){var p;h?p=h.l:p=l.V++;let E=jr(l.J);_t(E,"SID",l.M),_t(E,"RID",p),_t(E,"AID",l.K),pl(l,E),l.u&&l.o&&yy(E,l.u,l.o),p=new vt(l,l.j,p,l.D+1),l.u===null&&(p.J=l.o),h&&(l.i=h.G.concat(l.i)),h=WS(l,p,1e3),p.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),gy(l.h,p),dy(p,E,h)}function pl(l,h){l.H&&bt(l.H,function(p,E){_t(h,E,p)}),l.l&&bt({},function(p,E){_t(h,E,p)})}function WS(l,h,p){p=Math.min(l.i.length,p);let E=l.l?u(l.l.Ka,l.l,l):null;e:{var O=l.i;let Be=-1;for(;;){let Wt=["count="+p];Be==-1?p>0?(Be=O[0].g,Wt.push("ofs="+Be)):Be=0:Wt.push("ofs="+Be);let dt=!0;for(let Zt=0;Zt<p;Zt++){var B=O[Zt].g;let Hr=O[Zt].map;if(B-=Be,B<0)Be=Math.max(0,O[Zt].g-100),dt=!1;else try{B="req"+B+"_"||"";try{var ee=Hr instanceof Map?Hr:Object.entries(Hr);for(let[fs,bo]of ee){let wo=bo;a(bo)&&(wo=z(bo)),Wt.push(B+fs+"="+encodeURIComponent(wo))}}catch(fs){throw Wt.push(B+"type="+encodeURIComponent("_badmap")),fs}}catch{E&&E(Hr)}}if(dt){ee=Wt.join("&");break e}}ee=void 0}return l=l.i.splice(0,p),h.G=l,ee}function KS(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;Ie||I(),ie||(Ie(),ie=!0),x.add(h,l),l.A=0}}function _y(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Ci(u(l.Da,l),JS(l,l.A)),l.A++,!0)}n.Da=function(){if(this.v=null,QS(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Ci(u(this.Wa,this),l)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Kd(this),QS(this))};function Ey(l){l.B!=null&&(s.clearTimeout(l.B),l.B=null)}function QS(l){l.g=new vt(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=jr(l.na);_t(h,"RID","rpc"),_t(h,"SID",l.M),_t(h,"AID",l.K),_t(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&_t(h,"TO",l.ia),_t(h,"TYPE","xmlhttp"),pl(l,h),l.u&&l.o&&yy(h,l.u,l.o),l.O&&(l.g.H=l.O);var p=l.g;l=l.ba,p.M=1,p.A=Gd(jr(h)),p.u=null,p.R=!0,IS(p,l)}n.Va=function(){this.C!=null&&(this.C=null,Kd(this),_y(this),xt(19))};function Yd(l){l.C!=null&&(s.clearTimeout(l.C),l.C=null)}function YS(l,h){var p=null;if(l.g==h){Yd(l),Ey(l),l.g=null;var E=2}else if(py(l.h,h))p=h.G,AS(l.h,h),E=1;else return;if(l.I!=0){if(h.o)if(E==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var O=l.D;E=Ea(),mt(E,new Hd(E,p)),Qd(l)}else KS(l);else if(O=h.m,O==3||O==0&&h.X>0||!(E==1&&_2(l,h)||E==2&&_y(l)))switch(p&&p.length>0&&(h=l.h,h.i=h.i.concat(p)),O){case 1:hs(l,5);break;case 4:hs(l,10);break;case 3:hs(l,6);break;default:hs(l,2)}}}function JS(l,h){let p=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(p*=2),p*h}function hs(l,h){if(l.j.info("Error code "+h),h==2){var p=u(l.bb,l),E=l.Ua;let O=!E;E=new vo(E||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||sl(E,"https"),Gd(E),O?f2(E.toString(),p):p2(E.toString(),p)}else xt(2);l.I=0,l.l&&l.l.pa(h),ZS(l),zS(l)}n.bb=function(l){l?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function ZS(l){if(l.I=0,l.ja=[],l.l){let h=MS(l.h);(h.length!=0||l.i.length!=0)&&(T(l.ja,h),T(l.ja,l.i),l.h.i.length=0,m(l.i),l.i.length=0),l.l.oa()}}function XS(l,h,p){var E=p instanceof vo?jr(p):new vo(p);if(E.g!="")h&&(E.g=h+"."+E.g),al(E,E.u);else{var O=s.location;E=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;let B=new vo(null);E&&sl(B,E),h&&(B.g=h),O&&al(B,O),p&&(B.h=p),E=B}return p=l.G,h=l.wa,p&&h&&_t(E,p,h),_t(E,"VER",l.ka),pl(l,E),E}function eT(l,h,p){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Dt(new zd({ab:p})):new Dt(l.ma),h.Fa(l.L),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function tT(){}n=tT.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Jd(){}Jd.prototype.g=function(l,h){return new $n(l,h)};function $n(l,h){an.call(this),this.g=new GS(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!S(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!S(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new wa(this)}f($n,an),$n.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$n.prototype.close=function(){vy(this.g)},$n.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.v&&(p={},p.__data__=z(l),l=p);h.i.push(new o2(h.Ya++,l)),h.I==3&&Qd(h)},$n.prototype.N=function(){this.g.l=null,delete this.j,vy(this.g),delete this.g,$n.Z.N.call(this)};function nT(l){st.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}f(nT,st);function rT(){et.call(this),this.status=1}f(rT,et);function wa(l){this.g=l}f(wa,tT),wa.prototype.ra=function(){mt(this.g,"a")},wa.prototype.qa=function(l){mt(this.g,new nT(l))},wa.prototype.pa=function(l){mt(this.g,new rT)},wa.prototype.oa=function(){mt(this.g,"b")},Jd.prototype.createWebChannel=Jd.prototype.g,$n.prototype.send=$n.prototype.o,$n.prototype.open=$n.prototype.m,$n.prototype.close=$n.prototype.close,wb=Zi.createWebChannelTransport=function(){return new Jd},bb=Zi.getStatEventTarget=function(){return Ea()},Eb=Zi.Event=Yt,wg=Zi.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},oe.NO_ERROR=0,oe.TIMEOUT=8,oe.HTTP_ERROR=6,Qu=Zi.ErrorCode=oe,Me.COMPLETE="complete",_b=Zi.EventType=Me,je.EventType=Je,Je.OPEN="a",Je.CLOSE="b",Je.ERROR="c",Je.MESSAGE="d",an.prototype.listen=an.prototype.J,yc=Zi.WebChannel=je,j8=Zi.FetchXmlHttpFactory=zd,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,vb=Zi.XhrIo=Dt}).apply(typeof bg<"u"?bg:typeof self<"u"?self:typeof window<"u"?window:{});var on=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");var kc="12.8.0";function jN(n){kc=n}var na=new Go("@firebase/firestore");function vc(){return na.logLevel}function se(n,...e){if(na.logLevel<=He.DEBUG){let t=e.map(nI);na.debug(`Firestore (${kc}): ${n}`,...t)}}function to(n,...e){if(na.logLevel<=He.ERROR){let t=e.map(nI);na.error(`Firestore (${kc}): ${n}`,...t)}}function Qo(n,...e){if(na.logLevel<=He.WARN){let t=e.map(nI);na.warn(`Firestore (${kc}): ${n}`,...t)}}function nI(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Te(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,HN(n,r,t)}function HN(n,e,t){let r=`FIRESTORE (${kc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw to(r),new Error(r)}function ot(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||HN(e,i,r)}function ke(n,e){return n}var H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},X=class extends tr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var hi=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ag=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Mg=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(on.UNAUTHENTICATED))}shutdown(){}},Db=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Rg=class{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ot(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new hi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new hi,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new hi)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ot(typeof r.accessToken=="string",31837,{l:r}),new Ag(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new on(e)}},Ab=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},Mb=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Ab(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ng=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Pg=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ot(this.o===void 0,3512);let r=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,se("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ng(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ot(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ng(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function H8(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ra=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=H8(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function qe(n,e){return n<e?-1:n>e?1:0}function Rb(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return Ib(i)===Ib(o)?qe(i,o):Ib(i)?1:-1}return qe(n.length,e.length)}var $8=55296,G8=57343;function Ib(n){let e=n.charCodeAt(0);return e>=$8&&e<=G8}function Sc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var nN="__name__",kg=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Te(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return qe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Rb(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ji.fromString(e.substring(4,e.length-2))}},gt=class n extends kg{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new X(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},z8=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bn=class n extends kg{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return z8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nN}static keyField(){return new n([nN])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new X(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new X(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new X(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Ee=class n{constructor(e){this.path=e}static fromPath(e){return new n(gt.fromString(e))}static fromName(e){return new n(gt.fromString(e).popFirst(5))}static empty(){return new n(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new gt(e.slice()))}};function $N(n,e,t){if(!t)throw new X(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function GN(n,e,t,r){if(e===!0&&r===!0)throw new X(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rN(n){if(!Ee.isDocumentKey(n))throw new X(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iN(n){if(Ee.isDocumentKey(n))throw new X(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function pd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te(12329,{type:typeof n})}function Oc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new X(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=pd(n);throw new X(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function qN(n,e){if(e<=0)throw new X(H.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Lt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Fc(n,e){if(!zN(n))throw new X(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new X(H.INVALID_ARGUMENT,t);return!0}var oN=-62135596800,sN=1e6,Vt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*sN);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new X(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new X(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<oN)throw new X(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sN}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fc(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-oN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Vt._jsonSchemaVersion="firestore/timestamp/1.0",Vt._jsonSchema={type:Lt("string",Vt._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};var Le=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Vt(0,0))}static max(){return new n(new Vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var td=-1,Og=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Og.UNKNOWN_ID=-1;function q8(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Le.fromTimestamp(r===1e9?new Vt(t+1,0):new Vt(t,r));return new ia(i,Ee.empty(),e)}function W8(n){return new ia(n.readTime,n.key,td)}var ia=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Le.min(),Ee.empty(),td)}static max(){return new n(Le.max(),Ee.empty(),td)}};function K8(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}var Q8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Nb=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Lc(n){if(n.code!==H.FAILED_PRECONDITION||n.message!==Q8)throw n;se("LocalStore","Unexpectedly lost primary lease")}var J=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function Y8(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Vc(n){return n.name==="IndexedDbTransactionError"}var rI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),iI=-1;function cm(n){return n==null}function nd(n){return n===0&&1/n==-1/0}function J8(n){return typeof n=="number"&&Number.isInteger(n)&&!nd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var WN="";function Z8(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aN(e)),e=X8(n.get(t),e);return aN(e)}function X8(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case WN:t+="";break;default:t+=o}}return t}function aN(n){return n+WN+""}var e9="remoteDocuments",KN="owner";var QN="mutationQueues";var YN="mutations";var JN="documentMutations",t9="remoteDocumentsV14";var ZN="remoteDocumentGlobal";var XN="targets";var eP="targetDocuments";var tP="targetGlobal",nP="collectionParents";var rP="clientMetadata";var iP="bundles";var oP="namedQueries";var n9="indexConfiguration";var r9="indexState";var i9="indexEntries";var sP="documentOverlays";var o9="globals";var s9=[QN,YN,JN,e9,XN,KN,tP,eP,rP,ZN,nP,iP,oP],Ice=[...s9,sP],a9=[QN,YN,JN,t9,XN,KN,tP,eP,rP,ZN,nP,iP,oP,sP],c9=a9,l9=[...c9,n9,r9,i9];var Sce=[...l9,o9];function cN(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ha(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function aP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Rt=class n{constructor(e,t){this.comparator=e,this.root=t||fi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wc(this.root,e,this.comparator,!0)}},wc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},fi=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}};fi.EMPTY=null,fi.RED=!0,fi.BLACK=!1;fi.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new fi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var sn=class n{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fg(this.data.getIterator())}getIteratorFrom(e){return new Fg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Fg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var di=class n{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new n([])}unionWith(e){let t=new sn(Bn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Lg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var gn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Lg("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};gn.EMPTY_BYTE_STRING=new gn("");var u9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(n){if(ot(!!n,39018),typeof n=="string"){let e=0,t=u9.exec(n);if(ot(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ro(n){return typeof n=="string"?gn.fromBase64String(n):gn.fromUint8Array(n)}var cP="server_timestamp",lP="__type__",uP="__previous_value__",dP="__local_write_time__";function gd(n){return(n?.mapValue?.fields||{})[lP]?.stringValue===cP}function lm(n){let e=n.mapValue.fields[uP];return gd(e)?lm(e):e}function rd(n){let e=no(n.mapValue.fields[dP].timestampValue);return new Vt(e.seconds,e.nanos)}var Pb=class{constructor(e,t,r,i,o,s,a,c,u,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d,this.apiKey=f}},Vg="(default)",id=class n{constructor(e,t){this.projectId=e,this.database=t||Vg}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Vg}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function hP(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new X(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new id(n.options.projectId,e)}var oI="__type__",fP="__max__",Ig={mapValue:{fields:{__type__:{stringValue:fP}}}},sI="__vector__",Tc="value";function Yo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gd(n)?4:gP(n)?9007199254740991:pP(n)?10:11:Te(28295,{value:n})}function vi(n,e){if(n===e)return!0;let t=Yo(n);if(t!==Yo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rd(n).isEqual(rd(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=no(i.timestampValue),a=no(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return ro(i.bytesValue).isEqual(ro(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return St(i.geoPointValue.latitude)===St(o.geoPointValue.latitude)&&St(i.geoPointValue.longitude)===St(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return St(i.integerValue)===St(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=St(i.doubleValue),a=St(o.doubleValue);return s===a?nd(s)===nd(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Sc(n.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(cN(s)!==cN(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!vi(s[c],a[c])))return!1;return!0})(n,e);default:return Te(52216,{left:n})}}function od(n,e){return(n.values||[]).find(t=>vi(t,e))!==void 0}function Cc(n,e){if(n===e)return 0;let t=Yo(n),r=Yo(e);if(t!==r)return qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=St(o.integerValue||o.doubleValue),c=St(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return lN(n.timestampValue,e.timestampValue);case 4:return lN(rd(n),rd(e));case 5:return Rb(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=ro(o),c=ro(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=qe(a[u],c[u]);if(d!==0)return d}return qe(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=qe(St(o.latitude),St(s.latitude));return a!==0?a:qe(St(o.longitude),St(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return uN(n.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},c=s.fields||{},u=a[Tc]?.arrayValue,d=c[Tc]?.arrayValue,f=qe(u?.values?.length||0,d?.values?.length||0);return f!==0?f:uN(u,d)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Ig.mapValue&&s===Ig.mapValue)return 0;if(o===Ig.mapValue)return 1;if(s===Ig.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=Rb(c[f],d[f]);if(g!==0)return g;let m=Cc(a[c[f]],u[d[f]]);if(m!==0)return m}return qe(c.length,d.length)})(n.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function lN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);let t=no(n),r=no(e),i=qe(t.seconds,r.seconds);return i!==0?i:qe(t.nanos,r.nanos)}function uN(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Cc(t[i],r[i]);if(o)return o}return qe(t.length,r.length)}function xc(n){return kb(n)}function kb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=no(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ro(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=kb(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${kb(t.fields[s])}`;return i+"}"})(n.mapValue):Te(61005,{value:n})}function Cg(n){switch(Yo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=lm(n);return e?16+Cg(e):16;case 5:return 2*n.stringValue.length;case 6:return ro(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Cg(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ha(r.fields,(o,s)=>{i+=o.length+Cg(s)}),i})(n.mapValue);default:throw Te(13486,{value:n})}}function md(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ob(n){return!!n&&"integerValue"in n}function aI(n){return!!n&&"arrayValue"in n}function dN(n){return!!n&&"nullValue"in n}function hN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xg(n){return!!n&&"mapValue"in n}function pP(n){return(n?.mapValue?.fields||{})[oI]?.stringValue===sI}function Zu(n){if(n.geoPointValue)return{geoPointValue:V({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:V({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ha(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zu(n.arrayValue.values[t]);return e}return V({},n)}function gP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===fP}var Cce={mapValue:{fields:{[oI]:{stringValue:sI},[Tc]:{arrayValue:{}}}}};var gr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zu(t)}setAll(e){let t=Bn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Zu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());xg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];xg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ha(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Zu(this.value))}};function mP(n){let e=[];return ha(n.fields,(t,r)=>{let i=new Bn([t]);if(xg(r)){let o=mP(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new di(e)}var Fr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Le.min(),Le.min(),Le.min(),gr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Le.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Le.min(),Le.min(),gr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Le.min(),Le.min(),gr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var io=class{constructor(e,t){this.position=e,this.inclusive=t}};function fN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Ee.comparator(Ee.fromName(s.referenceValue),t.key):r=Cc(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function pN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vi(n.position[t],e.position[t]))return!1;return!0}var Jo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function d9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ug=class{},Ft=class n extends Ug{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Lb(e,t,r):t==="array-contains"?new Bb(e,r):t==="in"?new jb(e,r):t==="not-in"?new Hb(e,r):t==="array-contains-any"?new $b(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Vb(e,r):new Ub(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Cc(t,this.value)):t!==null&&Yo(this.value)===Yo(t)&&this.matchesComparison(Cc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},mr=class n extends Ug{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return yP(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function yP(n){return n.op==="and"}function vP(n){return h9(n)&&yP(n)}function h9(n){for(let e of n.filters)if(e instanceof mr)return!1;return!0}function Fb(n){if(n instanceof Ft)return n.field.canonicalString()+n.op.toString()+xc(n.value);if(vP(n))return n.filters.map(e=>Fb(e)).join(",");{let e=n.filters.map(t=>Fb(t)).join(",");return`${n.op}(${e})`}}function _P(n,e){return n instanceof Ft?(function(r,i){return i instanceof Ft&&r.op===i.op&&r.field.isEqual(i.field)&&vi(r.value,i.value)})(n,e):n instanceof mr?(function(r,i){return i instanceof mr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&_P(s,i.filters[a]),!0):!1})(n,e):void Te(19439)}function EP(n){return n instanceof Ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${xc(t.value)}`})(n):n instanceof mr?(function(t){return t.op.toString()+" {"+t.getFilters().map(EP).join(" ,")+"}"})(n):"Filter"}var Lb=class extends Ft{constructor(e,t,r){super(e,t,r),this.key=Ee.fromName(r.referenceValue)}matches(e){let t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}},Vb=class extends Ft{constructor(e,t){super(e,"in",t),this.keys=bP("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Ub=class extends Ft{constructor(e,t){super(e,"not-in",t),this.keys=bP("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function bP(n,e){return(e.arrayValue?.values||[]).map(t=>Ee.fromName(t.referenceValue))}var Bb=class extends Ft{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return aI(t)&&od(t.arrayValue,this.value)}},jb=class extends Ft{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&od(this.value.arrayValue,t)}},Hb=class extends Ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(od(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!od(this.value.arrayValue,t)}},$b=class extends Ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!aI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>od(this.value.arrayValue,r))}};var Gb=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function gN(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Gb(n,e,t,r,i,o,s)}function cI(n){let e=ke(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Fb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),cm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>xc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>xc(r)).join(",")),e.Te=t}return e.Te}function lI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!d9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_P(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!pN(n.startAt,e.startAt)&&pN(n.endAt,e.endAt)}function zb(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var oo=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function f9(n,e,t,r,i,o,s,a){return new oo(n,e,t,r,i,o,s,a)}function uI(n){return new oo(n)}function mN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function p9(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function um(n){return n.collectionGroup!==null}function ta(n){let e=ke(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new sn(Bn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Jo(o,r))}),t.has(Bn.keyField().canonicalString())||e.Ie.push(new Jo(Bn.keyField(),r))}return e.Ie}function pi(n){let e=ke(n);return e.Ee||(e.Ee=g9(e,ta(n))),e.Ee}function g9(n,e){if(n.limitType==="F")return gN(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Jo(i.field,o)});let t=n.endAt?new io(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new io(n.startAt.position,n.startAt.inclusive):null;return gN(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function dm(n,e){let t=n.filters.concat([e]);return new oo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function wP(n,e){let t=n.explicitOrderBy.concat([e]);return new oo(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function sd(n,e,t){return new oo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function IP(n,e){return new oo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,e,n.endAt)}function hm(n,e){return lI(pi(n),pi(e))&&n.limitType===e.limitType}function SP(n){return`${cI(pi(n))}|lt:${n.limitType}`}function _c(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>EP(i)).join(", ")}]`),cm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>xc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>xc(i)).join(",")),`Target(${r})`})(pi(n))}; limitType=${n.limitType})`}function fm(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of ta(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let u=fN(s,a,c);return s.inclusive?u<=0:u<0})(r.startAt,ta(r),i)||r.endAt&&!(function(s,a,c){let u=fN(s,a,c);return s.inclusive?u>=0:u>0})(r.endAt,ta(r),i))})(n,e)}function m9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function TP(n){return(e,t)=>{let r=!1;for(let i of ta(n)){let o=y9(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function y9(n,e,t){let r=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Cc(c,u):Te(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:n.dir})}}var so=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return aP(this.inner)}size(){return this.innerSize}};var v9=new Rt(Ee.comparator);function ao(){return v9}var CP=new Rt(Ee.comparator);function Ju(...n){let e=CP;for(let t of n)e=e.insert(t.key,t);return e}function xP(n){let e=CP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Xs(){return Xu()}function DP(){return Xu()}function Xu(){return new so(n=>n.toString(),(n,e)=>n.isEqual(e))}var _9=new Rt(Ee.comparator),E9=new sn(Ee.comparator);function $e(...n){let e=E9;for(let t of n)e=e.add(t);return e}var b9=new sn(qe);function w9(){return b9}function dI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nd(e)?"-0":e}}function AP(n){return{integerValue:""+n}}function I9(n,e){return J8(e)?AP(e):dI(n,e)}var Dc=class{constructor(){this._=void 0}};function S9(n,e,t){return n instanceof oa?(function(i,o){let s={fields:{[lP]:{stringValue:cP},[dP]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&gd(o)&&(o=lm(o)),o&&(s.fields[uP]=o),{mapValue:s}})(t,e):n instanceof sa?RP(n,e):n instanceof aa?NP(n,e):(function(i,o){let s=MP(i,o),a=yN(s)+yN(i.Ae);return Ob(s)&&Ob(i.Ae)?AP(a):dI(i.serializer,a)})(n,e)}function T9(n,e,t){return n instanceof sa?RP(n,e):n instanceof aa?NP(n,e):t}function MP(n,e){return n instanceof Ac?(function(r){return Ob(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var oa=class extends Dc{},sa=class extends Dc{constructor(e){super(),this.elements=e}};function RP(n,e){let t=PP(e);for(let r of n.elements)t.some(i=>vi(i,r))||t.push(r);return{arrayValue:{values:t}}}var aa=class extends Dc{constructor(e){super(),this.elements=e}};function NP(n,e){let t=PP(e);for(let r of n.elements)t=t.filter(i=>!vi(i,r));return{arrayValue:{values:t}}}var Ac=class extends Dc{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function yN(n){return St(n.integerValue||n.doubleValue)}function PP(n){return aI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var qb=class{constructor(e,t){this.field=e,this.transform=t}};function C9(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof sa&&i instanceof sa||r instanceof aa&&i instanceof aa?Sc(r.elements,i.elements,vi):r instanceof Ac&&i instanceof Ac?vi(r.Ae,i.Ae):r instanceof oa&&i instanceof oa})(n.transform,e.transform)}var Wb=class{constructor(e,t){this.version=e,this.transformResults=t}},Ko=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Dg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Mc=class{};function kP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ad(n.key,Ko.none()):new ca(n.key,n.data,Ko.none());{let t=n.data,r=gr.empty(),i=new sn(Bn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new co(n.key,r,new di(i.toArray()),Ko.none())}}function x9(n,e,t){n instanceof ca?(function(i,o,s){let a=i.value.clone(),c=_N(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof co?(function(i,o,s){if(!Dg(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=_N(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(OP(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function ed(n,e,t,r){return n instanceof ca?(function(o,s,a,c){if(!Dg(o.precondition,s))return a;let u=o.value.clone(),d=EN(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof co?(function(o,s,a,c){if(!Dg(o.precondition,s))return a;let u=EN(o.fieldTransforms,c,s),d=s.data;return d.setAll(OP(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))})(n,e,t,r):(function(o,s,a){return Dg(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function D9(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=MP(r.transform,i||null);o!=null&&(t===null&&(t=gr.empty()),t.set(r.field,o))}return t||null}function vN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Sc(r,i,(o,s)=>C9(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ca=class extends Mc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},co=class extends Mc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function OP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function _N(n,e,t){let r=new Map;ot(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,T9(s,a,t[i]))}return r}function EN(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,S9(o,s,e))}return r}var ad=class extends Mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Kb=class extends Mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Qb=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&x9(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ed(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ed(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=DP();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=kP(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$e())}isEqual(e){return this.batchId===e.batchId&&Sc(this.mutations,e.mutations,(t,r)=>vN(t,r))&&Sc(this.baseMutations,e.baseMutations,(t,r)=>vN(t,r))}},Yb=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ot(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return _9})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Jb=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Zb=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var zt,Ke;function A9(n){switch(n){case H.OK:return Te(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return Te(15467,{code:n})}}function FP(n){if(n===void 0)return to("GRPC error has no .code"),H.UNKNOWN;switch(n){case zt.OK:return H.OK;case zt.CANCELLED:return H.CANCELLED;case zt.UNKNOWN:return H.UNKNOWN;case zt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case zt.INTERNAL:return H.INTERNAL;case zt.UNAVAILABLE:return H.UNAVAILABLE;case zt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case zt.NOT_FOUND:return H.NOT_FOUND;case zt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case zt.ABORTED:return H.ABORTED;case zt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case zt.DATA_LOSS:return H.DATA_LOSS;default:return Te(39323,{code:n})}}(Ke=zt||(zt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";var M9=null;function R9(){return new TextEncoder}var N9=new Ji([4294967295,4294967295],0);function bN(n){let e=R9().encode(n),t=new yb;return t.update(e),new Uint8Array(t.digest())}function wN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ji([t,r],0),new Ji([i,o],0)]}var Xb=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ea(`Invalid padding: ${t}`);if(r<0)throw new ea(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ea(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ea(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ji.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Ji.fromNumber(r)));return i.compare(N9)===1&&(i=new Ji([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=bN(e),[r,i]=wN(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=bN(e),[r,i]=wN(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.be(s)}}be(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ea=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Bg=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,cd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Le.min(),i,new Rt(qe),ao(),$e())}},cd=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,$e(),$e(),$e())}};var Ic=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}},jg=class{constructor(e,t){this.targetId=e,this.Ce=t}},Hg=class{constructor(e,t,r=gn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},$g=class{constructor(){this.ve=0,this.Fe=IN(),this.Me=gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),t=$e(),r=$e();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Te(38017,{changeType:o})}}),new cd(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=IN()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ot(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},ew=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=ao(),this.He=Sg(),this.Je=Sg(),this.Ze=new Rt(qe)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(zb(o))if(r===0){let s=new Ee(o.path);this.et(t,s,Fr.newNoDocument(s,Le.min()))}else ot(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),c=a?this.ct(a,e,s):1;if(c!==0){this.it(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,u)}M9?.lt((function(d,f,g,m,T){let M={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},L=f.unchangedNames;return L&&(M.bloomFilter={applied:T===0,hashCount:L?.hashCount??0,bitmapLength:L?.bits?.bitmap?.length??0,padding:L?.bits?.padding??0,mightContain:k=>m?.mightContain(k)??!1}),M})(s,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=ro(r).toUint8Array()}catch(c){if(c instanceof Lg)return Qo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Xb(s,i,o)}catch(c){return Qo(c instanceof ea?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&zb(a.target)){let c=new Ee(a.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,Fr.newNoDocument(c,e))}o.Be&&(t.set(s,o.ke()),o.Ke())}});let r=$e();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Bg(e,t,this.Ze,this.je,r);return this.je=ao(),this.He=Sg(),this.Je=Sg(),this.Ze=new Rt(qe),i}Ye(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new $g,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new sn(qe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new sn(qe),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $g),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Sg(){return new Rt(Ee.comparator)}function IN(){return new Rt(Ee.comparator)}var P9={asc:"ASCENDING",desc:"DESCENDING"},k9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},O9={and:"AND",or:"OR"},tw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function nw(n,e){return n.useProto3Json||cm(e)?e:{value:e}}function Gg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function F9(n,e){return Gg(n,e.toTimestamp())}function gi(n){return ot(!!n,49232),Le.fromTimestamp((function(t){let r=no(t);return new Vt(r.seconds,r.nanos)})(n))}function hI(n,e){return rw(n,e).canonicalString()}function rw(n,e){let t=(function(i){return new gt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function VP(n){let e=gt.fromString(n);return ot($P(e),10190,{key:e.toString()}),e}function iw(n,e){return hI(n.databaseId,e.path)}function Sb(n,e){let t=VP(e);if(t.get(1)!==n.databaseId.projectId)throw new X(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new X(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(BP(t))}function UP(n,e){return hI(n.databaseId,e)}function L9(n){let e=VP(n);return e.length===4?gt.emptyPath():BP(e)}function ow(n){return new gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function BP(n){return ot(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function SN(n,e,t){return{name:iw(n,e),fields:t.value.mapValue.fields}}function V9(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Te(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(u,d){return u.useProto3Json?(ot(d===void 0||typeof d=="string",58123),gn.fromBase64String(d||"")):(ot(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),gn.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(u){let d=u.code===void 0?H.UNKNOWN:FP(u.code);return new X(d,u.message||"")})(s);t=new Hg(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Sb(n,r.document.name),o=gi(r.document.updateTime),s=r.document.createTime?gi(r.document.createTime):Le.min(),a=new gr({mapValue:{fields:r.document.fields}}),c=Fr.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new Ic(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Sb(n,r.document),o=r.readTime?gi(r.readTime):Le.min(),s=Fr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ic([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Sb(n,r.document),o=r.removedTargetIds||[];t=new Ic([],o,i,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Zb(i,o),a=r.targetId;t=new jg(a,s)}}return t}function U9(n,e){let t;if(e instanceof ca)t={update:SN(n,e.key,e.value)};else if(e instanceof ad)t={delete:iw(n,e.key)};else if(e instanceof co)t={update:SN(n,e.key,e.data),updateMask:K9(e.fieldMask)};else{if(!(e instanceof Kb))return Te(16599,{dt:e.type});t={verify:iw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof oa)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof sa)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof aa)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ac)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw Te(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:F9(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Te(27497)})(n,e.precondition)),t}function B9(n,e){return n&&n.length>0?(ot(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?gi(i.updateTime):gi(o);return s.isEqual(Le.min())&&(s=gi(o)),new Wb(s,i.transformResults||[])})(t,e))):[]}function j9(n,e){return{documents:[UP(n,e.path)]}}function H9(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=UP(n,i);let o=(function(u){if(u.length!==0)return HP(mr.create(u,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(u){if(u.length!==0)return u.map(d=>(function(g){return{field:Ec(g.field),direction:z9(g.dir)}})(d))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=nw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:i}}function $9(n){let e=L9(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ot(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=(function(f){let g=jP(f);return g instanceof mr&&vP(g)?g.getFilters():[g]})(t.where));let s=[];t.orderBy&&(s=(function(f){return f.map(g=>(function(T){return new Jo(bc(T.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(g))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let g;return g=typeof f=="object"?f.value:f,cm(g)?null:g})(t.limit));let c=null;t.startAt&&(c=(function(f){let g=!!f.before,m=f.values||[];return new io(m,g)})(t.startAt));let u=null;return t.endAt&&(u=(function(f){let g=!f.before,m=f.values||[];return new io(m,g)})(t.endAt)),f9(e,i,s,o,a,"F",c,u)}function G9(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jP(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=bc(t.unaryFilter.field);return Ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=bc(t.unaryFilter.field);return Ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=bc(t.unaryFilter.field);return Ft.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=bc(t.unaryFilter.field);return Ft.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ft.create(bc(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return mr.create(t.compositeFilter.filters.map(r=>jP(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(n):Te(30097,{filter:n})}function z9(n){return P9[n]}function q9(n){return k9[n]}function W9(n){return O9[n]}function Ec(n){return{fieldPath:n.canonicalString()}}function bc(n){return Bn.fromServerFormat(n.fieldPath)}function HP(n){return n instanceof Ft?(function(t){if(t.op==="=="){if(hN(t.value))return{unaryFilter:{field:Ec(t.field),op:"IS_NAN"}};if(dN(t.value))return{unaryFilter:{field:Ec(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hN(t.value))return{unaryFilter:{field:Ec(t.field),op:"IS_NOT_NAN"}};if(dN(t.value))return{unaryFilter:{field:Ec(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ec(t.field),op:q9(t.op),value:t.value}}})(n):n instanceof mr?(function(t){let r=t.getFilters().map(i=>HP(i));return r.length===1?r[0]:{compositeFilter:{op:W9(t.op),filters:r}}})(n):Te(54877,{filter:n})}function K9(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $P(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function GP(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}var ld=class n{constructor(e,t,r,i,o=Le.min(),s=Le.min(),a=gn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var sw=class{constructor(e){this.yt=e}};function zP(n){let e=$9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?sd(e,e.limit,"L"):e}var zg=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(St(e.integerValue));else if("doubleValue"in e){let r=St(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),nd(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=no(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ro(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?gP(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):pP(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):Te(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Tc,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(St(o)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Ee.fromName(e).path.forEach(r=>{this.Ft(t,60),this.$t(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};zg.Wt=new zg;var aw=class{constructor(){this.Sn=new cw}addToCollectionParentIndex(e,t){return this.Sn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(ia.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(ia.min())}updateCollectionGroup(e,t,r){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}},cw=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new sn(gt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new sn(gt.comparator)).toArray()}};var xce=new Uint8Array(0);var TN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qP=41943040,pr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};pr.DEFAULT_COLLECTION_PERCENTILE=10,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pr.DEFAULT=new pr(qP,pr.DEFAULT_COLLECTION_PERCENTILE,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pr.DISABLED=new pr(-1,0,0);var ud=class n{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new n(0)}static ar(){return new n(-1)}};var CN="LruGarbageCollector",Q9=1048576;function xN([n,e],[t,r]){let i=qe(n,t);return i===0?qe(e,r):i}var lw=class{constructor(e){this.Pr=e,this.buffer=new sn(xN),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();xN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},uw=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){se(CN,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vc(t)?se(CN,"Ignoring IndexedDB error during garbage collection: ",t):await Lc(t)}await this.Ar(3e5)})}},dw=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return J.resolve(rI.ce);let r=new lw(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(TN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TN):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,o,s,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),vc()<=He.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function Y9(n,e){return new dw(n,e)}var hw=class{constructor(){this.changes=new so(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?J.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var fw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var pw=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ed(r.mutation,i,di.empty(),Vt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$e()){let i=Xs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Ju();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Xs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$e()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=ao(),s=Xu(),a=(function(){return Xu()})();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof co)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),ed(d.mutation,u,d.mutation.getFieldMask(),Vt.now())):s.set(u.key,di.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),t.forEach((u,d)=>a.set(u,new fw(d,s.get(u)??null))),a))}recalculateAndSaveOverlays(e,t){let r=Xu(),i=new Rt((s,a)=>s-a),o=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||di.empty();d=a.applyToLocalView(u,d),r.set(c,d);let f=(i.get(a.batchId)||$e()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=DP();d.forEach(g=>{if(!o.has(g)){let m=kP(t.get(g),r.get(g));m!==null&&f.set(g,m),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return J.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return p9(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):um(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):J.resolve(Xs()),a=td,c=o;return s.next(u=>J.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?J.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,$e())).next(d=>({batchId:a,changes:xP(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(r=>{let i=Ju();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Ju();return this.indexManager.getCollectionParents(e,o).next(a=>J.forEach(a,c=>{let u=(function(f,g){return new oo(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,Fr.newInvalidDocument(d)))});let a=Ju();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&ed(d.mutation,u,di.empty(),Vt.now()),fm(t,u)&&(a=a.insert(c,u))}),a})}};var gw=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return J.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:gi(i.createTime)}})(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:zP(i.bundledQuery),readTime:gi(i.readTime)}})(t)),J.resolve()}};var mw=class{constructor(){this.overlays=new Rt(Ee.comparator),this.Lr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Xs();return J.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.bt(e,t,o)}),J.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(r)),J.resolve()}getOverlaysForCollection(e,t,r){let i=Xs(),o=t.length+1,s=new Ee(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return J.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Rt((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=Xs(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=Xs(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return J.resolve(a)}bt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Jb(t,r));let o=this.Lr.get(t);o===void 0&&(o=$e(),this.Lr.set(t,o)),this.Lr.set(t,o.add(r.key))}};var yw=class{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}};var dd=class{constructor(){this.kr=new sn(qt.Kr),this.qr=new sn(qt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let r=new qt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new qt(e,t))}Qr(e,t){e.forEach(r=>this.removeReference(r,t))}Gr(e){let t=new Ee(new gt([])),r=new qt(t,e),i=new qt(t,e+1),o=[];return this.qr.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new Ee(new gt([])),r=new qt(t,e),i=new qt(t,e+1),o=$e();return this.qr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new qt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},qt=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ee.comparator(e.key,t.key)||qe(e.Hr,t.Hr)}static Ur(e,t){return qe(e.Hr,t.Hr)||Ee.comparator(e.key,t.key)}};var vw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new sn(qt.Kr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Qb(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Jr=this.Jr.add(new qt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return J.resolve(s)}lookupMutationBatch(e,t){return J.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return J.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?iI:this.Yn-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new qt(t,0),i=new qt(t,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),J.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new sn(qe);return t.forEach(i=>{let o=new qt(i,0),s=new qt(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),J.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Ee.isDocumentKey(o)||(o=o.child(""));let s=new qt(new Ee(o),0),a=new sn(qe);return this.Jr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),J.resolve(this.Yr(a))}Yr(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ot(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return J.forEach(t.mutations,i=>{let o=new qt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,t){let r=new qt(t,0),i=this.Jr.firstAfterOrEqual(r);return J.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var _w=class{constructor(e){this.ti=e,this.docs=(function(){return new Rt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return J.resolve(r?r.document.mutableCopy():Fr.newInvalidDocument(t))}getEntries(e,t){let r=ao();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Fr.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ao(),s=t.path,a=new Ee(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||K8(W8(d),r)<=0||(i.has(d.key)||fm(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return J.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Te(9500)}ni(e,t){return J.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ew(this)}getSize(e){return J.resolve(this.size)}},Ew=class extends hw{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),J.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}};var bw=class{constructor(e){this.persistence=e,this.ri=new so(t=>cI(t),lI),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.ii=0,this.si=new dd,this.targetCount=0,this.oi=ud._r()}forEachTarget(e,t){return this.ri.forEach((r,i)=>t(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),J.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new ud(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.lr(t),J.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ri.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ri.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),J.waitFor(o).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){let r=this.ri.get(t)||null;return J.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),J.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),J.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),J.resolve()}getMatchingKeysForTargetId(e,t){let r=this.si.jr(t);return J.resolve(r)}containsKey(e,t){return J.resolve(this.si.containsKey(t))}};var qg=class{constructor(e,t){this._i={},this.overlays={},this.ai=new rI(0),this.ui=!1,this.ui=!0,this.ci=new yw,this.referenceDelegate=e(this),this.li=new bw(this),this.indexManager=new aw,this.remoteDocumentCache=(function(i){return new _w(i)})(r=>this.referenceDelegate.hi(r)),this.serializer=new sw(t),this.Pi=new gw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new vw(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);let i=new ww(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(o=>this.referenceDelegate.Ii(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return J.or(Object.values(this._i).map(r=>()=>r.containsKey(e,t)))}},ww=class extends Nb{constructor(e){super(),this.currentSequenceNumber=e}},Iw=class n{constructor(e){this.persistence=e,this.Ri=new dd,this.Ai=null}static Vi(e){return new n(e)}get di(){if(this.Ai)return this.Ai;throw Te(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),J.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),J.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.di,r=>{let i=Ee.fromPath(r);return this.mi(e,i).next(o=>{o||t.removeEntry(i,Le.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return J.or([()=>J.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Wg=class n{constructor(e,t){this.persistence=e,this.fi=new so(r=>Z8(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Y9(this,t)}static Vi(e,t){return new n(e,t)}Ti(){}Ii(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}pr(e){let t=0;return this.mr(e,r=>{t++}).next(()=>t)}mr(e,t){return J.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(o=>o?J.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,s=>this.wr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Le.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),J.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Cg(e.data.value)),t}wr(e,t,r){return J.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.fi.get(t);return J.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Sw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=$e(),i=$e();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Tw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Cw=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return FR()?8:Y8(nn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.gs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ps(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Tw;return this.ys(e,t,s).next(a=>{if(o.result=a,this.As)return this.ws(e,t,s,a.size)})}).next(()=>o.result)}ws(e,t,r,i){return r.documentReadCount<this.Vs?(vc()<=He.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",_c(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),J.resolve()):(vc()<=He.DEBUG&&se("QueryEngine","Query:",_c(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(vc()<=He.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",_c(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pi(t))):J.resolve())}gs(e,t){if(mN(t))return J.resolve(null);let r=pi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=sd(t,null,"F"),r=pi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=$e(...o);return this.fs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(t,a);return this.Ss(t,u,s,c.readTime)?this.gs(e,sd(t,null,"F")):this.Ds(e,u,t,c)}))})))}ps(e,t,r,i){return mN(t)||i.isEqual(Le.min())?J.resolve(null):this.fs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ss(t,s,r,i)?J.resolve(null):(vc()<=He.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_c(t)),this.Ds(e,s,t,q8(i,td)).next(a=>a))})}bs(e,t){let r=new sn(TP(e));return t.forEach((i,o)=>{fm(e,o)&&(r=r.add(o))}),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,t,r){return vc()<=He.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",_c(t)),this.fs.getDocumentsMatchingQuery(e,t,ia.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var fI="LocalStore",J9=3e8,xw=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new Rt(qe),this.Fs=new so(o=>cI(o),lI),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pw(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}};function Z9(n,e,t,r){return new xw(n,e,t,r)}async function WP(n,e){let t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Os(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=$e();for(let u of i){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Ns:u,removedBatchIds:s,addedBatchIds:a}))})})}function X9(n,e){let t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.xs.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,d){let f=u.batch,g=f.keys(),m=J.resolve();return g.forEach(T=>{m=m.next(()=>d.getEntry(c,T)).next(M=>{let L=u.docVersions.get(T);ot(L!==null,48541),M.version.compareTo(L)<0&&(f.applyToRemoteDocument(M,u),M.isValidDocument()&&(M.setReadTime(u.commitVersion),d.addEntry(M)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=$e();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function KP(n){let e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.li.getLastRemoteSnapshotVersion(t))}function eH(n,e){let t=ke(n),r=e.snapshotVersion,i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.li.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.li.addMatchingKeys(o,d.addedDocuments,f)));let m=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(gn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),(function(M,L,k){return M.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=J9?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(g,m,d)&&a.push(t.li.updateTargetData(o,m))});let c=ao(),u=$e();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(tH(o,s,e.documentUpdates).next(d=>{c=d.Bs,u=d.Ls})),!r.isEqual(Le.min())){let d=t.li.getLastRemoteSnapshotVersion(o).next(f=>t.li.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return J.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.vs=i,o))}function tH(n,e,t){let r=$e(),i=$e();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=ao();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Le.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):se(fI,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Bs:s,Ls:i}})}function nH(n,e){let t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=iI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rH(n,e){let t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.li.getTargetData(r,e).next(o=>o?(i=o,J.resolve(i)):t.li.allocateTargetId(r).next(s=>(i=new ld(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r})}async function Dw(n,e,t){let r=ke(n),i=r.vs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Vc(s))throw s;se(fI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function DN(n,e,t){let r=ke(n),i=Le.min(),o=$e();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,u,d){let f=ke(c),g=f.Fs.get(d);return g!==void 0?J.resolve(f.vs.get(g)):f.li.getTargetData(u,d)})(r,s,pi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:Le.min(),t?o:$e())).next(a=>(iH(r,m9(e),a),{documents:a,ks:o})))}function iH(n,e,t){let r=n.Ms.get(e)||Le.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ms.set(e,r)}var Kg=class{constructor(){this.activeTargetIds=w9()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Aw=class{constructor(){this.vo=new Kg,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Kg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Mw=class{Mo(e){}shutdown(){}};var AN="ConnectivityMonitor",Qg=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){se(AN,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){se(AN,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Tg=null;function Rw(){return Tg===null?Tg=(function(){return 268435456+Math.round(2147483648*Math.random())})():Tg++,"0x"+Tg.toString(16)}var Tb="RestConnection",oH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},Nw=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Vg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=Rw(),a=this.Qo(e,t.toUriEncodedString());se(Tb,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,o);let{host:u}=new URL(a),d=$o(u);return this.zo(e,a,c,r,d).then(f=>(se(Tb,`Received RPC '${e}' ${s}: `,f),f),f=>{throw Qo(Tb,`RPC '${e}' ${s} failed with error: `,f,"url: ",a,"request:",r),f})}jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Qo(e,t){let r=oH[e],i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}};var Pw=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var Sn="WebChannelConnection",Yu=(n,e,t)=>{n.listen(e,r=>{try{t(r)}catch(i){setTimeout(()=>{throw i},0)}})},Yg=class n extends Nw{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!n.c_){let e=bb();Yu(e,Eb.STAT_EVENT,t=>{t.stat===wg.PROXY?se(Sn,"STAT_EVENT: detected buffering proxy"):t.stat===wg.NOPROXY&&se(Sn,"STAT_EVENT: detected no buffering proxy")}),n.c_=!0}}zo(e,t,r,i,o){let s=Rw();return new Promise((a,c)=>{let u=new vb;u.setWithCredentials(!0),u.listenOnce(_b.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Qu.NO_ERROR:let f=u.getResponseJson();se(Sn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case Qu.TIMEOUT:se(Sn,`RPC '${e}' ${s} timed out`),c(new X(H.DEADLINE_EXCEEDED,"Request time out"));break;case Qu.HTTP_ERROR:let g=u.getStatus();if(se(Sn,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let T=m?.error;if(T&&T.status&&T.message){let M=(function(k){let Q=k.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(Q)>=0?Q:H.UNKNOWN})(T.status);c(new X(M,T.message))}else c(new X(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new X(H.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{se(Sn,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);se(Sn,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}T_(e,t,r){let i=Rw(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;let u=o.join("");se(Sn,`Creating RPC '${e}' stream ${i}: ${u}`,a);let d=s.createWebChannel(u,a);this.I_(d);let f=!1,g=!1,m=new Pw({Ho:T=>{g?se(Sn,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(f||(se(Sn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),se(Sn,`RPC '${e}' stream ${i} sending:`,T),d.send(T))},Jo:()=>d.close()});return Yu(d,yc.EventType.OPEN,()=>{g||(se(Sn,`RPC '${e}' stream ${i} transport opened.`),m.i_())}),Yu(d,yc.EventType.CLOSE,()=>{g||(g=!0,se(Sn,`RPC '${e}' stream ${i} transport closed`),m.o_(),this.E_(d))}),Yu(d,yc.EventType.ERROR,T=>{g||(g=!0,Qo(Sn,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),m.o_(new X(H.UNAVAILABLE,"The operation could not be completed")))}),Yu(d,yc.EventType.MESSAGE,T=>{if(!g){let M=T.data[0];ot(!!M,16349);let L=M,k=L?.error||L[0]?.error;if(k){se(Sn,`RPC '${e}' stream ${i} received error:`,k);let Q=k.status,q=(function(ie){let x=zt[ie];if(x!==void 0)return FP(x)})(Q),ce=k.message;q===void 0&&(q=H.INTERNAL,ce="Unknown error status: "+Q+" with message "+k.message),g=!0,m.o_(new X(q,ce)),d.close()}else se(Sn,`RPC '${e}' stream ${i} received:`,M),m.__(M)}}),n.u_(),setTimeout(()=>{m.s_()},0),m}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return wb()}};function sH(n){return new Yg(n)}function Cb(){return typeof document<"u"?document:null}function yd(n){return new tw(n,!0)}Yg.c_=!1;var Jg=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var MN="PersistentStream",Zg=class{constructor(e,t,r,i,o,s,a,c){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Jg(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(to(t.toString()),to("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new X(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return se(MN,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(se(MN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},kw=class extends Zg{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=V9(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Le.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Le.min():s.readTime?gi(s.readTime):Le.min()})(e);return this.listener.J_(t,r)}Z_(e){let t={};t.database=ow(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=zb(c)?{documents:j9(o,c)}:{query:H9(o,c).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=LP(o,s.resumeToken);let u=nw(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(Le.min())>0){a.readTime=Gg(o,s.snapshotVersion.toTimestamp());let u=nw(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=G9(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){let t={};t.database=ow(this.serializer),t.removeTarget=e,this.K_(t)}},Ow=class extends Zg{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=B9(e.writeResults,e.commitTime),r=gi(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=ow(this.serializer),this.K_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>U9(this.serializer,r))};this.K_(t)}};var Fw=class{},Lw=class extends Fw{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new X(H.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,rw(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(H.UNKNOWN,o.toString())})}jo(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.jo(e,rw(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(H.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}};function aH(n,e,t,r){return new Lw(n,e,t,r)}var Vw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(to(t),this.aa=!1):se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var la="RemoteStore",Uw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(s=>{r.enqueueAndForget(async()=>{fa(this)&&(se(la,"Restarting streams for network reachability change."),await(async function(c){let u=ke(c);u.Ea.add(4),await vd(u),u.Va.set("Unknown"),u.Ea.delete(4),await pm(u)})(this))})}),this.Va=new Vw(r,i)}};async function pm(n){if(fa(n))for(let e of n.Ra)await e(!0)}async function vd(n){for(let e of n.Ra)await e(!1)}function QP(n,e){let t=ke(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),yI(t)?mI(t):Uc(t).O_()&&gI(t,e))}function pI(n,e){let t=ke(n),r=Uc(t);t.Ia.delete(e),r.O_()&&YP(t,e),t.Ia.size===0&&(r.O_()?r.L_():fa(t)&&t.Va.set("Unknown"))}function gI(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Uc(n).Z_(e)}function YP(n,e){n.da.$e(e),Uc(n).X_(e)}function mI(n){n.da=new ew({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Uc(n).start(),n.Va.ua()}function yI(n){return fa(n)&&!Uc(n).x_()&&n.Ia.size>0}function fa(n){return ke(n).Ea.size===0}function JP(n){n.da=void 0}async function cH(n){n.Va.set("Online")}async function lH(n){n.Ia.forEach((e,t)=>{gI(n,e)})}async function uH(n,e){JP(n),yI(n)?(n.Va.ha(e),mI(n)):n.Va.set("Unknown")}async function dH(n,e,t){if(n.Va.set("Online"),e instanceof Hg&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.da.removeTarget(a))})(n,e)}catch(r){se(la,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xg(n,r)}else if(e instanceof Ic?n.da.Xe(e):e instanceof jg?n.da.st(e):n.da.tt(e),!t.isEqual(Le.min()))try{let r=await KP(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let a=o.da.Tt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.Ia.get(u);d&&o.Ia.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.Ia.get(c);if(!d)return;o.Ia.set(c,d.withResumeToken(gn.EMPTY_BYTE_STRING,d.snapshotVersion)),YP(o,c);let f=new ld(d.target,c,u,d.sequenceNumber);gI(o,f)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){se(la,"Failed to raise snapshot:",r),await Xg(n,r)}}async function Xg(n,e,t){if(!Vc(e))throw e;n.Ea.add(1),await vd(n),n.Va.set("Offline"),t||(t=()=>KP(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{se(la,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await pm(n)})}function ZP(n,e){return e().catch(t=>Xg(n,t,e))}async function gm(n){let e=ke(n),t=Zo(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:iI;for(;hH(e);)try{let i=await nH(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,fH(e,i)}catch(i){await Xg(e,i)}XP(e)&&ek(e)}function hH(n){return fa(n)&&n.Ta.length<10}function fH(n,e){n.Ta.push(e);let t=Zo(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function XP(n){return fa(n)&&!Zo(n).x_()&&n.Ta.length>0}function ek(n){Zo(n).start()}async function pH(n){Zo(n).ra()}async function gH(n){let e=Zo(n);for(let t of n.Ta)e.ea(t.mutations)}async function mH(n,e,t){let r=n.Ta.shift(),i=Yb.from(r,e,t);await ZP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await gm(n)}async function yH(n,e){e&&Zo(n).Y_&&await(async function(r,i){if((function(s){return A9(s)&&s!==H.ABORTED})(i.code)){let o=r.Ta.shift();Zo(r).B_(),await ZP(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await gm(r)}})(n,e),XP(n)&&ek(n)}async function RN(n,e){let t=ke(n);t.asyncQueue.verifyOperationInProgress(),se(la,"RemoteStore received new credentials");let r=fa(t);t.Ea.add(3),await vd(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await pm(t)}async function vH(n,e){let t=ke(n);e?(t.Ea.delete(2),await pm(t)):e||(t.Ea.add(2),await vd(t),t.Va.set("Unknown"))}function Uc(n){return n.ma||(n.ma=(function(t,r,i){let o=ke(t);return o.sa(),new kw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:cH.bind(null,n),Yo:lH.bind(null,n),t_:uH.bind(null,n),J_:dH.bind(null,n)}),n.Ra.push(async e=>{e?(n.ma.B_(),yI(n)?mI(n):n.Va.set("Unknown")):(await n.ma.stop(),JP(n))})),n.ma}function Zo(n){return n.fa||(n.fa=(function(t,r,i){let o=ke(t);return o.sa(),new Ow(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:pH.bind(null,n),t_:yH.bind(null,n),ta:gH.bind(null,n),na:mH.bind(null,n)}),n.Ra.push(async e=>{e?(n.fa.B_(),await gm(n)):(await n.fa.stop(),n.Ta.length>0&&(se(la,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var Bw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function vI(n,e){if(to("AsyncQueue",`${e}: ${n}`),Vc(n))return new X(H.UNAVAILABLE,`${e}: ${n}`);throw n}var hd=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ee.comparator(t.key,r.key):(t,r)=>Ee.comparator(t.key,r.key),this.keyedMap=Ju(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var em=class{constructor(){this.ga=new Rt(Ee.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},ua=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,hd.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var jw=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}},Hw=class{constructor(){this.queries=NN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=ke(t),o=i.queries;i.queries=NN(),o.forEach((s,a)=>{for(let c of a.ba)c.onError(r)})})(this,new X(H.ABORTED,"Firestore shutting down"))}};function NN(){return new so(n=>SP(n),hm)}async function _H(n,e){let t=ke(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new jw,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let a=vI(s,`Initialization of query '${_c(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.ba.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&_I(t)}async function EH(n,e){let t=ke(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.ba.indexOf(e);s>=0&&(o.ba.splice(s,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function bH(n,e){let t=ke(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.ba)a.Fa(i)&&(r=!0);s.wa=i}}r&&_I(t)}function wH(n,e,t){let r=ke(n),i=r.queries.get(e);if(i)for(let o of i.ba)o.onError(t);r.queries.delete(e)}function _I(n){n.Ca.forEach(e=>{e.next()})}var $w,PN;(PN=$w||($w={})).Ma="default",PN.Cache="cache";var Gw=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$w.Cache}};var tm=class{constructor(e){this.key=e}},nm=class{constructor(e){this.key=e}},zw=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=$e(),this.mutatedKeys=$e(),this.eu=TP(e),this.tu=new hd(this.eu)}get nu(){return this.Za}ru(e,t){let r=t?t.iu:new em,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),m=fm(this.query,f)?f:null,T=!!g&&this.mutatedKeys.has(g.key),M=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),L=!1;g&&m?g.data.isEqual(m.data)?T!==M&&(r.track({type:3,doc:m}),L=!0):this.su(g,m)||(r.track({type:2,doc:m}),L=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),L=!0):g&&!m&&(r.track({type:1,doc:g}),L=!0,(c||u)&&(a=!0)),L&&(m?(s=s.add(m),o=M?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{tu:s,iu:r,Ss:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((d,f)=>(function(m,T){let M=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:L})}};return M(m)-M(T)})(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,u=c!==this.Xa;return this.Xa=c,s.length!==0||u?{snapshot:new ua(this.query,e.tu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new em,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Za=this.Za.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Za=this.Za.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=$e(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new nm(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new tm(r))}),t}cu(e){this.Za=e.ks,this.Ya=$e();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ua.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},EI="SyncEngine",qw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Ww=class{constructor(e){this.key=e,this.hu=!1}},Kw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new so(a=>SP(a),hm),this.Iu=new Map,this.Eu=new Set,this.Ru=new Rt(Ee.comparator),this.Au=new Map,this.Vu=new dd,this.du={},this.mu=new Map,this.fu=ud.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function IH(n,e,t=!0){let r=sk(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await tk(r,e,t,!0),i}async function SH(n,e){let t=sk(n);await tk(t,e,!0,!1)}async function tk(n,e,t,r){let i=await rH(n.localStore,pi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=await TH(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&QP(n.remoteStore,i),a}async function TH(n,e,t,r,i){n.pu=(f,g,m)=>(async function(M,L,k,Q){let q=L.view.ru(k);q.Ss&&(q=await DN(M.localStore,L.query,!1).then(({documents:x})=>L.view.ru(x,q)));let ce=Q&&Q.targetChanges.get(L.targetId),Ie=Q&&Q.targetMismatches.get(L.targetId)!=null,ie=L.view.applyChanges(q,M.isPrimaryClient,ce,Ie);return ON(M,L.targetId,ie.au),ie.snapshot})(n,f,g,m);let o=await DN(n.localStore,e,!0),s=new zw(e,o.ks),a=s.ru(o.documents),c=cd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);ON(n,t,u.au);let d=new qw(e,t,s);return n.Tu.set(e,d),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function CH(n,e,t){let r=ke(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!hm(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Dw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&pI(r.remoteStore,i.targetId),Qw(r,i.targetId)}).catch(Lc)):(Qw(r,i.targetId),await Dw(r.localStore,i.targetId,!0))}async function xH(n,e){let t=ke(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),pI(t.remoteStore,r.targetId))}async function DH(n,e,t){let r=OH(n);try{let i=await(function(s,a){let c=ke(s),u=Vt.now(),d=a.reduce((m,T)=>m.add(T.key),$e()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let T=ao(),M=$e();return c.xs.getEntries(m,d).next(L=>{T=L,T.forEach((k,Q)=>{Q.isValidDocument()||(M=M.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,T)).next(L=>{f=L;let k=[];for(let Q of a){let q=D9(Q,f.get(Q.key).overlayedDocument);q!=null&&k.push(new co(Q.key,q,mP(q.value.mapValue),Ko.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,k,a)}).next(L=>{g=L;let k=L.applyToLocalDocumentSet(f,M);return c.documentOverlayCache.saveOverlays(m,L.batchId,k)})}).then(()=>({batchId:g.batchId,changes:xP(f)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let u=s.du[s.currentUser.toKey()];u||(u=new Rt(qe)),u=u.insert(a,c),s.du[s.currentUser.toKey()]=u})(r,i.batchId,t),await _d(r,i.changes),await gm(r.remoteStore)}catch(i){let o=vI(i,"Failed to persist write");t.reject(o)}}async function nk(n,e){let t=ke(n);try{let r=await eH(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ot(s.hu,14607):i.removedDocuments.size>0&&(ot(s.hu,42227),s.hu=!1))}),await _d(t,r,e)}catch(r){await Lc(r)}}function kN(n,e,t){let r=ke(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=ke(s);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let g of f.ba)g.va(a)&&(u=!0)}),u&&_I(c)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function AH(n,e,t){let r=ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Rt(Ee.comparator);s=s.insert(o,Fr.newNoDocument(o,Le.min()));let a=$e().add(o),c=new Bg(Le.min(),new Map,new Rt(qe),s,a);await nk(r,c),r.Ru=r.Ru.remove(o),r.Au.delete(e),bI(r)}else await Dw(r.localStore,e,!1).then(()=>Qw(r,e,t)).catch(Lc)}async function MH(n,e){let t=ke(n),r=e.batch.batchId;try{let i=await X9(t.localStore,e);ik(t,r,null),rk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await _d(t,i)}catch(i){await Lc(i)}}async function RH(n,e,t){let r=ke(n);try{let i=await(function(s,a){let c=ke(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(ot(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})})(r.localStore,e);ik(r,e,t),rk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await _d(r,i)}catch(i){await Lc(i)}}function rk(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function ik(n,e,t){let r=ke(n),i=r.du[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Qw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(r=>{n.Vu.containsKey(r)||ok(n,r)})}function ok(n,e){n.Eu.delete(e.path.canonicalString());let t=n.Ru.get(e);t!==null&&(pI(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),bI(n))}function ON(n,e,t){for(let r of t)r instanceof tm?(n.Vu.addReference(r.key,e),NH(n,r)):r instanceof nm?(se(EI,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||ok(n,r.key)):Te(19791,{wu:r})}function NH(n,e){let t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(se(EI,"New document in limbo: "+t),n.Eu.add(r),bI(n))}function bI(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new Ee(gt.fromString(e)),r=n.fu.next();n.Au.set(r,new Ww(t)),n.Ru=n.Ru.insert(t,r),QP(n.remoteStore,new ld(pi(uI(t.path)),r,"TargetPurposeLimboResolution",rI.ce))}}async function _d(n,e,t){let r=ke(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{s.push(r.pu(c,e,t).then(u=>{if((u||t)&&r.isPrimaryClient){let d=u?!u.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){i.push(u);let d=Sw.Es(c.targetId,u);o.push(d)}}))}),await Promise.all(s),r.Pu.J_(i),await(async function(c,u){let d=ke(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>J.forEach(u,g=>J.forEach(g.Ts,m=>d.persistence.referenceDelegate.addReference(f,g.targetId,m)).next(()=>J.forEach(g.Is,m=>d.persistence.referenceDelegate.removeReference(f,g.targetId,m)))))}catch(f){if(!Vc(f))throw f;se(fI,"Failed to update sequence numbers: "+f)}for(let f of u){let g=f.targetId;if(!f.fromCache){let m=d.vs.get(g),T=m.snapshotVersion,M=m.withLastLimboFreeSnapshotVersion(T);d.vs=d.vs.insert(g,M)}}})(r.localStore,o))}async function PH(n,e){let t=ke(n);if(!t.currentUser.isEqual(e)){se(EI,"User change. New user:",e.toKey());let r=await WP(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(c=>{c.reject(new X(H.CANCELLED,s))})}),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _d(t,r.Ns)}}function kH(n,e){let t=ke(n),r=t.Au.get(e);if(r&&r.hu)return $e().add(r.key);{let i=$e(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function sk(n){let e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AH.bind(null,e),e.Pu.J_=bH.bind(null,e.eventManager),e.Pu.yu=wH.bind(null,e.eventManager),e}function OH(n){let e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RH.bind(null,e),e}var wI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=yd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Z9(this.persistence,new Cw,t.initialUser,this.serializer)}Cu(t){return new qg(Iw.Vi,this.serializer)}Du(t){return new Aw}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),rm=class extends wI{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ot(this.persistence.referenceDelegate instanceof Wg,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new uw(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?pr.withCacheSize(this.cacheSizeBytes):pr.DEFAULT;return new qg(r=>Wg.Vi(r,t),this.serializer)}};var ak=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>kN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=PH.bind(null,this.syncEngine),await vH(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Hw})()}createDatastore(t){let r=yd(t.databaseInfo.databaseId),i=sH(t.databaseInfo);return aH(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new Uw(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>kN(this.syncEngine,r,0),(function(){return Qg.v()?new Qg:new Mw})())}createSyncEngine(t,r){return(function(o,s,a,c,u,d,f){let g=new Kw(o,s,a,c,u,d);return f&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=ke(r);se(la,"RemoteStore shutting down."),i.Ea.add(5),await vd(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var Yw=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):to("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Xo="FirestoreClient",Jw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=on.UNAUTHENTICATED,this.clientId=ra.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{se(Xo,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(se(Xo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=vI(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function xb(n,e){n.asyncQueue.verifyOperationInProgress(),se(Xo,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await WP(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function FN(n,e){n.asyncQueue.verifyOperationInProgress();let t=await FH(n);se(Xo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>RN(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>RN(e.remoteStore,i)),n._onlineComponents=e}async function FH(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se(Xo,"Using user provided OfflineComponentProvider");try{await xb(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Qo("Error using user provided cache. Falling back to memory cache: "+t),await xb(n,new wI)}}else se(Xo,"Using default OfflineComponentProvider"),await xb(n,new rm(void 0));return n._offlineComponents}async function ck(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(se(Xo,"Using user provided OnlineComponentProvider"),await FN(n,n._uninitializedComponentsProvider._online)):(se(Xo,"Using default OnlineComponentProvider"),await FN(n,new ak))),n._onlineComponents}function LH(n){return ck(n).then(e=>e.syncEngine)}async function VH(n){let e=await ck(n),t=e.eventManager;return t.onListen=IH.bind(null,e.syncEngine),t.onUnlisten=CH.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=SH.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=xH.bind(null,e.syncEngine),t}function lk(n,e,t={}){let r=new hi;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,c,u){let d=new Yw({next:g=>{d.Nu(),s.enqueueAndForget(()=>EH(o,f)),g.fromCache&&c.source==="server"?u.reject(new X(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new Gw(a,d,{includeMetadataChanges:!0,Ka:!0});return _H(o,f)})(await VH(n),n.asyncQueue,e,t,r)),r.promise}function uk(n,e){let t=new hi;return n.asyncQueue.enqueueAndForget(async()=>DH(await LH(n),e,t)),t.promise}function dk(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var UH="ComponentProvider",LN=new Map;function BH(n,e,t,r,i){return new Pb(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,dk(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var hk="firestore.googleapis.com",VN=!0,im=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hk,this.ssl=VN}else this.host=e.host,this.ssl=e.ssl??VN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Q9)throw new X(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dk(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Rc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new im({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new im(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Mg;switch(r.type){case"firstParty":return new Mb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=LN.get(t);r&&(se(UH,"Removing Datastore"),LN.delete(t),r.terminate())})(this),Promise.resolve()}};function fk(n,e,t,r={}){n=Oc(n,Rc);let i=$o(e),o=n._getSettings(),s=pe(V({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(gg(`https://${a}`),mg("Firestore",!0)),o.host!==hk&&o.host!==a&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=pe(V({},o),{host:a,ssl:i,emulatorOptions:r});if(!kr(c,s)&&(n._setSettings(c),r.mockUserToken)){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=on.MOCK_USER;else{u=MR(r.mockUserToken,n._app?.options.projectId);let f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new X(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new on(f)}n._authCredentials=new Db(new Ag(u,d))}}var Lr=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},pn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Fc(t,n._jsonSchema))return new n(e,r||null,new Ee(gt.fromString(t.referencePath)))}};pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:Lt("string",pn._jsonSchemaVersion),referencePath:Lt("string")};var Xi=class n extends Lr{constructor(e,t,r){super(e,t,uI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new Ee(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Vr(n,e,...t){if(n=rn(n),$N("collection","path",e),n instanceof Rc){let r=gt.fromString(e,...t);return iN(r),new Xi(n,null,r)}{if(!(n instanceof pn||n instanceof Xi))throw new X(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(gt.fromString(e,...t));return iN(r),new Xi(n.firestore,null,r)}}function II(n,e,...t){if(n=rn(n),arguments.length===1&&(e=ra.newId()),$N("doc","path",e),n instanceof Rc){let r=gt.fromString(e,...t);return rN(r),new pn(n,null,new Ee(r))}{if(!(n instanceof pn||n instanceof Xi))throw new X(H.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(gt.fromString(e,...t));return rN(r),new pn(n.firestore,n instanceof Xi?n.converter:null,new Ee(r))}}var UN="AsyncQueue",om=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Jg(this,"async_queue_retry"),this._c=()=>{let r=Cb();r&&se(UN,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=Cb();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Cb();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new hi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Vc(e))throw e;se(UN,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,to("INTERNAL UNHANDLED ERROR: ",BN(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Bw.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Te(47125,{Pc:BN(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function BN(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var da=class extends Rc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new om,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new om(e),this._firestoreClient=void 0,await e}}};function Ed(n,e){let t=typeof n=="object"?n:Eg(),r=typeof n=="string"?n:e||Vg,i=Wu(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=AR("firestore");o&&fk(i,...o)}return i}function mm(n){if(n._terminated)throw new X(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||jH(n),n._firestoreClient}function jH(n){let e=n._freezeSettings(),t=BH(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Jw(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}var mi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(gn.fromBase64String(e))}catch(t){throw new X(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fc(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};mi._jsonSchemaVersion="firestore/bytes/1.0",mi._jsonSchema={type:Lt("string",mi._jsonSchemaVersion),bytes:Lt("string")};var Nc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new X(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Pc=class{constructor(e){this._methodName=e}};var eo=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new X(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new X(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Fc(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};eo._jsonSchemaVersion="firestore/geoPoint/1.0",eo._jsonSchema={type:Lt("string",eo._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};var yi=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fc(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new X(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:Lt("string",yi._jsonSchemaVersion),vectorValues:Lt("object")};var HH=/^__.*__$/,Zw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,t,this.fieldTransforms):new ca(e,this.data,t,this.fieldTransforms)}};function pk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{dataSource:n})}}var Xw=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new n(V(V({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return sm(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(pk(this.dataSource)&&HH.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},eI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||yd(e)}createContext(e,t,r,i=!1){return new Xw({dataSource:e,methodName:t,targetDoc:r,path:Bn.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ym(n){let e=n._freezeSettings(),t=yd(n._databaseId);return new eI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gk(n,e,t,r,i,o={}){let s=n.createContext(o.merge||o.mergeFields?2:0,e,t,i);vk("Data must be an object, but it was:",s,r);let a=mk(r,s),c,u;if(o.merge)c=new di(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=Bc(e,f,t);if(!s.contains(g))throw new X(H.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);GH(d,g)||d.push(g)}c=new di(d),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new Zw(new gr(a),c,u)}var tI=class n extends Pc{_toFieldTransform(e){return new qb(e.path,new oa)}isEqual(e){return e instanceof n}};function SI(n,e,t,r=!1){return TI(t,n.createContext(r?4:3,e))}function TI(n,e){if(yk(n=rn(n)))return vk("Unsupported field value:",e,n),mk(n,e);if(n instanceof Pc)return(function(r,i){if(!pk(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=TI(a,i.childContextForArray(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=rn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return I9(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Vt.fromDate(r);return{timestampValue:Gg(i.serializer,o)}}if(r instanceof Vt){let o=new Vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gg(i.serializer,o)}}if(r instanceof eo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mi)return{bytesValue:LP(i.serializer,r._byteString)};if(r instanceof pn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:hI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof yi)return(function(s,a){let c=s instanceof yi?s.toArray():s;return{mapValue:{fields:{[oI]:{stringValue:sI},[Tc]:{arrayValue:{values:c.map(d=>{if(typeof d!="number")throw a.createError("VectorValues must only contain numeric values.");return dI(a.serializer,d)})}}}}}})(r,i);if(GP(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${pd(r)}`)})(n,e)}function mk(n,e){let t={};return aP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(n,(r,i)=>{let o=TI(i,e.childContextForField(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function yk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Vt||n instanceof eo||n instanceof mi||n instanceof pn||n instanceof Pc||n instanceof yi||GP(n))}function vk(n,e,t){if(!yk(t)||!zN(t)){let r=pd(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function Bc(n,e,t){if((e=rn(e))instanceof Nc)return e._internalPath;if(typeof e=="string")return _k(n,e);throw sm("Field path arguments must be of type string or ",n,!1,void 0,t)}var $H=new RegExp("[~\\*/\\[\\]]");function _k(n,e,t){if(e.search($H)>=0)throw sm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nc(...e.split("."))._internalPath}catch{throw sm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sm(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new X(H.INVALID_ARGUMENT,a+n+c)}function GH(n,e){return n.some(t=>t.isEqual(e))}var fd=class{convertValue(e,t="none"){switch(Yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ha(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Tc].arrayValue?.values?.map(r=>St(r.doubleValue));return new yi(t)}convertGeoPoint(e){return new eo(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=lm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rd(e));default:return null}}convertTimestamp(e){let t=no(e);return new Vt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=gt.fromString(e);ot($P(r),9688,{name:e});let i=new id(r.get(1),r.get(3)),o=new Ee(r.popFirst(5));return i.isEqual(t)||to(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};var am=class extends fd{constructor(e){super(),this.firestore=e}convertBytes(e){return new mi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}};function CI(){return new tI("serverTimestamp")}var Ek="@firebase/firestore",bk="4.10.0";var bd=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new xI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(Bc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},xI=class extends bd{data(){return super.data()}};function KH(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new X(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wd=class{},zc=class extends wd{};function es(n,e,...t){let r=[];e instanceof wd&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof DI).length,a=o.filter(c=>c instanceof vm).length;if(s>1||s>0&&a>0)throw new X(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var vm=class n extends zc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Tk(e._query,t),new Lr(e.firestore,e.converter,dm(e._query,t))}_parse(e){let t=ym(e.firestore);return(function(o,s,a,c,u,d,f){let g;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new X(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Ik(f,d);let T=[];for(let M of f)T.push(wk(c,o,M));g={arrayValue:{values:T}}}else g=wk(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Ik(f,d),g=SI(a,s,f,d==="in"||d==="not-in");return Ft.create(u,d,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function ts(n,e,t){let r=e,i=Bc("where",n);return vm._create(i,r,t)}var DI=class n extends wd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:mr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)Tk(s,c),s=dm(s,c)})(e._query,t),new Lr(e.firestore,e.converter,dm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var AI=class n extends zc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new X(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new X(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jo(o,s)})(e._query,this._field,this._direction);return new Lr(e.firestore,e.converter,wP(e._query,t))}};function lo(n,e="asc"){let t=e,r=Bc("orderBy",n);return AI._create(r,t)}var MI=class n extends zc{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Lr(e.firestore,e.converter,sd(e._query,this._limit,this._limitType))}};function pa(n){return qN("limit",n),MI._create("limit",n,"F")}var RI=class n extends zc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=QH(e,this.type,this._docOrFields,this._inclusive);return new Lr(e.firestore,e.converter,IP(e._query,t))}};function Sk(...n){return RI._create("startAfter",n,!1)}function QH(n,e,t,r){if(t[0]=rn(t[0]),t[0]instanceof bd)return(function(o,s,a,c,u){if(!c)throw new X(H.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of ta(o))if(f.field.isKeyField())d.push(md(s,c.key));else{let g=c.data.field(f.field);if(gd(g))throw new X(H.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let m=f.field.canonicalString();throw new X(H.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(g)}return new io(d,u)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=ym(n.firestore);return(function(s,a,c,u,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new X(H.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let T=0;T<d.length;T++){let M=d[T];if(g[T].field.isKeyField()){if(typeof M!="string")throw new X(H.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof M}`);if(!um(s)&&M.indexOf("/")!==-1)throw new X(H.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${M}' contains a slash.`);let L=s.path.child(gt.fromString(M));if(!Ee.isDocumentKey(L))throw new X(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);let k=new Ee(L);m.push(md(a,k))}else{let L=SI(c,u,M);m.push(L)}}return new io(m,f)})(n._query,n.firestore._databaseId,i,e,t,r)}}function wk(n,e,t){if(typeof(t=rn(t))=="string"){if(t==="")throw new X(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!um(e)&&t.indexOf("/")!==-1)throw new X(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(gt.fromString(t));if(!Ee.isDocumentKey(r))throw new X(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return md(n,new Ee(r))}if(t instanceof pn)return md(n,t._key);throw new X(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pd(t)}.`)}function Ik(n,e){if(!Array.isArray(n)||n.length===0)throw new X(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Tk(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new X(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function YH(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var jc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Hc=class n extends bd{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new $c(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Bc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Hc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hc._jsonSchema={type:Lt("string",Hc._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};var $c=class extends Hc{data(e={}){return super.data(e)}},Gc=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new jc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $c(this._firestore,this._userDataWriter,r.key,r,new jc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new X(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new $c(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new $c(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:JH(a.type),doc:c,oldIndex:u,newIndex:d}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ra.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function JH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:n})}}Gc._jsonSchemaVersion="firestore/querySnapshot/1.0",Gc._jsonSchema={type:Lt("string",Gc._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};function ga(n){n=Oc(n,Lr);let e=Oc(n.firestore,da),t=mm(e),r=new am(e);return KH(n._query),lk(t,n._query).then(i=>new Gc(e,r,n,i))}function _m(n,e){let t=Oc(n.firestore,da),r=II(n),i=YH(n.converter,e),o=ym(n.firestore);return ZH(t,[gk(o,"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ko.exists(!1))]).then(()=>r)}function ZH(n,e){let t=mm(n);return uk(t,e)}(function(e,t=!0){jN(Wo),qo(new fr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new da(new Rg(r.getProvider("auth-internal")),new Pg(s,r.getProvider("app-check-internal")),hP(s,i),s);return o=V({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Or(Ek,bk,e),Or(Ek,bk,"esm2020")})();function Bk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var jk=Bk,Hk=new Qi("auth","Firebase",Bk());var Tm=new Go("@firebase/auth");function XH(n,...e){Tm.logLevel<=He.WARN&&Tm.warn(`Auth (${Wo}): ${n}`,...e)}function bm(n,...e){Tm.logLevel<=He.ERROR&&Tm.error(`Auth (${Wo}): ${n}`,...e)}function Ei(n,...e){throw QI(n,...e)}function Ur(n,...e){return QI(n,...e)}function KI(n,e,t){let r=pe(V({},jk()),{[e]:t});return new Qi("auth","Firebase",r).create(e,{appName:n.name})}function ma(n){return KI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function e$(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ei(n,"argument-error"),KI(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function QI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Hk.create(n,...e)}function Ae(n,e,...t){if(!n)throw QI(e,...t)}function uo(n){let e="INTERNAL ASSERTION FAILED: "+n;throw bm(e),new Error(e)}function fo(n,e){n||uo(e)}function kI(){return typeof self<"u"&&self.location?.href||""}function t$(){return Ck()==="http:"||Ck()==="https:"}function Ck(){return typeof self<"u"&&self.location?.protocol||null}function n$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(t$()||PR()||"connection"in navigator)?navigator.onLine:!0}function r$(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ya=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,fo(t>e,"Short delay should be less than long delay!"),this.isMobile=RR()||kR()}get(){return n$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function YI(n,e){fo(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Cm=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;uo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;uo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;uo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var i$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var o$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],s$=new ya(3e4,6e4);function JI(n,e){return n.tenantId&&!e.tenantId?pe(V({},e),{tenantId:n.tenantId}):e}async function Wc(n,e,t,r,i={}){return $k(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=mc(V({key:n.config.apiKey},s)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let u=V({method:e,headers:c},o);return NR()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&$o(n.emulatorConfig.host)&&(u.credentials="include"),Cm.fetch()(await Gk(n,n.config.apiHost,t,a),u)})}async function $k(n,e,t){n._canInitEmulator=!1;let r=V(V({},i$),e);try{let i=new OI(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Em(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Em(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Em(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Em(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw KI(n,d,u);Ei(n,d)}}catch(i){if(i instanceof tr)throw i;Ei(n,"network-request-failed",{message:String(i)})}}async function a$(n,e,t,r,i={}){let o=await Wc(n,e,t,r,i);return"mfaPendingCredential"in o&&Ei(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function Gk(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?YI(n.config,i):`${n.config.apiScheme}://${i}`;return o$.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var OI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ur(this.auth,"network-request-failed")),s$.get())})}};function Em(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Ur(n,e,r);return i.customData._tokenResponse=t,i}async function c$(n,e){return Wc(n,"POST","/v1/accounts:delete",e)}async function xm(n,e){return Wc(n,"POST","/v1/accounts:lookup",e)}function Id(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zk(n,e=!1){let t=rn(n),r=await t.getIdToken(e),i=ZI(r);Ae(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Id(NI(i.auth_time)),issuedAtTime:Id(NI(i.iat)),expirationTime:Id(NI(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function NI(n){return Number(n)*1e3}function ZI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return bm("JWT malformed, contained fewer than 3 sections"),null;try{let i=fg(t);return i?JSON.parse(i):(bm("Failed to decode base64 JWT payload"),null)}catch(i){return bm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function xk(n){let e=ZI(n);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Td(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof tr&&l$(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function l$({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var FI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Cd=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Id(this.lastLoginAt),this.creationTime=Id(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Dm(n){let e=n.auth,t=await n.getIdToken(),r=await Td(n,xm(e,{idToken:t}));Ae(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?Wk(i.providerUserInfo):[],s=u$(n.providerData,o),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!s?.length,u=a?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Cd(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function qk(n){let e=rn(n);await Dm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function u$(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Wk(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Ia(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function d$(n,e){let t=await $k(n,{},async()=>{let r=mc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await Gk(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&$o(n.emulatorConfig.host)&&(c.credentials="include"),Cm.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function h$(n,e){return Wc(n,"POST","/v2/accounts:revokeToken",JI(n,e))}var Sd=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");let t=xk(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await d$(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Ae(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Ae(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Ae(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return uo("not implemented")}};function ns(n,e){Ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var rs=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=Ia(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Cd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await Td(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return zk(this,e)}reload(){return qk(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>V({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(pe(V({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Dm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(ma(this.auth));let e=await this.getIdToken();return await Td(this,c$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return pe(V({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>V({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:f,emailVerified:g,isAnonymous:m,providerData:T,stsTokenManager:M}=t;Ae(f&&M,e,"internal-error");let L=Sd.fromJSON(this.name,M);Ae(typeof f=="string",e,"internal-error"),ns(r,e.name),ns(i,e.name),Ae(typeof g=="boolean",e,"internal-error"),Ae(typeof m=="boolean",e,"internal-error"),ns(o,e.name),ns(s,e.name),ns(a,e.name),ns(c,e.name),ns(u,e.name),ns(d,e.name);let k=new n({uid:f,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:m,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:L,createdAt:u,lastLoginAt:d});return T&&Array.isArray(T)&&(k.providerData=T.map(Q=>V({},Q))),c&&(k._redirectEventId=c),k}static async _fromIdTokenResponse(e,t,r=!1){let i=new Sd;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Dm(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Ae(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?Wk(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Sd;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Cd(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c}};var Dk=new Map;function ho(n){fo(n instanceof Function,"Expected a class definition");let e=Dk.get(n);return e?(fo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Dk.set(n,e),e)}var f$=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),LI=f$;function wm(n,e,t){return`firebase:${n}:${e}:${t}`}var Am=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=wm(this.userKey,i.apiKey,o),this.fullPersistenceKey=wm("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await xm(this.auth,{idToken:e}).catch(()=>{});return t?rs._fromGetAccountInfoResponse(this.auth,t,e):null}return rs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(ho(LI),e,r);let i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),o=i[0]||ho(LI),s=wm(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=await u._get(s);if(d){let f;if(typeof d=="string"){let g=await xm(e,{idToken:d}).catch(()=>{});if(!g)break;f=await rs._fromGetAccountInfoResponse(e,g,d)}else f=rs._fromJSON(e,d);u!==o&&(a=f),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new n(o,e,r))}};function Ak(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Jk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Xk(e))return"Blackberry";if(eO(e))return"Webos";if(Qk(e))return"Safari";if((e.includes("chrome/")||Yk(e))&&!e.includes("edge/"))return"Chrome";if(Zk(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Kk(n=nn()){return/firefox\//i.test(n)}function Qk(n=nn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yk(n=nn()){return/crios\//i.test(n)}function Jk(n=nn()){return/iemobile/i.test(n)}function Zk(n=nn()){return/android/i.test(n)}function Xk(n=nn()){return/blackberry/i.test(n)}function eO(n=nn()){return/webos/i.test(n)}function XI(n=nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function p$(n=nn()){return XI(n)&&!!window.navigator?.standalone}function g$(){return OR()&&document.documentMode===10}function tO(n=nn()){return XI(n)||Zk(n)||eO(n)||Xk(n)||/windows phone/i.test(n)||Jk(n)}function nO(n,e=[]){let t;switch(n){case"Browser":t=Ak(nn());break;case"Worker":t=`${Ak(nn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wo}/${r}`}var VI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function m$(n,e={}){return Wc(n,"GET","/v2/passwordPolicy",JI(n,e))}var y$=6,UI=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??y$,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var BI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mm(this),this.idTokenSubscription=new Mm(this),this.beforeStateQueue=new VI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Hk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ho(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Am.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await xm(this,{idToken:e}),r=await rs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(nr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Dm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=r$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(ma(this));let t=e?rn(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(ma(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(ma(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ho(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await m$(this),t=new UI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await h$(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ho(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await Am.create(this,[ho(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&XH(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Vm(n){return rn(n)}var Mm=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=UR(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var eS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function v$(n){eS=n}function _$(n){return eS.loadJS(n)}function E$(){return eS.gapiScript}function rO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function iO(n,e){let t=Wu(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(kr(o,e??{}))return i;Ei(i,"already-initialized")}return t.initialize({options:e})}function b$(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ho);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function oO(n,e,t){let r=Vm(n);Ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=sO(e),{host:s,port:a}=w$(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ae(kr(u,r.config.emulator)&&kr(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,$o(s)?(gg(`${o}//${s}${c}`),mg("Auth",!0)):i||I$()}function sO(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function w$(n){let e=sO(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:Mk(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:Mk(s)}}}function Mk(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function I$(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var xd=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return uo("not implemented")}_getIdTokenResponse(e){return uo("not implemented")}_linkToIdToken(e,t){return uo("not implemented")}_getReauthenticationResolver(e){return uo("not implemented")}};async function qc(n,e){return a$(n,"POST","/v1/accounts:signInWithIdp",JI(n,e))}var S$="http://localhost",Rm=class n extends xd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ei("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let a=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=a,o=Ia(a,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return qc(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,qc(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,qc(e,t)}buildRequest(){let e={requestUri:S$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=mc(t)}return e}};var Dd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Nm=class extends Dd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var tS=(()=>{class n extends Nm{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Rm._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Ad=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let o=await rs._fromIdTokenResponse(e,r,i),s=Rk(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=Rk(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function Rk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var jI=class n extends tr{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function aO(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?jI._fromErrorAndOperation(n,o,e,r):o})}async function T$(n,e,t=!1){let r=await Td(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ad._forOperation(n,"link",r)}async function C$(n,e,t=!1){let{auth:r}=n;if(nr(r.app))return Promise.reject(ma(r));let i="reauthenticate";try{let o=await Td(n,aO(r,i,e,n),t);Ae(o.idToken,r,"internal-error");let s=ZI(o.idToken);Ae(s,r,"internal-error");let{sub:a}=s;return Ae(n.uid===a,r,"user-mismatch"),Ad._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ei(r,"user-mismatch"),o}}async function x$(n,e,t=!1){if(nr(n.app))return Promise.reject(ma(n));let r="signIn",i=await aO(n,r,e),o=await Ad._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}function cO(n,e,t,r){return rn(n).onIdTokenChanged(e,t,r)}function lO(n,e,t){return rn(n).beforeAuthStateChanged(e,t)}function nS(n,e,t,r){return rn(n).onAuthStateChanged(e,t,r)}function rS(n){return rn(n).signOut()}var Pm="__sak";var km=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pm,"1"),this.storage.removeItem(Pm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var D$=1e3,A$=10,M$=(()=>{class n extends km{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tO(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);g$()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,A$):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},D$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),uO=M$;var R$=(()=>{class n extends km{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),iS=R$;function N$(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var P$=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(async d=>d(r.origin,s)),u=await N$(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function oS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var HI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=oS("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function _i(){return window}function k$(n){_i().location.href=n}function dO(){return typeof _i().WorkerGlobalScope<"u"&&typeof _i().importScripts=="function"}async function O$(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F$(){return navigator?.serviceWorker?.controller||null}function L$(){return dO()?self:null}var hO="firebaseLocalStorageDb",V$=1,Om="firebaseLocalStorage",fO="fbase_key",va=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Um(n,e){return n.transaction([Om],e?"readwrite":"readonly").objectStore(Om)}function U$(){let n=indexedDB.deleteDatabase(hO);return new va(n).toPromise()}function $I(){let n=indexedDB.open(hO,V$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Om,{keyPath:fO})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(Om)?e(r):(r.close(),await U$(),e(await $I()))})})}async function Nk(n,e,t){let r=Um(n,!0).put({[fO]:e,value:t});return new va(r).toPromise()}async function B$(n,e){let t=Um(n,!1).get(e),r=await new va(t).toPromise();return r===void 0?null:r.value}function Pk(n,e){let t=Um(n,!0).delete(e);return new va(t).toPromise()}var j$=800,H$=3,$$=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $I(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>H$)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=P$._getInstance(L$()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await O$(),!this.activeServiceWorker)return;this.sender=new HI(this.activeServiceWorker);let t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||F$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await $I();return await Nk(t,Pm,"1"),await Pk(t,Pm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>Nk(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>B$(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Pk(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(o=>{let s=Um(o,!1).getAll();return new va(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),j$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),pO=$$;var jle=rO("rcb"),Hle=new ya(3e4,6e4);function gO(n,e){return e?ho(e):(Ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Md=class extends xd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qc(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function G$(n){return x$(n.auth,new Md(n),n.bypassAuthState)}function z$(n){let{auth:e,user:t}=n;return Ae(t,e,"internal-error"),C$(t,new Md(n),n.bypassAuthState)}async function q$(n){let{auth:e,user:t}=n;return Ae(t,e,"internal-error"),T$(t,new Md(n),n.bypassAuthState)}var Fm=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return G$;case"linkViaPopup":case"linkViaRedirect":return q$;case"reauthViaPopup":case"reauthViaRedirect":return z$;default:Ei(this.auth,"internal-error")}}resolve(e){fo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var W$=new ya(2e3,1e4);async function sS(n,e,t){if(nr(n.app))return Promise.reject(Ur(n,"operation-not-supported-in-this-environment"));let r=Vm(n);e$(n,e,Dd);let i=gO(r,t);return new K$(r,"signInViaPopup",e,i).executeNotNull()}var K$=(()=>{class n extends Fm{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return Ae(t,this.auth,"internal-error"),t}async onExecution(){fo(this.filter.length===1,"Popup operations only handle one event");let t=oS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,W$.get())};t()}}n.currentPopupAction=null;return n})(),Q$="pendingRedirect",Im=new Map,GI=class extends Fm{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Im.get(this.auth._key());if(!e){try{let r=await Y$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Im.set(this.auth._key(),e)}return this.bypassAuthState||Im.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Y$(n,e){let t=X$(e),r=Z$(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function J$(n,e){Im.set(n._key(),e)}function Z$(n){return ho(n._redirectPersistence)}function X$(n){return wm(Q$,n.config.apiKey,n.name)}async function eG(n,e,t=!1){if(nr(n.app))return Promise.reject(ma(n));let r=Vm(n),i=gO(r,e),s=await new GI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var tG=600*1e3,zI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nG(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!mO(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ur(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tG&&this.cachedEventUids.clear(),this.cachedEventUids.has(kk(e))}saveEventToCache(e){this.cachedEventUids.add(kk(e)),this.lastProcessedEventTime=Date.now()}};function kk(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function mO({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function nG(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mO(n);default:return!1}}async function rG(n,e={}){return Wc(n,"GET","/v1/projects",e)}var iG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oG=/^https?/;async function sG(n){if(n.config.emulator)return;let{authorizedDomains:e}=await rG(n);for(let t of e)try{if(aG(t))return}catch{}Ei(n,"unauthorized-domain")}function aG(n){let e=kI(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!oG.test(t))return!1;if(iG.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var cG=new ya(3e4,6e4);function Ok(){let n=_i().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function lG(n){return new Promise((e,t)=>{function r(){Ok(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ok(),t(Ur(n,"network-request-failed"))},timeout:cG.get()})}if(_i().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_i().gapi?.load)r();else{let i=rO("iframefcb");return _i()[i]=()=>{gapi.load?r():t(Ur(n,"network-request-failed"))},_$(`${E$()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw Sm=null,e})}var Sm=null;function uG(n){return Sm=Sm||lG(n),Sm}var dG=new ya(5e3,15e3),hG="__/auth/iframe",fG="emulator/auth/iframe",pG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mG(n){let e=n.config;Ae(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?YI(e,fG):`https://${n.config.authDomain}/${hG}`,r={apiKey:e.apiKey,appName:n.name,v:Wo},i=gG.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${mc(r).slice(1)}`}async function yG(n){let e=await uG(n),t=_i().gapi;return Ae(t,n,"internal-error"),e.open({where:document.body,url:mG(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pG,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=Ur(n,"network-request-failed"),a=_i().setTimeout(()=>{o(s)},dG.get());function c(){_i().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})}))}var vG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_G=500,EG=600,bG="_blank",wG="http://localhost",Lm=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function IG(n,e,t,r=_G,i=EG){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=pe(V({},vG),{width:r.toString(),height:i.toString(),top:o,left:s}),u=nn().toLowerCase();t&&(a=Yk(u)?bG:t),Kk(u)&&(e=e||wG,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[m,T])=>`${g}${m}=${T},`,"");if(p$(u)&&a!=="_self")return SG(e||"",a),new Lm(null);let f=window.open(e||"",a,d);Ae(f,n,"popup-blocked");try{f.focus()}catch{}return new Lm(f)}function SG(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var TG="__/auth/handler",CG="emulator/auth/handler",xG=encodeURIComponent("fac");async function Fk(n,e,t,r,i,o){Ae(n.config.authDomain,n,"auth-domain-config-required"),Ae(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Wo,eventId:i};if(e instanceof Dd){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",VR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(o||{}))s[d]=f}if(e instanceof Nm){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=await n._getAppCheckToken(),u=c?`#${xG}=${encodeURIComponent(c)}`:"";return`${DG(n)}?${mc(a).slice(1)}${u}`}function DG({config:n}){return n.emulator?YI(n,CG):`https://${n.authDomain}/${TG}`}var PI="webStorageSupport",qI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iS,this._completeRedirectFn=eG,this._overrideRedirectResult=J$}async _openPopup(e,t,r,i){fo(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await Fk(e,t,r,kI(),i);return IG(e,o,oS())}async _openRedirect(e,t,r,i){await this._originValidation(e);let o=await Fk(e,t,r,kI(),i);return k$(o),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(fo(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await yG(e),r=new zI(e);return t.register("authEvent",i=>(Ae(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(PI,{type:PI},i=>{let o=i?.[0]?.[PI];o!==void 0&&t(!!o),Ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sG(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tO()||Qk()||XI()}},yO=qI;var Lk="@firebase/auth",Vk="1.12.0";var WI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function AG(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MG(n){qo(new fr("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Ae(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nO(n)},u=new BI(r,i,o,c);return b$(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),qo(new fr("auth-internal",e=>{let t=Vm(e.getProvider("auth").getImmediate());return(r=>new WI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Or(Lk,Vk,AG(n)),Or(Lk,Vk,"esm2020")}var RG=300,NG=tb("authIdTokenMaxAge")||RG,Uk=null,PG=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>NG)return;let i=t?.token;Uk!==i&&(Uk=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Rd(n=Eg()){let e=Wu(n,"auth");if(e.isInitialized())return e.getImmediate();let t=iO(n,{popupRedirectResolver:yO,persistence:[pO,uO,iS]}),r=tb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=PG(o.toString());lO(t,s,()=>s(t.currentUser)),cO(t,a=>s(a))}}let i=XE("auth");return i&&oO(t,`http://${i}`),t}function kG(){return document.getElementsByTagName("head")?.[0]??document}v$({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Ur("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",kG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MG("Browser");var Bm={apiKey:"AIzaSyAPqKyCi-hNRpgCq-Bb4N9GLXuVMVb5gRE",authDomain:"shape-tactics.firebaseapp.com",projectId:"shape-tactics",storageBucket:"shape-tactics.firebasestorage.app",messagingSenderId:"730983908831",appId:"1:730983908831:web:471c5b5ba460ca8a56306a",measurementId:"G-HTR0KV73C8"};var bi=class n{constructor(e){this.platformId=e;let t=Ku(Bm);try{this.db=Ed(t)}catch(r){console.warn("Firestore init failed (likely SSR)",r)}if(nc(this.platformId))try{this.auth=Rd(t),nS(this.auth,r=>{this.user$.set(r)})}catch(r){console.warn("Auth init failed",r)}}db=null;auth=null;user$=Y(null);async loginWithGoogle(){if(!(!this.auth||!nc(this.platformId)))try{let e=new tS;await sS(this.auth,e)}catch(e){console.error("Login failed",e)}}async logout(){this.auth&&await rS(this.auth)}async saveHighScore(e){if(this.db)try{await _m(Vr(this.db,"highscores"),e)}catch(t){console.error("Error adding document: ",t)}}async getTopScores(e,t,r){if(!this.db)return[];try{let i=es(Vr(this.db,"highscores"),ts("difficulty","==",t),ts("mapSize","==",r),lo("victory","desc"),lo("turnsPlayed","asc"),pa(e));return(await ga(i)).docs.map(s=>s.data())}catch(i){return console.error("Error fetching scores: ",i),[]}}async getUserScores(e){if(!this.db)return[];try{let t=es(Vr(this.db,"highscores"),ts("userId","==",e),ts("victory","==",!0),lo("turnsPlayed","asc"));return(await ga(t)).docs.map(i=>i.data())}catch(t){return console.error("Error fetching user scores: ",t),[]}}static \u0275fac=function(t){return new(t||n)(we(Bi))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var Kc=class n{platformId=G(Bi);nameSignal=Y("Player");constructor(){if(nc(this.platformId))try{let e=localStorage.getItem("playerName");e&&typeof e=="string"&&e.trim().length>0&&this.nameSignal.set(this.normalize(e))}catch{}}name(){return this.nameSignal()}setName(e){let t=this.normalize(e);if(this.nameSignal.set(t),nc(this.platformId))try{localStorage.setItem("playerName",t)}catch{}}normalize(e){let r=(e??"").toString().trim().slice(0,24);return r.length>0?r:"Player"}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var wi=class n{constructor(e,t,r,i,o,s,a,c,u){this.combat=e;this.build=t;this.log=r;this.settings=i;this.map=o;this.economy=s;this.aiStrategy=a;this.firebase=c;this.playerName=u;this.loadHighScores(),this.resetGame()}get gridSize(){return this.settings.mapSize()}unitsSignal=Y([]);turnSignal=Y(1);selectedUnitIdSignal=Y(null);gameStatusSignal=Y("playing");lastMergedUnitIdSignal=Y(null);lastRemainderUnitIdSignal=Y(null);resourcesSignal=Y({wood:0});forestsSignal=Y([]);baseHealthSignal=Y({player:100,ai:100});reservePointsSignal=Y({player:0,ai:0});deployTargetsSignal=Y([]);baseDeployActiveSignal=Y(!1);wallsSignal=Y([]);playerVisibilitySignal=Y(new Set);aiVisibilitySignal=Y(new Set);playerExploredSignal=Y(new Set);aiExploredSignal=Y(new Set);unitMoveHistorySignal=Y(new Map);unitStutterBanSignal=Y(new Map);lastAiMovedUnitIdSignal=Y(null);aiConsecMovesSignal=Y(0);buildModeSignal=Y(!1);fogDebugDisabledSignal=Y(!1);wallBuiltThisTurnSignal=Y(!1);rulesOpenSignal=Y(!1);movedThisTurnSignal=Y(new Set);aiWoodSignal=Y(0);logsOpenSignal=Y(!1);settingsOpenSignal=Y(!1);activeSideSignal=Y("ai");lastArrivedUnitIdSignal=Y(null);attackerNudgeSignal=Y(null);shakenUnitIdSignal=Y(null);shakenWallIdSignal=Y(null);pulseUnitIdSignal=Y(null);screenShakeSignal=Y(!1);endOverlaySignal=Y(!1);endReasonSignal=Y(null);combatOnlySignal=Y(!0);forestMonopolySignal=Y({player:0,ai:0});hoveredUnitIdSignal=Y(null);autoDeployEnabledSignal=Y(!1);highScoresOpenSignal=Y(!1);leaderboardOpenSignal=Y(!1);namePromptOpenSignal=Y(!1);pendingScoreSignal=Y(null);supportOpenSignal=Y(!1);highScoresSignal=Y({});playerConvertedThisTurnSignal=Y(!1);unitQuadrantBiasSignal=Y(new Map);aiUnitTimeNearBaseSignal=Y(new Map);aiBatchingActions=!1;isAiThinking=!1;aggressionModeSignal=Y(!1);wallCooldownSignal=Y(new Map);aiQueuedUnitIdSignal=Y(null);aiMoodSignal=Y("none");rageCaptureCounterSignal=Y(0);anchoredGatherersSignal=Y(new Set);totalWarModeSignal=Y(!1);aiInvalidActionCountSignal=Y(0);aiLastRejectedActionKeySignal=Y(null);units=this.unitsSignal.asReadonly();turn=this.turnSignal.asReadonly();selectedUnitId=this.selectedUnitIdSignal.asReadonly();gameStatus=this.gameStatusSignal.asReadonly();lastMergedUnitId=this.lastMergedUnitIdSignal.asReadonly();lastRemainderUnitId=this.lastRemainderUnitIdSignal.asReadonly();resources=this.resourcesSignal.asReadonly();forests=this.forestsSignal.asReadonly();baseHealth=this.baseHealthSignal.asReadonly();reservePoints=this.reservePointsSignal.asReadonly();deployTargets=this.deployTargetsSignal.asReadonly();baseDeployActive=this.baseDeployActiveSignal.asReadonly();walls=this.wallsSignal.asReadonly();playerVisibility=this.playerVisibilitySignal.asReadonly();aiVisibility=this.aiVisibilitySignal.asReadonly();playerExplored=this.playerExploredSignal.asReadonly();aiExplored=this.aiExploredSignal.asReadonly();buildMode=this.buildModeSignal.asReadonly();fogDebugDisabled=this.fogDebugDisabledSignal.asReadonly();wallBuiltThisTurn=this.wallBuiltThisTurnSignal.asReadonly();rulesOpen=this.rulesOpenSignal.asReadonly();lastArrivedUnitId=this.lastArrivedUnitIdSignal.asReadonly();pulseUnitId=this.pulseUnitIdSignal.asReadonly();aiUnitTimeNearBase=this.aiUnitTimeNearBaseSignal.asReadonly();aggressionMode(){return this.aggressionModeSignal()}totalWarMode(){return this.totalWarModeSignal()}isAnchoredGatherer(e){return this.anchoredGatherersSignal().has(e)}anchorGatherer(e){let t=new Set(this.anchoredGatherersSignal());t.add(e),this.anchoredGatherersSignal.set(t)}unanchorGatherer(e){let t=new Set(this.anchoredGatherersSignal());t.delete(e),this.anchoredGatherersSignal.set(t)}queuedUnitId(){return this.aiQueuedUnitIdSignal()}currentMood(){return this.aiMoodSignal()}isAngry(){return this.aiMoodSignal()==="angry"}isRage(){return this.aiMoodSignal()==="rage"}selectedUnit=Mr(()=>this.unitsSignal().find(e=>e.id===this.selectedUnitIdSignal())||null);validMoves=Mr(()=>{let e=this.selectedUnit();return e?e.hasActed?[]:this.calculateValidMoves(e):[]});get gridRows(){return Array.from({length:this.gridSize},(e,t)=>t)}get gridCols(){return Array.from({length:this.gridSize},(e,t)=>t)}get tileSizePx(){let e=this.gridSize;return e<=10?64:e<=20?48:32}get tileMinSizePx(){let e=this.gridSize;return e<=10?64:e<=20?40:32}get wallThicknessPx(){let e=this.gridSize;return e<=10?6:e<=20?4:2}get iconSizePx(){let e=this.gridSize;return e<=10?16:e<=20?12:8}get tileUnitSizePx(){return Math.round(this.tileSizePx*.75)}getForestControl(){let e=this.forestsSignal().length,t=this.unitsSignal().filter(i=>i.owner==="player"&&this.isForest(i.position.x,i.position.y)).length,r=this.unitsSignal().filter(i=>i.owner==="ai"&&this.isForest(i.position.x,i.position.y)).length;return{total:e,player:t,ai:r}}resetGame(){let e=this.settings.difficulty();this.unitsSignal.set([]),this.wallCooldownSignal.set(new Map),this.turnSignal.set(1),this.activeSideSignal.set("ai"),this.selectedUnitIdSignal.set(null),this.gameStatusSignal.set("playing"),this.endOverlaySignal.set(!1),this.endReasonSignal.set(null),this.forestMonopolySignal.set({player:0,ai:0}),this.lastMergedUnitIdSignal.set(null),this.lastRemainderUnitIdSignal.set(null),this.resourcesSignal.set({wood:0}),this.baseHealthSignal.set({player:100,ai:100}),e==="baby"?this.reservePointsSignal.set({player:60,ai:20}):e==="normal"?this.reservePointsSignal.set({player:40,ai:60}):e==="hard"?this.reservePointsSignal.set({player:40,ai:80}):this.reservePointsSignal.set({player:30,ai:100}),this.deployTargetsSignal.set([]),this.forestsSignal.set(this.map.generateForests(this.gridSize,this.getBasePosition("player"),this.getBasePosition("ai")));let t=new Set(this.forestsSignal().map(r=>`${r.x},${r.y}`));this.playerExploredSignal.set(new Set(t)),this.aiExploredSignal.set(new Set(t)),this.wallsSignal.set([]),this.placeNeutralWalls(),this.baseDeployActiveSignal.set(!1),this.buildModeSignal.set(!1),this.fogDebugDisabledSignal.set(!1),this.wallBuiltThisTurnSignal.set(!1),this.spawnStarterArmy("player"),this.spawnStarterArmy("ai"),this.recomputeVisibility(),this.startSideTurn(this.activeSideSignal()),setTimeout(()=>this.aiTurn(),10)}selectUnit(e){if(this.gameStatus()!=="playing")return;if(!e){this.selectedUnitIdSignal.set(null);return}let t=this.unitsSignal().find(r=>r.id===e);t&&t.owner==="player"&&this.selectedUnitIdSignal.set(e)}moveSelectedUnit(e){if(this.gameStatus()!=="playing")return;let t=this.selectedUnit();!t||t.hasActed||!this.validMoves().some(i=>i.x===e.x&&i.y===e.y)||this.executeMove(t,e)}executeMove(e,t){if(e.hasActed)return;let r=!1,i=!1,o=null;if(this.unitsSignal.update(a=>{let c=[...a],u=c.findIndex(q=>q.id===e.id);if(u===-1)return a;let d=V({},c[u]),f={x:d.position.x,y:d.position.y},g=t.x-f.x,m=t.y-f.y,T=Math.sign(g),M=Math.sign(m),L=this.combat.checkWallAlongPath(f,t,d.owner,(q,ce,Ie,ie)=>this.getWallBetween(q,ce,Ie,ie));if(L.hitOwn)return c;if(L.hitEnemy){let q=L.lastFrom,ce=this.getWallBetween(q.x,q.y,t.x,t.y),Ie=ce.owner==="neutral"?100:this.combat.getWallHitPercent(d.tier);return this.wallsSignal.update(ie=>ie.map(x=>x.id===ce.id?pe(V({},x),{health:Math.max(0,x.health-Ie)}):x).filter(x=>(x.health??x.hitsRemaining??0)>0)),this.shakenWallIdSignal.set(ce.id),setTimeout(()=>this.shakenWallIdSignal.set(null),200),this.appendLog(`[Turn ${this.turnSignal()}] ${d.owner==="player"?"Player":"AI"} auto-hit wall between (${q.x},${q.y})-(${t.x},${t.y}) for ${Ie}% damage.`),c}let k=this.getBasePosition(d.owner==="player"?"ai":"player");if(t.x===k.x&&t.y===k.y)return this.baseHealthSignal.update(q=>{let ce=d.owner==="player"?"ai":"player",Ie=V({},q);return Ie[ce]=Math.max(0,Ie[ce]-this.calculatePower(d)),Ie}),c.splice(u,1),c;let Q=c.findIndex(q=>q.position.x===t.x&&q.position.y===t.y&&q.id!==d.id);if(Q!==-1){let q=c[Q],ce={x:t.x-T,y:t.y-M};if(this.inBounds(ce.x,ce.y)){if(T!==0&&M!==0){if(this.combat.isDiagonalBlocked(ce,t,(Ie,ie,x,I)=>this.getWallBetween(Ie,ie,x,I)))return r=!1,c}else if(this.getWallBetween(ce.x,ce.y,t.x,t.y))return r=!1,c}if(q.owner===d.owner)if(this.shakenUnitIdSignal.set(d.id),setTimeout(()=>this.shakenUnitIdSignal.set(null),180),q.tier===d.tier){let Ie=q.tier,ie=this.calculateTotalPoints(d)+this.calculateTotalPoints(q),x={1:[1,2,3,4],2:[5,10,15,20],3:[25,50,75,100],4:[125,250,375,500]},I=x[Ie][3];if(ie<=I){q.points=ie;let C=this.calculateTierAndLevel(q.points);q.tier=C.tier,q.level=C.level,c.splice(u,1)}else{let C=Math.min(4,Ie+1),D=x[C][0];q.points=D;let A=this.calculateTierAndLevel(q.points);q.tier=A.tier,q.level=A.level;let R=ie-D;if(R>0){d.points=R;let S=this.calculateTierAndLevel(d.points);d.tier=S.tier,d.level=S.level,c[u]=d,o=d.id}else c.splice(u,1)}i=!0}else return c;else{(d.owner==="player"||this.gridSize<=20)&&(this.attackerNudgeSignal.set({id:d.id,dx:T*8,dy:M*8}),setTimeout(()=>this.attackerNudgeSignal.set(null),150)),this.shakenUnitIdSignal.set(q.id),setTimeout(()=>this.shakenUnitIdSignal.set(null),200);let Ie=this.calculateTotalPoints(d),ie=this.getAttackLuckModifier(d),x=this.calculateTotalPoints(q),I=this.combat.getDefenseBonus(q,c),C=Math.max(0,Ie+ie.delta),D=x+I.bonus,A=[...I.tags,ie.tag??""].filter(Boolean).join(", ")||"None",R=C-D,S=`[Turn ${this.turnSignal()}] ${d.owner==="player"?"Player":"AI"} T${d.tier}(L${d.level}) attacked ${q.owner==="player"?"Player":"AI"} T${q.tier}(L${q.level}). Power: ${Ie} vs ${x}. Modifiers: ${A}. Final: (${Ie}${ie.delta!==0?ie.delta>0?`+${ie.delta}`:`${ie.delta}`:""}${I.bonus>0?` - ${I.bonus}`:""}) - ${x} = ${R}.`;if(this.log.addCombat(d.owner,S,!!ie.isCrit),C<D&&this.queueCombatText("WEAK!",t),C>D){let Tt=C-D,{tier:Qt,level:be}=this.calculateTierAndLevel(Tt);d.points=Tt,d.tier=Qt,d.level=be,c.splice(Q,1),ie.tag&&this.queueCombatText(ie.tag.startsWith("CRIT")?"CRIT!":"MISS!",t)}else if(C<D){let Tt=D-C,{tier:Qt,level:be}=this.calculateTierAndLevel(Tt),jn=pe(V({},q),{points:Tt,tier:Qt,level:be});return c[Q]=jn,c.splice(u,1),c}else{if(Math.random()<.5)return this.queueCombatText("DRAW",t),this.log.addCombat(d.owner,`[Turn ${this.turnSignal()}] Result: DRAW - Both units destroyed.`,!1),c.filter(Qt=>Qt.id!==d.id&&Qt.id!==q.id);{let Qt=Math.random()<.5;if(this.queueCombatText("LUCKY! (x1.25)",t),Qt){let be=this.getPointsForTierLevel(d.tier,1);d.points=be;let jn=this.calculateTierAndLevel(be);d.tier=jn.tier,d.level=jn.level,c.splice(Q,1),this.pulseUnitIdSignal.set(d.id),setTimeout(()=>this.pulseUnitIdSignal.set(null),400),this.log.addCombat(d.owner,`[Turn ${this.turnSignal()}] Result: LUCKY (x1.25) - Attacker survived!`,!1)}else{let be=this.getPointsForTierLevel(q.tier,1),jn=pe(V({},q),{points:be}),Ii=this.calculateTierAndLevel(be);return jn.tier=Ii.tier,jn.level=Ii.level,c[Q]=jn,c.splice(u,1),this.pulseUnitIdSignal.set(jn.id),setTimeout(()=>this.pulseUnitIdSignal.set(null),400),this.log.addCombat(d.owner,`[Turn ${this.turnSignal()}] Result: LUCKY (x1.25) - Defender survived!`,!1),this.queueCombatText("LUCKY DEFENSE!",t),c}}}}}if(c.find(q=>q.id===d.id)&&o!==d.id){d.position=t,d.turnsStationary=0,d.hasActed=!0;let q=c.findIndex(D=>D.id===d.id);q!==-1&&(c[q]=d),d.owner==="ai"&&d.tier<3&&this.isForest(t.x,t.y)&&(this.aiStrategy.setGoal(d.id,{x:t.x,y:t.y}),d.tier<=2&&this.anchorGatherer(d.id));let ce=new Set(this.movedThisTurnSignal());ce.add(d.id),this.movedThisTurnSignal.set(ce),this.lastArrivedUnitIdSignal.set(d.id),setTimeout(()=>this.lastArrivedUnitIdSignal.set(null),250);let Ie=new Map(this.unitMoveHistorySignal()),ie=Ie.get(d.id)??[],x={x:f.x,y:f.y},I={x:t.x,y:t.y},C=[...ie,x,I].slice(-4);Ie.set(d.id,C),this.unitMoveHistorySignal.set(Ie)}return c}),i){let a=this.getUnitAt(t.x,t.y);a&&(this.lastMergedUnitIdSignal.set(a.id),setTimeout(()=>this.lastMergedUnitIdSignal.set(null),300)),o&&(this.lastRemainderUnitIdSignal.set(o),setTimeout(()=>this.lastRemainderUnitIdSignal.set(null),300))}if(this.checkBaseDefeat(),this.gameStatus()==="playing"&&e.owner==="ai"){this.lastAiMovedUnitIdSignal()===e.id?this.aiConsecMovesSignal.update(f=>f+1):(this.lastAiMovedUnitIdSignal.set(e.id),this.aiConsecMovesSignal.set(1));let u=new Map(this.unitMoveHistorySignal()).get(e.id)??[];if(u.length>=4&&u[0].x===u[2].x&&u[0].y===u[2].y&&u[1].x===u[3].x&&u[1].y===u[3].y&&(u[0].x!==u[1].x||u[0].y!==u[1].y)){let f=new Map(this.unitStutterBanSignal()),g=new Set([`${u[0].x},${u[0].y}`,`${u[1].x},${u[1].y}`]);f.set(e.id,{tiles:g,until:this.turnSignal()+5}),this.unitStutterBanSignal.set(f);let m={x:Math.floor(this.gridSize/2),y:Math.floor(this.gridSize/2)},M=(this.getQuadrant(e.position,m)+2)%4,L=new Map(this.unitQuadrantBiasSignal());L.set(e.id,{quadrant:M,until:this.turnSignal()+5}),this.unitQuadrantBiasSignal.set(L)}}let s=this.selectedUnitIdSignal();s&&!this.unitsSignal().some(a=>a.id===s)&&this.selectedUnitIdSignal.set(null),this.recomputeVisibility()}calculateTotalPoints(e){return this.combat.calculateTotalPoints(e)}calculateTierAndLevel(e){return this.combat.calculateTierAndLevel(e)}getPointsForTierLevel(e,t){return this.combat.getPointsForTierLevel(e,t)}inBounds(e,t){return e>=0&&e<this.gridSize&&t>=0&&t<this.gridSize}recomputeVisibility(){let e=this.map.computeVisibility(this.gridSize,this.unitsSignal(),this.getBasePosition("player"),this.getBasePosition("ai"),this.fogDebugDisabledSignal());this.playerVisibilitySignal.set(e.player),this.aiVisibilitySignal.set(e.ai),this.playerExploredSignal.update(t=>this.map.mergeExplored(t,e.player)),this.aiExploredSignal.update(t=>this.map.mergeExplored(t,e.ai))}isVisibleToPlayer(e,t){return this.fogDebugDisabledSignal()?!0:this.playerVisibilitySignal().has(`${e},${t}`)}isVisibleToAi(e,t){return this.fogDebugDisabledSignal()?!0:this.aiVisibilitySignal().has(`${e},${t}`)}isExploredByPlayer(e,t){return this.playerExploredSignal().has(`${e},${t}`)}isExploredByAi(e,t){return this.aiExploredSignal().has(`${e},${t}`)}calculatePower(e){return this.calculateTotalPoints(e)}checkBaseDefeat(){let e=this.baseHealthSignal();if(e.ai<=0){this.gameStatusSignal.set("player wins"),this.screenShakeSignal.set(!0),setTimeout(()=>{this.screenShakeSignal.set(!1),this.endOverlaySignal.set(!0)},1e3);let t=this.getBasePosition("ai");this.queueCombatText("\u{1F4A5}",t),this.recordHighScore("player wins","destroy")}else if(e.player<=0){this.gameStatusSignal.set("jaerbi wins"),this.screenShakeSignal.set(!0),setTimeout(()=>{this.screenShakeSignal.set(!1),this.endOverlaySignal.set(!0)},1e3);let t=this.getBasePosition("player");this.queueCombatText("\u{1F4A5}",t),this.recordHighScore("jaerbi wins","destroy")}}getDefenseBonus(e){return this.combat.getDefenseBonus(e,this.unitsSignal()).bonus}combatTextsSignal=Y([]);combatTexts=this.combatTextsSignal.asReadonly();defenseBonus(e){return this.getDefenseBonus(e)}hasDefenseBonus(e){return this.getDefenseBonus(e)>0}getNudgeFor(e){let t=this.attackerNudgeSignal();return t&&t.id===e?{dx:t.dx,dy:t.dy}:null}isUnitShaking(e){return this.shakenUnitIdSignal()===e}isWallShaking(e){return this.shakenWallIdSignal()===e}screenShake(){return this.screenShakeSignal()}shouldShowEndOverlay(){return this.endOverlaySignal()}endReason(){return this.endReasonSignal()}highScoresOpen(){return this.highScoresOpenSignal()}supportOpen(){return this.supportOpenSignal()}toggleHighScores(){this.highScoresOpenSignal.update(e=>!e)}closeHighScores(){this.highScoresOpenSignal.set(!1)}toggleLeaderboard(){this.leaderboardOpenSignal.update(e=>!e)}closeLeaderboard(){this.leaderboardOpenSignal.set(!1)}toggleSupport(){this.supportOpenSignal.update(e=>!e)}closeSupport(){this.supportOpenSignal.set(!1)}copySupportLink(e){try{typeof navigator<"u"&&navigator.clipboard&&navigator.clipboard.writeText&&navigator.clipboard.writeText(e)}catch{}}getHighScoresForCurrentCombo(){let e=`${this.settings.difficulty()}|${this.settings.mapSize()}`;return this.highScoresSignal()[e]??{wins:[],losses:[]}}isLuckyText(e){return e.startsWith("LUCKY")}isDrawText(e){return e==="DRAW"}toggleCombatOnly(){this.combatOnlySignal.update(e=>!e)}combatOnly(){return this.combatOnlySignal()}leaderboardOpen(){return this.leaderboardOpenSignal()}isNamePromptOpen(){return this.namePromptOpenSignal()}getPlayerName(){let e=this.firebase.user$();return e?.displayName?e.displayName:this.playerName.name()}confirmAndSaveScore(e){this.playerName.setName(e);let t=this.pendingScoreSignal();if(t){let r=this.firebase.user$(),i=pe(V({},t),{playerName:this.playerName.name(),userId:r?.uid,userPhoto:r?.photoURL??void 0});this.firebase.saveHighScore(i),this.pendingScoreSignal.set(null),this.namePromptOpenSignal.set(!1)}}logsFiltered(){return this.log.logs().filter(e=>!this.combatOnlySignal()||e.type==="combat")}aiWood(){return this.aiWoodSignal()}monopolyCounter(){return this.forestMonopolySignal()}monopolyTurnsLeft(){let e=this.forestsSignal().length;if(e===0)return 0;let t=this.unitsSignal().filter(s=>s.owner==="player"&&this.isForest(s.position.x,s.position.y)).length,r=this.unitsSignal().filter(s=>s.owner==="ai"&&this.isForest(s.position.x,s.position.y)).length,i=t/e===1,o=r/e===1;return i?Math.max(0,10-this.forestMonopolySignal().player):o?Math.max(0,10-this.forestMonopolySignal().ai):0}getLuckDeltaForTier(e){return{1:1,2:2,3:4,4:8}[e]??0}setHoveredUnit(e){this.hoveredUnitIdSignal.set(e)}getHoverInfo(e){let t=this.unitsSignal().find(s=>s.id===e);if(!t)return null;let r=this.calculateTotalPoints(t),i=this.getLuckDeltaForTier(t.tier),o=this.getDefenseBonus(t);return{atkMin:Math.max(0,r-i),atkMax:r+i,hp:t.points,support:o}}shouldRenderWall(e,t,r){let i=this.getWallBetween(e.x,e.y,t.x,t.y);return i?(r??i.owner)==="player"||this.fogDebugDisabledSignal()?!0:this.isVisibleToPlayer(e.x,e.y)||this.isVisibleToPlayer(t.x,t.y):!1}getCombatTextEntriesAt(e,t){return this.combatTextsSignal().filter(r=>r.position.x===e&&r.position.y===t).map(r=>({id:r.id,text:r.text,opacity:r.opacity}))}formatHoverInfo(e){let t=this.getHoverInfo(e);if(!t)return"";let r=this.unitsSignal().find(s=>s.id===e);if(!r)return"";let i=this.combat.getPointsForTierLevel(r.tier,4),o=t.support>0?`+${t.support}`:"+0";return`Unit T${r.tier} | HP: ${t.hp}/${i} | ATK: ${t.atkMin}-${t.atkMax} | DEF: ${o}`}loadHighScores(){if(!(typeof window>"u"))try{let e=localStorage.getItem("highScores");if(e){let t=JSON.parse(e);t&&typeof t=="object"&&this.highScoresSignal.set(t)}}catch{}}persistHighScores(){if(!(typeof window>"u"))try{localStorage.setItem("highScores",JSON.stringify(this.highScoresSignal()))}catch{}}debugInstantWin(){this.turnSignal.set(Math.floor(Math.random()*10)+5),this.gameStatusSignal.set("player wins"),this.recordHighScore("player wins","destroy")}debugCycleSettings(){let e=["baby","normal","hard","nightmare"],t=[10,20,30],r=e.indexOf(this.settings.difficulty()),i=t.indexOf(this.settings.mapSize());r++,r>=e.length&&(r=0,i++,i>=t.length&&(i=0)),this.settings.setDifficulty(e[r]),this.settings.setMapSize(t[i]),this.resetGame()}recordHighScore(e,t){let r=`${this.settings.difficulty()}|${this.settings.mapSize()}`,i=V({},this.highScoresSignal()),o={turns:this.turnSignal(),date:Date.now(),condition:t},s=i[r]??{wins:[],losses:[]};e==="player wins"?s.wins=[...s.wins,o].sort((f,g)=>f.turns-g.turns).slice(0,3):s.losses=[...s.losses,o].sort((f,g)=>f.turns-g.turns).slice(0,3),i[r]=s,this.highScoresSignal.set(i),this.persistHighScores();let a=this.getForestControl(),c=e==="player wins"?a.player:a.ai,u=t==="monopoly"?"Monopoly":"Annihilation",d={playerName:e==="player wins"?this.playerName.name():"Jaerbi",turnsPlayed:this.turnSignal(),forestsCaptured:c,victoryType:u,timestamp:Date.now(),difficulty:this.settings.difficulty(),mapSize:this.settings.mapSize(),victory:e==="player wins"};e==="player wins"?(this.pendingScoreSignal.set(d),this.namePromptOpenSignal.set(!0)):this.firebase.saveHighScore(d)}getAttackLuckModifier(e){return this.combat.getAttackLuckModifier(e)}queueCombatText(e,t){let r=crypto.randomUUID(),i={id:r,text:e,position:V({},t),opacity:1};this.combatTextsSignal.update(o=>[...o.filter(s=>!(s.position.x===t.x&&s.position.y===t.y)),i]),setTimeout(()=>{this.combatTextsSignal.update(o=>o.map(s=>s.id===r?pe(V({},s),{opacity:0}):s))},1500),setTimeout(()=>{this.combatTextsSignal.update(o=>o.filter(s=>s.id!==r))},2e3)}calculateValidMoves(e){let t=[],r=e.tier>=3?e.tier===4?3:2:1,i=e.tier>=2,o=[{x:0,y:-1},{x:0,y:1},{x:-1,y:0},{x:1,y:0}];i&&o.push({x:-1,y:-1},{x:1,y:-1},{x:-1,y:1},{x:1,y:1});for(let s of o)for(let a=1;a<=r;a++){let c={x:e.position.x+s.x*a,y:e.position.y+s.y*a};if(c.x>=0&&c.x<this.gridSize&&c.y>=0&&c.y<this.gridSize){let u={x:e.position.x+s.x*(a-1),y:e.position.y+s.y*(a-1)};if(s.x!==0&&s.y!==0){if(this.isDiagonalBlocked(u,c))break}else if(this.getWallBetween(u.x,u.y,c.x,c.y))break;let d=this.getUnitAt(c.x,c.y);if(!d)t.push(c);else{d.owner===e.owner?d.tier===e.tier&&t.push(c):t.push(c);break}}else break}return t}endTurn(){let e=this.activeSideSignal(),t=new Set(this.movedThisTurnSignal());this.unitsSignal.update(o=>o.map(s=>{if(s.owner!==e)return s;let a=t.has(s.id),c=this.isForest(s.position.x,s.position.y),u=c?a?1:(s.forestOccupationTurns??0)+1:0,d=c?u>=3:!1;return pe(V({},s),{turnsStationary:a?0:(s.turnsStationary??0)+1,forestOccupationTurns:u,productionActive:d})})),this.movedThisTurnSignal.set(new Set),this.wallBuiltThisTurnSignal.set(!1);let r=o=>{let s=0;return o==="baby"?s=10:o==="normal"?s=8:o==="hard"?s=5:s=3,s};if(this.gameStatus()==="playing"){let o=this.unitsSignal().filter(s=>s.owner===e&&this.isForest(s.position.x,s.position.y)&&(s.productionActive??!1)).length;o>0&&(e==="player"?this.resourcesSignal.update(s=>({wood:s.wood+o*r(this.settings.difficulty())})):this.aiWoodSignal.update(s=>s+o*r(this.settings.difficulty())))}this.deployTargetsSignal.set([]),this.baseDeployActiveSignal.set(!1),this.recomputeVisibility(),e==="player"&&this.gameStatus()==="playing"&&this.updateForestMonopoly();let i=e==="player"?"ai":"player";if(e==="player"){this.turnSignal.update(s=>s+1);let o=this.settings.getAiReserveBonus(this.turnSignal());this.reservePointsSignal.update(s=>({player:s.player+1,ai:s.ai+o}))}else this.autoDeployEnabledSignal()&&this.playerConvertedThisTurnSignal()&&this.reservePointsSignal().player>0&&(this.autoDeployFromReserves(),this.playerConvertedThisTurnSignal.set(!1));this.activeSideSignal.set(i),this.startSideTurn(i),i==="ai"&&this.gameStatus()==="playing"&&setTimeout(()=>this.aiTurn(),10)}endPlayerTurn(){this.activeSideSignal()!=="player"||this.gameStatus()!=="playing"||this.endTurn()}startSideTurn(e){this.unitsSignal.update(t=>t.map(r=>r.owner===e?pe(V({},r),{hasActed:!1}):r))}updateForestMonopoly(){let e=this.forestsSignal().length;if(e===0){this.forestMonopolySignal.set({player:0,ai:0});return}let t=this.unitsSignal().filter(s=>s.owner==="player"&&this.isForest(s.position.x,s.position.y)).length,r=this.unitsSignal().filter(s=>s.owner==="ai"&&this.isForest(s.position.x,s.position.y)).length,i=t/e===1,o=r/e===1;if(i){let s=V({},this.forestMonopolySignal());s.player=s.player+1,s.ai=0,this.forestMonopolySignal.set(s),s.player>=10&&(this.gameStatusSignal.set("player wins"),this.screenShakeSignal.set(!0),this.endReasonSignal.set(this.settings.t("ECONOMIC_DOMINATION_GREETING")),setTimeout(()=>{this.screenShakeSignal.set(!1),this.endOverlaySignal.set(!0)},1e3),this.recordHighScore("player wins","monopoly"))}else if(o){let s=V({},this.forestMonopolySignal());s.ai=s.ai+1,s.player=0,this.forestMonopolySignal.set(s),s.ai>=10&&(this.gameStatusSignal.set("jaerbi wins"),this.screenShakeSignal.set(!0),this.endReasonSignal.set(this.settings.t("ECONOMIC_DOMINATION_GREETING")),setTimeout(()=>{this.screenShakeSignal.set(!1),this.endOverlaySignal.set(!0)},1e3),this.recordHighScore("jaerbi wins","monopoly"))}else this.forestMonopolySignal.set({player:0,ai:0})}async aiTurn(){if(this.activeSideSignal()!=="ai"||this.gameStatus()!=="playing"||this.isAiThinking)return;this.isAiThinking=!0,this.aiBatchingActions=!0;let e=this.getBasePosition("ai");{let k=0,Q=50;for(;this.aiWoodSignal()>30;){if(k++,k>Q){try{console.warn("[AI] Economy convert safety break")}catch{}break}this.aiConvertWoodToReserve()}}try{let k=this.forestsSignal().length,Q=this.unitsSignal().filter(R=>R.owner==="ai"&&this.isForest(R.position.x,R.position.y)).length,q=this.unitsSignal().filter(R=>R.owner==="player"&&this.isForest(R.position.x,R.position.y)).length,ce=this.settings.difficulty(),Ie=k>0?q/k:0,ie="none";q<=Q?ie="none":Ie>=.9||q>=9?ie="rage":q>=Q+(ce==="baby"?4:ce==="normal"?3:ce==="hard"?2:1)?ie="angry":ie="none",this.aiMoodSignal.set(ie);let x=this.turnSignal()%2===0,I=this.turnSignal()%5===0,C=k>0?Q/k:0,D=this.totalWarModeSignal(),A=C>=.65;if(!D&&A)try{console.log("[AI MODE] TOTAL_WAR_MODE engaged")}catch{}if(this.totalWarModeSignal.set(A),ie==="rage"){let R=ce==="baby"?x?1:2:ce==="normal"?x?3:2:ce==="hard"?x?4:3:4;this.reservePointsSignal.update(S=>({player:S.player,ai:S.ai+R}))}else if(ie==="angry"){if(ce==="baby")I&&this.reservePointsSignal.update(S=>({player:S.player,ai:S.ai+1}));else if(x){let R=ce==="normal"?x?1:0:ce==="hard"?I?2:1:2;this.reservePointsSignal.update(S=>({player:S.player,ai:S.ai+R}))}}}catch{}await new Promise(k=>setTimeout(k,100));let t=this.unitsSignal().filter(k=>k.owner==="ai"),r=new Map(this.aiUnitTimeNearBaseSignal()),i=new Set(t.map(k=>k.id));for(let k of r.keys())i.has(k)||r.delete(k);for(let k of t)Math.max(Math.abs(k.position.x-e.x),Math.abs(k.position.y-e.y))<=3?r.set(k.id,(r.get(k.id)||0)+1):r.set(k.id,0);this.aiUnitTimeNearBaseSignal.set(r);for(let k of t){let Q=this.isForest(k.position.x,k.position.y);k.owner==="ai"&&Q&&k.tier<=2&&this.anchorGatherer(k.id)}let o=this.unitsSignal().filter(k=>k.owner==="player"&&this.isForest(k.position.x,k.position.y)&&(k.productionActive??!1)).length*2,s=this.unitsSignal().filter(k=>k.owner==="ai"&&this.isForest(k.position.x,k.position.y)&&(k.productionActive??!1)).length*2,a=o>=s;this.aggressionModeSignal.set(a);let d=this.forestsSignal().filter(k=>!this.getUnitAt(k.x,k.y)).filter(k=>this.isVisibleToAi(k.x,k.y)),f=this.unitsSignal().filter(k=>k.owner==="ai");if(this.turnSignal()<=15){let k=this.aiQueuedUnitIdSignal(),Q=k?f.find(ce=>ce.id===k):null;if(!(Q&&!this.isForest(Q.position.x,Q.position.y)&&d.length>0)){let ce=f.filter(ie=>ie.tier<=2&&!this.isForest(ie.position.x,ie.position.y)),Ie=ce.length>0&&d.length>0?ce.reduce((ie,x)=>{let I=Math.min(...d.map(D=>Math.abs(x.position.x-D.x)+Math.abs(x.position.y-D.y))),C=Math.min(...d.map(D=>Math.abs(ie.position.x-D.x)+Math.abs(ie.position.y-D.y)));return I<C?x:ie},ce[0]):null;this.aiQueuedUnitIdSignal.set(Ie?Ie.id:null)}}else this.aiQueuedUnitIdSignal.set(null);try{let k=this.getPointsForTierLevel(3,1),Q=this.forestsSignal().length,q=this.unitsSignal().filter(ie=>ie.owner==="ai"&&this.isForest(ie.position.x,ie.position.y)).length,ce=Q>0?q/Q:0;this.reservePointsSignal().ai>=k&&ce<=.6&&this.aiSpawnTier(3,1,new Set)}catch{}let g=this.unitsSignal().filter(k=>k.owner==="player"&&Math.max(Math.abs(k.position.x-e.x),Math.abs(k.position.y-e.y))<=3&&k.tier>=2);if(g.length>0){let k=g.reduce((Q,q)=>this.calculateTotalPoints(q)>this.calculateTotalPoints(Q)?q:Q,g[0]);this.aiDefenseSpawn(k)}if(!this.wallBuiltThisTurnSignal())if(this.totalWarModeSignal()){let k=this.aiStrategy.getWallBuildActions(this);for(let Q of k){if(this.wallBuiltThisTurnSignal())break;this.aiBuildWallBetween(Q.from,Q.to)}}else this.tryDefensiveWallsNearForests();let m=0,T=10;for(;m<T&&this.executeOneFreeAction();)m++,await new Promise(Q=>setTimeout(Q,100));this.aiQueuedUnitIdSignal.set(null);let M=0,L=Math.max(20,this.gridSize*4);for(;;){let k=this.unitsSignal().filter(q=>q.owner==="ai"&&!q.hasActed);if(k.length===0)break;let Q=this.aiStrategy.chooseBestEndingAction(this);if(!Q){let q=k.find(ce=>this.isForest(ce.position.x,ce.position.y));if(q){this.unitsSignal.update(ce=>ce.map(Ie=>Ie.id===q.id?pe(V({},Ie),{hasActed:!0}):Ie)),await new Promise(ce=>setTimeout(ce,30)),M++;continue}break}if(Q.type==="wall_attack"&&Q.edge){let q=this.getWallBetween(Q.edge.from.x,Q.edge.from.y,Q.edge.to.x,Q.edge.to.y);q&&this.isBaseProtectionEdge(Q.edge.from,Q.edge.to)&&(q.owner==="neutral"||q.owner==="ai")||!q?this.appendLog(`[Turn ${this.turnSignal()}] [AI Base Protection] Skipped wall attack near base due to protection rule.`):this.attackOrDestroyWallBetween(Q.edge.from,Q.edge.to,!1)}else this.executeMove(Q.unit,Q.target);if(await new Promise(q=>setTimeout(q,60)),M++,M>=L){try{console.warn("[AI] Safety break: max actions reached")}catch{}break}}this.endTurn(),this.isAiThinking=!1,this.aiBatchingActions=!1}executeOneFreeAction(){let e=this.getBasePosition("ai"),t=this.unitsSignal().filter(i=>i.owner==="player"&&Math.max(Math.abs(i.position.x-e.x),Math.abs(i.position.y-e.y))<=3&&i.tier>=2);if(t.length>0){let i=t.reduce((s,a)=>this.calculateTotalPoints(a)>this.calculateTotalPoints(s)?a:s,t[0]);if(this.reservePointsSignal().ai>=1&&this.aiDefenseSpawn(i))return!0}let r=this.unitsSignal().filter(i=>i.owner==="ai").length;if(r<6){let i=this.reservePointsSignal().ai,o=this.getPointsForTierLevel(2,1);if(i>=o&&this.aiSpawnTier(2,1,new Set)>0)return!0}if(this.aiWoodSignal()>=30)return this.aiConvertWoodToReserve(),!0;if(this.reservePointsSignal().ai>=40&&this.aiSpawnTier(2,1,new Set)>0)return!0;if(t.length===0)try{let i=this.getPointsForTierLevel(3,1),o=this.forestsSignal().length,s=this.unitsSignal().filter(u=>u.owner==="ai"&&this.isForest(u.position.x,u.position.y)).length,a=o>0?s/o:0,c=this.reservePointsSignal().ai;if(r>=6&&c>=i&&a<=.6&&this.aiSpawnTier(3,1,new Set)>0)return!0}catch{}return!1}aiDefenseSpawn(e){let t=this.getBasePosition("ai"),r=[],i=e.position.x,o=e.position.y,s=Math.sign(t.x-i),a=Math.sign(t.y-o);{let g=0,m=Math.max(10,this.gridSize*2);for(;i!==t.x||o!==t.y;){if(g++,g>m){try{console.warn("[AI] Defense path safety break near base")}catch{}break}if(i+=s,o+=a,!this.inBounds(i,o)||i===t.x&&o===t.y)break;r.push({x:i,y:o})}}let c=r.reverse().find(g=>!this.getUnitAt(g.x,g.y))||(()=>{for(let g=-1;g<=1;g++)for(let m=-1;m<=1;m++){if(g===0&&m===0)continue;let T=t.x+g,M=t.y+m;if(this.inBounds(T,M)&&!this.getUnitAt(T,M))return{x:T,y:M}}return null})();if(!c)return!1;{let g=0,m=50;for(;this.aiWoodSignal()>=20;){if(g++,g>m){try{console.warn("[AI] Defense convert safety break")}catch{}break}this.aiConvertWoodToReserve()}}let u=this.reservePointsSignal().ai,d=this.economy.getHighestAffordableCost(u);if(d<=0)return!1;let f=this.calculateTierAndLevel(d);return this.unitsSignal().filter(m=>m.owner==="ai"&&m.tier===f.tier&&!this.isForest(m.position.x,m.position.y)).length>=5?!1:(this.unitsSignal.update(g=>[...g,{id:crypto.randomUUID(),position:V({},c),level:f.level,tier:f.tier,points:d,owner:"ai",turnsStationary:0,forestOccupationTurns:0,productionActive:!1,hasActed:!0}]),this.reservePointsSignal.update(g=>({player:g.player,ai:g.ai-d})),this.recomputeVisibility(),!0)}aiSpawnTier(e,t,r){let i=this.getBasePosition("ai"),o=[],s=2;for(let m=-s;m<=s;m++)for(let T=-s;T<=s;T++){if(m===0&&T===0)continue;let M=i.x+m,L=i.y+T;if(!this.inBounds(M,L)||Math.max(Math.abs(m),Math.abs(T))>s)continue;let k=`${M},${L}`;r.has(k)||this.getUnitAt(M,L)||o.push({x:M,y:L})}let a=this.reservePointsSignal().ai,c=this.getPointsForTierLevel(e,1),u=0,d=[],f=m=>this.unitsSignal().filter(T=>T.owner==="ai"&&T.tier===m&&!this.isForest(T.position.x,T.position.y)).length;if(f(e)>=5)return 0;for(let m of o){if(u>=t||a<c||f(e)>=5)break;let T=this.calculateTierAndLevel(c);d.push({id:crypto.randomUUID(),position:V({},m),level:T.level,tier:T.tier,points:c,owner:"ai",turnsStationary:0,forestOccupationTurns:0,productionActive:!1,hasActed:!0}),a-=c,u++}return d.length>0&&(this.unitsSignal.update(m=>[...m,...d]),this.reservePointsSignal.update(m=>({player:m.player,ai:a})),this.recomputeVisibility()),u}aiConvertWoodToReserve(){this.aiWoodSignal()<30||(this.aiWoodSignal.update(t=>t-20),this.reservePointsSignal.update(t=>({player:t.player,ai:t.ai+1})))}spawnUnit(e){let t=this.getBasePosition(e);this.unitsSignal.update(r=>{if(r.some(s=>s.position.x===t.x&&s.position.y===t.y))return r;let o={id:crypto.randomUUID(),position:V({},t),level:1,tier:1,points:1,owner:e,turnsStationary:0,forestOccupationTurns:0,productionActive:!1,hasActed:!0};return[...r,o]})}spawnStarterArmy(e){let t=this.getBasePosition(e),r=2,i=[];for(let c=-r;c<=r;c++)for(let u=-r;u<=r;u++){let d=t.x+c,f=t.y+u;this.inBounds(d,f)&&(c===0&&u===0||Math.max(Math.abs(c),Math.abs(u))>r||i.push({x:d,y:f}))}let o=[{tier:3,level:1},{tier:2,level:1},{tier:1,level:1}],s=[],a=(c,u)=>this.unitsSignal().some(d=>d.position.x===c&&d.position.y===u)||s.some(d=>d.position.x===c&&d.position.y===u);for(let c of o){let u=i.filter(m=>!a(m.x,m.y));if(u.length===0)break;let d=Math.floor(Math.random()*u.length),f=u[d],g=this.getPointsForTierLevel(c.tier,c.level);s.push({id:crypto.randomUUID(),position:V({},f),level:c.level,tier:c.tier,points:g,owner:e,turnsStationary:0,hasActed:!0})}s.length>0&&this.unitsSignal.update(c=>[...c,...s])}getUnitAt(e,t){return this.unitsSignal().find(r=>r.position.x===e&&r.position.y===t)}getWallBetween(e,t,r,i){let o={x:e,y:t},s={x:r,y:i};if(!this.areAdjacent(o,s))return;let[a,c]=this.sortEdgeEndpoints(o,s);return this.wallsSignal().find(u=>u.tile1.x===a.x&&u.tile1.y===a.y&&u.tile2.x===c.x&&u.tile2.y===c.y)}isDiagonalBlocked(e,t){return this.combat.isDiagonalBlocked(e,t,(r,i,o,s)=>this.getWallBetween(r,i,o,s))}isValidMove(e,t){return this.validMoves().some(r=>r.x===e&&r.y===t)}isForest(e,t){return this.forestsSignal().some(r=>r.x===e&&r.y===t)}getBasePosition(e){return e==="player"?{x:0,y:0}:{x:this.gridSize-1,y:this.gridSize-1}}cancelDeploy(){this.deployTargetsSignal.set([]),this.baseDeployActiveSignal.set(!1)}toggleBuildMode(){if(this.buildModeSignal()){this.buildModeSignal.set(!1);return}this.canBuildThisTurn()&&this.buildModeSignal.set(!0)}toggleFogDebug(){this.fogDebugDisabledSignal.update(e=>!e)}toggleRules(){this.rulesOpenSignal.update(e=>!e)}closeRules(){this.rulesOpenSignal.set(!1)}toggleLog(){this.logsOpenSignal.update(e=>!e)}logOpen(){return this.logsOpenSignal()}toggleSettings(){this.settingsOpenSignal.update(e=>!e)}autoDeployEnabled(){return this.autoDeployEnabledSignal()}toggleAutoDeploy(){this.autoDeployEnabledSignal.update(e=>!e)}settingsOpen(){return this.settingsOpenSignal()}logs(){return this.log.logs()}clearLogs(){return this.log.clear()}appendLog(e,t){this.log.add(e,t)}buildWallBetween(e,t){if(this.resourcesSignal().wood<10||!this.canBuildWallBetween(e,t))return;let i=this.getBestAdjacentPlayerUnit(e,t);if(!i||i.hasActed||this.wallBuiltThisTurnSignal())return;let[o,s]=this.sortEdgeEndpoints(e,t);this.wallsSignal.update(a=>[...a,{id:crypto.randomUUID(),tile1:{x:o.x,y:o.y},tile2:{x:s.x,y:s.y},health:100,owner:"player"}]),this.resourcesSignal.update(a=>({wood:a.wood-10})),this.buildModeSignal.set(!1),this.wallBuiltThisTurnSignal.set(!0),this.unitsSignal.update(a=>a.map(c=>c.id===i.id?pe(V({},c),{hasActed:!0}):c))}convertWoodToReserve(){this.resourcesSignal().wood<20||(this.resourcesSignal.update(t=>({wood:t.wood-20})),this.reservePointsSignal.update(t=>({player:t.player+1,ai:t.ai})),this.playerConvertedThisTurnSignal.set(!0))}maxConvertWoodToReserve(){let e=this.resourcesSignal().wood,t=Math.floor(e/20);t<=0||(this.resourcesSignal.update(r=>({wood:r.wood-t*20})),this.reservePointsSignal.update(r=>({player:r.player+t,ai:r.ai})),this.playerConvertedThisTurnSignal.set(!0))}startDeployFromBase(){let e=this.reservePointsSignal().player,t=this.getBasePosition("player");if(e<=0){this.deployTargetsSignal.set([]),this.baseDeployActiveSignal.set(!1);return}let r=[];for(let i=-2;i<=2;i++)for(let o=-2;o<=2;o++){if(i===0&&o===0)continue;let s=t.x+i,a=t.y+o;if(s<0||s>=this.gridSize||a<0||a>=this.gridSize||Math.max(Math.abs(i),Math.abs(o))>2)continue;this.getUnitAt(s,a)||r.push({x:s,y:a})}this.deployTargetsSignal.set(r),this.baseDeployActiveSignal.set(!0)}autoDeployFromReserves(){let e=this.getBasePosition("player"),t=[];for(let o=-2;o<=2;o++)for(let s=-2;s<=2;s++){if(o===0&&s===0)continue;let a=e.x+o,c=e.y+s;this.inBounds(a,c)&&(Math.max(Math.abs(o),Math.abs(s))>2||this.getUnitAt(a,c)||t.push({x:a,y:c}))}let r=this.reservePointsSignal().player,i=[];for(let o of t){if(r<=0)break;let s=this.economy.getHighestAffordableCost(r);if(s<=0)break;let a=this.calculateTierAndLevel(s);this.unitsSignal.update(c=>[...c,{id:crypto.randomUUID(),position:V({},o),level:a.level,tier:a.tier,points:s,owner:"player",turnsStationary:0,forestOccupationTurns:0,productionActive:!1,hasActed:!0}]),r-=s,i.push(o)}i.length>0&&(this.reservePointsSignal.update(o=>({player:r,ai:o.ai})),this.recomputeVisibility())}isDeployTarget(e,t){return this.deployTargetsSignal().some(r=>r.x===e&&r.y===t)}deployTo(e){if(!this.isDeployTarget(e.x,e.y))return;let t=this.reservePointsSignal().player;if(t<=0)return;let r=this.economy.getHighestAffordableCost(t);if(r<=0)return;let i=this.calculateTierAndLevel(r);this.unitsSignal.update(o=>{let s={id:crypto.randomUUID(),position:V({},e),level:i.level,tier:i.tier,points:r,owner:"player",turnsStationary:0,hasActed:!0};return[...o,s]}),this.reservePointsSignal.update(o=>({player:o.player-r,ai:o.ai})),this.deployTargetsSignal.set([]),this.baseDeployActiveSignal.set(!1),this.recomputeVisibility(),this.appendLog(`[Turn ${this.turnSignal()}] Player deployed T${i.tier}(L${i.level}) at (${e.x},${e.y}) costing ${r} reserve.`)}areAdjacent(e,t){return this.build.areAdjacent(e,t)}sortEdgeEndpoints(e,t){return this.build.sortEdgeEndpoints(e,t)}edgeKey(e,t){let[r,i]=this.sortEdgeEndpoints(e,t);return`${r.x},${r.y}|${i.x},${i.y}`}registerWallDestroyedEdge(e,t){let r=this.edgeKey(e,t),i=new Map(this.wallCooldownSignal());i.set(r,this.turnSignal()),this.wallCooldownSignal.set(i)}isEdgeOnCooldown(e,t){let r=this.edgeKey(e,t),i=this.wallCooldownSignal().get(r);return i===void 0?!1:5-(this.turnSignal()-i)>0}edgeCooldownRemaining(e,t){let r=this.edgeKey(e,t),i=this.wallCooldownSignal().get(r);if(i===void 0)return 0;let o=5-(this.turnSignal()-i);return Math.max(0,o)}attackOrDestroyWallBetween(e,t,r=!1){let i=this.getWallBetween(e.x,e.y,t.x,t.y);if(!i)return;let o=this.activeSideSignal();if(o==="ai"&&this.isBaseProtectionEdge(e,t)){if(i.owner==="neutral"){this.appendLog(`[Turn ${this.turnSignal()}] [AI Base Protection] Blocked destruction of neutral wall adjacent to base.`);try{console.warn("[AI] Blocked neutral wall destruction adjacent to base")}catch{}return}if(i.owner==="ai"){this.appendLog(`[Turn ${this.turnSignal()}] [AI Base Protection] Blocked destruction of own wall adjacent to base.`);try{console.warn("[AI] Blocked own wall destruction adjacent to base")}catch{}return}}if(i.owner==="player"&&o==="player"){this.destroyOwnWallBetween(e,t);return}let s=o==="player"?this.getBestAdjacentPlayerUnit(e,t):this.getBestAdjacentAiUnit(e,t);if(!s||o==="player"&&s.hasActed)return;let a=i.owner==="neutral"?100:this.combat.getWallHitPercent(s.tier),[c,u]=this.sortEdgeEndpoints(e,t),d=Math.max(0,i.health-a);this.wallsSignal.update(m=>m.map(T=>T.id===i.id?pe(V({},T),{health:Math.max(0,T.health-a)}):T).filter(T=>T.health>0)),d<=0&&this.registerWallDestroyedEdge(c,u),this.shakenWallIdSignal.set(i.id),setTimeout(()=>this.shakenWallIdSignal.set(null),200);let f=o==="player"?"Player":"AI",g=i.owner==="neutral"?"Neutral":i.owner==="player"?"Player":"AI";this.appendLog(`[Turn ${this.turnSignal()}] ${f} hit ${g} wall (${e.x},${e.y})-(${t.x},${t.y}) for ${a}% damage.`),o==="ai"&&this.appendLog(`[AI Pathfinding] Breaking through wall at (${t.x},${t.y}) to reach target.`),this.unitsSignal.update(m=>m.map(T=>T.id===s.id?pe(V({},T),{hasActed:!0}):T))}destroyOwnWallBetween(e,t){let r=this.getWallBetween(e.x,e.y,t.x,t.y);if(!r||r.owner!=="player"||!this.isAnyPlayerUnitAdjacentToEdge(e,t))return;this.wallsSignal.update(s=>s.filter(a=>a.id!==r.id));let[i,o]=this.sortEdgeEndpoints(e,t);this.registerWallDestroyedEdge(i,o),this.appendLog(`[Turn ${this.turnSignal()}] Player removed own wall between (${e.x},${e.y})-(${t.x},${t.y}).`)}canDestroyOwnWall(e,t){let r=this.getWallBetween(e.x,e.y,t.x,t.y);return!r||r.owner!=="player"?!1:this.isAnyPlayerUnitAdjacentToEdge(e,t)}canAttackEnemyWall(e,t){let r=this.getWallBetween(e.x,e.y,t.x,t.y);return!(!r||r.owner==="player"||!this.getBestAdjacentPlayerUnit(e,t))}canShowAttackIcon(e,t){let r=this.getWallBetween(e.x,e.y,t.x,t.y);return!r||!this.canActThisTurn()?!1:r.owner==="player"?this.canDestroyOwnWall(e,t):this.canAttackEnemyWall(e,t)}canBuildThisTurn(){return!this.canActThisTurn()||this.wallBuiltThisTurnSignal()?!1:this.resourcesSignal().wood>=10}canAddReserveTurn(){return this.resourcesSignal().wood>=20}isPlayerTurn(){return this.gameStatusSignal()!=="playing"?!1:this.activeSideSignal()==="player"}remainingActions(){return this.unitsSignal().filter(e=>e.owner==="player"&&!e.hasActed).length}totalPlayerUnits(){return this.unitsSignal().filter(e=>e.owner==="player").length}canActThisTurn(){return this.gameStatusSignal()!=="playing"?!1:this.activeSideSignal()==="player"}isAnyPlayerUnitAdjacentToEdge(e,t){return this.unitsSignal().some(r=>r.owner==="player"&&(r.position.x===e.x&&r.position.y===e.y||r.position.x===t.x&&r.position.y===t.y))}getAdjacentPlayerUnits(e,t){return this.unitsSignal().filter(r=>r.owner==="player"&&!r.hasActed&&(r.position.x===e.x&&r.position.y===e.y||r.position.x===t.x&&r.position.y===t.y))}getBestAdjacentPlayerUnit(e,t){let r=this.getAdjacentPlayerUnits(e,t);return r.length===0?null:r.reduce((i,o)=>this.calculateTotalPoints(o)>this.calculateTotalPoints(i)?o:i)}getAdjacentAiUnits(e,t){return this.unitsSignal().filter(r=>r.owner==="ai"&&!r.hasActed&&(r.position.x===e.x&&r.position.y===e.y||r.position.x===t.x&&r.position.y===t.y))}getBestAdjacentAiUnit(e,t){let r=this.getAdjacentAiUnits(e,t);return r.length===0?null:r.reduce((i,o)=>this.calculateTotalPoints(o)>this.calculateTotalPoints(i)?o:i)}canShowBuildIcon(e,t){return!this.buildModeSignal()||!this.canBuildThisTurn()||!this.canBuildWallBetween(e,t)?!1:!!this.getBestAdjacentPlayerUnit(e,t)}isInSafeZone(e,t){return this.isInNoBuildZone({x:e,y:t})}canBuildWallBetween(e,t){return!(!this.areAdjacent(e,t)||!this.isVisibleToPlayer(e.x,e.y)&&!this.isVisibleToPlayer(t.x,t.y)||this.isInNoBuildZone(e)||this.isInNoBuildZone(t)||this.getWallBetween(e.x,e.y,t.x,t.y)||this.isEdgeOnCooldown(e,t))}aiBuildWallBetween(e,t){if(this.wallBuiltThisTurnSignal()||this.aiWoodSignal()<10||!this.areAdjacent(e,t)||this.isInNoBuildZone(e)||this.isInNoBuildZone(t)||this.getWallBetween(e.x,e.y,t.x,t.y)||this.isEdgeOnCooldown(e,t)||this.wouldCageElite(e,t)&&!this.isBaseProtectionEdge(e,t))return;let r=this.getBestAdjacentAiUnit(e,t);if(!r||r.hasActed)return;let[i,o]=this.sortEdgeEndpoints(e,t);this.wallsSignal.update(s=>[...s,{id:crypto.randomUUID(),tile1:{x:i.x,y:i.y},tile2:{x:o.x,y:o.y},health:100,owner:"ai"}]),this.aiWoodSignal.update(s=>s-10),this.wallBuiltThisTurnSignal.set(!0),this.unitsSignal.update(s=>s.map(a=>a.id===r.id?pe(V({},a),{hasActed:!0}):a))}isBaseProtectionEdge(e,t){let r=this.getBasePosition("ai"),i=o=>Math.max(Math.abs(o.x-r.x),Math.abs(o.y-r.y))<=1||o.x===r.x&&o.y===r.y;return i(e)||i(t)}wouldCageElite(e,t){let r=(s,a,c,u)=>{let d=this.sortEdgeEndpoints({x:s,y:a},{x:c,y:u}),f=this.sortEdgeEndpoints(e,t);return d[0].x===f[0].x&&d[0].y===f[0].y&&d[1].x===f[1].x&&d[1].y===f[1].y},i=(s,a)=>{if(s.x===a.x||s.y===a.y)return!!(this.getWallBetween(s.x,s.y,a.x,a.y)||r(s.x,s.y,a.x,a.y));{let c=Math.sign(a.x-s.x),u=Math.sign(a.y-s.y),d=this.getWallBetween(s.x,s.y,s.x+c,s.y),f=this.getWallBetween(s.x,s.y,s.x,s.y+u),g=this.getWallBetween(a.x-c,a.y,a.x,a.y),m=this.getWallBetween(a.x,a.y-u,a.x,a.y);return!!(d||f||g||m||r(s.x,s.y,s.x+c,s.y)||r(s.x,s.y,s.x,s.y+u)||r(a.x-c,a.y,a.x,a.y)||r(a.x,a.y-u,a.x,a.y))}},o=[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:-1}];for(let s of this.unitsSignal()){if(s.owner!=="ai"||s.tier<2)continue;if(o.filter(c=>{let u={x:s.position.x+c.x,y:s.position.y+c.y};return this.inBounds(u.x,u.y)?!i(s.position,u):!1}).length<2)return!0}return!1}tryDefensiveWallsNearForests(){if(this.wallBuiltThisTurnSignal())return!1;let e=this.unitsSignal().filter(i=>i.owner==="ai"),t=this.unitsSignal().filter(i=>i.owner==="player"),r=this.getBasePosition("ai");for(let i of e){if(!this.isForest(i.position.x,i.position.y))continue;let o=t.filter(s=>Math.max(Math.abs(s.position.x-i.position.x),Math.abs(s.position.y-i.position.y))<=2);for(let s of o){let a=i.level??this.calculateTierAndLevel(i.points).level,c=s.level??this.calculateTierAndLevel(s.points).level,u=Math.max(Math.abs(s.position.x-i.position.x),Math.abs(s.position.y-i.position.y)),d=Math.sign(s.position.x-i.position.x),f=Math.sign(s.position.y-i.position.y);if(Math.abs(d)+Math.abs(f)===2)continue;let g=u===1?{x:i.position.x+d,y:i.position.y+f}:{x:i.position.x+Math.sign(s.position.x-i.position.x),y:i.position.y+Math.sign(s.position.y-i.position.y)};if(!this.inBounds(g.x,g.y))continue;let m=Math.sign(r.x-i.position.x),T=Math.sign(r.y-i.position.y);if((g.x-i.position.x)*m+(g.y-i.position.y)*T>0)continue;let L=i.position,k=g;if(!this.getWallBetween(L.x,L.y,k.x,k.y)&&(c>=a&&this.aiWoodSignal()>=20&&(this.aiBuildWallBetween(L,k),this.appendLog(`[Turn ${this.turnSignal()}] [AI Stealth] Defensive wall triggered against Player threat. Edge: (${L.x},${L.y})-(${k.x},${k.y}).`)),this.wallBuiltThisTurnSignal()))return!0}}return!1}isInNoBuildZone(e){return this.build.isInNoBuildZone(e,this.getBasePosition("player"),this.getBasePosition("ai"))}unitQuadrantBias(){return this.unitQuadrantBiasSignal()}getQuadrant(e,t){let r=e.x<=t.x,i=e.y<=t.y;return r&&i?0:!r&&i?1:r&&!i?2:3}placeNeutralWalls(){let e=(r,i)=>{if(!this.areAdjacent(r,i)||!this.inBounds(r.x,r.y)||!this.inBounds(i.x,i.y)||this.getWallBetween(r.x,r.y,i.x,i.y))return;let[o,s]=this.sortEdgeEndpoints(r,i);this.wallsSignal.update(a=>[...a,{id:crypto.randomUUID(),tile1:{x:o.x,y:o.y},tile2:{x:s.x,y:s.y},health:100,owner:"neutral"}])},t=[this.getBasePosition("player"),this.getBasePosition("ai")];for(let r of t){let i=[{x:r.x+1,y:r.y},{x:r.x-1,y:r.y},{x:r.x,y:r.y+1},{x:r.x,y:r.y-1}];for(let o of i)this.inBounds(o.x,o.y)&&e(r,o)}for(let r of this.forestsSignal()){let i={x:r.x+1,y:r.y},o={x:r.x,y:r.y+1},s={x:r.x-1,y:r.y},a={x:r.x,y:r.y-1};this.inBounds(i.x,i.y)&&e(r,i),this.inBounds(o.x,o.y)&&e(r,o),this.inBounds(s.x,s.y)&&e(r,s),this.inBounds(a.x,a.y)&&e(r,a)}}static \u0275fac=function(t){return new(t||n)(we(gc),we(ag),we(cg),we(In),we(lg),we(ug),we(dg),we(bi),we(Kc))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var $m=class n{constructor(e,t){this.engine=e;this.settings=t}static \u0275fac=function(t){return new(t||n)(_e(wi),_e(In))};static \u0275cmp=fn({type:n,selectors:[["app-game-rules"]],decls:467,vars:39,consts:[[1,"fixed","inset-0","bg-black/60","flex","items-center","justify-center","z-50"],[1,"bg-gray-900","border","border-gray-700","rounded-lg","p-6","w-[960px]","max-w-[95vw]","mx-4","shadow-xl"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center","gap-2"],[1,"text-2xl","font-bold"],[1,"text-xs","mt-2","font-bold","text-gray-300"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-full","bg-gray-700","hover:bg-gray-600","text-lg","cursor-pointer",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","overflow-y-auto","max-h-[80vh]","pr-2"],[1,"bg-gray-800/60","border","border-gray-700","rounded-lg","p-4","md:col-span-2"],[1,"text-lg","font-semibold","mb-3"],[1,"grid","grid-cols-2","gap-6"],[1,"flex","items-center","gap-3"],[1,"text-3xl"],[1,"text-sm","font-semibold"],[1,"text-xs","text-gray-400"],[1,"bg-gray-800/60","border","border-gray-700","rounded-lg","p-4"],[1,"flex","items-center","gap-6"],[1,"flex","flex-col","items-center","gap-2"],[1,"w-12","h-12","rounded-full","bg-blue-500","text-white","flex","items-center","justify-center","font-bold"],[1,"text-xs","text-gray-300"],[1,"w-12","h-12","bg-blue-500","text-white","flex","items-center","justify-center","font-bold"],[1,"w-12","h-12","bg-blue-500","text-white","flex","items-center","justify-center","font-bold","rotate-45","scale-75"],[1,"rotate-315"],["viewBox","0 0 100 100"],["id","base-circle"],["id","eye"],["id","scan-lvl2"],["id","radar-lvl3"],["id","field-lvl4"],["cx","50","cy","50","r","14","fill","#94a3b8"],["cx","50","cy","50","r","4","fill","#e5e7eb"],["cx","50","cy","50","r","20","fill","none","stroke","#cbd5f5","stroke-width","1.5","stroke-dasharray","3 4"],["x1","50","y1","50","x2","75","y2","35","stroke","#e5e7eb","stroke-width","2"],["cx","75","cy","35","r","2.5","fill","#f8fafc"],["cx","50","cy","50","r","30","fill","none","stroke","#f1f5f9","stroke-width","1","opacity","0.4"],[1,"unit-svg-wrapper","theme-ai"],["viewBox","0 0 100 100",1,"w-full","h-full","scale-70"],["points","50,16 86,78 14,78","fill","var(--u-fill)"],["cx","50","cy","55","r","6","fill","var(--u-core)"],["points","50,5 55,15 45,15","fill","var(--u-stroke)"],["points","92,82 82,78 86,70","fill","var(--u-stroke)"],["points","8,82 18,78 14,70","fill","var(--u-stroke)"],["points","50,2 95,85 5,85","fill","none","stroke","var(--u-core)","stroke-width","2"],["points","50,48 56,52 56,60 50,64 44,60 44,52","fill","var(--u-light)"],["points","50,-2 102,88 -2,88","fill","none","stroke","var(--u-stroke)","stroke-width","1.5","opacity","0.6"],["points","50,-5 54,8 46,8","fill","var(--u-light)"],["points","92,82 88,70 80,78","fill","var(--u-light)"],["points","8,82 20,78 12,70","fill","var(--u-light)"],["id","base-shape"],["id","core"],["id","armor-lvl2"],["id","armor-lvl3"],["id","fortress-lvl4"],["id","fx"],["x","20","y","20","width","60","height","60","rx","6","fill","#2563eb"],["x","46","y","46","width","8","height","8","fill","#93c5fd"],["x","26","y","26","width","48","height","48","rx","4","fill","none","stroke","#60a5fa","stroke-width","2"],["x","16","y","16","width","68","height","68","rx","8","fill","none","stroke","#93c5fd","stroke-width","2"],["x","42","y","42","width","16","height","16","fill","#bfdbfe"],["x","12","y","12","width","76","height","76","rx","10","fill","none","stroke","#60a5fa","stroke-width","1.5"],["x","12","y","12","width","10","height","10","fill","#bfdbfe"],["x","78","y","12","width","10","height","10","fill","#bfdbfe"],["x","12","y","78","width","10","height","10","fill","#bfdbfe"],["x","78","y","78","width","10","height","10","fill","#bfdbfe"],["id","base-hex"],["id","links-lvl2"],["id","network-lvl3"],["points","50,15 80,32 80,68 50,85 20,68 20,32","fill","#10b981"],["cx","50","cy","50","r","4","fill","#6ee7b7"],["x1","50","y1","20","x2","50","y2","40","stroke","#6ee7b7","stroke-width","2"],["x1","80","y1","50","x2","60","y2","50","stroke","#6ee7b7","stroke-width","2"],["x1","50","y1","80","x2","50","y2","60","stroke","#6ee7b7","stroke-width","2"],["points","50,28 70,38 70,62 50,72 30,62 30,38","fill","none","stroke","#a7f3d0","stroke-width","2"],["cx","50","cy","20","r","3","fill","#34d399"],["cx","80","cy","50","r","3","fill","#34d399"],["cx","50","cy","80","r","3","fill","#34d399"],["points","50,10 85,30 85,70 50,90 15,70 15,30","fill","none","stroke","#6ee7b7","stroke-width","1.5","stroke-dasharray","4 4"],[1,"text-lg","font-semibold","mb-1"],[1,"text-sm","text-gray-300","mb-3"],[1,"flex","items-center","justify-center","h-[40px]"],[1,"merge-loop","relative"],[1,"unit","u1"],[1,"unit","u2"],[1,"result"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"text-sm","font-semibold","mb-2"],[1,"combat-stage"],[1,"attacker","triangle"],[1,"defender","circle","hit-flash","defender-fade"],[1,"text-[11px]","text-gray-400","mt-2"],[1,"defender","square","hit-flash","defender-fade"],[1,"crit-pop"],[1,"defender","circle"],[1,"miss-pop"],[1,"grid","grid-cols-2","gap-4"],[1,"text-xs","text-gray-300","mb-1"],[1,"path-grid",2,"--start-x","2","--start-y","2","--line-steps","1"],[1,"path-cell"],[1,"path-cell","active"],[1,"mover","circle","t1-path"],[1,"path-line","path-animation"],[1,"castle"],[1,"path-grid",2,"--start-x","2","--start-y","2","--line-steps","2"],[1,"mover","square","t3-path"],[1,"castle","red"],[1,"flex","flex-col","justify-between"],[1,"flex","flex-col","items-center"],[1,"text-2xl"],[1,"text-[11px]","text-gray-400"],[1,"flex","items-center","text-gray-500"],[1,"text-[11px]","text-emerald-400"],[1,"text-lg","font-semibold","mb-4"],[1,"grid","grid-cols-3","gap-4","mb-1"],[1,"h-4","w-16","rounded","bg-lime-400"],[1,"h-4","w-16","rounded","bg-red-400"],[1,"h-4","w-16","rounded","bg-gray-300"],[1,"bg-gray-800/60","border","border-gray-700","rounded-lg","p-4","md:col-span-2","unit-svg-wrapper","unit-svg-wrapper-game_rules"],[1,"flex","items-center","gap-6","theme-player"],["viewBox","0 0 100 100",1,"w-full","h-full"],["cx","50","cy","50","r","20","fill","var(--u-fill)"],["cx","50","cy","50","r","4","fill","var(--u-light)"],["cx","50","cy","50","r","26","fill","none","stroke","var(--u-stroke)","stroke-width","1.5","stroke-dasharray","3 4"],["x1","50","y1","50","x2","75","y2","35","stroke","var(--u-light)","stroke-width","2"],["cx","75","cy","35","r","2.5","fill","var(--u-light)"],["cx","50","cy","50","r","34","fill","none","stroke","var(--u-light)","stroke-width","1","opacity","0.4"],[1,"flex","items-center","gap-6","theme-ai"],["viewBox","0 0 100 100",1,"w-full","h-full","scale-75"],["viewBox","0 0 100 100",1,"w-full","h-full","scale-110"],["x","20","y","20","width","60","height","60","rx","6","fill","var(--u-dark)"],["x","46","y","46","width","8","height","8","fill","var(--u-core)"],["x","26","y","26","width","48","height","48","rx","4","fill","none","stroke","var(--u-stroke)","stroke-width","2"],["x","16","y","16","width","68","height","68","rx","8","fill","none","stroke","var(--u-core)","stroke-width","2"],["x","42","y","42","width","16","height","16","fill","var(--u-light)"],["x","12","y","12","width","76","height","76","rx","10","fill","none","stroke","var(--u-stroke)","stroke-width","1.5"],["x","12","y","12","width","10","height","10","fill","var(--u-light)"],["x","78","y","12","width","10","height","10","fill","var(--u-light)"],["x","12","y","78","width","10","height","10","fill","var(--u-light)"],["x","78","y","78","width","10","height","10","fill","var(--u-light)"],["points","50,15 80,32 80,68 50,85 20,68 20,32","fill","var(--u-emerald)"],["cx","50","cy","50","r","4","fill","var(--u-emerald-stroke)"],["x1","50","y1","20","x2","50","y2","40","stroke","var(--u-emerald-stroke)","stroke-width","2"],["x1","80","y1","50","x2","60","y2","50","stroke","var(--u-emerald-stroke)","stroke-width","2"],["x1","50","y1","80","x2","50","y2","60","stroke","var(--u-emerald-stroke)","stroke-width","2"],["points","50,28 70,38 70,62 50,72 30,62 30,38","fill","none","stroke","var(--u-emerald-stroke)","stroke-width","2"],["cx","50","cy","20","r","3","fill","var(--u-emerald-stroke)"],["cx","80","cy","50","r","3","fill","var(--u-emerald-stroke)"],["cx","50","cy","80","r","3","fill","var(--u-emerald-stroke)"],["points","50,10 85,30 85,70 50,90 15,70 15,30","fill","none","stroke","var(--u-emerald-stroke)","stroke-width","1.5","stroke-dasharray","4 4"]],template:function(t,r){t&1&&(N(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),w(5),F(),N(6,"h3",5),w(7),F()(),N(8,"button",6),Ar("click",function(){return r.engine.closeRules()}),w(9," \u2716 "),F()(),N(10,"div",7)(11,"div",8)(12,"div",9),w(13),F(),N(14,"div",10)(15,"div",11)(16,"div",12),w(17,"\u{1F333}"),F(),N(18,"div")(19,"div",13),w(20),F(),N(21,"div",14),w(22),F()()(),N(23,"div",11)(24,"div",12),w(25,"\u{1F3F0}"),F(),N(26,"div")(27,"div",13),w(28),F(),N(29,"div",14),w(30),F()()()()(),N(31,"div",15)(32,"div",9),w(33),F(),N(34,"div",16)(35,"div",17)(36,"div",18),w(37," 1 "),F(),N(38,"div",19),w(39,"1\u20134"),F()(),N(40,"div",17)(41,"div",20),w(42," 5 "),F(),N(43,"div",19),w(44,"5\u201320"),F()(),N(45,"div",17)(46,"div",20),w(47,"25"),F(),N(48,"div",19),w(49,"25\u2013100"),F()(),N(50,"div",17)(51,"div",21)(52,"span",22),w(53,"125"),F()(),N(54,"div",19),w(55,"125\u2013500"),F()()()(),N(56,"div",15)(57,"div",9),w(58),F(),N(59,"div",16),he(),N(60,"svg",23),Z(61,"g",24)(62,"g",25)(63,"g",26)(64,"g",27)(65,"g",28),N(66,"g",24),Z(67,"circle",29),F(),N(68,"g",25),Z(69,"circle",30),F(),N(70,"g",26),Z(71,"circle",31),F(),N(72,"g",27),Z(73,"line",32)(74,"circle",33),F(),N(75,"g",28),Z(76,"circle",34),F()(),Ve(),N(77,"div",35),he(),N(78,"svg",36)(79,"g"),Z(80,"polygon",37),F(),N(81,"g"),Z(82,"circle",38),F(),N(83,"g"),Z(84,"polygon",39)(85,"polygon",40)(86,"polygon",41),F(),N(87,"g"),Z(88,"polygon",42)(89,"polygon",43),F(),N(90,"g"),Z(91,"polygon",44)(92,"polygon",45)(93,"polygon",46)(94,"polygon",47),F()()(),N(95,"svg",23),Z(96,"g",48)(97,"g",49)(98,"g",50)(99,"g",51)(100,"g",52)(101,"g",53),N(102,"g",48),Z(103,"rect",54),F(),N(104,"g",49),Z(105,"rect",55),F(),N(106,"g",50),Z(107,"rect",56),F(),N(108,"g",51),Z(109,"rect",57)(110,"rect",58),F(),N(111,"g",52),Z(112,"rect",59)(113,"rect",60)(114,"rect",61)(115,"rect",62)(116,"rect",63),F()(),N(117,"svg",23),Z(118,"g",64)(119,"g",49)(120,"g",65)(121,"g",66)(122,"g",28),N(123,"g",64),Z(124,"polygon",67),F(),N(125,"g",49),Z(126,"circle",68),F(),N(127,"g",65),Z(128,"line",69)(129,"line",70)(130,"line",71),F(),N(131,"g",66),Z(132,"polygon",72)(133,"circle",73)(134,"circle",74)(135,"circle",75),F(),N(136,"g",28),Z(137,"polygon",76),F()()()(),Ve(),N(138,"div",15)(139,"div",77),w(140),F(),N(141,"div",78),w(142),F(),N(143,"div",79)(144,"div",80)(145,"div",81),w(146,"2"),F(),N(147,"div",82),w(148,"2"),F(),N(149,"div",83),w(150,"1"),F()()()(),N(151,"div",8)(152,"div",9),w(153),F(),N(154,"div",84)(155,"div")(156,"div",85),w(157),F(),N(158,"div",86)(159,"div",87),w(160,"1"),F(),N(161,"div",88),w(162,"1"),F()(),N(163,"div",89),w(164),F()(),N(165,"div")(166,"div",85),w(167),F(),N(168,"div",86)(169,"div",87),w(170,"4"),F(),N(171,"div",90),w(172,"1"),F(),N(173,"span",91),w(174,"CRIT!"),F()(),N(175,"div",89),w(176),F()(),N(177,"div")(178,"div",85),w(179),F(),N(180,"div",86)(181,"div",87),w(182,"1"),F(),N(183,"div",92),w(184,"4"),F(),N(185,"span",93),w(186,"MISS!"),F()(),N(187,"div",89),w(188),F()()()(),N(189,"div",15)(190,"div",77),w(191),F(),N(192,"div",94)(193,"div")(194,"div",95),w(195),F(),N(196,"div",96),Z(197,"div",97)(198,"div",97)(199,"div",97)(200,"div",97)(201,"div",97)(202,"div",97)(203,"div",98)(204,"div",98)(205,"div",97)(206,"div",97)(207,"div",97)(208,"div",97)(209,"div",97)(210,"div",97)(211,"div",97)(212,"div",97)(213,"div",97)(214,"div",97)(215,"div",97)(216,"div",97)(217,"div",97)(218,"div",97)(219,"div",97)(220,"div",97)(221,"div",97),N(222,"div",99),w(223,"2"),F(),Z(224,"div",100),N(225,"div",101),w(226,"\u{1F3F0}"),F()()(),N(227,"div")(228,"div",95),w(229),F(),N(230,"div",102),Z(231,"div",97)(232,"div",97)(233,"div",97)(234,"div",97)(235,"div",97)(236,"div",97)(237,"div",98)(238,"div",98)(239,"div",98)(240,"div",97)(241,"div",97)(242,"div",97)(243,"div",97)(244,"div",97)(245,"div",97)(246,"div",97)(247,"div",97)(248,"div",97)(249,"div",97)(250,"div",97)(251,"div",97)(252,"div",97)(253,"div",97)(254,"div",97)(255,"div",97),N(256,"div",103),w(257,"3"),F(),Z(258,"div",100),N(259,"div",104),w(260,"\u{1F3F0}"),F()()()()(),N(261,"div",105)(262,"div",15)(263,"div",9),w(264),F(),N(265,"div",16)(266,"div",106)(267,"div",107),w(268,"\u{1F331}"),F(),N(269,"div",108),w(270),F()(),N(271,"div",109),w(272,"\u2192"),F(),N(273,"div",106)(274,"div",107),w(275,"\u{1F33F}"),F(),N(276,"div",108),w(277),F()(),N(278,"div",109),w(279,"\u2192"),F(),N(280,"div",106)(281,"div",107),w(282,"\u{1F333}"),F(),N(283,"div",110),w(284),F()()()(),N(285,"div",15)(286,"div",111),w(287),F(),N(288,"div",112)(289,"div",3),Z(290,"div",113),N(291,"div",19),w(292),F()(),N(293,"div",3),Z(294,"div",114),N(295,"div",19),w(296),F()(),N(297,"div",3),Z(298,"div",115),N(299,"div",19),w(300,"Neutral"),F()()()()(),N(301,"div",116)(302,"div",9),w(303),F(),N(304,"div",117),he(),N(305,"svg",118)(306,"g"),Z(307,"circle",119),F(),N(308,"g"),Z(309,"circle",120),F()(),N(310,"svg",118)(311,"g"),Z(312,"circle",119),F(),N(313,"g"),Z(314,"circle",120),F(),N(315,"g"),Z(316,"circle",121),F()(),N(317,"svg",118)(318,"g"),Z(319,"circle",119),F(),N(320,"g"),Z(321,"circle",120),F(),N(322,"g"),Z(323,"circle",121),F(),N(324,"g"),Z(325,"line",122)(326,"circle",123),F()(),N(327,"svg",118)(328,"g"),Z(329,"circle",119),F(),N(330,"g"),Z(331,"circle",120),F(),N(332,"g"),Z(333,"circle",121),F(),N(334,"g"),Z(335,"line",122)(336,"circle",123),F(),N(337,"g"),Z(338,"circle",124),F()()(),Ve(),N(339,"div",125),he(),N(340,"svg",126)(341,"g"),Z(342,"polygon",37),F(),N(343,"g"),Z(344,"circle",38),F()(),N(345,"svg",126)(346,"g"),Z(347,"polygon",37),F(),N(348,"g"),Z(349,"circle",38),F(),N(350,"g"),Z(351,"polygon",39)(352,"polygon",40)(353,"polygon",41),F()(),N(354,"svg",126)(355,"g"),Z(356,"polygon",37),F(),N(357,"g"),Z(358,"circle",38),F(),N(359,"g"),Z(360,"polygon",39)(361,"polygon",40)(362,"polygon",41),F(),N(363,"g"),Z(364,"polygon",42)(365,"polygon",43),F()(),N(366,"svg",36)(367,"g"),Z(368,"polygon",37),F(),N(369,"g"),Z(370,"circle",38),F(),N(371,"g"),Z(372,"polygon",39)(373,"polygon",40)(374,"polygon",41),F(),N(375,"g"),Z(376,"polygon",42)(377,"polygon",43),F(),N(378,"g"),Z(379,"polygon",44)(380,"polygon",45)(381,"polygon",46)(382,"polygon",47),F()()(),Ve(),N(383,"div",117),he(),N(384,"svg",127)(385,"g"),Z(386,"rect",128),F(),N(387,"g"),Z(388,"rect",129),F()(),N(389,"svg",127)(390,"g"),Z(391,"rect",128),F(),N(392,"g"),Z(393,"rect",129),F(),N(394,"g"),Z(395,"rect",130),F()(),N(396,"svg",127)(397,"g"),Z(398,"rect",128),F(),N(399,"g"),Z(400,"rect",129),F(),N(401,"g"),Z(402,"rect",130),F(),N(403,"g"),Z(404,"rect",131)(405,"rect",132),F()(),N(406,"svg",127)(407,"g"),Z(408,"rect",128),F(),N(409,"g"),Z(410,"rect",129),F(),N(411,"g"),Z(412,"rect",130),F(),N(413,"g"),Z(414,"rect",131)(415,"rect",132),F(),N(416,"g"),Z(417,"rect",133)(418,"rect",134)(419,"rect",135)(420,"rect",136)(421,"rect",137),F()()(),Ve(),N(422,"div",125),he(),N(423,"svg",118)(424,"g"),Z(425,"polygon",138),F(),N(426,"g"),Z(427,"circle",139),F()(),N(428,"svg",118)(429,"g"),Z(430,"polygon",138),F(),N(431,"g"),Z(432,"circle",139),F(),N(433,"g"),Z(434,"line",140)(435,"line",141)(436,"line",142),F()(),N(437,"svg",118)(438,"g"),Z(439,"polygon",138),F(),N(440,"g"),Z(441,"circle",139),F(),N(442,"g"),Z(443,"line",140)(444,"line",141)(445,"line",142),F(),N(446,"g"),Z(447,"polygon",143)(448,"circle",144)(449,"circle",145)(450,"circle",146),F()(),N(451,"svg",118)(452,"g"),Z(453,"polygon",138),F(),N(454,"g"),Z(455,"circle",139),F(),N(456,"g"),Z(457,"line",140)(458,"line",141)(459,"line",142),F(),N(460,"g"),Z(461,"polygon",143)(462,"circle",144)(463,"circle",145)(464,"circle",146),F(),N(465,"g"),Z(466,"polygon",147),F()()()()()()()),t&2&&(b(5),K(r.settings.t("GAME_GUIDE")),b(2),K(r.settings.t("TURN_BASED_STRATEGY")),b(6),K(r.settings.t("VICTORY_CONDITIONS")),b(7),K(r.settings.t("MONOPOLY_LABEL")),b(2),K(r.settings.t("MONOPOLY_DESC")),b(6),K(r.settings.t("ANNIHILATION")),b(2),K(r.settings.t("ANNIHILATION_DESC")),b(3),K(r.settings.t("UNIT_EVOLUTION")),b(8),ct("clip-path","polygon(50% 0%, 0% 100%, 100% 100%)"),b(17),K(r.settings.t("NEW_DESIGN_UNIT")),b(82),K(r.settings.t("EVOLUTION")),b(2),K(r.settings.t("EVOLUTION_DESC")),b(11),K(r.settings.t("COMBAT_DEEP_DIVE")),b(4),K(r.settings.t("SUCCESSFUL_ATTACK")),b(7),K(r.settings.t("SUCCESSFUL_ATTACK_DESC")),b(3),K(r.settings.t("CRITICAL_HIT")),b(9),K(r.settings.t("CRITICAL_HIT_DESC")),b(3),K(r.settings.t("MISS")),b(9),K(r.settings.t("MISS_DESC")),b(3),K(r.settings.t("MOVEMENT")),b(4),K(r.settings.t("T1_1_TILE")),b(30),ct("left",6,"px")("top",6,"px"),b(4),K(r.settings.t("T3_3_TILES")),b(30),ct("right",6,"px")("bottom",6,"px"),b(5),K(r.settings.t("FOREST_CYCLE")),b(6),K(r.settings.t("TURN_1")),b(7),K(r.settings.t("TURN_2")),b(7),K(r.settings.t("PLUS_8_WOOD_PER_TURN")),b(3),K(r.settings.t("WALL_LEGEND")),b(5),K(r.settings.t("PLAYER")),b(4),K(r.settings.t("AI_FACTION")),b(7),K(r.settings.t("NEW_UNIT_EVOLUTION")))},dependencies:[Un],styles:[`*,*:before,*:after{box-sizing:border-box}.merge-loop{position:relative;width:160px;height:80px}.merge-loop .unit{position:absolute;top:20px;display:flex;align-items:center;justify-content:center;width:40px;height:40px;clip-path:polygon(50% 0%,0% 100%,100% 100%);font-weight:700}.merge-loop .u1{left:10px;background:#3b82f6;color:#fff;animation:u1ToCenter 1.6s ease-in-out infinite alternate}.merge-loop .u2{right:10px;background:#3b82f6;color:#fff;animation:u2ToCenter 1.6s ease-in-out infinite alternate}@keyframes u1ToCenter{0%{transform:translate(0)}50%{transform:translate(44px)}to{transform:translate(0)}}@keyframes u2ToCenter{0%{transform:translate(0)}50%{transform:translate(-44px)}to{transform:translate(0)}}.merge-loop .result{position:absolute;left:36%;top:18px;transform:translate(-50%);width:42px;height:42px;border-radius:8px;background:#60a5fa;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;opacity:0;animation:resultAppear 1.6s ease-in-out infinite alternate,tremble .18s ease-in-out .7s infinite}@keyframes resultAppear{0%{opacity:0;transform:translate(-50%) scale(.8)}50%{opacity:1;transform:translate(-50%) scale(1.05)}to{opacity:0;transform:translate(-50%) scale(.8)}}.shake{animation:tremble .18s ease-in-out 0s 1 normal forwards}@keyframes tremble{0%{transform:translate(0) rotate(0)}20%{transform:translate(-1px,.5px) rotate(-.5deg)}40%{transform:translate(1px,-.5px) rotate(.6deg)}60%{transform:translate(-1px,.5px) rotate(-.6deg)}80%{transform:translate(1px,-.5px) rotate(.4deg)}to{transform:translate(0) rotate(0)}}.hit-flash{animation:hitFlash .3s ease-out 1}@keyframes hitFlash{0%{filter:brightness(1)}30%{filter:brightness(1.8)}to{filter:brightness(1)}}.combat-stage{position:relative;width:192px;height:100px;background:#11182799;border:1px solid #374151;border-radius:8px;overflow:hidden}.attacker,.defender{position:absolute;width:40px;height:40px;display:flex;align-items:center;justify-content:center;font-weight:700}.square{aspect-ratio:1 / 1;right:12px;top:36px;background:#3b82f6;color:#fff}.triangle{background:#ef4444;color:#fff;clip-path:polygon(50% 0%,0% 100%,100% 100%);left:12px;top:36px;animation:attackMove .9s ease-in-out infinite alternate}.circle{background:#3b82f6;color:#fff;border-radius:9999px;right:16px;top:36px}@keyframes attackMove{0%{transform:translate(0)}to{transform:translate(100px)}}.defender-fade{animation:defenderFade 1.8s ease-in-out infinite}@keyframes defenderFade{0%{opacity:1}60%{opacity:1}to{opacity:.2}}.crit-pop{position:absolute;right:16px;top:10px;font-size:12px;font-weight:800;color:#fde047;text-shadow:0 2px 4px rgba(0,0,0,.5);animation:critFloat 1.8s ease-in-out infinite}@keyframes critFloat{0%{transform:translateY(0);opacity:0}30%{transform:translateY(-6px);opacity:1}to{transform:translateY(-12px);opacity:0}}.miss-pop{position:absolute;right:20px;top:10px;font-size:12px;font-weight:800;color:#93c5fd;text-shadow:0 2px 4px rgba(0,0,0,.5);animation:missFloat 1.8s ease-in-out infinite}@keyframes missFloat{0%{transform:translateY(0);opacity:0}30%{transform:translateY(-6px);opacity:1}to{transform:translateY(-12px);opacity:0}}.path-grid{position:relative;width:160px;height:160px;display:grid;grid-template-columns:repeat(5,1fr);grid-template-rows:repeat(5,1fr);gap:4px;background:#11182799;border:1px solid #374151;border-radius:8px;--grid-px: 160px;--grid-gap: 4px;--cols: 5;--cell: calc((var(--grid-px) - (var(--grid-gap) * (var(--cols) - 1))) / var(--cols));--step: calc(var(--cell) + var(--grid-gap));--center-offset: calc(var(--cell) / 2 - 12px)}.path-cell{background:#111827;border-radius:4px;border:1px solid #374151}.path-cell.active{background:#0f766e;border-color:#14b8a6}.mover{position:absolute;width:24px;height:24px;display:flex;align-items:center;justify-content:center;font-weight:700;box-shadow:0 0 0 2px #0000004d}.mover.circle{border-radius:50%;background:#3b82f6;color:#fff}.mover.triangle{background:#ef4444;color:#fff;clip-path:polygon(50% 0%,0% 100%,100% 100%)}.t1-path{left:0;top:0;animation:t1Path 1.6s ease-in-out infinite alternate}@keyframes t1Path{0%{transform:translate(calc(var(--start-x) * var(--step) + var(--center-offset)),calc(var(--start-y) * var(--step) + var(--center-offset)))}to{transform:translate(calc((var(--start-x) + 1) * var(--step) + var(--center-offset)),calc(var(--start-y) * var(--step) + var(--center-offset)))}}.t3-path{left:-2px;top:0;animation:t3Path 3.2s ease-in-out infinite}@keyframes t3Path{0%{transform:translate(calc(var(--start-x) * var(--step) + var(--center-offset)),calc(var(--start-y) * var(--step) + var(--center-offset)))}33%{transform:translate(calc((var(--start-x) + 1) * var(--step) + var(--center-offset)),calc(var(--start-y) * var(--step) + var(--center-offset)))}66%{transform:translate(calc((var(--start-x) + 2) * var(--step) + var(--center-offset)),calc(var(--start-y) * var(--step) + var(--center-offset)))}to{transform:translate(calc((var(--start-x) + 2) * var(--step) + var(--center-offset)),calc((var(--start-y) + 1) * var(--step) + var(--center-offset)))}}.path-line{position:absolute;height:4px;left:calc(var(--start-x) * var(--step) + (var(--cell) / 2));top:calc(var(--start-y) * var(--step) + (var(--cell) / 2) - 2px);width:calc(var(--line-steps) * var(--step));background-image:repeating-linear-gradient(to right,rgba(20,184,166,.9) 0,rgba(20,184,166,.9) 6px,transparent 6px,transparent 12px);border-radius:2px}.path-animation{animation:pathDraw 1.6s ease-in-out infinite alternate}@keyframes pathDraw{0%{clip-path:inset(0 100% 0 0)}to{clip-path:inset(0 0 0 0)}}.castle{position:absolute;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:6px;background:#3b82f633;color:#93c5fd;filter:drop-shadow(0 0 8px rgba(59,130,246,.8))}.castle.red{background:#ef444433;color:#fca5a5;filter:drop-shadow(0 0 8px rgba(239,68,68,.8))}.unit-svg-wrapper-game_rules:hover{transform:scale(1)}
`],encapsulation:2})};var Gm=class n{constructor(e){this.gameEngine=e}openExternalLink(e){let t=window.open(e,"_blank","noopener,noreferrer");t&&t.focus()}static \u0275fac=function(t){return new(t||n)(_e(wi))};static \u0275cmp=fn({type:n,selectors:[["app-support-community"]],decls:51,vars:0,consts:[[1,"fixed","inset-0","bg-black/60","flex","items-center","justify-center","z-50"],[1,"bg-gray-900","border","border-gray-700","rounded-lg","p-6","w-[880px]","max-w-[95vw]","mx-4","shadow-xl"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-2xl","font-bold","text-white"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-full","bg-gray-700","hover:bg-gray-600","text-white","text-lg","cursor-pointer",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"bg-gray-800/60","border","border-gray-700","rounded-lg","p-4"],[1,"text-lg","font-semibold","mb-3","text-white"],[1,"text-sm","text-gray-300","mb-2","font-medium"],[1,"flex","items-start","gap-4"],[1,"w-32","h-32","bg-white","rounded-lg","p-2","border","border-gray-300","flex","items-center","justify-center","shrink-0"],["src","https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://send.monobank.ua/jar/2fqGoPhV7G","alt","QR Code","referrerpolicy","no-referrer",1,"w-full","h-full"],[1,"flex-1"],[1,"text-[10px]","text-gray-400","mb-2","break-all","font-mono"],[1,"flex","flex-col","gap-2"],[1,"px-4","py-2","rounded-lg","bg-blue-600","hover:bg-blue-500","text-white","text-sm","font-bold","cursor-pointer","transition-colors",3,"click"],[1,"px-4","py-2","rounded-lg","bg-gray-700","hover:bg-gray-600","text-white","text-sm","cursor-pointer","transition-colors",3,"click"],[1,"mt-6","border-t","border-gray-700","pt-4"],[1,"w-full","px-4","py-2","rounded-lg","bg-indigo-600","hover:bg-indigo-500","text-white","text-sm","font-bold","cursor-pointer","transition-colors",3,"click"],[1,"text-xs","text-emerald-400","mt-4","font-medium","italic"],[1,"flex","flex-col","gap-3"],[1,"flex","items-center","justify-start","gap-3","px-4","py-3","rounded-lg","bg-[#5865F2]","hover:brightness-110","text-white","text-sm","font-bold","cursor-pointer","transition-all",3,"click"],[1,"text-xl"],[1,"text-left"],[1,"leading-none"],[1,"text-[10px]","font-normal","opacity-80","mt-1"],[1,"flex","items-center","justify-start","gap-3","px-4","py-3","rounded-lg","bg-red-600","hover:bg-red-500","text-white","text-sm","font-bold","cursor-pointer","transition-all",3,"click"]],template:function(t,r){t&1&&(N(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),w(4,"Support & Community"),F(),N(5,"button",4),Ar("click",function(){return r.gameEngine.closeSupport()}),w(6," \u2716 "),F()(),N(7,"div",5)(8,"div",6)(9,"div",7),w(10,"Donate"),F(),N(11,"div",8),w(12,"Monobank Jar"),F(),N(13,"div",9)(14,"div",10),Z(15,"img",11),F(),N(16,"div",12)(17,"div",13),w(18,"send.monobank.ua/jar/2fqGoPhV7G"),F(),N(19,"div",14)(20,"button",15),Ar("click",function(){return r.openExternalLink("https://send.monobank.ua/jar/2fqGoPhV7G")}),w(21," Open Link \u{1F4DC} "),F(),N(22,"button",16),Ar("click",function(){return r.gameEngine.copySupportLink("https://send.monobank.ua/jar/2fqGoPhV7G")}),w(23," Copy Link \u{1F4CB} "),F()()()(),N(24,"div",17)(25,"div",8),w(26,"Donatello"),F(),N(27,"button",18),Ar("click",function(){return r.openExternalLink("https://donatello.to/jaerbi")}),w(28," Go to Donatello.to \u{1F48E} "),F()(),N(29,"div",19),w(30,"Thank you for supporting the project!"),F()(),N(31,"div",6)(32,"div",7),w(33,"Social & Feedback"),F(),N(34,"div",20)(35,"button",21),Ar("click",function(){return r.openExternalLink("https://discord.gg/c9tCWFtFaG")}),N(36,"span",22),w(37,"\u{1F5E8}\uFE0F"),F(),N(38,"div",23)(39,"div",24),w(40,"Discord Server"),F(),N(41,"div",25),w(42,"Share ideas & feedback"),F()()(),N(43,"button",26),Ar("click",function(){return r.openExternalLink("https://www.youtube.com/@jaerb1")}),N(44,"span",22),w(45,"\u25B6\uFE0F"),F(),N(46,"div",23)(47,"div",24),w(48,"YouTube"),F(),N(49,"div",25),w(50,"Dev logs & gameplay"),F()()()()()()()())},dependencies:[Un],encapsulation:2})};function OG(n,e){if(n&1){let t=Et();v(0,"button",7),ae("click",function(){ye(t);let i=U();return ve(i.switchToMyStats())}),w(1," My Statistics "),_()}if(n&2){let t=U();Ue("text-white",t.activeTab()==="mystats")("border-b-2",t.activeTab()==="mystats")("border-indigo-500",t.activeTab()==="mystats")}}function FG(n,e){n&1&&(v(0,"div",15)(1,"span",16),$(2,"span",17),v(3,"span"),w(4,"Loading..."),_()()())}function LG(n,e){if(n&1&&$(0,"img",27),n&2){let t=U().$implicit;ze("src",t.userPhoto,ii)}}function VG(n,e){n&1&&(v(0,"div",28),w(1,"\u{1F464}"),_())}function UG(n,e){if(n&1&&(v(0,"tr",22)(1,"td",23),w(2),_(),v(3,"td",24),si(4,LG,1,1,"img",25)(5,VG,2,0,"ng-template",null,0,H_),w(7),_(),v(8,"td",23),w(9),_(),v(10,"td",26),w(11),_()()),n&2){let t=e.$implicit,r=e.index,i=uu(6),o=U(3);Ue("bg-indigo-900/40",o.isCurrentPlayer(t))("border",o.isCurrentPlayer(t))("border-indigo-500",o.isCurrentPlayer(t)),b(2),K(r+1),b(2),ze("ngIf",t.userPhoto)("ngIfElse",i),b(3),fe(" ",t.playerName," "),b(2),K(t.victoryType),b(2),K(t.turnsPlayed)}}function BG(n,e){if(n&1&&(v(0,"tr")(1,"td",29),w(2),$(3,"br"),v(4,"span",30),w(5,"Be the first to claim victory!"),_()()()),n&2){let t=U(3);b(2),En(" No scores found for ",t.settings.difficultyLabel()," / ",t.settings.mapSizeLabel()," yet. ")}}function jG(n,e){if(n&1&&(v(0,"div")(1,"table",18)(2,"thead")(3,"tr",19)(4,"th",20),w(5,"Rank"),_(),v(6,"th",20),w(7,"Name"),_(),v(8,"th",20),w(9,"Victory Type"),_(),v(10,"th",20),w(11,"Turns"),_()()(),v(12,"tbody"),si(13,UG,12,12,"tr",21)(14,BG,6,2,"tr",9),_()()()),n&2){let t=U(2);b(13),ze("ngForOf",t.scores()),b(),ze("ngIf",t.scores().length===0)}}function HG(n,e){if(n&1&&(v(0,"div")(1,"div",11)(2,"span"),w(3,"Top 10 scores for:"),_(),v(4,"span",12),w(5),_(),v(6,"span",13),w(7),_()(),si(8,FG,5,0,"div",14)(9,jG,15,2,"div",9),_()),n&2){let t=U();b(5),fe(" ",t.settings.difficultyLabel()," "),b(2),fe(" ",t.settings.mapSizeLabel()," "),b(),ze("ngIf",t.loading()),b(),ze("ngIf",!t.loading())}}function $G(n,e){n&1&&(v(0,"div",15)(1,"span",16),$(2,"span",17),v(3,"span"),w(4,"Loading your stats..."),_()()())}function GG(n,e){n&1&&(v(0,"div",35),w(1," No victories recorded yet. keep playing! "),_())}function zG(n,e){if(n&1&&(v(0,"div",36)(1,"div",37)(2,"span",38),w(3),_(),v(4,"span",39),w(5),_()(),v(6,"div",40)(7,"span",41),w(8,"Best Performance"),_(),v(9,"span",42),w(10),_()(),v(11,"div",43),w(12),Hs(13,"date"),_()()),n&2){let t=e.$implicit;b(3),fe(" ",t.difficulty," "),b(2),fe(" ",t.mapSize," "),b(5),fe("",t.turnsPlayed," Turns"),b(2),En(" ",t.victoryType," \u2022 ",Xa(13,5,t.timestamp,"mediumDate")," ")}}function qG(n,e){if(n&1&&(v(0,"div",32),si(1,GG,2,0,"div",33)(2,zG,14,8,"div",34),_()),n&2){let t=U(2);b(),ze("ngIf",t.myBestScores().length===0),b(),ze("ngForOf",t.myBestScores())}}function WG(n,e){if(n&1&&(v(0,"div",22),si(1,$G,5,0,"div",14)(2,qG,3,2,"div",31),_()),n&2){let t=U();b(),ze("ngIf",t.loading()),b(),ze("ngIf",!t.loading())}}var zm=class n{constructor(e,t,r,i){this.firebase=e;this.gameEngine=t;this.playerName=r;this.settings=i;this.fetch()}loading=Y(!0);scores=Y([]);activeTab=Y("top10");myBestScores=Y([]);async fetch(){this.loading.set(!0);try{let e=this.settings.difficulty(),t=this.settings.mapSize(),r=await this.firebase.getTopScores(10,e,t);this.scores.set(r??[])}catch{this.scores.set([])}finally{this.loading.set(!1)}}async switchToMyStats(){this.activeTab.set("mystats"),this.loading.set(!0);let e=this.firebase.user$();if(!e){this.myBestScores.set([]),this.loading.set(!1);return}try{let t=await this.firebase.getUserScores(e.uid),r=new Map;t.forEach(i=>{let o=`${i.difficulty}-${i.mapSize}`;(!r.has(o)||i.turnsPlayed<r.get(o).turnsPlayed)&&r.set(o,i)}),this.myBestScores.set(Array.from(r.values()).sort((i,o)=>{let s={baby:0,normal:1,hard:2,nightmare:3},a=s[o.difficulty]-s[i.difficulty];return a!==0?a:i.mapSize-o.mapSize}))}catch(t){console.error(t),this.myBestScores.set([])}finally{this.loading.set(!1)}}isCurrentPlayer(e){return(e?.playerName??"")===this.playerName.name()}static \u0275fac=function(t){return new(t||n)(_e(bi),_e(wi),_e(Kc),_e(In))};static \u0275cmp=fn({type:n,selectors:[["app-leaderboard-modal"]],decls:13,vars:9,consts:[["noPhoto",""],[1,"fixed","inset-0","bg-black/60","flex","items-center","justify-center","z-50"],[1,"bg-gray-900","border","border-gray-700","rounded-lg","p-6","w-[720px]","max-w-[95vw]","mx-4","shadow-xl"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-2xl","font-bold","text-white"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-full","bg-gray-700","hover:bg-gray-600","text-white","text-lg","cursor-pointer",3,"click"],[1,"flex","border-b","border-gray-700","mb-4"],[1,"px-4","py-2","text-sm","font-medium","text-gray-400","hover:text-gray-200","transition-colors",3,"click"],["class","px-4 py-2 text-sm font-medium text-gray-400 hover:text-gray-200 transition-colors",3,"text-white","border-b-2","border-indigo-500","click",4,"ngIf"],[4,"ngIf"],["class","text-white",4,"ngIf"],[1,"text-sm","text-gray-300","mb-3","flex","items-center","gap-2"],[1,"px-2","py-0.5","rounded","bg-indigo-900","text-indigo-100","font-semibold","border","border-indigo-700"],[1,"px-2","py-0.5","rounded","bg-emerald-900","text-emerald-100","font-semibold","border","border-emerald-700"],["class","min-h-24 flex items-center justify-center",4,"ngIf"],[1,"min-h-24","flex","items-center","justify-center"],[1,"inline-flex","items-center","gap-2","text-gray-300"],[1,"w-4","h-4","border-2","border-gray-500","border-t-transparent","rounded-full","animate-spin"],[1,"w-full","text-sm"],[1,"text-gray-300"],[1,"text-left","py-2","px-2","border-b","border-gray-700"],["class","text-white",3,"bg-indigo-900/40","border","border-indigo-500",4,"ngFor","ngForOf"],[1,"text-white"],[1,"py-2","px-2","border-b","border-gray-800"],[1,"py-2","px-2","border-b","border-gray-800","flex","items-center","gap-2"],["referrerpolicy","no-referrer","class","w-6 h-6 rounded-full border border-gray-600",3,"src",4,"ngIf","ngIfElse"],[1,"py-2","px-2","border-b","border-gray-800","font-mono","text-yellow-300"],["referrerpolicy","no-referrer",1,"w-6","h-6","rounded-full","border","border-gray-600",3,"src"],[1,"w-6","h-6","rounded-full","bg-gray-700","flex","items-center","justify-center","text-xs","text-gray-400","border","border-gray-600"],["colspan","4",1,"py-8","text-center","text-gray-400","italic"],[1,"text-xs","opacity-75"],["class","grid grid-cols-1 md:grid-cols-2 gap-4",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["class","col-span-2 text-center py-8 text-gray-400",4,"ngIf"],["class","bg-gray-800/50 p-4 rounded border border-gray-700",4,"ngFor","ngForOf"],[1,"col-span-2","text-center","py-8","text-gray-400"],[1,"bg-gray-800/50","p-4","rounded","border","border-gray-700"],[1,"flex","justify-between","items-start","mb-2"],[1,"px-2","py-0.5","rounded","bg-indigo-900","text-indigo-100","text-xs","font-semibold","border","border-indigo-700","uppercase","tracking-wide"],[1,"px-2","py-0.5","rounded","bg-emerald-900","text-emerald-100","text-xs","font-semibold","border","border-emerald-700"],[1,"flex","justify-between","items-end"],[1,"text-gray-400","text-sm"],[1,"text-xl","font-mono","text-yellow-300"],[1,"mt-1","text-xs","text-gray-500"]],template:function(t,r){t&1&&(v(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),w(4,"Leaderboard"),_(),v(5,"button",5),ae("click",function(){return r.gameEngine.closeLeaderboard()}),w(6," \u2716 "),_()(),v(7,"div",6)(8,"button",7),ae("click",function(){return r.activeTab.set("top10")}),w(9," Top 10 "),_(),si(10,OG,2,6,"button",8),_(),si(11,HG,10,4,"div",9)(12,WG,3,2,"div",10),_()()),t&2&&(b(8),Ue("text-white",r.activeTab()==="top10")("border-b-2",r.activeTab()==="top10")("border-indigo-500",r.activeTab()==="top10"),b(2),ze("ngIf",r.firebase.user$()),b(),ze("ngIf",r.activeTab()==="top10"),b(),ze("ngIf",r.activeTab()==="mystats"))},dependencies:[Un,Cp,lE,bu],encapsulation:2})};var KG=["boardContainer"],ut=(n,e)=>({x:n,y:e}),QG=()=>[10,20,30],YG=(n,e)=>e.id,_O=(n,e)=>e.date;function JG(n,e){if(n&1){let t=Et();v(0,"div",61)(1,"div",207)(2,"span",208),w(3),_(),v(4,"button",209),ae("click",function(){ye(t);let i=U();return ve(i.firebase.logout())}),w(5),_()(),v(6,"div",210),$(7,"img",211)(8,"div",212),_()()}if(n&2){let t=U();b(3),fe(" ",t.settings.t("VERIFIED")," "),b(2),fe(" ",t.settings.t("LOGOUT")," "),b(2),ze("src",e.photoURL,ii)}}function ZG(n,e){if(n&1){let t=Et();v(0,"button",213),ae("click",function(){ye(t);let i=U();return ve(i.firebase.loginWithGoogle())}),$(1,"div",214),v(2,"span",215),w(3),_()()}if(n&2){let t=U();b(3),fe(" ",t.settings.t("CONNECT")," ")}}function XG(n,e){if(n&1){let t=Et();v(0,"div",95)(1,"div",216)(2,"button",217),ae("click",function(){ye(t);let i=U();return ve(i.closeMobileMenu())}),he(),v(3,"svg",79),$(4,"path",218),_()(),Ve(),v(5,"button",219),ae("click",function(){ye(t);let i=U();return ve(i.gameEngine.toggleRules())}),w(6),_(),v(7,"button",219),ae("click",function(){ye(t);let i=U();return ve(i.gameEngine.toggleLeaderboard())}),w(8),_(),v(9,"button",219),ae("click",function(){ye(t);let i=U();return ve(i.gameEngine.toggleLog())}),w(10),_(),v(11,"button",219),ae("click",function(){ye(t);let i=U();return ve(i.navigateToFeedback())}),w(12),_(),v(13,"button",219),ae("click",function(){ye(t);let i=U();return ve(i.navigateToRoadmap())}),w(14),_(),v(15,"button",219),ae("click",function(){ye(t);let i=U();return ve(i.gameEngine.resetGame())}),w(16),_(),v(17,"button",219),ae("click",function(){ye(t);let i=U();return ve(i.gameEngine.toggleSettings())}),w(18),_()()()}if(n&2){let t=U();b(6),K(t.settings.t("INFO")),b(2),K(t.settings.t("RANKING")),b(2),K(t.settings.t("SYSTEM_LOG")),b(2),K(t.settings.t("FEEDBACK_MODULE")),b(2),K(t.settings.t("STRATEGIC_PLAN")),b(2),K(t.settings.t("RELOAD")),b(2),K(t.settings.t("SETTINGS"))}}function e7(n,e){if(n&1&&(v(0,"div",135),w(1),_()),n&2){let t=U();b(),Za(" ",t.settings.t("MONOPOLY")," ",t.gameEngine.monopolyTurnsLeft()," ",t.settings.t("LFT")," ")}}function t7(n,e){if(n&1&&(v(0,"div",222),w(1),_()),n&2){let t=U(2);b(),K(t.gameEngine.endReason())}}function n7(n,e){if(n&1){let t=Et();v(0,"div",223)(1,"div",226),w(2),_(),$(3,"input",227,1),v(5,"button",228),ae("click",function(){ye(t);let i=uu(4),o=U(2);return ve(o.gameEngine.confirmAndSaveScore(i.value))}),w(6),_()()}if(n&2){let t=U(2);b(2),K(t.settings.t("CONFIRM_NAME")),b(),ze("value",t.gameEngine.getPlayerName()),b(3),fe(" ",t.settings.t("SAVE_SCORE")," ")}}function r7(n,e){if(n&1){let t=Et();v(0,"div",143)(1,"div",220)(2,"h2",221),w(3),Hs(4,"titlecase"),_(),ue(5,t7,2,1,"div",222),ue(6,n7,7,3,"div",223),v(7,"button",224),ae("click",function(){ye(t);let i=U();return ve(i.gameEngine.resetGame())}),w(8),_()(),v(9,"button",225),ae("click",function(){ye(t);let i=U();return ve(i.gameEngine.toggleLeaderboard())}),w(10),_()()}if(n&2){let t=U();b(2),Ue("text-blue-400",t.gameEngine.gameStatus()==="player wins")("text-red-500",t.gameEngine.gameStatus()==="jaerbi wins"),b(),fe(" ",j_(4,9,t.gameEngine.gameStatus()),"! "),b(2),de(t.gameEngine.endReason()?5:-1),b(),de(t.gameEngine.gameStatus()==="player wins"&&t.gameEngine.isNamePromptOpen()?6:-1),b(2),fe(" ",t.settings.t("PLAY_AGAIN")," "),b(2),fe(" ",t.settings.t("VIEW_LEADERBOARD")," ")}}function i7(n,e){n&1&&$(0,"app-support-community")}function o7(n,e){n&1&&$(0,"app-leaderboard-modal")}function s7(n,e){if(n&1&&(v(0,"div",158)(1,"span",229),w(2),_()()),n&2){let t=U();b(2),fe(" ",t.gameEngine.baseHealth().ai," ")}}function a7(n,e){n&1&&(v(0,"span",238),w(1," \u{1F92C} "),_()),n&2&&ct("z-index",100)}function c7(n,e){n&1&&(v(0,"span",238),w(1," \u{1F620} "),_()),n&2&&ct("z-index",100)}function l7(n,e){if(n&1&&ue(0,a7,2,2,"span",237)(1,c7,2,2,"span",237),n&2){let t=U(3);de(t.gameEngine.isRage()?0:t.gameEngine.isAngry()?1:-1)}}function u7(n,e){n&1&&$(0,"div",233)}function d7(n,e){n&1&&(he(),v(0,"g",244),$(1,"polygon",247)(2,"polygon",248),_())}function h7(n,e){n&1&&(he(),v(0,"g",249),$(1,"rect",250),_(),v(2,"g",251),$(3,"rect",252)(4,"path",253),_())}function f7(n,e){if(n&1&&(v(0,"span",239),he(),v(1,"svg",240)(2,"defs")(3,"linearGradient",241),$(4,"stop",242)(5,"stop",243),_()(),ue(6,d7,3,0,":svg:g",244),v(7,"g"),$(8,"polygon",245)(9,"rect",246),_(),ue(10,h7,5,0),_()()),n&2){U();let t=U_(5);Ue("scale-50",t)("opacity-40",t)("translate-x-4",t)("-translate-y-4",t),b(6),de(t?-1:6),b(),Ue("scale-90",t),b(3),de(t?-1:10)}}function p7(n,e){n&1&&$(0,"div",254),n&2&&ct("height",2,"px")}function g7(n,e){if(n&1&&(v(0,"span",255),w(1),_(),v(2,"span",256),w(3),_()),n&2){let t=U(3);b(),fe(" ",t.gameEngine.baseHealth().player," "),b(2),fe(" ",t.gameEngine.reservePoints().player," ")}}function m7(n,e){if(n&1&&(v(0,"span",257),w(1),_(),v(2,"span",258),w(3),_()),n&2){let t=U(4);b(),fe(" ",t.gameEngine.baseHealth().ai," "),b(2),fe(" ",t.gameEngine.reservePoints().ai," ")}}function y7(n,e){if(n&1&&ue(0,m7,4,2),n&2){let t=U().$implicit,r=U().$implicit,i=U();de(i.gameEngine.isVisibleToPlayer(t,r)?0:-1)}}function v7(n,e){n&1&&(he(),v(0,"svg",264),$(1,"path",265),_())}function _7(n,e){n&1&&(he(),v(0,"svg",264),$(1,"path",266),_())}function E7(n,e){if(n&1){let t=Et();v(0,"button",263),ae("click",function(i){ye(t);let o=U(2),s=U(2).$implicit,a=U().$implicit,c=U();return ve(o.owner==="player"?c.onDestroyIconClick(i,s,a,s+1,a):c.onAttackIconClick(i,s,a,s+1,a))}),ue(1,v7,2,0,":svg:svg",264)(2,_7,2,0,":svg:svg",264),_()}if(n&2){let t=U(2),r=U(4);ct("width",r.gameEngine.iconSizePx,"px")("height",r.gameEngine.iconSizePx,"px")("z-index",45),Ue("bg-red-600",t.owner==="player")("bg-yellow-500",t.owner==="ai")("bg-gray-600",t.owner==="neutral"),b(),de(t.owner==="player"?1:2)}}function b7(n,e){if(n&1&&(v(0,"div",261),ue(1,E7,3,13,"button",262),_()),n&2){let t=U(),r=U(2).$implicit,i=U().$implicit,o=U();ct("right",-o.gameEngine.wallThicknessPx-2,"px")("width",o.gameEngine.wallThicknessPx,"px")("height",t.health,"%")("z-index",40)("transition","height 0.25s ease-out"),Ue("bg-lime-400",t.owner==="player")("bg-red-400",t.owner==="ai")("bg-gray-300",t.owner==="neutral")("shake",o.gameEngine.isWallShaking(t.id)),b(),de(o.gameEngine.canShowAttackIcon(it(19,ut,r,i),it(22,ut,r+1,i))?1:-1)}}function w7(n,e){if(n&1&&ue(0,b7,2,25,"div",260),n&2){let t=U(2).$implicit,r=U().$implicit,i=U();de(i.gameEngine.shouldRenderWall(it(1,ut,t,r),it(4,ut,t+1,r),e.owner)?0:-1)}}function I7(n,e){if(n&1){let t=Et();v(0,"button",269),ae("click",function(i){ye(t);let o=U(3).$implicit,s=U().$implicit,a=U();return ve(a.onBuildIconClick(i,o,s,o+1,s))}),w(1," \u2714 "),_()}if(n&2){let t=U(5);ct("font-size",t.gameEngine.iconSizePx,"px")("width",t.gameEngine.iconSizePx,"px")("height",t.gameEngine.iconSizePx,"px")("z-index",45)}}function S7(n,e){if(n&1&&(v(0,"span",268),w(1),_()),n&2){let t=U(3).$implicit,r=U().$implicit,i=U();b(),En(" ",i.settings.t("CD"),": ",i.gameEngine.edgeCooldownRemaining(it(2,ut,t,r),it(5,ut,t+1,r))," ")}}function T7(n,e){if(n&1&&(v(0,"div",261),ue(1,I7,2,8,"button",267),ue(2,S7,2,8,"span",268),_()),n&2){let t=U(2).$implicit,r=U().$implicit,i=U();ct("right",-i.gameEngine.wallThicknessPx-2,"px")("width",i.gameEngine.wallThicknessPx,"px")("height",100,"%")("z-index",40)("transition","height 0.25s ease-out"),Ue("bg-lime-700",i.gameEngine.buildMode()&&i.gameEngine.canBuildWallBetween(it(16,ut,t,r),it(19,ut,t+1,r)))("bg-transparent",!i.gameEngine.buildMode()||!i.gameEngine.canBuildWallBetween(it(22,ut,t,r),it(25,ut,t+1,r))),b(),de(i.gameEngine.canShowBuildIcon(it(28,ut,t,r),it(31,ut,t+1,r))?1:-1),b(),de((i.gameEngine.isVisibleToPlayer(t,r)||i.gameEngine.isVisibleToPlayer(t+1,r))&&i.gameEngine.edgeCooldownRemaining(it(34,ut,t,r),it(37,ut,t+1,r))>0?2:-1)}}function C7(n,e){if(n&1&&ue(0,w7,1,7)(1,T7,3,40,"div",259),n&2){let t,r=U().$implicit,i=U().$implicit,o=U();de((t=o.gameEngine.getWallBetween(r,i,r+1,i))?0:1,t)}}function x7(n,e){n&1&&(he(),v(0,"svg",264),$(1,"path",265),_())}function D7(n,e){n&1&&(he(),v(0,"svg",264),$(1,"path",266),_())}function A7(n,e){if(n&1){let t=Et();v(0,"button",263),ae("click",function(i){ye(t);let o=U(2),s=U(2).$implicit,a=U().$implicit,c=U();return ve(o.owner==="player"?c.onDestroyIconClick(i,s,a,s,a+1):c.onAttackIconClick(i,s,a,s,a+1))}),ue(1,x7,2,0,":svg:svg",264)(2,D7,2,0,":svg:svg",264),_()}if(n&2){let t=U(2),r=U(4);ct("width",r.gameEngine.iconSizePx,"px")("height",r.gameEngine.iconSizePx,"px")("z-index",45),Ue("bg-red-600",t.owner==="player")("bg-yellow-500",t.owner==="ai")("bg-gray-600",t.owner==="neutral"),b(),de(t.owner==="player"?1:2)}}function M7(n,e){if(n&1&&(v(0,"div",272),ue(1,A7,3,13,"button",262),_()),n&2){let t=U(),r=U(2).$implicit,i=U().$implicit,o=U();ct("bottom",-o.gameEngine.wallThicknessPx-2,"px")("height",o.gameEngine.wallThicknessPx,"px")("width",t.health,"%")("z-index",40)("transition","width 0.25s ease-out"),Ue("bg-lime-400",t.owner==="player")("bg-red-400",t.owner==="ai")("bg-gray-300",t.owner==="neutral")("shake",o.gameEngine.isWallShaking(t.id)),b(),de(o.gameEngine.canShowAttackIcon(it(19,ut,r,i),it(22,ut,r,i+1))?1:-1)}}function R7(n,e){if(n&1&&ue(0,M7,2,25,"div",271),n&2){let t=U(2).$implicit,r=U().$implicit,i=U();de(i.gameEngine.shouldRenderWall(it(1,ut,t,r),it(4,ut,t,r+1),e.owner)?0:-1)}}function N7(n,e){if(n&1){let t=Et();v(0,"button",275),ae("click",function(i){ye(t);let o=U(3).$implicit,s=U().$implicit,a=U();return ve(a.onBuildIconClick(i,o,s,o,s+1))}),w(1," \u2714 "),_()}if(n&2){let t=U(5);ct("font-size",t.gameEngine.iconSizePx,"px")("width",t.gameEngine.iconSizePx,"px")("height",t.gameEngine.iconSizePx,"px")("z-index",45)}}function P7(n,e){if(n&1&&(v(0,"span",274),w(1),_()),n&2){let t=U(3).$implicit,r=U().$implicit,i=U();b(),En(" ",i.settings.t("CD"),": ",i.gameEngine.edgeCooldownRemaining(it(2,ut,t,r),it(5,ut,t,r+1))," ")}}function k7(n,e){if(n&1&&(v(0,"div",272),ue(1,N7,2,8,"button",273),ue(2,P7,2,8,"span",274),_()),n&2){let t=U(2).$implicit,r=U().$implicit,i=U();ct("bottom",-i.gameEngine.wallThicknessPx-2,"px")("height",i.gameEngine.wallThicknessPx,"px")("width",100,"%")("z-index",40)("transition","width 0.25s ease-out"),Ue("bg-lime-700",i.gameEngine.buildMode()&&i.gameEngine.canBuildWallBetween(it(16,ut,t,r),it(19,ut,t,r+1)))("bg-transparent",!i.gameEngine.buildMode()||!i.gameEngine.canBuildWallBetween(it(22,ut,t,r),it(25,ut,t,r+1))),b(),de(i.gameEngine.canShowBuildIcon(it(28,ut,t,r),it(31,ut,t,r+1))?1:-1),b(),de((i.gameEngine.isVisibleToPlayer(t,r)||i.gameEngine.isVisibleToPlayer(t,r+1))&&i.gameEngine.edgeCooldownRemaining(it(34,ut,t,r),it(37,ut,t,r+1))>0?2:-1)}}function O7(n,e){if(n&1&&ue(0,R7,1,7)(1,k7,3,40,"div",270),n&2){let t,r=U().$implicit,i=U().$implicit,o=U();de((t=o.gameEngine.getWallBetween(r,i,r,i+1))?0:1,t)}}function F7(n,e){n&1&&(he(),v(0,"g"),$(1,"circle",287),_())}function L7(n,e){n&1&&(he(),v(0,"g"),$(1,"line",288)(2,"circle",289),_())}function V7(n,e){n&1&&(he(),v(0,"g"),$(1,"circle",290),_())}function U7(n,e){if(n&1&&(he(),v(0,"svg",279)(1,"g"),$(2,"circle",285),_(),v(3,"g"),$(4,"circle",286),_(),ue(5,F7,2,0,":svg:g"),ue(6,L7,3,0,":svg:g"),ue(7,V7,2,0,":svg:g"),_()),n&2){let t=U(3);b(5),de(t.level>=2?5:-1),b(),de(t.level>=3?6:-1),b(),de(t.level>=4?7:-1)}}function B7(n,e){n&1&&(he(),v(0,"g"),$(1,"polygon",293)(2,"polygon",294)(3,"polygon",295),_())}function j7(n,e){n&1&&(he(),v(0,"g"),$(1,"polygon",296)(2,"polygon",297),_())}function H7(n,e){n&1&&(he(),v(0,"g"),$(1,"polygon",298)(2,"polygon",299)(3,"polygon",300)(4,"polygon",301),_())}function $7(n,e){if(n&1&&(he(),v(0,"svg",280)(1,"g"),$(2,"polygon",291),_(),v(3,"g"),$(4,"circle",292),_(),ue(5,B7,4,0,":svg:g"),ue(6,j7,3,0,":svg:g"),ue(7,H7,5,0,":svg:g"),_()),n&2){let t=U(3);b(5),de(t.level>=2?5:-1),b(),de(t.level>=3?6:-1),b(),de(t.level>=4?7:-1)}}function G7(n,e){n&1&&(he(),v(0,"g"),$(1,"rect",304),_())}function z7(n,e){n&1&&(he(),v(0,"g"),$(1,"rect",305)(2,"rect",306),_())}function q7(n,e){n&1&&(he(),v(0,"g"),$(1,"rect",307)(2,"rect",308)(3,"rect",309)(4,"rect",310)(5,"rect",311),_())}function W7(n,e){if(n&1&&(he(),v(0,"svg",281)(1,"g"),$(2,"rect",302),_(),v(3,"g"),$(4,"rect",303),_(),ue(5,G7,2,0,":svg:g"),ue(6,z7,3,0,":svg:g"),ue(7,q7,6,0,":svg:g"),_()),n&2){let t=U(3);b(5),de(t.level>=2?5:-1),b(),de(t.level>=3?6:-1),b(),de(t.level>=4?7:-1)}}function K7(n,e){n&1&&(he(),v(0,"g"),$(1,"line",314)(2,"line",315)(3,"line",316),_())}function Q7(n,e){n&1&&(he(),v(0,"g"),$(1,"polygon",317)(2,"circle",318)(3,"circle",319)(4,"circle",320),_())}function Y7(n,e){n&1&&(he(),v(0,"g"),$(1,"polygon",321),_())}function J7(n,e){if(n&1&&(he(),v(0,"svg",279)(1,"g"),$(2,"polygon",312),_(),v(3,"g"),$(4,"circle",313),_(),ue(5,K7,4,0,":svg:g"),ue(6,Q7,5,0,":svg:g"),ue(7,Y7,2,0,":svg:g"),_()),n&2){let t=U(3);b(5),de(t.level>=2?5:-1),b(),de(t.level>=3?6:-1),b(),de(t.level>=4?7:-1)}}function Z7(n,e){if(n&1&&(v(0,"span",322),w(1," \u{1F6E1} "),_()),n&2){let t=U(6);ct("width",t.gameEngine.iconSizePx,"px")("height",t.gameEngine.iconSizePx,"px")("font-size",t.gameEngine.iconSizePx-2>8?t.gameEngine.iconSizePx-2:8,"px")("z-index",100)}}function X7(n,e){n&1&&(v(0,"span",323),w(1," \u{1F333} "),_()),n&2&&ct("z-index",100)}function ez(n,e){n&1&&(v(0,"span",324),w(1," \u{1F331} "),_()),n&2&&ct("z-index",100)}function tz(n,e){n&1&&(v(0,"span",324),w(1," \u{1F33F} "),_()),n&2&&ct("z-index",100)}function nz(n,e){if(n&1&&(v(0,"div",277)(1,"div",278),ue(2,U7,8,3,":svg:svg",279)(3,$7,8,3,":svg:svg",280)(4,W7,8,3,":svg:svg",281)(5,J7,8,3,":svg:svg",279),_(),ue(6,Z7,2,8,"span",282),ue(7,X7,2,2,"span",283)(8,ez,2,2,"span",284)(9,tz,2,2,"span",284),_()),n&2){let t,r=U(2),i=U(3);ct("transform",i.gameEngine.getNudgeFor(r.id)?"translate("+i.gameEngine.getNudgeFor(r.id).dx+"px,"+i.gameEngine.getNudgeFor(r.id).dy+"px)":"translate(0,0)"),Ue("shake",i.gameEngine.isUnitShaking(r.id)),b(),ct("width",i.gameEngine.tileUnitSizePx,"px")("height",i.gameEngine.tileUnitSizePx,"px"),Ue("theme-player",r.owner==="player")("theme-ai",r.owner==="ai")("fatigued",r.hasActed)("merge-anim",i.gameEngine.lastMergedUnitId()===r.id)("ring-offset-gray-800",i.gameEngine.selectedUnitId()===r.id)("scale-125",i.gameEngine.selectedUnitId()===r.id&&r.tier!==4&&!i.gameEngine.buildMode())("scale-90",i.gameEngine.selectedUnitId()===r.id&&r.tier===4&&!i.gameEngine.buildMode())("scale-130",i.gameEngine.lastMergedUnitId()===r.id)("scale-50",i.gameEngine.buildMode())("animate-bounce",i.gameEngine.lastRemainderUnitId()===r.id)("arrival-pop",i.gameEngine.lastArrivedUnitId()===r.id)("pulse-glow",i.gameEngine.pulseUnitId()===r.id),Lo("title",i.gameEngine.formatHoverInfo(r.id)),b(),de((t=r.tier)===1?2:t===2?3:t===3?4:t===4?5:-1),b(4),de(i.gameEngine.hasDefenseBonus(r)?6:-1),b(),de(r.productionActive?7:(r.forestOccupationTurns??0)===1?8:(r.forestOccupationTurns??0)>1?9:-1)}}function rz(n,e){if(n&1&&ue(0,nz,10,36,"div",276),n&2){let t=U(2).$implicit,r=U().$implicit,i=U();de(!(t===0&&r===0)&&!(t===i.gameEngine.gridSize-1&&r===i.gameEngine.gridSize-1)?0:-1)}}function iz(n,e){if(n&1&&ue(0,rz,1,1),n&2){let t=U().$implicit,r=U().$implicit,i=U();de(e.owner==="player"||i.gameEngine.isVisibleToPlayer(t,r)?0:-1)}}function oz(n,e){if(n&1&&(v(0,"div",325)(1,"span",326),w(2),_()()),n&2){let t=e.$implicit,r=U(3);ct("z-index",100)("opacity",t.opacity),b(),Ue("text-xs",!r.gameEngine.isLuckyText(t.text)&&!r.gameEngine.isDrawText(t.text))("text-base",r.gameEngine.isLuckyText(t.text)||r.gameEngine.isDrawText(t.text))("text-yellow-300",!r.gameEngine.isLuckyText(t.text)&&!r.gameEngine.isDrawText(t.text))("text-yellow-400",r.gameEngine.isLuckyText(t.text)||r.gameEngine.isDrawText(t.text)),b(),fe(" ",t.text," ")}}function sz(n,e){if(n&1){let t=Et();v(0,"div",231),ae("click",function(){let i=ye(t).$implicit,o=U().$implicit,s=U();return ve(s.onTileClick(i,o))}),v(1,"span",232),w(2),_(),ue(3,l7,2,1),ue(4,u7,1,0,"div",233),ap(5),ue(6,f7,11,12,"span",234),ue(7,p7,1,2,"div",235),ue(8,g7,4,2),ue(9,y7,1,1),ue(10,C7,2,1),ue(11,O7,2,1),ue(12,iz,1,1),vn(13,oz,3,13,"div",236,YG),_()}if(n&2){let t,r=e.$implicit,i=U().$implicit,o=U();ct("width",o.gameEngine.tileSizePx,"px")("height",o.gameEngine.tileSizePx,"px")("min-width",o.gameEngine.tileMinSizePx,"px")("min-height",o.gameEngine.tileMinSizePx,"px"),Ue("cursor-pointer",o.gameEngine.isValidMove(r,i))("bg-gray-700",!o.gameEngine.isValidMove(r,i))("border-gray-600",!o.gameEngine.isValidMove(r,i))("bg-blue-900",r===0&&i===0)("bg-red-900",r===o.gameEngine.gridSize-1&&i===o.gameEngine.gridSize-1)("border-4",r===0&&i===0||r===o.gameEngine.gridSize-1&&i===o.gameEngine.gridSize-1)("border-blue-400",r===0&&i===0)("border-red-400",r===o.gameEngine.gridSize-1&&i===o.gameEngine.gridSize-1)("ring-2",r===0&&i===0||r===o.gameEngine.gridSize-1&&i===o.gameEngine.gridSize-1)("ring-blue-300",r===0&&i===0&&o.gameEngine.baseDeployActive())("ring-red-300",r===o.gameEngine.gridSize-1&&i===o.gameEngine.gridSize-1)("spawn-zone-highlight",o.gameEngine.baseDeployActive()&&r<=2&&i<=2&&(r!==0||i!==0))("forest-area",o.gameEngine.isForest(r,i))("bg-amber-900",o.gameEngine.isDeployTarget(r,i)&&!o.gameEngine.buildMode())("border-amber-500",o.gameEngine.isDeployTarget(r,i)&&!o.gameEngine.buildMode())("bg-gray-950",!o.gameEngine.isVisibleToPlayer(r,i))("border-gray-800",!o.gameEngine.isVisibleToPlayer(r,i))("bg-green-900",o.gameEngine.isValidMove(r,i)&&!o.gameEngine.getUnitAt(r,i))("border-green-500",o.gameEngine.isValidMove(r,i)&&!o.gameEngine.getUnitAt(r,i))("bg-cyan-900",o.gameEngine.isValidMove(r,i)&&o.gameEngine.getUnitAt(r,i))("border-cyan-500",o.gameEngine.isValidMove(r,i)&&o.gameEngine.getUnitAt(r,i))("animate-pulse",o.gameEngine.isValidMove(r,i)&&o.gameEngine.getUnitAt(r,i))("hover:bg-gray-600",!o.gameEngine.isValidMove(r,i))("hover:bg-green-800",o.gameEngine.isValidMove(r,i)&&!o.gameEngine.getUnitAt(r,i))("hover:bg-cyan-800",o.gameEngine.isValidMove(r,i)&&o.gameEngine.getUnitAt(r,i)),Lo("title",o.gameEngine.getUnitAt(r,i)&&(o.gameEngine.getUnitAt(r,i).owner==="player"||o.gameEngine.isVisibleToPlayer(r,i))?o.gameEngine.formatHoverInfo(o.gameEngine.getUnitAt(r,i).id):null),b(2),En(" ",r,",",i," "),b(),de(r===o.gameEngine.gridSize-1&&i===o.gameEngine.gridSize-1&&o.gameEngine.isVisibleToPlayer(r,i)?3:-1),b(),de(o.gameEngine.buildMode()&&o.gameEngine.isInSafeZone(r,i)?4:-1),b(),V_(o.gameEngine.getUnitAt(r,i)),b(),de(o.gameEngine.isForest(r,i)&&o.gameEngine.isVisibleToPlayer(r,i)?6:-1),b(),de(o.gameEngine.isForest(r,i)&&o.gameEngine.getUnitAt(r,i)&&o.gameEngine.isVisibleToPlayer(r,i)?7:-1),b(),de(r===0&&i===0?8:-1),b(),de(r===o.gameEngine.gridSize-1&&i===o.gameEngine.gridSize-1?9:-1),b(),de(r<o.gameEngine.gridSize-1?10:-1),b(),de(i<o.gameEngine.gridSize-1?11:-1),b(),de((t=o.gameEngine.getUnitAt(r,i))?12:-1,t),b(),_n(o.gameEngine.getCombatTextEntriesAt(r,i))}}function az(n,e){if(n&1&&vn(0,sz,15,71,"div",230,ai),n&2){let t=U();_n(t.gameEngine.gridCols)}}function cz(n,e){n&1&&$(0,"app-game-rules")}function lz(n,e){if(n&1&&(v(0,"div",342),w(1),_()),n&2){let t=U(2);b(),K(t.settings.t("NOT_LOGS_DATA"))}}function uz(n,e){if(n&1&&(v(0,"div",344)(1,"span",345),w(2),_()()),n&2){let t=e.$implicit;ct("border-left-color",t.color.includes("green")?"#4ade80":t.color.includes("red")?"#f87171":t.color.includes("yellow")?"#fde047":"transparent"),Ue("border-l-4",t.color.includes("green")||t.color.includes("red")||t.color.includes("yellow")),b(),F_(t.color),b(),K(t.text)}}function dz(n,e){if(n&1){let t=Et();v(0,"div",203)(1,"button",327),ae("click",function(){ye(t);let i=U();return ve(i.gameEngine.toggleLog())}),v(2,"span",328),w(3,"\u2715"),_()(),v(4,"div",329)(5,"div",330)(6,"h3",331),w(7),_(),v(8,"button",332),ae("click",function(){ye(t);let i=U();return ve(i.gameEngine.clearLogs())}),he(),v(9,"svg",333),$(10,"path",334),_(),w(11),_()(),Ve(),v(12,"label",335)(13,"div",85)(14,"input",336),ae("change",function(){ye(t);let i=U();return ve(i.gameEngine.toggleCombatOnly())}),_(),$(15,"div",337),he(),v(16,"svg",338),$(17,"path",339),_()(),Ve(),v(18,"span",340),w(19),_()()(),v(20,"div",341),ue(21,lz,2,1,"div",342),vn(22,uz,3,7,"div",343,k_),_()()}if(n&2){let t=U();b(7),fe(" ",t.settings.t("Action_LOG")," "),b(4),fe(" ",t.settings.t("CLEAR")," "),b(3),ze("checked",t.gameEngine.combatOnly()),b(5),fe(" ",t.settings.t("COMBAT_ONLY")," "),b(2),de(t.gameEngine.logsFiltered().length===0?21:-1),b(),_n(t.gameEngine.logsFiltered().reverse())}}function hz(n,e){if(n&1){let t=Et();v(0,"button",360),ae("click",function(){let i=ye(t).$implicit,o=U(2);return ve(o.onDifficultyChange(i))}),v(1,"span",361),w(2),_(),w(3),_()}if(n&2){let t=e.$implicit,r=U(2);Ue("bg-blue-500/20",r.settings.difficulty()===t)("border-blue-400/40",r.settings.difficulty()===t)("text-blue-200",r.settings.difficulty()===t)("shadow-[0_0_15px_rgba(59,130,246,0",r.settings.difficulty()===t)("bg-white/5",r.settings.difficulty()!==t)("border-white/5",r.settings.difficulty()!==t)("text-stone-500",r.settings.difficulty()!==t)("hover:bg-white/10",r.settings.difficulty()!==t),b(),Ue("opacity-100",r.settings.difficulty()===t),b(),fe(" ",t==="baby"?"\u{1F476}":t==="normal"?"\u{1F920}":t==="hard"?"\u{1F608}":"\u2620\uFE0F"," "),b(),fe(" ",r.settings.t(r.settings.getDifficultyLabel(t))," ")}}function fz(n,e){if(n&1){let t=Et();v(0,"button",362),ae("click",function(){let i=ye(t).$implicit,o=U(2);return ve(o.onMapSizeChange(i))}),w(1),_()}if(n&2){let t=e.$implicit,r=U(2);Ue("bg-gradient-to-br",r.settings.mapSize()===t)("from-indigo-600",r.settings.mapSize()===t)("to-indigo-800",r.settings.mapSize()===t)("text-white",r.settings.mapSize()===t)("shadow-lg",r.settings.mapSize()===t)("text-stone-500",r.settings.mapSize()!==t)("hover:text-stone-300",r.settings.mapSize()!==t),b(),En(" ",t,"x",t," ")}}function pz(n,e){if(n&1){let t=Et();v(0,"div",204)(1,"div",346),$(2,"div",347),v(3,"h3",348),w(4),_(),v(5,"button",349),ae("click",function(){ye(t);let i=U();return ve(i.gameEngine.toggleSettings())}),w(6," \u2716 "),_()(),v(7,"div",350)(8,"div",164)(9,"label",351),w(10),_(),v(11,"span",352),w(12),_()(),v(13,"div",353),vn(14,hz,4,20,"button",354,ai),_()(),v(16,"div",350)(17,"label",355),w(18),_(),v(19,"div",356),vn(20,fz,2,16,"button",357,ai),_()(),v(22,"div",358)(23,"button",359),ae("click",function(){ye(t);let i=U();return ve(i.settings.setLang("uk"))}),w(24," UA "),_(),v(25,"button",359),ae("click",function(){ye(t);let i=U();return ve(i.settings.setLang("en"))}),w(26," EN "),_()()()}if(n&2){let t=U();b(4),K(t.settings.t("SYSTEM_SETTINGS")),b(6),fe(" ",t.settings.t("TACTICAL_DIFF")," "),b(2),fe(" ",t.settings.t("LEVEL_SELECTION")," "),b(2),_n(t.settings.diffArr),b(4),fe(" ",t.settings.t("SECTOR_DIMENSIONS")," "),b(2),_n(js(12,QG)),b(3),Ue("text-blue-300",t.settings.currentLang()==="uk")("text-stone-400",t.settings.currentLang()!=="uk"),b(2),Ue("text-blue-300",t.settings.currentLang()==="en")("text-stone-400",t.settings.currentLang()!=="en")}}function gz(n,e){if(n&1&&(v(0,"div",371)(1,"span"),w(2),Hs(3,"date"),_(),v(4,"span",375),w(5),_(),v(6,"span",376),w(7),_()()),n&2){let t=e.$implicit,r=U(2);b(2),K(Xa(3,4,t.date,"yyyy-MM-dd HH:mm")),b(3),K(t.condition),b(2),En("",t.turns," ",r.settings.t("TURNS"))}}function mz(n,e){if(n&1&&(v(0,"div",372),w(1),_()),n&2){let t=U(2);b(),K(t.settings.t("NO_RECORDS_YET"))}}function yz(n,e){if(n&1&&(v(0,"div",371)(1,"span"),w(2),Hs(3,"date"),_(),v(4,"span",375),w(5),_(),v(6,"span",376),w(7),_()()),n&2){let t=e.$implicit,r=U(2);b(2),K(Xa(3,4,t.date,"yyyy-MM-dd HH:mm")),b(3),K(t.condition),b(2),En("",t.turns," ",r.settings.t("TURNS"))}}function vz(n,e){if(n&1&&(v(0,"div",372),w(1),_()),n&2){let t=U(2);b(),K(t.settings.t("NO_RECORDS_YET"))}}function _z(n,e){if(n&1){let t=Et();v(0,"div",205)(1,"div",363)(2,"div",364)(3,"h2",365),w(4),_(),v(5,"button",366),ae("click",function(){ye(t);let i=U();return ve(i.gameEngine.closeHighScores())}),w(6," \u2716 "),_()(),v(7,"div",367),w(8),_(),v(9,"div",368)(10,"div",369)(11,"h3",370),w(12),_(),vn(13,gz,8,7,"div",371,_O,!1,mz,2,1,"div",372),_(),v(16,"div",369)(17,"h3",373),w(18),_(),vn(19,yz,8,7,"div",371,_O,!1,vz,2,1,"div",372),_()(),v(22,"div",374),w(23),_()()()}if(n&2){let t=U();b(4),K(t.settings.t("HIGH_SCORES")),b(4),Za(" ",t.settings.t("CURRENT"),": ",t.settings.t(t.settings.difficultyLabel())," \u2022 ",t.settings.mapSizeLabel()," "),b(4),K(t.settings.t("TOP_3_PLAYER")),b(),_n(t.gameEngine.getHighScoresForCurrentCombo().wins),b(5),K(t.settings.t("TOP_3_LOSES_PLAYER")),b(),_n(t.gameEngine.getHighScoresForCurrentCombo().losses),b(4),K(t.settings.t("CHANGE_RECORDS_INFO"))}}function Ez(n,e){if(n&1){let t=Et();v(0,"div",206)(1,"div",377),w(2," Debug Mode "),_(),v(3,"button",378),ae("click",function(){ye(t);let i=U();return ve(i.gameEngine.debugInstantWin())}),w(4," \u26A1 Instant Win "),_(),v(5,"button",379),ae("click",function(){ye(t);let i=U();return ve(i.gameEngine.debugCycleSettings())}),w(6," \u{1F504} Cycle Settings "),_(),v(7,"div",380),w(8),_()()}if(n&2){let t=U();b(8),En(" ",t.settings.difficultyLabel()," | ",t.settings.mapSizeLabel()," ")}}var qm=class n{constructor(e,t,r,i){this.gameEngine=e;this.settings=t;this.firebase=r;this.router=i}boardContainer;isAutoBattleActive=Y(!1);isMobileMenuOpen=Y(!1);get isProduction(){return!LA()}toggleMobileMenu(){this.isMobileMenuOpen.update(e=>!e)}closeMobileMenu(){this.isMobileMenuOpen.set(!1)}toggleAutoBattle(){this.isAutoBattleActive.update(e=>!e),this.isAutoBattleActive()&&this.executeAutoMoveLoop()}navigateToFeedback(){if(this.firebase.user$()){this.router.navigate(["/feedback"]);return}try{this.firebase.loginWithGoogle()}catch{}}navigateToRoadmap(){this.router.navigate(["/roadmap"])}ngAfterViewInit(){setTimeout(()=>{let e=this.boardContainer?.nativeElement;typeof window<"u"&&e&&typeof e.scrollTo=="function"&&e.scrollTo({left:0,top:0})},0)}onDifficultyChange(e){this.settings.setDifficulty(e),this.gameEngine.resetGame()}onMapSizeChange(e){this.settings.setMapSize(e),setTimeout(()=>{let t=this.boardContainer?.nativeElement;typeof window<"u"&&t&&typeof t.scrollTo=="function"&&t.scrollTo({left:0,top:0})},0),this.gameEngine.resetGame()}onTileClick(e,t){if(this.gameEngine.gameStatus()!=="playing")return;if(this.gameEngine.isDeployTarget(e,t)){this.gameEngine.deployTo({x:e,y:t});return}if(e===0&&t===0){this.gameEngine.startDeployFromBase();return}this.gameEngine.cancelDeploy();let r=this.gameEngine.getUnitAt(e,t);if(this.gameEngine.selectedUnit()&&this.gameEngine.isValidMove(e,t)){this.gameEngine.moveSelectedUnit({x:e,y:t});return}if(r&&r.owner==="player"){this.gameEngine.selectUnit(r.id);return}this.gameEngine.selectUnit(null)}onEdgeClick(e,t,r,i,o){if(e.stopPropagation(),this.gameEngine.gameStatus()!=="playing")return;if(this.gameEngine.getWallBetween(t,r,i,o)){this.gameEngine.attackOrDestroyWallBetween({x:t,y:r},{x:i,y:o});return}this.gameEngine.buildMode()&&this.gameEngine.buildWallBetween({x:t,y:r},{x:i,y:o})}onDestroyIconClick(e,t,r,i,o){e.stopPropagation(),this.gameEngine.gameStatus()==="playing"&&this.gameEngine.destroyOwnWallBetween({x:t,y:r},{x:i,y:o})}onBuildIconClick(e,t,r,i,o){e.stopPropagation(),this.gameEngine.gameStatus()==="playing"&&this.gameEngine.buildMode()&&this.gameEngine.buildWallBetween({x:t,y:r},{x:i,y:o})}onAttackIconClick(e,t,r,i,o){e.stopPropagation(),this.gameEngine.gameStatus()==="playing"&&this.gameEngine.attackOrDestroyWallBetween({x:t,y:r},{x:i,y:o})}async executeAutoMoveLoop(){for(;this.isAutoBattleActive();)await this.executeAutoMove()}async executeAutoMove(){if(await new Promise(f=>setTimeout(f,500)),!this.isAutoBattleActive()||this.gameEngine.gameStatus()!=="playing"||!this.gameEngine.isPlayerTurn())return;let e=this.gameEngine.units?this.gameEngine.units():[],t=this.gameEngine.getBasePosition("ai"),r={x:Math.floor(this.gameEngine.gridSize/2),y:Math.floor(this.gameEngine.gridSize/2)},i=e.filter(f=>f.owner==="ai"),o=(f,g)=>Math.abs(f.x-g.x)+Math.abs(f.y-g.y),s=-1/0,a=null,c=null,u=1/0,d=!1;for(let f of e){if(f.owner!=="player")continue;this.gameEngine.selectUnit(f.id);let g=this.gameEngine.validMoves();if(g.length!==0)for(let m of g){let T=0,M=this.gameEngine.getUnitAt(m.x,m.y),L=m.x===t.x&&m.y===t.y,k=!!(M&&M.owner==="ai")||L;if(k)T+=100;else{let q=t,ce=o(m,t);for(let ie of i){let x=o(m,ie.position);x<ce&&(ce=x,q=ie.position)}let Ie=o(f.position,q);if(ce<Ie&&(T+=50),i.length===0){let ie=o(m,r),x=o(f.position,r),I=o(m,t),C=o(f.position,t);(ie<x||I<C)&&(T+=20)}}let Q=k?0:Math.min(...i.map(q=>o(m,q.position)),o(m,t));(T>s||T===s&&Q<u)&&(s=T,a=f.id,c=m,u=Q,d=k)}}if(a&&c){if(this.gameEngine.selectUnit(a),d)try{console.log("[AUTO_ENGAGE][\u0410\u0412\u0422\u041E\u041F\u0406\u041B\u041E\u0422] \u0426\u0456\u043B\u044C \u0437\u0430\u0445\u043E\u043F\u043B\u0435\u043D\u0430. \u041F\u043E\u0447\u0438\u043D\u0430\u044E \u0430\u0442\u0430\u043A\u0443...")}catch{}this.gameEngine.moveSelectedUnit(c)}else this.gameEngine.selectUnit(null)}static \u0275fac=function(t){return new(t||n)(_e(wi),_e(In),_e(bi),_e(Ki))};static \u0275cmp=fn({type:n,selectors:[["app-game"]],viewQuery:function(t,r){if(t&1&&ip(KG,5),t&2){let i;op(i=sp())&&(r.boardContainer=i.first)}},decls:334,vars:114,consts:[["boardContainer",""],["nameInput",""],[1,"min-h-screen","bg-gray-900","text-white","flex","flex-col","items-center","justify-start","p-4","relative","overflow-hidden","no-select"],[1,"fixed","inset-0","overflow-hidden","pointer-events-none","select-none","z-0"],[1,"floating-shape","shape-giant-1"],[1,"floating-shape","shape-giant-2"],[1,"floating-shape","shape-giant-3"],[1,"floating-shape","shape-giant-4"],[1,"floating-shape","shape-giant-5"],["width","0","height","0",1,"absolute","pointer-events-none"],["id","soft-triangle","clipPathUnits","objectBoundingBox"],["d","M0.5 0.05 Q0.5 0 0.56 0.12 L0.92 0.85 Q0.98 0.98 0.85 0.98 L0.15 0.98 Q0.02 0.98 0.08 0.85 L0.44 0.12 Q0.5 0 0.5 0.05"],["id","triangle-border","viewBox","0 0 1 1","preserveAspectRatio","none"],["d","M0.5 0.05 Q0.5 0 0.56 0.12 L0.92 0.85 Q0.98 0.98 0.85 0.98 L0.15 0.98 Q0.02 0.98 0.08 0.85 L0.44 0.12 Q0.5 0 0.5 0.05","fill","none","stroke","rgba(255,255,255,0.3)","stroke-width","2","vector-effect","non-scaling-stroke"],[1,"fixed","top-8","left-8","flex","items-start","gap-4","group","select-none","mobile-hide-logo"],[1,"relative","w-12","h-12","flex","items-center","justify-center"],[1,"absolute","inset-0","border-2","border-blue-500/30","rotate-45","group-hover:rotate-90","transition-all","duration-700"],[1,"absolute","inset-1","border","border-blue-400/20","-rotate-45","group-hover:rotate-0","transition-all","duration-1000"],["viewBox","0 0 24 24",1,"w-6","h-6","text-white","drop-shadow-[0_0_8px_rgba(59,130,246,0.8)]"],["fill","currentColor","d","M12 2L2 22h20L12 2zm0 4.5L18.5 20h-13L12 6.5z"],["x","11","y","12","width","2","height","5","fill","white",1,"animate-pulse"],[1,"absolute","-top-1","-left-1","w-2","h-2","border-t-2","border-l-2","border-blue-400"],[1,"absolute","-bottom-1","-right-1","w-2","h-2","border-b-2","border-r-2","border-blue-400"],[1,"flex","flex-col"],[1,"flex","items-baseline","gap-1"],[1,"text-3xl","font-black","tracking-tight","uppercase","leading-none","flex","flex-col"],[1,"text-white","drop-shadow-[0_0_5px_rgba(255,255,255,0.2)]"],[1,"text-blue-500","text-xl","mt-[-4px]","tracking-[0.15em]","opacity-90","group-hover:text-blue-400","transition-colors"],[1,"flex","gap-1","mb-1"],[1,"w-1","h-3","bg-blue-600/40"],[1,"w-1","h-3","bg-blue-600/20"],[1,"flex","items-center","ml-1"],[1,"text-[10px]","font-mono","text-blue-300","font-bold","leading-none"],[1,"absolute","-inset-4","bg-blue-600/5","opacity-0","group-hover:opacity-50","transition-opacity","blur-2xl","-z-10"],[1,"nav-bar","w-full","max-w-5xl","flex","items-center","justify-between","mb-2","px-4","py-1","rounded-full","bg-white/[0.03]","backdrop-blur-md","border","border-white/5","shadow-2xl"],[1,"flex","items-center","gap-1"],[1,"cursor-pointer","group","flex","items-center","gap-2","px-4","py-2","rounded-full","hover:bg-blue-500/10","transition-all","duration-300",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3.5","h-3.5","text-stone-400","group-hover:text-blue-400","group-hover:rotate-180","transition-all","duration-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-[10px]","font-black","uppercase","tracking-widest","text-stone-400","group-hover:text-blue-300","transition-colors"],[1,"w-[1px]","h-4","bg-white/10","mx-1"],[1,"cursor-pointer","group","flex","items-center","gap-2","px-4","py-2","rounded-full","hover:bg-white/5","transition-all",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3.5","h-3.5","text-stone-400","group-hover:text-white","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-[10px]","font-black","uppercase","tracking-widest","text-stone-400","group-hover:text-white"],[1,"flex","items-center","bg-black/20","rounded-full","px-2","py-1","border","border-white/5","shadow-inner"],[1,"cursor-pointer","flex","items-center","gap-2","px-4","py-1.5","rounded-full","hover:bg-white/5","text-stone-400","hover:text-yellow-400","transition-all","group",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3.5","h-3.5","opacity-50","group-hover:opacity-100"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"],[1,"text-[10px]","font-bold","uppercase","tracking-tighter"],[1,"cursor-pointer","flex","items-center","gap-2","px-4","py-1.5","rounded-full","hover:bg-white/5","text-stone-400","hover:text-indigo-400","transition-all","group",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"],[1,"cursor-pointer","flex","items-center","gap-2","px-4","py-1.5","rounded-full","hover:bg-white/5","text-stone-400","hover:text-red-400","transition-all","group",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"cursor-pointer","flex","items-center","gap-2","px-4","py-1.5","rounded-full","hover:bg-white/5","text-stone-400","hover:text-indigo-300","transition-all","group",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 8h2a2 2 0 012 2v9l-4-4H7a2 2 0 01-2-2V6a2 2 0 012-2h8"],[1,"flex","items-center","gap-3"],[1,"cursor-pointer","w-8","h-8","flex","items-center","justify-center","rounded-full","bg-white/5","border","border-white/10","hover:bg-blue-500/20","transition-all","group",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-stone-400","group-hover:text-blue-400","group-hover:rotate-90","transition-all","duration-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"flex","items-center","gap-3","pl-3","pr-1","py-1","rounded-full","bg-white/5","border","border-white/10","shadow-inner"],[1,"cursor-pointer","flex","items-center","gap-2","px-4","py-1.5","rounded-full","bg-blue-600/10","border","border-blue-500/20","hover:bg-blue-600/30","transition-all","group"],[1,"mobile-hud-header","w-full","max-w-5xl","px-3","py-2","flex","items-center","justify-between","gap-3","rounded-xl","bg-gray-900/60","border","border-white/10","backdrop-blur-md"],[1,"hud-item","flex","items-center","gap-2"],["width","20","height","20","viewBox","0 0 24 24"],["x","7","y","14","width","13","height","6","rx","3","fill","#8B5E3C"],["cx","7","cy","17","r","3","fill","#A67B5B"],[1,"hud-value","font-mono","text-sm","font-bold","text-emerald-400"],["points","12,3 6,13 9,13 4,21 20,21 15,13 18,13","fill","#6fbf73"],[1,"hud-value","font-mono","text-sm","font-bold","text-blue-300"],["cx","12","cy","12","r","9","stroke","#d1b54a","fill","none"],["d","M12 7 L12 12 L16 14","stroke","#d1b54a","stroke-width","2"],[1,"hud-value","font-mono","text-sm","font-bold","text-yellow-300"],["d","M4 20 L20 20","stroke","#999"],["x","6","y","8","width","4","height","8","fill","#3b82f6"],["x","14","y","6","width","4","height","10","fill","#ef4444"],[1,"hud-value","font-mono","text-sm","font-bold","text-white"],[1,"burger-btn","w-9","h-9","rounded-md","bg-white/10","border","border-white/20","flex","items-center","justify-center","text-white",3,"click"],["width","18","height","18","viewBox","0 0 24 24"],["d","M4 6h16M4 12h16M4 18h16","stroke","#fff","stroke-width","2"],[1,"actions-bar","w-full","max-w-5xl","px-3","py-2","flex","items-center","justify-center","gap-4"],[1,"action-btn",3,"click","disabled"],["d","M3 21 L9 15 L5 11 L11 5 L13 7 L17 3 L21 7 L17 11 L19 13 L13 19 Z","fill","#e5e7eb"],[1,"flex","items-center","gap-1","rounded-lg","hover:bg-white/5","transition-colors","cursor-pointer","border","border-transparent","hover:border-white/5"],[1,"relative","flex","items-center"],["type","checkbox",1,"peer","h-4","w-4","opacity-0","absolute",3,"change","checked"],[1,"h-4","w-4","border-2","border-gray-500","rounded","flex","items-center","justify-center","peer-checked:bg-blue-500","peer-checked:border-blue-500","transition-all"],[1,"h-2","w-2","bg-white","rounded-full","opacity-0","peer-checked:opacity-100"],[1,"text-[10px]","uppercase","tracking-widest","text-gray-400","font-bold"],[1,"mt-1","text-[10px]","uppercase","tracking-widest","font-bold","text-gray-300"],[1,"action-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M5 12h14"],["d","m12 5 7 7-7 7"],[1,"mobile-menu-overlay","fixed","inset-0","bg-black/70","z-50","flex","items-start","justify-end"],[1,"status-bar","w-full","max-w-5xl","flex","items-center","justify-between","mb-8","px-6","py-3","rounded-2xl","bg-gray-900/40","backdrop-blur-xl","border","border-white/10","shadow-[0_10px_30px_rgba(0,0,0,0.5)]","relative","overflow-hidden"],[1,"absolute","bottom-0","left-0","h-[1px]","bg-gradient-to-r","from-transparent","via-blue-500/50","to-transparent","w-full"],[1,"flex","items-center","gap-6"],[1,"flex","flex-col","items-start"],[1,"text-[10px]","uppercase","tracking-widest","text-blue-400","font-black","mb-1"],[1,"text-xl","font-black","text-white","drop-shadow-[0_0_8px_rgba(59,130,246,0.5)]"],[1,"h-10","w-[1px]","bg-white/5"],[1,"flex","gap-4"],[1,"flex","items-center","gap-2","px-3","py-1.5","rounded-xl","bg-white/5","border","border-white/5","shadow-inner"],[1,"text-lg"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","7","cy","17","r","3","fill","#A67B5B","stroke","#724A2D","stroke-width","1"],["cx","7","cy","17","r","1.5","stroke","#724A2D","stroke-width","0.5"],["x","7","y","5","width","13","height","6","rx","3","fill","#A67B5B"],["cx","7","cy","8","r","3","fill","#C49A6C","stroke","#8B5E3C","stroke-width","1"],["cx","7","cy","8","r","1.5","stroke","#8B5E3C","stroke-width","0.5"],[1,"font-mono","text-lg","font-bold","text-emerald-400"],[1,"flex","items-center","gap-2","px-3","py-1.5","rounded-xl","bg-blue-500/10","border","border-blue-500/20","shadow-inner"],[1,"w-8","h-8","flex-shrink-0"],["viewBox","0 0 64 64","xmlns","http://www.w3.org/2000/svg",1,"w-full","h-full"],["points","14,18 6,32 10,32 2,48 22,48 14,32 18,32","fill","#3f8f5c","stroke","#2e6b4c","stroke-width","2","stroke-linejoin","round","opacity","0.7"],["x","11","y","48","width","4.5","height","6","fill","#4f9f68","stroke","#2e6b4c","stroke-width","1.2"],["points","34,10 20,28 26,28 14,50 46,50 34,28 40,28","fill","#6fbf73","stroke","#2e6b4c","stroke-width","2","stroke-linejoin","round","opacity","0.85"],["x","31","y","50","width","6","height","6","fill","#4f9f68","stroke","#2e6b4c","stroke-width","1.5"],["points","48,16 36,32 42,32 32,50 60,50 50,32 56,32","fill","#5fae7a","stroke","#2e6b4c","stroke-width","2","stroke-linejoin","round","opacity","0.75"],["x","45","y","50","width","5","height","6","fill","#4f9f68","stroke","#2e6b4c","stroke-width","1.2"],["transform","translate(-14,-1) scale(1.4)"],["x","28.5","y","18","width","3","height","20","fill","#71411e"],["points","31,18 52,22 31,26","fill","#0800ff"],["transform","translate(10,52) scale(0.3)"],["x","0","y","0","width","68","height","14","rx","7","fill","#d89b5a","stroke","#5a3418","stroke-width","2"],["cx","10","cy","7","r","3","fill","#5a3418"],["cx","58","cy","7","r","3","fill","#5a3418"],[1,"font-mono","text-lg","font-bold","text-blue-300"],[1,"text-xs","text-white/30","mx-1"],[1,"flex","flex-col","items-center","justify-center","px-8","relative"],[1,"absolute","inset-0","bg-yellow-500/5","blur-2xl","rounded-full"],[1,"text-[10px]","uppercase","tracking-[0.3em]","text-stone-500","font-bold"],[1,"text-3xl","font-black","text-yellow-400","drop-shadow-[0_0_15px_rgba(250,204,21,0.4)]"],[1,"absolute","monopoly-top","whitespace-nowrap","px-4","py-1","rounded-full","bg-emerald-500/20","border","border-emerald-500/30","text-[10px]","font-black","uppercase","tracking-widest","text-emerald-300","animate-pulse"],[1,"font-mono","text-lg","font-bold","text-red-400"],[1,"flex","items-center","gap-2","px-3","py-1.5","rounded-xl","bg-red-500/10","border","border-red-500/20","shadow-inner"],[1,"font-mono","text-lg","font-bold","text-red-300"],["points","31,18 52,22 31,26","fill","#ef4444"],[1,"flex","flex-col","items-end"],[1,"text-[10px]","uppercase","tracking-widest","text-red-400","font-black","mb-1"],[1,"text-xl","font-black","text-white","drop-shadow-[0_0_8px_rgba(239,68,68,0.5)]"],[1,"end-overlay","fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50"],[1,"mobile-actions-compact","mobile-actions-compact-plan","fixed","bottom-20","right-6","z-50","flex","items-center","group","cursor-pointer","outline-none","translate-x-2","hover:translate-x-0","transition-transform","duration-300",3,"click"],[1,"h-10","mobile-actions-hide-text","px-4","bg-blue-600/20","border-y","border-l","border-blue-500/50","backdrop-blur-md","flex","items-center","gap-3","group-hover:bg-blue-600/40","transition-all"],[1,"w-1.5","h-1.5","bg-blue-400","rotate-45","animate-pulse"],[1,"text-[11px]","font-black","uppercase","tracking-[0.3em]","text-blue-100","drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]"],[1,"h-10","w-10","bg-blue-600/30","border","border-blue-500/50","flex","items-center","justify-center","group-hover:bg-blue-600","transition-all","shadow-[0_0_15px_rgba(37,99,235,0.2)]"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-white","group-hover:scale-125","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M13 5l7 7-7 7M5 5l7 7-7 7"],["aria-label","Support the Project",1,"mobile-actions-compact","fixed","bottom-4","right-4","z-50","px-4","py-2","rounded-full","bg-pink-600","hover:bg-pink-500","text-white","shadow-xl","cursor-pointer","flex","items-center","gap-2","support-pulse",3,"click"],[1,"text-lg","mb-[2px]","mobile-actions-hide-text"],[1,"relative","z-10"],[1,"board","max-w-[90vw]","max-h-[90vh]","overflow-auto","bg-gray-800","p-2","rounded-lg","border","border-gray-700","select-none","relative","mx-auto","my-auto"],[1,"grid"],[1,"absolute","top-2","left-2","w-12","h-12","border-2","border-blue-500/30","rounded","pointer-events-none","flex","items-center","justify-center"],[1,"text-white","font-bold","bg-blue-600","px-1","rounded","shadow","text-xs"],[1,"absolute","bottom-2","right-2","w-12","h-12","border-2","border-red-500/30","rounded","pointer-events-none","flex","items-center","justify-center"],[1,"mt-4","absolute","top-0","right-[-184px]","min-w-[170px]"],[1,"relative","p-4","rounded-2xl","bg-gray-900/40","backdrop-blur-md","border","border-white/10","shadow-2xl","overflow-hidden","group"],[1,"absolute","-top-10","-right-10","w-24","h-24","blur-[40px]","opacity-20","transition-colors","duration-500"],[1,"relative","z-10","flex","flex-col","gap-1"],[1,"text-[10px]","uppercase","tracking-[0.2em]","text-stone-400","font-black"],[1,"flex","items-center","justify-between"],[1,"font-mono","text-xl","font-bold","capitalize","tracking-tight","transition-colors","duration-300"],[1,"flex","items-center","justify-center","w-8","h-8","rounded-lg","bg-white/5","border","border-white/10","shadow-inner"],[1,"mt-2","h-[4px]","w-full","bg-gray-800","rounded-full","overflow-hidden"],[1,"h-full","transition-all","duration-700","ease-out","shadow-[0_0_8px]"],[1,"mt-4","flex","flex-col","items-start","gap-2","absolute","top-0","left-[-208px]","p-4","rounded-2xl","bg-gray-900/40","backdrop-blur-md","border","border-white/10","shadow-2xl"],[1,"flex","gap-2","flex-col","w-full"],[1,"cursor-pointer","group","relative","px-4","py-3","rounded-xl","text-sm","font-bold","transition-all","duration-200","flex","items-center","justify-between","gap-3","overflow-hidden","border","border-green-400/30","bg-gradient-to-br","from-green-600/20","to-green-800/40","hover:from-green-500/40","hover:to-green-700/60","shadow-[0_0_15px_rgba(34,197,94,0.2)]","active:scale-95","disabled:opacity-40","disabled:grayscale","disabled:cursor-not-allowed",3,"click","disabled"],[1,"flex","items-center","gap-2","z-10"],[1,"text-green-200","text-xs","tracking-widest","uppercase"],[1,"text-white"],[1,"h-2","w-2","rounded-full"],[1,"absolute","inset-0","bg-gradient-to-r","from-transparent","via-white/10","to-transparent","-translate-x-full","group-hover:animate-[shimmer_1.5s_infinite]","pointer-events-none"],[1,"cursor-pointer","group","relative","px-4","py-3","rounded-xl","text-sm","font-bold","transition-all","duration-200","flex","items-center","justify-between","gap-3","overflow-hidden","border","border-blue-400/30","bg-gradient-to-br","from-blue-600/20","to-blue-800/40","hover:from-blue-500/40","hover:to-blue-700/60","shadow-[0_0_15px_rgba(59,130,246,0.2)]","active:scale-95","disabled:opacity-40","disabled:grayscale","disabled:cursor-not-allowed",3,"click","disabled"],[1,"flex","items-center","gap-0","z-10"],[1,"text-blue-200"],[1,"scale-95","origin-center"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M4 20V8L6 5L8 8V20","fill","#8B5E3C","stroke","#5D4037","stroke-width","1"],["d","M9 20V6L11 3L13 6V20","fill","#A67B5B","stroke","#5D4037","stroke-width","1"],["d","M14 20V8L16 5L18 8V20","fill","#8B5E3C","stroke","#5D4037","stroke-width","1"],["x","3","y","12","width","18","height","2","fill","#5D4037"],[1,"flex","flex-center","bg-black/40","px-2","py-1","rounded-lg","border","border-white/10","z-10","text-red-300"],[1,"w-6","h-6","flex-shrink-0","rotate-90"],["viewBox","0 0 64 64","xmlns","http://www.w3.org/2000/svg"],["x","8","y","26","width","48","height","14","rx","7","fill","#c68642","stroke","#8b5a2b","stroke-width","3"],["cx","14","cy","33","r","3","fill","#8b5a2b"],["cx","50","cy","33","r","3","fill","#8b5a2b"],[1,"cursor-pointer","group","relative","px-4","py-3","rounded-xl","text-sm","font-bold","transition-all","duration-200","border","border-emerald-400/30","bg-gradient-to-br","from-emerald-600/20","to-emerald-800/40","hover:from-emerald-500/40","hover:to-emerald-700/60","shadow-[0_0_15px_rgba(16,185,129,0.1)]","active:scale-95","disabled:opacity-40","disabled:grayscale","disabled:cursor-not-allowed",3,"click","disabled"],[1,"flex","items-center","justify-between","w-full","gap-0","z-10"],[1,"flex","flex-center","text-emerald-200"],[1,"text-emerald-200","text-lg"],[1,"cursor-pointer","group","relative","px-4","py-3","rounded-xl","text-sm","font-bold","transition-all","duration-200","border","border-amber-400/30","bg-gradient-to-br","from-amber-600/20","to-amber-800/40","hover:from-amber-500/40","hover:to-amber-700/60","shadow-[0_0_15px_rgba(245,158,11,0.1)]","active:scale-95","disabled:opacity-40","disabled:grayscale","disabled:cursor-not-allowed",3,"click","disabled"],[1,"flex","items-center","justify-between","w-full","gap-0","z-10","text-amber-200"],[1,"text-xs","uppercase","tracking-tighter"],[1,"mt-2","flex","items-center","gap-3","w-full","px-2","py-2","rounded-lg","hover:bg-white/5","transition-colors","cursor-pointer","border","border-transparent","hover:border-white/5"],[1,"cursor-pointer","group","relative","px-4","py-3","rounded-xl","text-sm","font-bold","transition-all","duration-200","border","border-amber-400/30","bg-gradient-to-br","from-amber-600/20","to-amber-800/40","hover:from-amber-500/40","hover:to-amber-700/60","shadow-[0_0_15px_rgba(245,158,11,0.1)]","active:scale-95","disabled:opacity-40","disabled:grayscale","disabled:cursor-not-allowed",3,"click"],[1,"flex","items-center","justify-between","w-full","gap-2","z-10","text-amber-200"],[1,"fixed","bottom-2","left-2","text-[8px]","text-gray-300"],[1,"fixed","inset-y-0","right-0","w-85","bg-black/60","backdrop-blur-md","border-l","border-white/10","p-6","z-50","shadow-2xl","flex","flex-col","transition-all","duration-300"],[1,"fixed","inset-y-0","left-0","w-72","bg-black/60","backdrop-blur-xl","border-r","border-white/10","p-6","z-50","shadow-[10px_0_30px_rgba(0,0,0,0.5)]","flex","flex-col","gap-[24px]","transition-all","animate-in","slide-in-from-left","duration-300"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50"],[1,"fixed","bottom-10","left-4","z-[9999]","flex","flex-col","gap-2","bg-black/80","p-2","rounded","border","border-red-500","shadow-lg","backdrop-blur-sm"],[1,"flex","flex-col","items-end","leading-none"],[1,"text-[9px]","font-black","text-blue-400","uppercase","tracking-tighter","mb-0.5"],[1,"cursor-pointer","text-[9px]","text-stone-500","hover:text-red-400","uppercase","font-bold","tracking-widest","transition-colors",3,"click"],[1,"relative"],["referrerpolicy","no-referrer",1,"w-8","h-8","rounded-full","border","border-blue-500/30","shadow-[0_0_10px_rgba(59,130,246,0.3)]",3,"src"],[1,"absolute","-bottom-0.5","-right-0.5","w-2.5","h-2.5","bg-green-500","border-2","border-gray-900","rounded-full"],[1,"cursor-pointer","flex","items-center","gap-2","px-4","py-1.5","rounded-full","bg-blue-600/10","border","border-blue-500/20","hover:bg-blue-600/30","transition-all","group",3,"click"],[1,"w-1.5","h-1.5","bg-blue-500","rounded-full","animate-pulse"],[1,"text-[9px]","font-black","uppercase","tracking-widest","text-blue-200"],[1,"mobile-menu-panel","w-72","h-full","bg-gray-800","border-l","border-white/10","p-4","flex","flex-col","gap-3"],[1,"w-9","h-9","rounded-md","bg-white/10","border","border-white/20","flex","items-center","justify-center","text-white","self-end",3,"click"],["d","M6 6l12 12M18 6L6 18","stroke","#fff","stroke-width","2"],[1,"menu-link",3,"click"],[1,"end-dialog","bg-gray-800","p-8","rounded-lg","shadow-xl","border","border-gray-600","text-center"],[1,"text-4xl","font-bold","mb-4"],[1,"text-sm","text-gray-300","mb-4"],[1,"mb-4","flex","flex-col","items-center","gap-2"],[1,"px-6","py-3","bg-green-600","hover:bg-green-500","rounded","text-white","font-bold","text-lg","cursor-pointer",3,"click"],[1,"ml-3","px-6","py-3","bg-indigo-600","hover:bg-indigo-500","rounded","text-white","font-bold","text-lg","cursor-pointer",3,"click"],[1,"text-sm","text-gray-300"],["placeholder","Enter your name","autocomplete","off",1,"w-64","px-3","py-2","rounded","bg-gray-700","border","border-gray-600","text-white",3,"value"],[1,"px-4","py-2","bg-yellow-600","hover:bg-yellow-500","rounded","text-white","font-semibold","text-sm","cursor-pointer",3,"click"],[1,"text-white","font-bold","bg-red-600","px-1","rounded","shadow","text-xs"],[1,"tile","rounded","flex","items-center","justify-center","border","transition-colors","duration-200",3,"width","height","minWidth","minHeight","cursor-pointer","bg-gray-700","border-gray-600","bg-blue-900","bg-red-900","border-4","border-blue-400","border-red-400","ring-2","ring-blue-300","ring-red-300","spawn-zone-highlight","forest-area","bg-amber-900","border-amber-500","bg-gray-950","border-gray-800","bg-green-900","border-green-500","bg-cyan-900","border-cyan-500","animate-pulse","hover:bg-gray-600","hover:bg-green-800","hover:bg-cyan-800"],[1,"tile","rounded","flex","items-center","justify-center","border","transition-colors","duration-200",3,"click"],[1,"absolute","top-0","right-0","text-[8px]","text-gray-500","p-0.5","pointer-events-none"],[1,"absolute","inset-0","bg-red-800/20","border-2","border-red-500/40","border-dashed","pointer-events-none"],[1,"absolute","inset-0","pointer-events-none","flex","items-center","justify-center","transition-all","duration-500",3,"scale-50","opacity-40","translate-x-4","-translate-y-4"],[1,"absolute","top-0","left-0","right-0","bg-green-400/70","pointer-events-none",3,"height"],[1,"absolute","inset-0","flex","items-center","justify-center","pointer-events-none","transition-opacity","duration-500","combat-text-anim",3,"z-index","opacity"],[1,"absolute","-top-2","-right-2","text-xl","[filter:drop-shadow(0_0_2px_rgba(0,0,0,0.5))]",3,"z-index"],[1,"absolute","-top-2","-right-2","text-xl","[filter:drop-shadow(0_0_2px_rgba(0,0,0,0.5))]"],[1,"absolute","inset-0","pointer-events-none","flex","items-center","justify-center","transition-all","duration-500"],["viewBox","0 0 128 128","xmlns","http://www.w3.org/2000/svg",1,"w-full","h-full"],["id","treeGrad","x1","0","y1","0","x2","0","y2","1"],["offset","0%","stop-color","#9be7b3"],["offset","100%","stop-color","#4f9f68"],["opacity","0.4"],["points","64,22 36,66 50,66 28,98 100,98 78,66 92,66","fill","url(#treeGrad)","stroke","#1e3a2b","stroke-width","4","stroke-linejoin","round"],["x","58","y","98","width","12","height","16","fill","#3f7f5c"],["points","28,60 12,90 22,90 8,112 48,112 34,90 44,90","fill","#1f3b2d"],["points","100,58 84,90 94,90 80,112 120,112 106,90 116,90","fill","#1f3b2d"],["transform","translate(10,105) scale(0.8)"],["width","60","height","12","rx","6","fill","#8b5a2b","stroke","#4a2a12","stroke-width","2"],["transform","translate(78, 30) rotate(15) scale(1.5)"],["width","4","height","30","rx","2","fill","#7a4a21"],["d","M0 0 C10 -2, 12 8, 2 12 Z","fill","#9aa3a8","transform","translate(4,0)"],[1,"absolute","top-0","left-0","right-0","bg-green-400/70","pointer-events-none"],[1,"absolute","inset-x-0","top-0","m-0.5","text-[10px]","font-extrabold","text-blue-900","bg-blue-300/80","rounded","px-1","pointer-events-none"],[1,"absolute","left-0","bottom-0","m-0.5","text-[10px]","font-extrabold","text-white","bg-blue-600/90","rounded","px-1","pointer-events-none"],[1,"absolute","inset-x-0","top-0","m-0.5","text-[10px]","font-extrabold","text-red-900","bg-red-300/80","rounded","px-1","pointer-events-none"],[1,"absolute","right-0","bottom-0","m-0.5","text-[10px]","font-extrabold","text-white","bg-red-600/90","rounded","px-1","pointer-events-none"],[1,"absolute","rounded-xs","right-0","top-0","h-full","flex","items-center","justify-center",3,"right","width","height","z-index","transition","bg-lime-700","bg-transparent"],[1,"absolute","rounded-xs","right-0","top-0","h-full","flex","items-center","justify-center",3,"right","width","height","z-index","transition","bg-lime-400","bg-red-400","bg-gray-300","shake"],[1,"absolute","rounded-xs","right-0","top-0","h-full","flex","items-center","justify-center"],[1,"absolute","cursor-pointer","shadow-2xl","flex","items-center","justify-center","text-white","rounded-full","border","border-white/20","hover:scale-110","active:scale-95","transition-all","z-[45]",3,"width","height","z-index","bg-red-600","bg-yellow-500","bg-gray-600"],[1,"absolute","cursor-pointer","shadow-2xl","flex","items-center","justify-center","text-white","rounded-full","border","border-white/20","hover:scale-110","active:scale-95","transition-all","z-[45]",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-1/2","h-1/2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M6 18L18 6M6 6l12 12"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"bg-green-500","cursor-pointer","text-white","rounded-full","shadow-lg","flex","items-center","justify-center","p-1",3,"fontSize","width","height","z-index"],[1,"absolute","whitespace-nowrap","right-0","top-0","text-[8px]","text-yellow-300","px-1"],[1,"bg-green-500","cursor-pointer","text-white","rounded-full","shadow-lg","flex","items-center","justify-center","p-1",3,"click"],[1,"absolute","rounded-xs","left-0","bottom-0","w-full","flex","items-center","justify-center",3,"bottom","height","width","z-index","transition","bg-lime-700","bg-transparent"],[1,"absolute","rounded-xs","left-0","bottom-0","w-full","flex","items-center","justify-center",3,"bottom","height","width","z-index","transition","bg-lime-400","bg-red-400","bg-gray-300","shake"],[1,"absolute","rounded-xs","left-0","bottom-0","w-full","flex","items-center","justify-center"],[1,"bg-green-500","cursor-pointer","text-white","rounded-full","shadow-lg","flex","items-center","justify-center",3,"fontSize","width","height","z-index"],[1,"absolute","whitespace-nowrap","left-0","bottom-0","text-[10px]","text-yellow-300","px-1"],[1,"bg-green-500","cursor-pointer","text-white","rounded-full","shadow-lg","flex","items-center","justify-center",3,"click"],[1,"pointer-events-none","move-anim",3,"shake","transform"],[1,"pointer-events-none","move-anim"],[1,"unit-svg-wrapper"],["viewBox","0 0 100 100",1,"w-full","h-full"],["viewBox","0 0 100 100",1,"w-full","h-full","scale-70"],["viewBox","0 0 100 100",1,"w-full","h-full","scale-110"],[1,"absolute","-top-1","-right-1","rounded-full","bg-blue-200","text-blue-900","flex","items-center","justify-center",3,"width","height","fontSize","z-index"],[1,"absolute","-bottom-1","-right-1","[filter:drop-shadow(0_0_2px_rgba(0,0,0,0.5))]",3,"z-index"],[1,"absolute","-bottom-1","-right-1","opacity-70","[filter:drop-shadow(0_0_2px_rgba(0,0,0,0.5))]",3,"z-index"],["cx","50","cy","50","r","20","fill","var(--u-fill)"],["cx","50","cy","50","r","4","fill","var(--u-light)"],["cx","50","cy","50","r","26","fill","none","stroke","var(--u-stroke)","stroke-width","1.5","stroke-dasharray","3 4"],["x1","50","y1","50","x2","75","y2","35","stroke","var(--u-light)","stroke-width","2"],["cx","75","cy","35","r","2.5","fill","var(--u-light)"],["cx","50","cy","50","r","34","fill","none","stroke","var(--u-light)","stroke-width","1","opacity","0.4"],["points","50,16 86,78 14,78","fill","var(--u-fill)"],["cx","50","cy","55","r","6","fill","var(--u-core)"],["points","50,5 55,15 45,15","fill","var(--u-stroke)"],["points","92,82 82,78 86,70","fill","var(--u-stroke)"],["points","8,82 18,78 14,70","fill","var(--u-stroke)"],["points","50,2 95,85 5,85","fill","none","stroke","var(--u-core)","stroke-width","2"],["points","50,48 56,52 56,60 50,64 44,60 44,52","fill","var(--u-light)"],["points","50,0 100,90 0,90","fill","none","stroke","var(--u-stroke)","stroke-width","1.5","opacity","0.6"],["points","50,-5 54,8 46,8","fill","var(--u-light)"],["points","92,82 88,70 80,78","fill","var(--u-light)"],["points","8,82 20,78 12,70","fill","var(--u-light)"],["x","20","y","20","width","60","height","60","rx","6","fill","var(--u-dark)"],["x","46","y","46","width","8","height","8","fill","var(--u-core)"],["x","26","y","26","width","48","height","48","rx","4","fill","none","stroke","var(--u-stroke)","stroke-width","2"],["x","16","y","16","width","68","height","68","rx","8","fill","none","stroke","var(--u-core)","stroke-width","2"],["x","42","y","42","width","16","height","16","fill","var(--u-light)"],["x","12","y","12","width","76","height","76","rx","10","fill","none","stroke","var(--u-stroke)","stroke-width","1.5"],["x","12","y","12","width","10","height","10","fill","var(--u-light)"],["x","78","y","12","width","10","height","10","fill","var(--u-light)"],["x","12","y","78","width","10","height","10","fill","var(--u-light)"],["x","78","y","78","width","10","height","10","fill","var(--u-light)"],["points","50,15 80,32 80,68 50,85 20,68 20,32","fill","var(--u-emerald)"],["cx","50","cy","50","r","4","fill","var(--u-emerald-stroke)"],["x1","50","y1","20","x2","50","y2","40","stroke","var(--u-emerald-stroke)","stroke-width","2"],["x1","80","y1","50","x2","60","y2","50","stroke","var(--u-emerald-stroke)","stroke-width","2"],["x1","50","y1","80","x2","50","y2","60","stroke","var(--u-emerald-stroke)","stroke-width","2"],["points","50,28 70,38 70,62 50,72 30,62 30,38","fill","none","stroke","var(--u-emerald-stroke)","stroke-width","2"],["cx","50","cy","20","r","3","fill","var(--u-emerald-stroke)"],["cx","80","cy","50","r","3","fill","var(--u-emerald-stroke)"],["cx","50","cy","80","r","3","fill","var(--u-emerald-stroke)"],["points","50,10 85,30 85,70 50,90 15,70 15,30","fill","none","stroke","var(--u-emerald-stroke)","stroke-width","1.5","stroke-dasharray","4 4"],[1,"absolute","-top-1","-right-1","rounded-full","bg-blue-200","text-blue-900","flex","items-center","justify-center"],[1,"absolute","-bottom-1","-right-1","[filter:drop-shadow(0_0_2px_rgba(0,0,0,0.5))]"],[1,"absolute","-bottom-1","-right-1","opacity-70","[filter:drop-shadow(0_0_2px_rgba(0,0,0,0.5))]"],[1,"absolute","inset-0","flex","items-center","justify-center","pointer-events-none","transition-opacity","duration-500","combat-text-anim"],[1,"font-extrabold"],[1,"w-10","h-10","absolute","top-4","-left-5","rounded-full","bg-[#1e293b]","border","border-white/20","hover:bg-[#334155]","text-white","shadow-lg","flex","items-center","justify-center","transition-transform","hover:scale-110","cursor-pointer",3,"click"],[1,"text-xl"],[1,"border-b","border-white/10","pb-4","mb-4"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-xl","font-black","uppercase","tracking-tighter","text-transparent","bg-clip-text","bg-gradient-to-r","from-blue-400","to-purple-400"],["title","Clear all logs",1,"flex","items-center","gap-1.5","px-2","py-1","rounded","bg-red-500/10","hover:bg-red-500/20","border","border-red-500/30","text-red-400","text-[10px]","uppercase","font-bold","tracking-wider","transition-all","hover:scale-105","active:scale-95","cursor-pointer",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex","items-center","gap-3","group","cursor-pointer"],["type","checkbox",1,"peer","h-5","w-5","opacity-0","absolute","cursor-pointer",3,"change","checked"],[1,"h-5","w-5","border-2","border-white/30","rounded","bg-white/5","peer-checked:bg-blue-500","peer-checked:border-blue-400","transition-all"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"absolute","h-3.5","w-3.5","text-white","opacity-0","peer-checked:opacity-100","left-0.5","pointer-events-none"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M5 13l4 4L19 7"],[1,"text-sm","font-medium","text-gray-300","group-hover:text-white","transition-colors"],[1,"flex-1","overflow-y-auto","pr-2","space-y-3","custom-scrollbar"],[1,"text-center","py-10","text-gray-500","italic","text-sm"],[1,"p-3","rounded-lg","bg-white/5","border","border-white/5","hover:bg-white/10","transition-colors","text-[13px]","leading-relaxed","shadow-sm","animate-in","fade-in","slide-in-from-right-4","duration-300",3,"border-l-4","border-left-color"],[1,"p-3","rounded-lg","bg-white/5","border","border-white/5","hover:bg-white/10","transition-colors","text-[13px]","leading-relaxed","shadow-sm","animate-in","fade-in","slide-in-from-right-4","duration-300"],[1,"font-medium"],[1,"relative","flex","items-center","gap-3","border-b","border-white/5","pb-4"],[1,"w-2","h-6","bg-blue-500","rounded-full","shadow-[0_0_10px_rgba(59,130,246,0.5)]"],[1,"text-xl","font-black","uppercase","tracking-widest","text-white/90"],[1,"w-8","h-8","absolute","top-0","-right-10","rounded-full","bg-gray-700","hover:bg-gray-600","text-lg","cursor-pointer",3,"click"],[1,"flex","flex-col","gap-4"],[1,"text-[10px]","font-black","uppercase","tracking-widest","text-stone-400"],[1,"text-[10px]","px-2","py-0.5","rounded","bg-white/5","border","border-white/10","text-stone-300","italic"],[1,"grid","grid-cols-2","gap-2"],[1,"px-3","py-2","rounded-xl","text-xs","font-bold","capitalize","cursor-pointer","transition-all","duration-200","border","flex","items-center","justify-center","gap-2","group",3,"bg-blue-500/20","border-blue-400/40","text-blue-200","shadow-[0_0_15px_rgba(59,130,246,0","bg-white/5","border-white/5","text-stone-500","hover:bg-white/10"],[1,"text-[10px]","font-black","uppercase","tracking-widest","text-stone-400","ml-1","text-left"],[1,"flex","p-1","bg-black/40","rounded-2xl","border","border-white/5","shadow-inner"],[1,"cursor-pointer","flex-1","py-2","rounded-xl","text-xs","font-bold","transition-all","duration-300",3,"bg-gradient-to-br","from-indigo-600","to-indigo-800","text-white","shadow-lg","text-stone-500","hover:text-stone-300"],[1,"flex","items-center","gap-1","px-1","py-0.5","rounded-full","bg-white/5","border","border-white/10"],[1,"cursor-pointer","text-[9px]","font-black","uppercase","tracking-widest","px-2","py-0.5","rounded-full",3,"click"],[1,"px-3","py-2","rounded-xl","text-xs","font-bold","capitalize","cursor-pointer","transition-all","duration-200","border","flex","items-center","justify-center","gap-2","group",3,"click"],[1,"opacity-0","group-hover:opacity-100","transition-opacity"],[1,"cursor-pointer","flex-1","py-2","rounded-xl","text-xs","font-bold","transition-all","duration-300",3,"click"],[1,"bg-gray-800","p-6","rounded-lg","shadow-xl","border","border-gray-600","w-[680px]","max-w-[95vw]"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-2xl","font-bold"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-full","bg-gray-700","hover:bg-gray-600","text-lg","cursor-pointer",3,"click"],[1,"text-sm","text-gray-300","mb-2"],[1,"grid","grid-cols-2","gap-4"],[1,"bg-gray-800/60","border","border-gray-700","rounded-lg","p-3"],[1,"text-lg","font-semibold","mb-2","text-green-400"],[1,"flex","justify-between","text-sm"],[1,"text-xs","text-gray-400"],[1,"text-lg","font-semibold","mb-2","text-red-400"],[1,"mt-4","text-xs","text-gray-400"],[1,"font-mono"],[1,"font-mono","text-yellow-300"],[1,"text-red-500","font-bold","text-xs","uppercase","text-center","mb-1","border-b","border-red-900/50","pb-1"],[1,"bg-red-900/40","hover:bg-red-800/60","text-red-100","text-xs","px-3","py-1.5","rounded","border","border-red-800","transition-colors","cursor-pointer",3,"click"],[1,"bg-blue-900/40","hover:bg-blue-800/60","text-blue-100","text-xs","px-3","py-1.5","rounded","border","border-blue-800","transition-colors","cursor-pointer",3,"click"],[1,"text-[10px]","text-gray-400","text-center","font-mono","mt-1"]],template:function(t,r){if(t&1){let i=Et();v(0,"div",2)(1,"div",3),$(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"div",8),_(),he(),v(7,"svg",9)(8,"defs")(9,"clipPath",10),$(10,"path",11),_(),v(11,"symbol",12),$(12,"path",13),_()()(),Ve(),v(13,"div",14)(14,"div",15),$(15,"div",16)(16,"div",17),he(),v(17,"svg",18),$(18,"path",19)(19,"rect",20),_(),Ve(),$(20,"div",21)(21,"div",22),_(),v(22,"div",23)(23,"div",24)(24,"h1",25)(25,"span",26),w(26,"Shape"),_(),v(27,"span",27),w(28," Tactics "),_()(),v(29,"div",28),$(30,"div",29)(31,"div",30),_()(),v(32,"div",31)(33,"span",32),w(34),_()()(),$(35,"div",33),_(),v(36,"div",34)(37,"div",35)(38,"button",36),ae("click",function(){return ye(i),ve(r.gameEngine.resetGame())}),he(),v(39,"svg",37),$(40,"path",38),_(),Ve(),v(41,"span",39),w(42),_()(),$(43,"div",40),v(44,"button",41),ae("click",function(){return ye(i),ve(r.gameEngine.toggleRules())}),he(),v(45,"svg",42),$(46,"path",43),_(),Ve(),v(47,"span",44),w(48),_()()(),v(49,"div",45)(50,"button",46),ae("click",function(){return ye(i),ve(r.gameEngine.toggleHighScores())}),he(),v(51,"svg",47),$(52,"path",48),_(),Ve(),v(53,"span",49),w(54),_()(),v(55,"button",50),ae("click",function(){return ye(i),ve(r.gameEngine.toggleLeaderboard())}),he(),v(56,"svg",47),$(57,"path",51),_(),Ve(),v(58,"span",49),w(59),_()(),v(60,"button",52),ae("click",function(){return ye(i),ve(r.gameEngine.toggleLog())}),he(),v(61,"svg",47),$(62,"path",53),_(),Ve(),v(63,"span",49),w(64),_()(),v(65,"button",54),ae("click",function(){return ye(i),ve(r.navigateToFeedback())}),he(),v(66,"svg",47),$(67,"path",55),_(),Ve(),v(68,"span",49),w(69),_()()(),v(70,"div",56)(71,"button",57),ae("click",function(){return ye(i),ve(r.gameEngine.toggleSettings())}),he(),v(72,"svg",58),$(73,"path",59)(74,"path",60),_()(),ue(75,JG,9,3,"div",61)(76,ZG,4,1,"button",62),_()(),Ve(),v(77,"div",63)(78,"div",64),he(),v(79,"svg",65),$(80,"rect",66)(81,"circle",67),_(),Ve(),v(82,"span",68),w(83),_()(),v(84,"div",64),he(),v(85,"svg",65),$(86,"polygon",69),_(),Ve(),v(87,"span",70),w(88),_()(),v(89,"div",64),he(),v(90,"svg",65),$(91,"circle",71)(92,"path",72),_(),Ve(),v(93,"span",73),w(94),_()(),v(95,"div",64),he(),v(96,"svg",65),$(97,"path",74)(98,"rect",75)(99,"rect",76),_(),Ve(),v(100,"span",77),w(101),_()(),v(102,"button",78),ae("click",function(){return ye(i),ve(r.toggleMobileMenu())}),he(),v(103,"svg",79),$(104,"path",80),_()()(),Ve(),v(105,"div",81)(106,"button",82),ae("click",function(){return ye(i),ve(r.gameEngine.toggleBuildMode())}),he(),v(107,"svg",65),$(108,"path",83),_()(),Ve(),v(109,"button",82),ae("click",function(){return ye(i),ve(r.gameEngine.convertWoodToReserve())}),w(110," +1 "),_(),v(111,"button",82),ae("click",function(){return ye(i),ve(r.gameEngine.maxConvertWoodToReserve())}),w(112),_(),v(113,"label",84)(114,"div",85)(115,"input",86),ae("change",function(){return ye(i),ve(r.gameEngine.toggleFogDebug())}),_(),v(116,"div",87),$(117,"div",88),_()(),v(118,"span",89),w(119),_()(),v(120,"div",90),w(121),_(),v(122,"button",91),ae("click",function(){return ye(i),ve(r.gameEngine.endPlayerTurn())}),he(),v(123,"svg",92),$(124,"path",93)(125,"path",94),_()()(),ue(126,XG,19,7,"div",95),Ve(),v(127,"div",96),$(128,"div",97),v(129,"div",98)(130,"div",99)(131,"span",100),w(132),_(),v(133,"span",101),w(134),_()(),$(135,"div",102),v(136,"div",103)(137,"div",104)(138,"span",105),he(),v(139,"svg",106),$(140,"rect",66)(141,"circle",107)(142,"circle",108)(143,"rect",109)(144,"circle",110)(145,"circle",111),_()(),Ve(),v(146,"span",112),w(147),_()(),v(148,"div",113)(149,"span",105)(150,"div",114),he(),v(151,"svg",115),$(152,"polygon",116)(153,"rect",117)(154,"polygon",118)(155,"rect",119)(156,"polygon",120)(157,"rect",121),v(158,"g",122),$(159,"rect",123)(160,"polygon",124),_(),v(161,"g",125),$(162,"rect",126)(163,"circle",127)(164,"circle",128),_()()()(),Ve(),v(165,"span",129),w(166),v(167,"span",130),w(168,"/"),_(),w(169),_()()()(),v(170,"div",131),$(171,"div",132),v(172,"span",133),w(173),_(),v(174,"div",24)(175,"span",134),w(176),_()(),ue(177,e7,2,3,"div",135),_(),v(178,"div",98)(179,"div",103)(180,"div",104)(181,"span",136),w(182),_(),v(183,"span",105),he(),v(184,"svg",106),$(185,"rect",66)(186,"circle",107)(187,"circle",108)(188,"rect",109)(189,"circle",110)(190,"circle",111),_()()(),Ve(),v(191,"div",137)(192,"span",138),w(193),v(194,"span",130),w(195,"/"),_(),w(196),_(),v(197,"span",105)(198,"div",114),he(),v(199,"svg",115),$(200,"polygon",116)(201,"rect",117)(202,"polygon",118)(203,"rect",119)(204,"polygon",120)(205,"rect",121),v(206,"g",122),$(207,"rect",123)(208,"polygon",139),_(),v(209,"g",125),$(210,"rect",126)(211,"circle",127)(212,"circle",128),_()()()()()(),Ve(),$(213,"div",102),v(214,"div",140)(215,"span",141),w(216),_(),v(217,"span",142),w(218,"jaerbi"),_()()()(),ue(219,r7,11,11,"div",143),v(220,"button",144),ae("click",function(){return ye(i),ve(r.navigateToRoadmap())}),v(221,"div",145),$(222,"div",146),v(223,"span",147),w(224),_()(),v(225,"div",148),he(),v(226,"svg",149),$(227,"path",150),_()()(),Ve(),v(228,"button",151),ae("click",function(){return ye(i),ve(r.gameEngine.toggleSupport())}),v(229,"span",105),w(230,"\u2764\uFE0F"),_(),v(231,"span",152),w(232),_()(),ue(233,i7,1,0,"app-support-community"),ue(234,o7,1,0,"app-leaderboard-modal"),v(235,"div",153)(236,"div",154,0)(238,"div",155)(239,"div",156)(240,"span",157),w(241),_()(),ue(242,s7,3,1,"div",158),vn(243,az,2,0,null,null,ai),_()(),v(245,"div",159)(246,"div",160),$(247,"div",161),v(248,"div",162)(249,"span",163),w(250),_(),v(251,"div",164)(252,"span",165),w(253),_(),v(254,"div",166)(255,"span",105),w(256),_()()(),v(257,"div",167),$(258,"div",168),_()()()(),v(259,"div",169)(260,"div",170)(261,"button",171),ae("click",function(){return ye(i),ve(r.toggleAutoBattle())}),v(262,"div",172)(263,"span",173),w(264),_(),v(265,"span",174),w(266),_()(),v(267,"div",172),$(268,"span",175),_(),$(269,"div",176),_(),v(270,"button",177),ae("click",function(){return ye(i),ve(r.gameEngine.toggleBuildMode())}),v(271,"div",178)(272,"span",179),w(273,"+1"),_(),v(274,"div",180),he(),v(275,"svg",181),$(276,"path",182)(277,"path",183)(278,"path",184)(279,"rect",185),_()()(),Ve(),v(280,"div",186)(281,"span"),w(282,"-10"),_(),v(283,"div",187),he(),v(284,"svg",188),$(285,"rect",189)(286,"circle",190)(287,"circle",191),_()()(),Ve(),$(288,"div",176),_(),v(289,"button",192),ae("click",function(){return ye(i),ve(r.gameEngine.convertWoodToReserve())}),v(290,"div",193)(291,"span",194)(292,"span"),w(293,"20"),_(),v(294,"div",187),he(),v(295,"svg",188),$(296,"rect",189)(297,"circle",190)(298,"circle",191),_()()(),Ve(),v(299,"span",105),w(300,"\u2794"),_(),v(301,"span",195),w(302,"1 \u{1F464}"),_()()(),v(303,"button",196),ae("click",function(){return ye(i),ve(r.gameEngine.maxConvertWoodToReserve())}),v(304,"div",197)(305,"span",198),w(306),_(),v(307,"span",105),w(308,"\u2794"),_(),v(309,"span",105),w(310,"\u{1F465}++"),_()()()(),v(311,"label",199)(312,"div",85)(313,"input",86),ae("change",function(){return ye(i),ve(r.gameEngine.toggleFogDebug())}),_(),v(314,"div",87),$(315,"div",88),_()(),v(316,"span",89),w(317),_()(),v(318,"button",200),ae("click",function(){return ye(i),ve(r.gameEngine.endPlayerTurn())}),v(319,"div",201)(320,"span",198),w(321),_(),he(),v(322,"svg",92),$(323,"path",93)(324,"path",94),_()()(),Ve(),v(325,"div",90),w(326),_()()(),v(327,"div",202),w(328),_(),ue(329,cz,1,0,"app-game-rules"),ue(330,dz,24,5,"div",203),ue(331,pz,27,13,"div",204),ue(332,_z,24,9,"div",205),ue(333,Ez,9,2,"div",206),_()}if(t&2){let i;b(34),K(r.settings.version),b(8),fe(" ",r.settings.t("RELOAD")," "),b(6),fe(" ",r.settings.t("INFO")," "),b(6),K(r.settings.t("RECORDS")),b(5),K(r.settings.t("RANKING")),b(5),K(r.settings.t("SYSTEM_LOG")),b(5),K(r.settings.t("FEEDBACK_MODULE")),b(6),de((i=r.firebase.user$())?75:76,i),b(8),K(r.gameEngine.resources().wood),b(5),En(" ",r.gameEngine.getForestControl().player,"/",r.gameEngine.getForestControl().total," "),b(6),K(r.gameEngine.turn()),b(7),En(" ",r.gameEngine.getForestControl().player," : ",r.gameEngine.getForestControl().ai," "),b(5),ze("disabled",!r.gameEngine.canBuildThisTurn()),b(3),ze("disabled",!r.gameEngine.canAddReserveTurn()),b(2),ze("disabled",!r.gameEngine.canAddReserveTurn()),b(),fe(" ",r.settings.t("ALL")," "),b(3),ze("checked",r.gameEngine.fogDebugDisabled()),b(4),K(r.settings.t("MAP_HACK")),b(2),En(" ",r.gameEngine.remainingActions(),"/",r.gameEngine.totalPlayerUnits()," "),b(5),de(r.isMobileMenuOpen()?126:-1),b(6),fe(" ",r.settings.t("COMMANDER")," "),b(2),fe(" ",r.settings.t("PLAYER")," "),b(13),K(r.gameEngine.resources().wood),b(19),fe(" ",r.gameEngine.getForestControl().player," "),b(3),fe(" ",r.gameEngine.getForestControl().total," "),b(4),fe(" ",r.settings.t("TURN_CYCLE")," "),b(3),fe(" ",r.gameEngine.turn()," "),b(),de(r.gameEngine.monopolyTurnsLeft()>0?177:-1),b(5),K(r.gameEngine.aiWood()),b(11),fe(" ",r.gameEngine.getForestControl().ai," "),b(3),fe(" ",r.gameEngine.getForestControl().total," "),b(20),fe(" ",r.settings.t("HOSTILE")," "),b(3),de(r.gameEngine.shouldShowEndOverlay()?219:-1),b(5),fe(" ",r.settings.t("STRATEGIC_PLAN")," "),b(8),K(r.settings.t("SUPPORT")),b(),de(r.gameEngine.supportOpen()?233:-1),b(),de(r.gameEngine.leaderboardOpen()?234:-1),b(2),Ue("shake",r.gameEngine.screenShake())("mood-none",r.gameEngine.currentMood()==="none")("mood-angry",r.gameEngine.currentMood()==="angry")("mood-rage",r.gameEngine.currentMood()==="rage"),b(2),ct("grid-template-columns","repeat("+r.gameEngine.gridSize+", minmax("+r.gameEngine.tileMinSizePx+"px, "+r.gameEngine.tileSizePx+"px))")("gap",r.gameEngine.wallThicknessPx+2,"px"),b(3),fe(" ",r.gameEngine.baseHealth().player," "),b(),de(r.gameEngine.isVisibleToPlayer(r.gameEngine.gridSize-1,r.gameEngine.gridSize-1)?242:-1),b(),_n(r.gameEngine.gridRows),b(4),Ue("bg-lime-400",r.settings.difficulty()==="baby")("bg-emerald-400",r.settings.difficulty()==="normal")("bg-orange-500",r.settings.difficulty()==="hard")("bg-red-600",r.settings.difficulty()==="nightmare"),b(3),K(r.settings.t("RISK")),b(2),Ue("text-lime-300",r.settings.difficulty()==="baby")("text-emerald-300",r.settings.difficulty()==="normal")("text-orange-400",r.settings.difficulty()==="hard")("text-red-500",r.settings.difficulty()==="nightmare"),b(),fe(" ",r.settings.t(r.settings.getDifficultyLabel(r.settings.difficulty()))," "),b(3),fe(" ",r.settings.difficulty()==="baby"?"\u{1F476}":r.settings.difficulty()==="normal"?"\u{1F920}":r.settings.difficulty()==="hard"?"\u{1F608}":"\u2620\uFE0F"," "),b(2),ct("width",r.settings.difficulty()==="baby"?25:r.settings.difficulty()==="normal"?50:r.settings.difficulty()==="hard"?75:100,"%"),Ue("bg-lime-400",r.settings.difficulty()==="baby")("bg-emerald-400",r.settings.difficulty()==="normal")("bg-orange-500",r.settings.difficulty()==="hard")("bg-red-600",r.settings.difficulty()==="nightmare"),b(3),Ue("ring-2",r.isAutoBattleActive())("ring-green-400",r.isAutoBattleActive()),ze("disabled",r.gameEngine.gameStatus()!=="playing"),b(3),K(r.settings.t("AUTO")),b(2),K(r.settings.t("ENGAGE")),b(2),Ue("bg-green-400",r.isAutoBattleActive())("bg-gray-500",!r.isAutoBattleActive()),b(2),Ue("ring-2",r.gameEngine.buildMode())("ring-blue-400",r.gameEngine.buildMode()),ze("disabled",r.gameEngine.wallBuiltThisTurn()||!r.gameEngine.canBuildThisTurn()),b(19),ze("disabled",!r.gameEngine.canAddReserveTurn()),b(14),ze("disabled",!r.gameEngine.canAddReserveTurn()),b(3),K(r.settings.t("ALL")),b(7),ze("checked",r.gameEngine.fogDebugDisabled()),b(4),K(r.settings.t("MAP_HACK")),b(4),K(r.settings.t("NEXT_TURN")),b(5),Za(" ",r.settings.currentLang()==="uk"?"\u0417\u0430\u043B\u0438\u0448\u0438\u043B\u043E\u0441\u044C \u0434\u0456\u0439":"Remaining actions",": ",r.gameEngine.remainingActions(),"/",r.gameEngine.totalPlayerUnits()," "),b(2),fe(" ",r.settings.version," | \xA9\uFE0E Created by jaerbi and just "),b(),de(r.gameEngine.rulesOpen()?329:-1),b(),de(r.gameEngine.logOpen()?330:-1),b(),de(r.gameEngine.settingsOpen()?331:-1),b(),de(r.gameEngine.highScoresOpen()?332:-1),b(),de(r.isProduction?-1:333)}},dependencies:[Un,$m,Gm,zm,uE,bu],styles:[`.monopoly-top[_ngcontent-%COMP%]{top:46px}.mobile-hud-header[_ngcontent-%COMP%], .actions-bar[_ngcontent-%COMP%]{display:none}@media(max-width:1024px){.nav-bar[_ngcontent-%COMP%], .status-bar[_ngcontent-%COMP%]{display:none}.mobile-hud-header[_ngcontent-%COMP%]{display:flex;margin-bottom:0}.mobile-hud-header[_ngcontent-%COMP%]   .hud-item[_ngcontent-%COMP%]{min-width:0}.mobile-hud-header[_ngcontent-%COMP%]   .hud-value[_ngcontent-%COMP%]{white-space:nowrap}.burger-btn[_ngcontent-%COMP%]{min-width:34px;min-height:34px}.actions-bar[_ngcontent-%COMP%]{display:flex;position:sticky;top:42px;z-index:1}.action-btn[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:6px;background:#ffffff14;border:1px solid rgba(255,255,255,.15);display:flex;align-items:center;justify-content:center}.board[_ngcontent-%COMP%]{max-width:100vw;max-height:calc(100vh - 140px)}.end-overlay[_ngcontent-%COMP%]   .end-dialog[_ngcontent-%COMP%]{width:90vw;max-width:560px}.mobile-menu-overlay[_ngcontent-%COMP%]   .mobile-menu-panel[_ngcontent-%COMP%]   .menu-link[_ngcontent-%COMP%]{width:100%;text-align:left;padding:10px 12px;border-radius:8px;background:#ffffff0f;border:1px solid rgba(255,255,255,.12);color:#e5e7eb;font-size:12px;letter-spacing:.05em}.mobile-actions-hide-text[_ngcontent-%COMP%], .mobile-hide-logo[_ngcontent-%COMP%]{display:none}.mobile-actions-compact[_ngcontent-%COMP%]{right:0;bottom:6px;opacity:.8;scale:.8}.mobile-actions-compact-plan[_ngcontent-%COMP%]{bottom:50px;right:6px}}.spawn-zone-highlight[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #3b82f680;border-radius:4px;background-image:radial-gradient(circle,#3b82f633,#3b82f600 70%);animation:_ngcontent-%COMP%_pulseHighlight 2s infinite}@keyframes _ngcontent-%COMP%_pulseHighlight{0%{opacity:.5}50%{opacity:1}to{opacity:.5}}.shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_tremble .18s ease-in-out 0s 1 normal forwards}@keyframes _ngcontent-%COMP%_tremble{0%{transform:translate(0) rotate(0)}20%{transform:translate(-1px,.5px) rotate(-.5deg)}40%{transform:translate(1px,-.5px) rotate(.6deg)}60%{transform:translate(-1px,.5px) rotate(-.6deg)}80%{transform:translate(1px,-.5px) rotate(.4deg)}to{transform:translate(0) rotate(0)}}.hit-flash[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hitFlash .3s ease-out 1}@keyframes _ngcontent-%COMP%_hitFlash{0%{filter:brightness(1)}30%{filter:brightness(1.8)}to{filter:brightness(1)}}.hp-drain[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hpDrain 1.2s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_hpDrain{0%{width:90%}50%{width:60%}to{width:30%}}.merge-loop[_ngcontent-%COMP%]{position:relative;width:160px;height:80px}.merge-loop[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{position:absolute;top:20px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:9999px;font-weight:700}.merge-loop[_ngcontent-%COMP%]   .u1[_ngcontent-%COMP%]{left:10px;background:#3b82f6;color:#fff;animation:_ngcontent-%COMP%_u1ToCenter 1.6s ease-in-out infinite alternate}.merge-loop[_ngcontent-%COMP%]   .u2[_ngcontent-%COMP%]{right:10px;background:#3b82f6;color:#fff;animation:_ngcontent-%COMP%_u2ToCenter 1.6s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_u1ToCenter{0%{transform:translate(0)}50%{transform:translate(44px)}to{transform:translate(0)}}@keyframes _ngcontent-%COMP%_u2ToCenter{0%{transform:translate(0)}50%{transform:translate(-44px)}to{transform:translate(0)}}.merge-loop[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]{position:absolute;left:50%;top:18px;transform:translate(-50%);width:42px;height:42px;border-radius:8px;background:#60a5fa;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;opacity:0;animation:_ngcontent-%COMP%_resultAppear 1.6s ease-in-out infinite alternate,_ngcontent-%COMP%_tremble .18s ease-in-out .7s infinite}@keyframes _ngcontent-%COMP%_resultAppear{0%{opacity:0;transform:translate(-50%) scale(.8)}40%{opacity:0;transform:translate(-50%) scale(.8)}50%{opacity:1;transform:translate(-50%) scale(1.1)}to{opacity:1;transform:translate(-50%) scale(1)}}.support-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_supportGlowCycle 10s infinite}@keyframes _ngcontent-%COMP%_supportGlowCycle{0%,80%{box-shadow:0 4px 15px #db277766}83%{box-shadow:0 0 0 10px #db2777cc}97%{box-shadow:0 0 0 25px #db277700}to{box-shadow:0 4px 15px #db277766}}.mood-none[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #4dffcae6,0 0 28px #4dffca80}.mood-angry[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #ffed4de6,0 0 28px #ffed4d80}.mood-rage[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #ef4444e6,0 0 28px #ef444480}.castle[_ngcontent-%COMP%]{position:absolute;font-size:16px}.forest-area[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #2d5742e6,inset 0 0 40px #2d5742cc;border-color:#346a4f}.castle.red[_ngcontent-%COMP%]{filter:hue-rotate(140deg)}

`,"*[_ngcontent-%COMP%]{box-sizing:border-box}.tile[_ngcontent-%COMP%]{min-width:64px;min-height:64px;aspect-ratio:1 / 1;position:relative}.combat-text-anim[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_combatFloat .5s ease-out}@keyframes _ngcontent-%COMP%_combatFloat{0%{transform:translateY(0)}to{transform:translateY(-12px)}}.shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_defenderShake .2s ease-out}@keyframes _ngcontent-%COMP%_defenderShake{0%{transform:translate(0)}25%{transform:translate(2px,-2px)}50%{transform:translate(-2px,2px)}75%{transform:translate(2px,2px)}to{transform:translate(0)}}.arrival-pop[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_arrivalPop .2s ease-out}@keyframes _ngcontent-%COMP%_arrivalPop{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}.pulse-glow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseGlow .4s ease-out}@keyframes _ngcontent-%COMP%_pulseGlow{0%{box-shadow:0 0 #ffd70000}50%{box-shadow:0 0 12px #ffd700cc}to{box-shadow:0 0 #ffd70000}}.wood-pulse-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_woodPulse 1s ease-in-out infinite;filter:drop-shadow(0 0 4px rgba(16,185,129,.7))}@keyframes _ngcontent-%COMP%_woodPulse{0%{transform:scale(.9);opacity:.6}50%{transform:scale(1.1);opacity:1}to{transform:scale(.9);opacity:.6}}"]})};var DO=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(_e(Bs),_e(Dr))};static \u0275dir=en({type:n})}return n})(),bz=(()=>{class n extends DO{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Us(n)))(i||n)}})();static \u0275dir=en({type:n,features:[oi]})}return n})(),AO=new re("");var wz={provide:AO,useExisting:xo(()=>ey),multi:!0};function Iz(){let n=ur()?ur().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Sz=new re(""),ey=(()=>{class n extends DO{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Iz())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(_e(Bs),_e(Dr),_e(Sz,8))};static \u0275dir=en({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ae("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[du([wz]),oi]})}return n})();function dS(n){return n==null||hS(n)===0}function hS(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var MO=new re(""),RO=new re(""),Tz=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,po=class{static min(e){return Cz(e)}static max(e){return xz(e)}static required(e){return Dz(e)}static requiredTrue(e){return Az(e)}static email(e){return Mz(e)}static minLength(e){return Rz(e)}static maxLength(e){return Nz(e)}static pattern(e){return Pz(e)}static nullValidator(e){return NO()}static compose(e){return VO(e)}static composeAsync(e){return BO(e)}};function Cz(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function xz(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function Dz(n){return dS(n.value)?{required:!0}:null}function Az(n){return n.value===!0?null:{required:!0}}function Mz(n){return dS(n.value)||Tz.test(n.value)?null:{email:!0}}function Rz(n){return e=>{let t=e.value?.length??hS(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function Nz(n){return e=>{let t=e.value?.length??hS(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function Pz(n){if(!n)return NO;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(dS(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function NO(n){return null}function PO(n){return n!=null}function kO(n){return Oo(n)?jt(n):n}function OO(n){let e={};return n.forEach(t=>{e=t!=null?V(V({},e),t):e}),Object.keys(e).length===0?null:e}function FO(n,e){return e.map(t=>t(n))}function kz(n){return!n.validate}function LO(n){return n.map(e=>kz(e)?e:t=>e.validate(t))}function VO(n){if(!n)return null;let e=n.filter(PO);return e.length==0?null:function(t){return OO(FO(t,e))}}function UO(n){return n!=null?VO(LO(n)):null}function BO(n){if(!n)return null;let e=n.filter(PO);return e.length==0?null:function(t){let r=FO(t,e).map(kO);return zy(r).pipe(It(OO))}}function jO(n){return n!=null?BO(LO(n)):null}function EO(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function HO(n){return n._rawValidators}function $O(n){return n._rawAsyncValidators}function aS(n){return n?Array.isArray(n)?n:[n]:[]}function Km(n,e){return Array.isArray(n)?n.includes(e):n===e}function bO(n,e){let t=aS(e);return aS(n).forEach(i=>{Km(t,i)||t.push(i)}),t}function wO(n,e){return aS(e).filter(t=>!Km(n,t))}var Qm=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=UO(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Jc=class extends Qm{name;get formDirective(){return null}get path(){return null}},Fd=class extends Qm{_parent=null;name=null;valueAccessor=null},Ym=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var GO=(()=>{class n extends Ym{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(_e(Fd,2))};static \u0275dir=en({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ue("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[oi]})}return n})(),zO=(()=>{class n extends Ym{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(_e(Jc,10))};static \u0275dir=en({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ue("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[oi]})}return n})();var Nd="VALID",Wm="INVALID",Qc="PENDING",Pd="DISABLED",is=class{},Jm=class extends is{value;source;constructor(e,t){super(),this.value=e,this.source=t}},kd=class extends is{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Od=class extends is{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Yc=class extends is{status;source;constructor(e,t){super(),this.status=e,this.source=t}},cS=class extends is{source;constructor(e){super(),this.source=e}},Ld=class extends is{source;constructor(e){super(),this.source=e}};function fS(n){return(ty(n)?n.validators:n)||null}function Oz(n){return Array.isArray(n)?UO(n):n||null}function pS(n,e){return(ty(e)?e.asyncValidators:n)||null}function Fz(n){return Array.isArray(n)?jO(n):n||null}function ty(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function qO(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new te(1e3,"");if(!r[t])throw new te(1001,"")}function WO(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new te(1002,"")})}var Zc=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Kt(this.statusReactive)}set status(e){Kt(()=>this.statusReactive.set(e))}_status=Mr(()=>this.statusReactive());statusReactive=Y(void 0);get valid(){return this.status===Nd}get invalid(){return this.status===Wm}get pending(){return this.status==Qc}get disabled(){return this.status===Pd}get enabled(){return this.status!==Pd}errors;get pristine(){return Kt(this.pristineReactive)}set pristine(e){Kt(()=>this.pristineReactive.set(e))}_pristine=Mr(()=>this.pristineReactive());pristineReactive=Y(!0);get dirty(){return!this.pristine}get touched(){return Kt(this.touchedReactive)}set touched(e){Kt(()=>this.touchedReactive.set(e))}_touched=Mr(()=>this.touchedReactive());touchedReactive=Y(!1);get untouched(){return!this.touched}_events=new Ut;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(bO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(bO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(wO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(wO(e,this._rawAsyncValidators))}hasValidator(e){return Km(this._rawValidators,e)}hasAsyncValidator(e){return Km(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(pe(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Od(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Od(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(pe(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new kd(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new kd(!0,r))}markAsPending(e={}){this.status=Qc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Yc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(pe(V({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Pd,this.errors=null,this._forEachChild(i=>{i.disable(pe(V({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Jm(this.value,r)),this._events.next(new Yc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Nd,this._forEachChild(r=>{r.enable(pe(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pe(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Nd||this.status===Qc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Jm(this.value,t)),this._events.next(new Yc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(pe(V({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pd:Nd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Qc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=kO(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Yc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ht,this.statusChanges=new Ht}_calculateStatus(){return this._allControlsDisabled()?Pd:this.errors?Wm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qc)?Qc:this._anyControlsHaveStatus(Wm)?Wm:Nd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new kd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Od(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ty(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Oz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Fz(this._rawAsyncValidators)}},Xc=class extends Zc{constructor(e,t,r){super(fS(t),pS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){WO(this,!0,e),Object.keys(e).forEach(r=>{qO(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,pe(V({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Ld(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var lS=class extends Xc{};var KO=new re("",{factory:()=>gS}),gS="always";function Lz(n,e){return[...e.path,n]}function IO(n,e,t=gS){mS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Uz(n,e),jz(n,e),Bz(n,e),Vz(n,e)}function SO(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Xm(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Zm(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Vz(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function mS(n,e){let t=HO(n);e.validator!==null?n.setValidators(EO(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=$O(n);e.asyncValidator!==null?n.setAsyncValidators(EO(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Zm(e._rawValidators,i),Zm(e._rawAsyncValidators,i)}function Xm(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=HO(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=$O(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Zm(e._rawValidators,r),Zm(e._rawAsyncValidators,r),t}function Uz(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&QO(n,e)})}function Bz(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&QO(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function QO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function jz(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Hz(n,e){n==null,mS(n,e)}function $z(n,e){return Xm(n,e)}function Gz(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function zz(n){return Object.getPrototypeOf(n.constructor)===bz}function qz(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Wz(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===ey?t=o:zz(o)?r=o:i=o}),i||r||t||null}function Kz(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function TO(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function CO(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var _a=class extends Zc{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(fS(t),pS(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ty(t)&&(t.nonNullable||t.initialValueIsDefault)&&(CO(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Ld(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){TO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){TO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){CO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Qz=n=>n instanceof _a;var YO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=en({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var uS=class extends Zc{constructor(e,t,r){super(fS(t),pS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){WO(this,!1,e),e.forEach((r,i)=>{qO(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],pe(V({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Ld(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var Yz=(()=>{class n extends Jc{callSetDisabledState;get submitted(){return Kt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Mr(()=>this._submittedReactive());_submittedReactive=Y(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(Xm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let r=this.form.get(t.path);return IO(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){SO(t.control||null,t,!1),Kz(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,r){this.form.get(t.path).setValue(r)}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,qz(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new cS(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(SO(r||null,t),Qz(i)&&(IO(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);Hz(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&$z(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){mS(this.form,this),this._oldForm&&Xm(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(_e(MO,10),_e(RO,10),_e(KO,8))};static \u0275dir=en({type:n,features:[oi,Ui]})}return n})();var JO=new re("");var Jz={provide:Fd,useExisting:xo(()=>yS)},yS=(()=>{class n extends Fd{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Ht;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Wz(this,o)}ngOnChanges(t){this._added||this._setUpControl(),Gz(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Lz(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(_e(Jc,13),_e(MO,10),_e(RO,10),_e(AO,10),_e(JO,8))};static \u0275dir=en({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[du([Jz]),oi,Ui]})}return n})();var Zz={provide:Jc,useExisting:xo(()=>vS)},vS=(()=>{class n extends Yz{form=null;ngSubmit=new Ht;get control(){return this.form}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Us(n)))(i||n)}})();static \u0275dir=en({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ae("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[du([Zz]),oi]})}return n})();var Xz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hi({type:n});static \u0275inj=Wr({})}return n})();function xO(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var ZO=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return xO(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Xc(i,o)}record(t,r=null){let i=this._reduceControls(t);return new lS(i,r)}control(t,r,i){let o={};return this.useNonNullable?(xO(r)?o=r:(o.validators=r,o.asyncValidators=i),new _a(t,pe(V({},o),{nonNullable:!0}))):new _a(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new uS(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof _a)return t;if(t instanceof Zc)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var XO=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:JO,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:KO,useValue:t.callSetDisabledState??gS}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hi({type:n});static \u0275inj=Wr({imports:[Xz]})}return n})();var ny=class n{db;auth;constructor(){let e=Ku(Bm);this.db=Ed(e),this.auth=Rd(e)}async addFeedback(e){let t=pe(V({},e),{rating:Math.max(1,Math.min(5,Math.floor(e.rating))),text:(e.text??"").slice(0,500),timestamp:CI()});await _m(Vr(this.db,"feedbacks"),t)}async getRecentFeedbacks(e){let t=es(Vr(this.db,"feedbacks"),lo("timestamp","desc"),pa(e));return(await ga(t)).docs.map(i=>i.data())}async getFeedbackPage(e,t){let r=[lo("timestamp","desc"),pa(e)],i=t?es(Vr(this.db,"feedbacks"),lo("timestamp","desc"),Sk(t),pa(e)):es(Vr(this.db,"feedbacks"),lo("timestamp","desc"),pa(e)),o=await ga(i),s=o.docs.map(c=>c.data()),a=o.docs.length>0?o.docs[o.docs.length-1]:null;return{items:s,lastDoc:a}}async canUserPostToday(e){let t=new Date(Date.now()-864e5),r=es(Vr(this.db,"feedbacks"),ts("userId","==",e),ts("timestamp",">=",t)),o=(await ga(r)).size,s=3;return{allowed:o<s,remaining:Math.max(0,s-o)}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var _S=()=>[1,2,3,4,5],e2=(n,e)=>e.timestamp;function nq(n,e){if(n&1){let t=Et();v(0,"button",39),ae("click",function(){let i=ye(t).$implicit,o=U(2);return ve(o.setRating(i))}),w(1," \u2605 "),_()}if(n&2){let t=e.$implicit,r=U(2);Ue("active",r.form.value.rating>=t)}}function rq(n,e){if(n&1&&(v(0,"div",36),w(1),_()),n&2){let t=U(2);b(),K(t.settings.t("FEEDBACK_VALIDATION_RANGE"))}}function iq(n,e){n&1&&(v(0,"div",37),w(1),_()),n&2&&(b(),K(e))}function oq(n,e){if(n&1){let t=Et();v(0,"div",25)(1,"div",26),$(2,"img",27),_(),v(3,"div",28)(4,"div",29),w(5),_(),v(6,"div",30),w(7),_()()(),v(8,"form",31),ae("ngSubmit",function(){ye(t);let i=U();return ve(i.submit())}),v(9,"div")(10,"div",32),w(11),_(),v(12,"div",33),vn(13,nq,2,2,"button",34,ai),_()(),v(15,"div")(16,"div",32),w(17),_(),$(18,"textarea",35),ue(19,rq,2,1,"div",36),ue(20,iq,2,1,"div",37),_(),v(21,"button",38),w(22),_()()}if(n&2){let t,r=e,i=U();b(2),ze("src",r.photoURL,ii),b(3),K(r.displayName),b(2),K(i.settings.t("OPERATOR_ONLINE")),b(),ze("formGroup",i.form),b(3),K(i.settings.t("EFFICIENCY_RATING")),b(2),_n(js(16,_S)),b(4),K(i.settings.t("TACTICAL_NOTE")),b(),ze("placeholder",B_(i.settings.currentLang()==="uk"?"\u041F\u0435\u0440\u0435\u0434\u0430\u0439\u0442\u0435 \u0442\u0430\u043A\u0442\u0438\u0447\u043D\u0438\u0439 \u0430\u043D\u0430\u043B\u0456\u0437...":"Transmit tactical analysis...")),b(),de(i.form.controls.text.errors?19:-1),b(),de((t=i.message())?20:-1,t),b(),Ue("cursor-pointer",i.canSubmit)("cursor-not-allowed",!i.canSubmit),ze("disabled",!i.canSubmit),b(),fe(" ",i.settings.t("TRANSMIT_REPORT")," ")}}function sq(n,e){if(n&1&&(v(0,"div",21),w(1),_()),n&2){let t=U();b(),K(t.settings.t("SYSTEM_LOG"))}}function aq(n,e){if(n&1&&(v(0,"div",22),w(1),_()),n&2){let t=U();b(),K(t.settings.t("COMMUNITY_SIGNALS_TABLE"))}}function cq(n,e){if(n&1&&(v(0,"span"),w(1,"\u2605"),_()),n&2){let t=e.$implicit,r=U().$implicit;Ue("active",r.rating>=t)}}function lq(n,e){if(n&1&&(v(0,"tr",44)(1,"td",47),$(2,"img",48),v(3,"span"),w(4),_()(),v(5,"td",49)(6,"div",50),vn(7,cq,2,2,"span",51,ai),_()(),v(9,"td",49)(10,"span",52),w(11),_()(),v(12,"td",49)(13,"span",53),w(14),_()()()),n&2){let t=e.$implicit,r=U(2);b(2),ze("src",t.userPhoto,ii),b(2),K(t.userName),b(3),_n(js(4,_S)),b(4),K(t.text),b(3),K(r.formatDate(t.timestamp))}}function uq(n,e){if(n&1&&(v(0,"tr")(1,"td",54),w(2),_()()),n&2){let t=U(2);b(2),K(t.settings.t("NO_SIGNALS"))}}function dq(n,e){if(n&1){let t=Et();v(0,"div",40)(1,"table",41)(2,"thead")(3,"tr",42)(4,"th",43),w(5),_(),v(6,"th",43),w(7),_(),v(8,"th",43),w(9),_(),v(10,"th",43),w(11),_()()(),v(12,"tbody"),vn(13,lq,15,5,"tr",44,e2,!1,uq,3,1,"tr"),_()()(),v(16,"div",45)(17,"button",46),ae("click",function(){ye(t);let i=U();return ve(i.prevPage())}),w(18),_(),v(19,"button",46),ae("click",function(){ye(t);let i=U();return ve(i.nextPage())}),w(20),_()()}if(n&2){let t=U();b(5),K(t.settings.t("TABLE_OPERATOR")),b(2),K(t.settings.t("TABLE_RATING")),b(2),K(t.settings.t("TABLE_MESSAGE")),b(2),K(t.settings.t("TABLE_DATE")),b(2),_n(t.pageItems()),b(5),fe(" ",t.settings.t("PREVIOUS")," "),b(2),fe(" ",t.settings.t("NEXT")," ")}}function hq(n,e){if(n&1&&(v(0,"span"),w(1,"\u2605"),_()),n&2){let t=e.$implicit,r=U().$implicit;Ue("active",r.rating>=t)}}function fq(n,e){if(n&1&&(v(0,"div",55)(1,"div",56)(2,"div",57),$(3,"img",58),v(4,"div",59),w(5),_()(),v(6,"div",50),vn(7,hq,2,2,"span",51,ai),_()(),v(9,"div",60),w(10),_()()),n&2){let t=e.$implicit;b(3),ze("src",t.userPhoto,ii),b(2),K(t.userName),b(2),_n(js(3,_S)),b(3),K(t.text)}}function pq(n,e){if(n&1&&vn(0,fq,11,4,"div",55,e2),n&2){let t=U();_n(t.recent())}}var ry=class n{constructor(e,t,r,i,o){this.fb=e;this.router=t;this.feedback=r;this.firebase=i;this.settings=o;this.form=new Xc({text:new _a("",{nonNullable:!0,validators:[po.required,po.minLength(10),po.maxLength(500)]}),rating:new _a(5,{nonNullable:!0,validators:[po.required,po.min(1),po.max(5)]})}),this.loadRecent();let s=this.firebase.user$();if(s){let a=`feedback_throttle_${s.uid}`,c=Number(localStorage.getItem(a)||0);this.disabledUntil.set(c)}this.loadPage(0)}recent=Y([]);pageItems=Y([]);pageStack=[null];pageIndex=Y(0);lastDoc=null;disabledUntil=Y(0);message=Y(null);isAllShow=!1;form;async loadRecent(){try{let e=await this.feedback.getRecentFeedbacks(30);this.recent.set(e)}catch{}}async loadPage(e=0){try{let t=Math.max(0,this.pageIndex()+e),r=this.pageStack[t]??null,i=await this.feedback.getFeedbackPage(10,r);if(this.pageItems.set(i.items),this.lastDoc=i.lastDoc,e>=0){let o=t+1;this.pageStack[o]=this.lastDoc,this.pageIndex.set(t+1)}else this.pageIndex.set(t)}catch{}}async nextPage(){await this.loadPage(0),this.lastDoc&&await this.loadPage(0)}async prevPage(){let e=this.pageIndex(),t=Math.max(0,e-2),r=this.pageStack[t]??null,i=await this.feedback.getFeedbackPage(10,r);this.pageItems.set(i.items),this.lastDoc=i.lastDoc,this.pageIndex.set(t+1)}formatDate(e){try{if(!e)return"";let t=e.seconds?e.seconds*1e3:typeof e=="number"?e:Date.now();return new Date(t).toLocaleString()}catch{return""}}get canSubmit(){return!this.firebase.user$()||Date.now()<this.disabledUntil()?!1:this.form.valid}get throttleActive(){return Date.now()<this.disabledUntil()}async submit(){let e=this.firebase.user$();if(!e)return;let{allowed:t,remaining:r}=await this.feedback.canUserPostToday(e.uid);if(!t){this.message.set(this.settings.t("FEEDBACK_LIMIT_REACHED"));return}let i=this.form.value,o={userId:e.uid,userName:e.displayName||"Anonymous",userPhoto:e.photoURL||"",text:i.text||"",rating:Number(i.rating)||5};await this.feedback.addFeedback(o),this.message.set(this.settings.t("FEEDBACK_SUBMITTED")),this.form.reset({text:"",rating:5});let s=`feedback_throttle_${e.uid}`,a=Date.now()+300*1e3;localStorage.setItem(s,String(a)),this.disabledUntil.set(a),await this.loadRecent(),await this.loadPage(0)}setRating(e){this.form.patchValue({rating:e})}static \u0275fac=function(t){return new(t||n)(_e(ZO),_e(Ki),_e(ny),_e(bi),_e(In))};static \u0275cmp=fn({type:n,selectors:[["app-feedback"]],decls:34,vars:10,consts:[[1,"min-h-screen","tactical-bg","text-white","flex","items-center","justify-center","p-6"],[1,"fixed","inset-0","overflow-hidden","pointer-events-none","select-none","z-0"],[1,"floating-shape","shape-giant-1"],[1,"floating-shape","shape-giant-2"],[1,"floating-shape","shape-giant-3"],[1,"floating-shape","shape-giant-4"],[1,"floating-shape","shape-giant-5"],["width","0","height","0",1,"absolute","pointer-events-none"],["id","soft-triangle","clipPathUnits","objectBoundingBox"],["d","M0.5 0.05 Q0.5 0 0.56 0.12 L0.92 0.85 Q0.98 0.98 0.85 0.98 L0.15 0.98 Q0.02 0.98 0.08 0.85 L0.44 0.12 Q0.5 0 0.5 0.05"],[1,"w-full","max-w-6xl","tactical-frame","rounded-lg","overflow-hidden","z-1"],[1,"hud-header","flex","items-center","justify-between","px-6","py-4"],[1,"flex","flex-col"],[1,"hud-title"],[1,"hud-subtitle"],["routerLink","/",1,"hud-btn"],[1,"grid","grid-cols-1","lg:grid-cols-2"],[1,"hud-panel","border-r","border-white/10","p-6"],[1,"panel-title"],[1,"hud-panel","p-6"],[1,"flex","justify-between","items-center"],[1,"panel-title","red","mb-0"],[1,"panel-title","mb-0"],[1,"cursor-pointer","text-[8px]","font-bold","text-blue-400","hover:text-white","transition-colors","tracking-widest","uppercase","pr-2",3,"click"],[1,"max-h-[420px]","overflow-auto","space-y-4","pr-2","hud-scroll"],[1,"flex","items-center","gap-4","mb-6"],[1,"avatar-frame"],["referrerpolicy","no-referrer",1,"w-12","h-12","rounded-md","bg-black",3,"src"],[1,"text-sm"],[1,"font-bold","text-white"],[1,"text-xs","text-blue-400/60"],[1,"space-y-5",3,"ngSubmit","formGroup"],[1,"label"],[1,"flex","gap-2","mt-2"],["type","button",1,"rating-cell",3,"active"],["formControlName","text","rows","4",1,"hud-textarea",3,"placeholder"],[1,"text-[10px]","text-red-300"],[1,"text-[10px]","text-yellow-300"],["type","submit",1,"hud-action-btn",3,"disabled"],["type","button",1,"rating-cell",3,"click"],[1,"rounded-md","border","border-white/10","bg-white/5"],[1,"w-full","text-left"],[1,"text-white/80","text-[11px]"],[1,"px-3","py-2","border-b","border-white/10"],[1,"text-white/90","text-[12px]"],[1,"flex","items-center","justify-end","gap-3","mt-3"],[1,"px-3","py-1.5","rounded-md","border","border-white/20","text-white","hover:border-indigo-400","hover:text-indigo-300","transition",3,"click"],[1,"px-3","py-2","flex","items-center","gap-2"],["referrerpolicy","no-referrer",1,"w-6","h-6","rounded-md","border","border-white/20",3,"src"],[1,"px-3","py-2"],[1,"rating-view"],[3,"active"],[1,"text-white"],[1,"text-white/80"],["colspan","4",1,"px-3","py-4","text-center","text-white/70"],[1,"signal-card"],[1,"flex","items-center","justify-between","mb-3"],[1,"flex","items-center","gap-3"],["referrerpolicy","no-referrer",1,"w-9","h-9","rounded-md","border","border-white/20",3,"src"],[1,"text-sm","font-semibold","text-white"],[1,"signal-text"]],template:function(t,r){if(t&1&&(v(0,"div",0)(1,"div",1),$(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),_(),he(),v(7,"svg",7)(8,"defs")(9,"clipPath",8),$(10,"path",9),_()()(),Ve(),v(11,"div",10)(12,"div",11)(13,"div",12)(14,"span",13),w(15),_(),v(16,"span",14),w(17),_()(),v(18,"a",15),w(19),_()(),v(20,"div",16)(21,"div",17)(22,"div",18),w(23),_(),ue(24,oq,23,17),_(),v(25,"div",19)(26,"div",20),ue(27,sq,2,1,"div",21),ue(28,aq,2,1,"div",22),v(29,"button",23),ae("click",function(){return r.isAllShow=!r.isAllShow}),w(30),_()(),v(31,"div",24),ue(32,dq,21,7),ue(33,pq,2,0),_()()()()()),t&2){let i;b(15),K(r.settings.t("FEEDBACK_MODULE")),b(2),K(r.settings.t("COMMUNITY_SIGNALS")),b(2),K(r.settings.t("RETURN_TO_MAP")),b(4),K(r.settings.t("DEPLOY_REPORT")),b(),de((i=r.firebase.user$())?24:-1,i),b(3),de(r.isAllShow?-1:27),b(),de(r.isAllShow?28:-1),b(2),fe(" ",r.isAllShow?r.settings.t("TOGGLE_BACK"):r.settings.t("VIEW_FULL_ARCHIVE")," "),b(2),de(r.isAllShow?32:-1),b(),de(r.isAllShow?-1:33)}},dependencies:[Un,XO,YO,ey,GO,zO,vS,yS,pc],styles:[".floating-shape[_ngcontent-%COMP%]{position:absolute;opacity:.3;filter:blur(60px);z-index:-1}.shape-giant-1[_ngcontent-%COMP%]{top:10%;left:10%;width:400px;height:400px;background:radial-gradient(circle,#3b82f6,transparent);clip-path:url(#soft-triangle);animation:_ngcontent-%COMP%_floatGiant1 35s infinite alternate ease-in-out}.shape-giant-2[_ngcontent-%COMP%]{bottom:20%;right:15%;width:500px;height:500px;border-radius:50%;background:radial-gradient(circle,#ef4444,transparent);animation:_ngcontent-%COMP%_floatGiant2 36s infinite alternate-reverse ease-in-out}.shape-giant-3[_ngcontent-%COMP%]{top:40%;left:70%;width:300px;height:300px;background:radial-gradient(circle,#a855f7,transparent);clip-path:url(#soft-triangle);animation:_ngcontent-%COMP%_floatGiant3 45s infinite alternate ease-in-out;animation-delay:-10s}.shape-giant-4[_ngcontent-%COMP%]{bottom:10%;left:20%;width:350px;height:350px;border-radius:50%;background:radial-gradient(circle,#10b981,transparent);animation:_ngcontent-%COMP%_floatGiant2 38s infinite alternate ease-in-out;animation-delay:-5s}.shape-giant-5[_ngcontent-%COMP%]{bottom:5%;left:43%;width:340px;height:340px;clip-path:url(#soft-triangle);background:radial-gradient(circle,#ece80d,transparent);animation:_ngcontent-%COMP%_floatGiant2 41s infinite alternate ease-in-out;animation-delay:-3s;color:#0800ff}@keyframes _ngcontent-%COMP%_floatGiant1{0%{transform:translate(0) rotate(0) scale(1)}to{transform:translate(150px,80px) rotate(15deg) scale(1.1)}}@keyframes _ngcontent-%COMP%_floatGiant2{0%{transform:translate(0) scale(1)}to{transform:translate(-100px,-50px) scale(1.2)}}@keyframes _ngcontent-%COMP%_floatGiant3{0%{transform:translate(0) rotate(0) scale(1)}to{transform:translate(-80px,120px) rotate(-10deg) scale(.9)}}@keyframes _ngcontent-%COMP%_shimmer{0%{transform:translate(-100%)}to{transform:translate(100%)}}.roadmap-card[_ngcontent-%COMP%]{background-color:#2c325099;border:1px solid rgba(59,130,246,.1);padding:1.5rem;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;box-shadow:inset 0 0 20px #3b82f60d}.roadmap-card[_ngcontent-%COMP%]:hover{border-color:#3b82f699;background-color:#1e3a8a33;box-shadow:0 10px 40px #0009,inset 0 0 30px #3b82f61a;transform:translateY(-2px)}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.status-tag[_ngcontent-%COMP%]{font-size:8px;padding:.25rem .75rem;font-weight:900;text-transform:uppercase;letter-spacing:-.05em;border-width:1px}.status-planned[_ngcontent-%COMP%]{color:#fde047;border-color:#eab3084d;background-color:#eab3080d}.status-concept[_ngcontent-%COMP%]{color:#34d399;border-color:#10b9814d;background-color:#10b9810d}.status-research[_ngcontent-%COMP%]{color:#60a5fa;border-color:#3b82f64d;background-color:#3b82f60d}.hud-btn-alt[_ngcontent-%COMP%]{padding:.5rem 1.25rem;border:1px solid rgba(59,130,246,.4);font-size:11px;font-weight:900;text-transform:uppercase;letter-spacing:.2em;color:#fff;transition:all .2s;background-color:#3b82f61a;clip-path:polygon(10% 0,100% 0,90% 100%,0 100%);display:inline-flex;align-items:center}.hud-btn-alt[_ngcontent-%COMP%]:hover{background-color:#3b82f64d;border-color:#60a5fa;box-shadow:0 0 15px #3b82f64d}",".tactical-bg[_ngcontent-%COMP%]{background:radial-gradient(1200px 600px at 20% 20%,rgba(0,120,255,.06),transparent 60%),radial-gradient(800px 500px at 80% 80%,rgba(255,0,80,.05),transparent 60%),#0b1220}.tactical-frame[_ngcontent-%COMP%]{background:#0f192dd9;border:1px solid rgba(255,255,255,.12);box-shadow:0 0 40px #0078ff1f}.hud-header[_ngcontent-%COMP%]{background:linear-gradient(180deg,#ffffff0a,#fff0);border-bottom:1px solid rgba(255,255,255,.1)}.hud-title[_ngcontent-%COMP%]{font-size:14px;font-weight:700;letter-spacing:.2em;color:#7dd3fc}.hud-subtitle[_ngcontent-%COMP%]{font-size:10px;color:#fff6;letter-spacing:.2em}.hud-btn[_ngcontent-%COMP%]{padding:6px 14px;border:1px solid rgba(255,255,255,.2);font-size:11px;letter-spacing:.15em;color:#93c5fd;transition:.2s}.hud-btn[_ngcontent-%COMP%]:hover{background:#0078ff1f;border-color:#0078ff66}.hud-panel[_ngcontent-%COMP%]{background:#00000026}.panel-title[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.2em;font-weight:700;color:#7dd3fc;margin-bottom:16px}.panel-title.red[_ngcontent-%COMP%]{color:#f87171}.avatar-frame[_ngcontent-%COMP%]{padding:2px;border:1px solid rgba(0,120,255,.5);border-radius:6px}.label[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.2em;color:#ffffff80}.rating-cell[_ngcontent-%COMP%]{width:36px;height:36px;border:1px solid rgba(255,255,255,.15);background:#0003;color:#fff3;font-size:16px;transition:.15s}.rating-cell.active[_ngcontent-%COMP%]{color:#facc15;border-color:#facc1599;background:#facc1514}.hud-textarea[_ngcontent-%COMP%]{width:100%;background:#00000040;border:1px solid rgba(255,255,255,.15);padding:12px;font-size:13px;color:#fff;outline:none;transition:.2s}.hud-textarea[_ngcontent-%COMP%]:focus{border-color:#0078ff80}.hud-action-btn[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid rgba(0,120,255,.5);background:#0078ff1f;font-size:11px;letter-spacing:.2em;color:#7dd3fc;transition:.2s}.hud-action-btn[_ngcontent-%COMP%]:hover{background:#0078ff38}.hud-action-btn[_ngcontent-%COMP%]:disabled{opacity:.4}.signal-card[_ngcontent-%COMP%]{background:#00000040;border:1px solid rgba(255,255,255,.12);padding:14px;transition:.2s}.signal-card[_ngcontent-%COMP%]:hover{border-color:#0078ff66}.rating-view[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;color:#fff3}.rating-view[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{color:#facc15}.signal-text[_ngcontent-%COMP%]{font-size:13px;color:#ffffffbf}"]})};var iy=class n{constructor(e){this.settings=e}static \u0275fac=function(t){return new(t||n)(_e(In))};static \u0275cmp=fn({type:n,selectors:[["app-roadmap"]],decls:93,vars:13,consts:[[1,"min-h-screen","w-full","bg-[#0a0c10]","text-blue-100","font-sans","selection:bg-blue-600/30","relative","overflow-hidden","flex","flex-col","items-center","py-10"],[1,"fixed","inset-0","overflow-hidden","pointer-events-none","select-none","z-0"],[1,"floating-shape","shape-giant-1"],[1,"floating-shape","shape-giant-2"],[1,"floating-shape","shape-giant-3"],[1,"floating-shape","shape-giant-4"],[1,"floating-shape","shape-giant-5"],["width","0","height","0",1,"absolute","pointer-events-none"],["id","soft-triangle","clipPathUnits","objectBoundingBox"],["d","M0.5 0.05 Q0.5 0 0.56 0.12 L0.92 0.85 Q0.98 0.98 0.85 0.98 L0.15 0.98 Q0.02 0.98 0.08 0.85 L0.44 0.12 Q0.5 0 0.5 0.05"],[1,"fixed","inset-0","pointer-events-none","opacity-20","z-0","bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"],[1,"fixed","inset-0","pointer-events-none","z-0","bg-gradient-to-b","from-transparent","via-blue-900/5","to-black"],[1,"w-full","max-w-5xl","px-6","relative","z-10"],[1,"mb-10","flex","items-center","justify-between","border-b","border-blue-500/20","pb-6"],[1,"flex","flex-col"],[1,"flex","items-center","gap-3"],[1,"w-2","h-6","bg-blue-600","shadow-[0_0_15px_rgba(37,99,235,0.8)]"],[1,"text-4xl","font-black","tracking-tighter","uppercase","italic","text-white"],[1,"text-[10px]","uppercase","tracking-[0.5em]","text-blue-400/60","mt-2","ml-5","font-bold"],["routerLink","/",1,"hud-btn-alt","group"],[1,"mr-2","text-blue-400","group-hover:text-white","transition-colors"],[1,"grid","md:grid-cols-2","gap-8"],[1,"roadmap-card","group","border-emerald-500/30","bg-emerald-500/5","relative","overflow-hidden","opacity-45"],[1,"absolute","top-0","right-0","w-16","h-16","bg-emerald-500/10","blur-2xl","-mr-8","-mt-8"],[1,"card-header","relative","z-10"],[1,"text-[11px]","font-mono","text-emerald-200/50","italic"],[1,"px-2","py-0.5","rounded-full","text-[10px]","font-bold","uppercase","tracking-wider","bg-emerald-500/20","text-emerald-400","border","border-emerald-500/40"],[1,"flex","items-start","gap-4","mt-4","relative","z-10"],[1,"w-12","h-12","flex-shrink-0","bg-emerald-600/20","border","border-emerald-500/60","rotate-45","flex","items-center","justify-center","group-hover:rotate-180","transition-all","duration-700","shadow-[0_0_15px_rgba(16,185,129,0.2)]"],[1,"-rotate-45","group-hover:-rotate-180","transition-all","duration-700","text-xl"],[1,"text-lg","font-bold","text-emerald-50","leading-tight","mb-2","opacity-80","decoration-emerald-500/30","line-through","decoration-2"],[1,"text-sm","text-emerald-100/40","leading-relaxed","italic"],[1,"card-footer","mt-4","pt-4","border-t","border-emerald-500/10","flex","justify-between","items-center","relative","z-10"],[1,"text-[9px]","uppercase","tracking-widest","text-emerald-500/40","font-bold"],[1,"flex","gap-1"],[1,"w-3","h-1","bg-emerald-500","shadow-[0_0_5px_#10b981]"],[1,"roadmap-card","group"],[1,"card-header"],[1,"text-[11px]","font-mono","text-blue-200/50","italic"],[1,"status-tag","status-concept"],[1,"flex","items-start","gap-4","mt-4"],[1,"w-12","h-12","flex-shrink-0","bg-emerald-600/20","border","border-emerald-500/40","flex","items-center","justify-center","group-hover:scale-110","transition-transform"],[1,"text-lg","font-bold","text-white","leading-tight","mb-2"],[1,"text-sm","text-blue-100/60","leading-relaxed","italic"],[1,"card-footer","mt-4","pt-4","border-t","border-white/5","flex","justify-between","items-center"],[1,"text-[9px]","uppercase","tracking-widest","text-white/30"],[1,"w-3","h-1","bg-emerald-500"],[1,"w-3","h-1","bg-emerald-500/20"],[1,"roadmap-card","group","md:col-span-2"],[1,"status-tag","status-research"],[1,"flex","items-start","gap-6","mt-4"],[1,"w-16","h-16","flex-shrink-0","bg-blue-600/20","border-2","border-blue-500/40","rounded-sm","flex","items-center","justify-center","relative","overflow-hidden","group-hover:border-blue-400","transition-colors"],[1,"absolute","inset-0","bg-blue-500/10","animate-pulse"],[1,"text-2xl","relative","z-10"],[1,"text-xl","font-bold","text-white","leading-tight","mb-2"],[1,"text-sm","text-blue-100/60","leading-relaxed","italic","max-w-2xl"],[1,"mt-12","p-6","border","border-blue-500/30","bg-blue-500/5","relative"],[1,"absolute","-top-3","left-6","px-3","bg-[#0a0c10]","text-[10px]","font-black","text-blue-400","tracking-widest","uppercase"],[1,"text-sm","text-blue-100/80","italic","font-mono","leading-relaxed"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1),$(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),_(),he(),v(7,"svg",7)(8,"defs")(9,"clipPath",8),$(10,"path",9),_()()(),Ve(),$(11,"div",10)(12,"div",11),v(13,"div",12)(14,"div",13)(15,"div",14)(16,"div",15),$(17,"div",16),v(18,"h1",17),w(19),_()(),v(20,"p",18),w(21,"Future_Ops // Deployment_Schedule"),_()(),v(22,"a",19)(23,"span",20),w(24,"\xAB"),_(),w(25),_()(),v(26,"div",21)(27,"div",22),$(28,"div",23),v(29,"div",24)(30,"span",25),w(31,"REF: PROJECT_VOLUMETRIC"),_(),v(32,"span",26),w(33),_()(),v(34,"div",27)(35,"div",28)(36,"div",29),w(37),_()(),v(38,"div")(39,"h3",30),w(40),_(),v(41,"p",31),w(42),_()()(),v(43,"div",32)(44,"span",33),w(45,"System_Verified"),_(),v(46,"div",34),$(47,"div",35)(48,"div",35)(49,"div",35),_()()(),v(50,"div",36)(51,"div",37)(52,"span",38),w(53,"REF: RESOURCE_IRON"),_(),v(54,"span",39),w(55),_()(),v(56,"div",40)(57,"div",41)(58,"span"),w(59,"\u26D3\uFE0F"),_()(),v(60,"div")(61,"h3",42),w(62),_(),v(63,"p",43),w(64),_()()(),v(65,"div",44)(66,"span",45),w(67,"Priority_Beta"),_(),v(68,"div",34),$(69,"div",46)(70,"div",47)(71,"div",47),_()()(),v(72,"div",48)(73,"div",37)(74,"span",38),w(75,"REF: INFRA_SMITHY"),_(),v(76,"span",49),w(77),_()(),v(78,"div",50)(79,"div",51),$(80,"div",52),v(81,"span",53),w(82,"\u2692\uFE0F"),_()(),v(83,"div")(84,"h3",54),w(85),_(),v(86,"p",55),w(87),_()()()()(),v(88,"div",56)(89,"div",57),w(90,"Community_Intel"),_(),v(91,"p",58),w(92),_()()()()),t&2&&(b(19),fe(" ",r.settings.t("STRATEGIC_PLAN")," "),b(6),fe(" ",r.settings.currentLang()==="uk"?"\u041F\u041E\u0412\u0415\u0420\u041D\u0423\u0422\u0418\u0421\u042C \u0414\u041E \u041C\u0410\u041F\u0418":"RETURN TO MAP"," "),b(8),fe(" ",r.settings.currentLang()==="uk"?"\u0412\u0438\u043A\u043E\u043D\u0430\u043D\u043E":"Completed"," "),b(4),fe(" ",r.settings.currentLang()==="uk"?"\u2714\uFE0F":"\u2705"," "),b(3),fe(" ",r.settings.currentLang()==="uk"?"\u0415\u0432\u043E\u043B\u044E\u0446\u0456\u044F \u042E\u043D\u0456\u0442\u0456\u0432 (\u0412\u043E\u043B\u044E\u043C\u0435\u0442\u0440\u0438\u0447\u043D\u0435 \u041F\u0435\u0440\u0435\u043E\u0441\u043C\u0438\u0441\u043B\u0435\u043D\u043D\u044F)":"Unit Evolution (Volumetric Overhaul)"," "),b(2),fe(" ",r.settings.currentLang()==="uk"?"\u041F\u0435\u0440\u0435\u0445\u0456\u0434 \u0432\u0456\u0434 2D \u0434\u043E 3D-\u0441\u0442\u0438\u043B\u0456\u0437\u043E\u0432\u0430\u043D\u0438\u0445 \u0432\u043E\u043B\u044E\u043C\u0435\u0442\u0440\u0438\u0447\u043D\u0438\u0445 \u043C\u043E\u0434\u0435\u043B\u0435\u0439.":"Transitioning from 2D to 3D-styled volumetric tactical models."," "),b(13),K(r.settings.currentLang()==="uk"?"\u041A\u043E\u043D\u0446\u0435\u043F\u0442":"In Concept"),b(7),K(r.settings.currentLang()==="uk"?"\u0406\u043D\u0442\u0435\u0433\u0440\u0430\u0446\u0456\u044F \u0420\u0435\u0441\u0443\u0440\u0441\u0443 (\u0417\u0430\u043B\u0456\u0437\u043E)":"Resource Integration (Iron)"),b(2),fe(" ",r.settings.currentLang()==="uk"?"\u0412\u0432\u0435\u0434\u0435\u043D\u043D\u044F \u0432\u0442\u043E\u0440\u0438\u043D\u043D\u043E\u0433\u043E \u0440\u0435\u0441\u0443\u0440\u0441\u0443 \u0434\u043B\u044F \u043F\u043E\u043A\u0440\u0430\u0449\u0435\u043D\u044C \u043E\u0437\u0431\u0440\u043E\u0454\u043D\u043D\u044F.":"Introduction of iron as a secondary resource for weapon upgrades."," "),b(13),K(r.settings.currentLang()==="uk"?"\u0414\u043E\u0441\u043B\u0456\u0434\u0436\u0435\u043D\u043D\u044F":"Researching"),b(8),K(r.settings.currentLang()==="uk"?"\u0406\u043D\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043A\u0442\u0443\u0440\u0430 (\u041A\u0443\u0437\u043D\u044F)":"Infrastructure (The Smithy)"),b(2),fe(" ",r.settings.currentLang()==="uk"?"\u041F\u0435\u0440\u0448\u0430 \u0431\u0443\u0434\u0456\u0432\u043B\u044F. \u0426\u0435\u043D\u0442\u0440 \u0443\u0441\u0456\u0445 \u043F\u043E\u043A\u0440\u0430\u0449\u0435\u043D\u044C \u044E\u043D\u0456\u0442\u0456\u0432 \u043D\u0430 \u043E\u0441\u043D\u043E\u0432\u0456 \u0417\u0430\u043B\u0456\u0437\u0430.":"First constructible building. The Smithy will be the hub for all Iron-based enhancements."," "),b(5),fe(" ",r.settings.currentLang()==="uk"?"\u041E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u0432\u0432\u0456\u0434 \u041E\u043F\u0435\u0440\u0430\u0442\u043E\u0440\u0430... \u0414\u0456\u043B\u0456\u0442\u044C\u0441\u044F \u0456\u0434\u0435\u044F\u043C\u0438 \u0447\u0435\u0440\u0435\u0437 \u041C\u043E\u0434\u0443\u043B\u044C \u0417\u0432\u043E\u0440\u043E\u0442\u043D\u043E\u0433\u043E \u0417\u0432\u2019\u044F\u0437\u043A\u0443, \u0449\u043E\u0431 \u0432\u043F\u043B\u0438\u0432\u0430\u0442\u0438 \u043D\u0430 \u043F\u0440\u0456\u043E\u0440\u0438\u0442\u0435\u0442\u043D\u0456\u0441\u0442\u044C \u0446\u0438\u0445 \u043F\u0440\u043E\u0435\u043A\u0442\u0456\u0432.":"Waiting for Operator input... Share your ideas via the Feedback module."," "))},dependencies:[Un,pc],styles:[".floating-shape[_ngcontent-%COMP%]{position:absolute;opacity:.3;filter:blur(60px);z-index:-1}.shape-giant-1[_ngcontent-%COMP%]{top:10%;left:10%;width:400px;height:400px;background:radial-gradient(circle,#3b82f6,transparent);clip-path:url(#soft-triangle);animation:_ngcontent-%COMP%_floatGiant1 35s infinite alternate ease-in-out}.shape-giant-2[_ngcontent-%COMP%]{bottom:20%;right:15%;width:500px;height:500px;border-radius:50%;background:radial-gradient(circle,#ef4444,transparent);animation:_ngcontent-%COMP%_floatGiant2 36s infinite alternate-reverse ease-in-out}.shape-giant-3[_ngcontent-%COMP%]{top:40%;left:70%;width:300px;height:300px;background:radial-gradient(circle,#a855f7,transparent);clip-path:url(#soft-triangle);animation:_ngcontent-%COMP%_floatGiant3 45s infinite alternate ease-in-out;animation-delay:-10s}.shape-giant-4[_ngcontent-%COMP%]{bottom:10%;left:20%;width:350px;height:350px;border-radius:50%;background:radial-gradient(circle,#10b981,transparent);animation:_ngcontent-%COMP%_floatGiant2 38s infinite alternate ease-in-out;animation-delay:-5s}.shape-giant-5[_ngcontent-%COMP%]{bottom:5%;left:43%;width:340px;height:340px;clip-path:url(#soft-triangle);background:radial-gradient(circle,#ece80d,transparent);animation:_ngcontent-%COMP%_floatGiant2 41s infinite alternate ease-in-out;animation-delay:-3s;color:#0800ff}@keyframes _ngcontent-%COMP%_floatGiant1{0%{transform:translate(0) rotate(0) scale(1)}to{transform:translate(150px,80px) rotate(15deg) scale(1.1)}}@keyframes _ngcontent-%COMP%_floatGiant2{0%{transform:translate(0) scale(1)}to{transform:translate(-100px,-50px) scale(1.2)}}@keyframes _ngcontent-%COMP%_floatGiant3{0%{transform:translate(0) rotate(0) scale(1)}to{transform:translate(-80px,120px) rotate(-10deg) scale(.9)}}@keyframes _ngcontent-%COMP%_shimmer{0%{transform:translate(-100%)}to{transform:translate(100%)}}.roadmap-card[_ngcontent-%COMP%]{background-color:#2c325099;border:1px solid rgba(59,130,246,.1);padding:1.5rem;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;box-shadow:inset 0 0 20px #3b82f60d}.roadmap-card[_ngcontent-%COMP%]:hover{border-color:#3b82f699;background-color:#1e3a8a33;box-shadow:0 10px 40px #0009,inset 0 0 30px #3b82f61a;transform:translateY(-2px)}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.status-tag[_ngcontent-%COMP%]{font-size:8px;padding:.25rem .75rem;font-weight:900;text-transform:uppercase;letter-spacing:-.05em;border-width:1px}.status-planned[_ngcontent-%COMP%]{color:#fde047;border-color:#eab3084d;background-color:#eab3080d}.status-concept[_ngcontent-%COMP%]{color:#34d399;border-color:#10b9814d;background-color:#10b9810d}.status-research[_ngcontent-%COMP%]{color:#60a5fa;border-color:#3b82f64d;background-color:#3b82f60d}.hud-btn-alt[_ngcontent-%COMP%]{padding:.5rem 1.25rem;border:1px solid rgba(59,130,246,.4);font-size:11px;font-weight:900;text-transform:uppercase;letter-spacing:.2em;color:#fff;transition:all .2s;background-color:#3b82f61a;clip-path:polygon(10% 0,100% 0,90% 100%,0 100%);display:inline-flex;align-items:center}.hud-btn-alt[_ngcontent-%COMP%]:hover{background-color:#3b82f64d;border-color:#60a5fa;box-shadow:0 0 15px #3b82f64d}"]})};var t2=[{path:"",component:qm},{path:"feedback",component:ry},{path:"roadmap",component:iy}];var n2={providers:[tv(),QE(t2),bM(EM())]};var oy=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=fn({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[2,"display","none"]],template:function(t,r){t&1&&(v(0,"h1",0),w(1,"Turn-Based Strategy"),_(),$(2,"router-outlet"))},dependencies:[ju],encapsulation:2})};bE(oy,n2).catch(n=>console.error(n));
